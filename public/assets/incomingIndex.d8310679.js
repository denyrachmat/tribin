import{Q as A}from"./QTooltip.0bba7f25.js";import{t as p,o as le,C as _,D as M,E as a,F as e,M as ie,O as Q,J as u,$ as h,an as ae,U as L,Q as b,R as S,S as x,T as B,V as de,I as y,P as q,W as ue,X as re,Y,Z as ce,aY as Re}from"./index.62fa413b.js";import{a as oe,u as me,l as O,Q as pe,b as j,c as U,d as k,k as be,m as te}from"./QTable.2a3eb9d4.js";import{Q as ne,a as se}from"./QTd.785afa68.js";import{api_web as R}from"./axios.27994310.js";import{Q as Ce,a as ve}from"./QInnerLoading.33b78b96.js";import{Q as _e,a as Ve,C as fe}from"./ClosePopup.38740dc6.js";import{Q as De}from"./QBtnToggle.f0577f6c.js";import"./use-render-cache.3aae9b27.js";import"./date.9d9d1a49.js";import"./QBtnGroup.32af8075.js";const Se=u("div",{class:"text-h6"},"Create Incoming",-1),ye={style:{border:"1px black solid","border-radius":"10px"}},Ue=u("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[u("b",null,"Header")],-1),he={class:"row q-col-gutter-md"},Oe={class:"col-12 col-sm-6"},Pe={class:"col-12 col-sm-6"},we={class:"row items-center justify-end"},Ie={class:"row q-col-gutter-md q-pt-md"},ke={key:0,class:"col-12 col-sm-6"},Me={key:1,class:"col-12 col-sm-6"},Ne={key:2,class:"col-12 col-sm-6"},Fe={key:3,class:"col-12 col-sm-6"},He={class:"row q-col-gutter-md q-pt-md"},$e={class:"col"},Ae={class:"row q-py-md"},qe={class:"col"},Ee={style:{border:"1px black solid","border-radius":"10px",height:"35vh",overflow:"auto"}},Qe=u("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[u("b",null,"List Of Items")],-1),Le={class:"row q-pb-sm"},xe={class:"col text-right"},Be={__name:"incomingCreate",props:{dataHeader:Array},setup(E){const P=oe(),C=E,n=p({TRCV_RCVCD:"",TRCV_SUPCD:"",TRCV_ISSUDT:"",TRCV_REFFNO:"",TRCV_DOCNO:""}),f=p(1),m=p([]),t=p(!1),N=p([]),w=p([]),I=p([]),F=p([]),v=p([]);le(async()=>{await g(""),await H(""),await $(""),C.dataHeader&&Object.values(C.dataHeader).length>0&&(n.value={TRCV_RCVCD:C.dataHeader.TRCV_RCVCD,TRCV_SUPCD:C.dataHeader.MSUP_SUPCD,TRCV_ISSUDT:C.dataHeader.TRCV_ISSUDT,TRCV_REFFNO:C.dataHeader.TRCV_REFFNO,TRCV_DOCNO:C.dataHeader.TRCV_DOCNO},f.value=C.dataHeader.RCV_STATE,C.dataHeader.det.map(s=>{m.value.push({item_code:s.item_code,quantity:s.quantity,unit_price:s.unit_price})}))});const T=()=>{n.value={TRCV_RCVCD:"",TRCV_SUPCD:"",TRCV_ISSUDT:"",TRCV_REFFNO:"",TRCV_DOCNO:""},m.value=[]},r=(s,l,o,V)=>{l(async()=>{V==="supp"&&await H(s),V==="cust"&&await $(s),V==="item"&&await g(s),V==="po"&&await J(s),V==="inv"&&await G(s)})},g=async s=>{t.value=!0,await R.post("item/searchAPI",{searchValue:s,isITMCD:1}).then(l=>{t.value=!1,F.value=l.data.data}).catch(()=>{t.value=!1})},H=async(s,l="MSUP_SUPNM")=>{t.value=!0,await R.post("supplier/searchAPI",{searchValue:s,searchCol:l}).then(o=>{t.value=!1,N.value=o.data.data}).catch(()=>{t.value=!1})},$=async(s,l="MCUS_CUSNM")=>{t.value=!0,await R.post("customer/searchAPI",{searchValue:s,searchCol:l}).then(o=>{t.value=!1,w.value=o.data.data}).catch(()=>{t.value=!1})},J=async(s,l="TPCHORD_PCHCD")=>{t.value=!0,await R.post("purchase-order/searchApprovedPO",{searchValue:s,searchCol:l}).then(o=>{t.value=!1,I.value=o.data.data}).catch(()=>{t.value=!1})},K=s=>{P.dialog({title:"Confirmation",message:`Do you want to delete this lines no ${s+1} ?`,cancel:!0,persistent:!0}).onOk(async()=>{m.value.splice(s,1)})},z=()=>{m.value.push({item_code:"",quantity:"",unit_price:""})},G=async(s,l="TDLVORD_DLVCD")=>{t.value=!0,await R.post("invoices/search",{searchBy:l,searchValue:s}).then(o=>{t.value=!1,v.value=o.data.data}).catch(o=>{t.value=!1})},W=s=>{let l=I.value.filter(o=>o.TPCHORD_PCHCD==s);m.value=[],l.length>0&&(n.value.TRCV_SUPCD=l[0].TPCHORD_SUPCD,l[0].det.map(o=>{m.value.push({item_code:o.TPCHORDDETA_ITMCD,quantity:o.TPCHORDDETA_ITMQT,unit_price:o.TPCHORDDETA_ITMPRC_PER})}))},X=s=>{let l=v.value.filter(o=>o.TDLVORD_DLVCD==s);m.value=[],l.length>0&&(n.value.TRCV_SUPCD=l[0].TDLVORD_CUSCD,l[0].dlvacc.map(o=>{m.value.push({item_code:o.TDLVACCESSORY_ITMCD,quantity:o.TDLVACCESSORY_ITMQT,unit_price:0})}),l[0].dlvdet.map(o=>{m.value.push({item_code:o.TDLVORDDETA_ITMCD,quantity:o.TDLVORDDETA_ITMQT,unit_price:o.TDLVORDDETA_PRC})}))},Z=()=>{P.dialog({title:"Confirmation",message:"Are you sure want to save this Incoming ?",cancel:!0,persistent:!0}).onOk(async()=>{t.value=!0,await R.post("receive/saveAPI",{...n.value,det:m.value}).then(s=>{t.value=!1,P.notify({color:"green",message:`${s.data.msg}`}),d()}).catch(()=>{t.value=!1})})},{dialogRef:ee,onDialogHide:c,onDialogOK:d,onDialogCancel:i}=me();return(s,l)=>(_(),M(ce,{ref_key:"dialogRef",ref:ee,onHide:Y(c),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:a(()=>[e(ie,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:a(()=>[e(Q,null,{default:a(()=>[Se]),_:1}),e(Q,{class:"q-pa-sm"},{default:a(()=>[u("fieldset",ye,[Ue,e(Ce,{showing:t.value,dark:""},{default:a(()=>[e(ve,{size:"50px",color:"primary"})]),_:1},8,["showing"]),u("div",he,[u("div",Oe,[e(h,{label:"Code",readonly:"",dense:"",filled:"",modelValue:n.value.TRCV_RCVCD,"onUpdate:modelValue":l[0]||(l[0]=o=>n.value.TRCV_RCVCD=o)},null,8,["modelValue"])]),u("div",Pe,[e(h,{filled:"",modelValue:n.value.TRCV_ISSUDT,"onUpdate:modelValue":l[2]||(l[2]=o=>n.value.TRCV_ISSUDT=o),dense:"",label:"Receive Date"},{append:a(()=>[e(ae,{name:"event",class:"cursor-pointer"},{default:a(()=>[e(_e,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ve,{modelValue:n.value.TRCV_ISSUDT,"onUpdate:modelValue":l[1]||(l[1]=o=>n.value.TRCV_ISSUDT=o),mask:"YYYY-MM-DD"},{default:a(()=>[u("div",we,[L(e(b,{label:"Close",color:"primary",flat:""},null,512),[[fe]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),u("div",Ie,[f.value==1?(_(),S("div",ke,[e(O,{dense:"",filled:"",label:"Supplier Name",modelValue:n.value.TRCV_SUPCD,"onUpdate:modelValue":l[3]||(l[3]=o=>n.value.TRCV_SUPCD=o),"use-input":"","input-debounce":"500",options:N.value,onFilter:l[4]||(l[4]=(o,V,D)=>r(o,V,D,"supp")),behavior:"dialog","option-label":"MSUP_SUPNM","option-value":"MSUP_SUPCD","emit-value":"","map-options":"",loading:t.value,disable:n.value.TRCV_RCVCD!==""||f.value==1},null,8,["modelValue","options","loading","disable"])])):(_(),S("div",Me,[e(O,{dense:"",filled:"",label:"Customer Name",modelValue:n.value.TRCV_SUPCD,"onUpdate:modelValue":l[5]||(l[5]=o=>n.value.TRCV_SUPCD=o),"use-input":"","input-debounce":"500",options:w.value,onFilter:l[6]||(l[6]=(o,V,D)=>r(o,V,D,"cust")),behavior:"dialog","option-label":"MCUS_CUSNM","option-value":"MCUS_CUSCD","emit-value":"","map-options":"",loading:t.value,disable:n.value.TRCV_RCVCD!==""||f.value==1},null,8,["modelValue","options","loading","disable"])])),f.value==1?(_(),S("div",Ne,[e(O,{dense:"",filled:"",label:"PO Number",modelValue:n.value.TRCV_REFFNO,"onUpdate:modelValue":[l[7]||(l[7]=o=>n.value.TRCV_REFFNO=o),l[9]||(l[9]=o=>W(o))],"use-input":"","input-debounce":"500",options:I.value,onFilter:l[8]||(l[8]=(o,V,D)=>r(o,V,D,"po")),behavior:"dialog","option-label":"PO_CUSTDESC","option-value":"TPCHORD_PCHCD","emit-value":"","map-options":"",loading:t.value,disable:n.value.TRCV_RCVCD!==""},null,8,["modelValue","options","loading","disable"])])):(_(),S("div",Fe,[e(O,{dense:"",filled:"",label:"JAT Invoice No",modelValue:n.value.TRCV_REFFNO,"onUpdate:modelValue":[l[10]||(l[10]=o=>n.value.TRCV_REFFNO=o),l[12]||(l[12]=o=>X(o))],"use-input":"","input-debounce":"500",options:v.value,onFilter:l[11]||(l[11]=(o,V,D)=>r(o,V,D,"inv")),behavior:"dialog","option-label":"LABEL","option-value":"TDLVORD_DLVCD","emit-value":"","map-options":"",loading:t.value,disable:n.value.TRCV_RCVCD!==""},null,8,["modelValue","options","loading","disable"])]))]),u("div",He,[u("div",$e,[e(h,{label:"Doc Supplier No",dense:"",filled:"",modelValue:n.value.TRCV_DOCNO,"onUpdate:modelValue":l[13]||(l[13]=o=>n.value.TRCV_DOCNO=o)},null,8,["modelValue"])])])]),u("div",Ae,[u("div",qe,[e(De,{modelValue:f.value,"onUpdate:modelValue":[l[14]||(l[14]=o=>f.value=o),l[15]||(l[15]=o=>T())],spread:"","no-caps":"","toggle-color":"purple",color:"white","text-color":"black",options:[{label:"From PO",value:1},{label:"Return",value:2}],disable:n.value.TRCV_RCVCD!==""},null,8,["modelValue","disable"])])]),u("fieldset",Ee,[Qe,u("div",Le,[u("div",xe,[e(b,{flat:"",icon:"add",color:"blue",label:"Add Lines",onClick:z,loading:t.value},null,8,["loading"])])]),e(pe,{bordered:"",dense:""},{default:a(()=>[m.value.length>0?(_(!0),S(x,{key:0},B(m.value,(o,V)=>(_(),M(j,{key:V,class:"q-my-sm",dense:"",loading:t.value},{default:a(()=>[e(U,{avatar:""},{default:a(()=>[e(de,{"text-color":"blue"},{default:a(()=>[y(q(V+1),1)]),_:2},1024)]),_:2},1024),e(U,null,{default:a(()=>[e(k,null,{default:a(()=>[e(O,{dense:"",filled:"",label:"Item Code",modelValue:o.item_code,"onUpdate:modelValue":D=>o.item_code=D,"use-input":"","input-debounce":"500",options:F.value,onFilter:l[16]||(l[16]=(D,Te,ge)=>r(D,Te,ge,"item")),behavior:"dialog","option-label":"MITM_ITMNMREAL","option-value":"MITM_ITMNM","emit-value":"","map-options":"",loading:t.value,disable:n.value.TRCV_RCVCD!==""},null,8,["modelValue","onUpdate:modelValue","options","loading","disable"])]),_:2},1024)]),_:2},1024),e(U,null,{default:a(()=>[e(k,null,{default:a(()=>[e(h,{dense:"",label:"Qty",filled:"",modelValue:o.quantity,"onUpdate:modelValue":D=>o.quantity=D},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(U,null,{default:a(()=>[e(k,null,{default:a(()=>[e(h,{dense:"",label:"Price",filled:"",modelValue:o.unit_price,"onUpdate:modelValue":D=>o.unit_price=D},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(U,{side:""},{default:a(()=>[e(b,{icon:"delete",color:"red",flat:"",onClick:D=>K(V)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["loading"]))),128)):L((_(),M(j,{key:1,class:"q-my-sm",clickable:""},{default:a(()=>[e(U,null,{default:a(()=>[e(k,null,{default:a(()=>[y(" Choose sales order first to access item list ")]),_:1})]),_:1})]),_:1})),[[ue]])]),_:1})])]),_:1}),e(re,{align:"right"},{default:a(()=>[e(b,{label:"OK",color:"primary",onClick:l[17]||(l[17]=o=>Z()),disable:s.stateSubmit,loading:t.value},null,8,["disable","loading"]),e(b,{flat:"",label:"Cancel",color:"red",onClick:Y(i)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},Ye=u("div",{class:"text-h6"},"Confirm Incoming",-1),je={style:{border:"1px black solid","border-radius":"10px"}},Je=u("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[u("b",null,"Header")],-1),Ke={class:"row q-col-gutter-md"},ze={class:"col-12 col-sm-6"},Ge={class:"col-12 col-sm-6"},We={class:"row items-center justify-end"},Xe={class:"row q-col-gutter-md q-pt-md"},Ze={key:0,class:"col-12 col-sm-6"},el={key:1,class:"col-12 col-sm-6"},ll={key:2,class:"col-12 col-sm-6"},al={key:3,class:"col-12 col-sm-6"},ol={class:"row q-col-gutter-md q-pt-md"},tl={class:"col"},nl={class:"row q-py-md"},sl={class:"col"},il={style:{border:"1px black solid","border-radius":"10px",height:"35vh",overflow:"auto"}},dl=u("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[u("b",null,"List Of Items")],-1),ul={__name:"incomingConfirmDet",props:{dataHeader:Array},setup(E){const P=oe(),C=E,n=p({TRCV_RCVCD:"",TRCV_SUPCD:"",TRCV_ISSUDT:"",TRCV_REFFNO:"",TRCV_DOCNO:""}),f=p(1),m=p([]),t=p(!1),N=p([]),w=p([]),I=p([]),F=p([]),v=p([]);le(async()=>{await g(""),await H(""),await $(""),C.dataHeader&&Object.values(C.dataHeader).length>0&&(n.value={TRCV_RCVCD:C.dataHeader.TRCV_RCVCD,TRCV_SUPCD:C.dataHeader.MSUP_SUPCD,TRCV_ISSUDT:C.dataHeader.TRCV_ISSUDT,TRCV_REFFNO:C.dataHeader.TRCV_REFFNO,TRCV_DOCNO:C.dataHeader.TRCV_DOCNO},f.value=C.dataHeader.RCV_STATE,C.dataHeader.det.map(c=>{m.value.push({item_code:c.item_code,quantity:c.quantity,unit_price:c.unit_price})}))});const T=()=>{n.value={TRCV_RCVCD:"",TRCV_SUPCD:"",TRCV_ISSUDT:"",TRCV_REFFNO:"",TRCV_DOCNO:""},m.value=[]},r=(c,d,i,s)=>{d(async()=>{s==="supp"&&await H(c),s==="cust"&&await $(c),s==="item"&&await g(c),s==="po"&&await J(c),s==="inv"&&await K(c)})},g=async c=>{t.value=!0,await R.post("item/searchAPI",{searchValue:c,isITMCD:1}).then(d=>{t.value=!1,F.value=d.data.data}).catch(()=>{t.value=!1})},H=async(c,d="MSUP_SUPNM")=>{t.value=!0,await R.post("supplier/searchAPI",{searchValue:c,searchCol:d}).then(i=>{t.value=!1,N.value=i.data.data}).catch(()=>{t.value=!1})},$=async(c,d="MCUS_CUSNM")=>{t.value=!0,await R.post("customer/searchAPI",{searchValue:c,searchCol:d}).then(i=>{t.value=!1,w.value=i.data.data}).catch(()=>{t.value=!1})},J=async(c,d="TPCHORD_PCHCD")=>{t.value=!0,await R.post("purchase-order/searchApprovedPO",{searchValue:c,searchCol:d}).then(i=>{t.value=!1,I.value=i.data.data}).catch(()=>{t.value=!1})},K=async(c,d="TDLVORD_DLVCD")=>{t.value=!0,await R.post("invoices/search",{searchBy:d,searchValue:c}).then(i=>{t.value=!1,v.value=i.data.data}).catch(i=>{t.value=!1})},z=c=>{P.dialog({title:"Confirmation",message:"Are you sure want to confirm this item ?",cancel:!0,persistent:!0}).onOk(async()=>{m.value[c].IS_CONFIRMED=1})},G=()=>{P.dialog({title:"Confirmation",message:"Are you sure want to confirm all this item ?",cancel:!0,persistent:!0}).onOk(async()=>{t.value=!0,await R.post("receive/confirmIncoming",{...n.value,det:m.value}).then(c=>{t.value=!1,P.notify({color:"green",message:`${c.data.msg}`}),Z()}).catch(()=>{t.value=!1})})},{dialogRef:W,onDialogHide:X,onDialogOK:Z,onDialogCancel:ee}=me();return(c,d)=>(_(),M(ce,{ref_key:"dialogRef",ref:W,onHide:Y(X),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:a(()=>[e(ie,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:a(()=>[e(Q,null,{default:a(()=>[Ye]),_:1}),e(Q,{class:"q-pa-sm"},{default:a(()=>[u("fieldset",je,[Je,e(Ce,{showing:t.value,dark:""},{default:a(()=>[e(ve,{size:"50px",color:"primary"})]),_:1},8,["showing"]),u("div",Ke,[u("div",ze,[e(h,{label:"Code",readonly:"",dense:"",filled:"",modelValue:n.value.TRCV_RCVCD,"onUpdate:modelValue":d[0]||(d[0]=i=>n.value.TRCV_RCVCD=i)},null,8,["modelValue"])]),u("div",Ge,[e(h,{filled:"",modelValue:n.value.TRCV_ISSUDT,"onUpdate:modelValue":d[2]||(d[2]=i=>n.value.TRCV_ISSUDT=i),dense:"",label:"Receive Date",readonly:""},{append:a(()=>[e(ae,{name:"event",class:"cursor-pointer"},{default:a(()=>[e(_e,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(Ve,{modelValue:n.value.TRCV_ISSUDT,"onUpdate:modelValue":d[1]||(d[1]=i=>n.value.TRCV_ISSUDT=i),mask:"YYYY-MM-DD"},{default:a(()=>[u("div",We,[L(e(b,{label:"Close",color:"primary",flat:""},null,512),[[fe]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),u("div",Xe,[f.value==1?(_(),S("div",Ze,[e(O,{dense:"",filled:"",label:"Supplier Name",modelValue:n.value.TRCV_SUPCD,"onUpdate:modelValue":d[3]||(d[3]=i=>n.value.TRCV_SUPCD=i),"use-input":"","input-debounce":"500",options:N.value,onFilter:d[4]||(d[4]=(i,s,l)=>r(i,s,l,"supp")),behavior:"dialog","option-label":"MSUP_SUPNM","option-value":"MSUP_SUPCD","emit-value":"","map-options":"",loading:t.value,readonly:""},null,8,["modelValue","options","loading"])])):(_(),S("div",el,[e(O,{dense:"",filled:"",label:"Customer Name",modelValue:n.value.TRCV_SUPCD,"onUpdate:modelValue":d[5]||(d[5]=i=>n.value.TRCV_SUPCD=i),"use-input":"","input-debounce":"500",options:w.value,onFilter:d[6]||(d[6]=(i,s,l)=>r(i,s,l,"cust")),behavior:"dialog","option-label":"MCUS_CUSNM","option-value":"MCUS_CUSCD","emit-value":"","map-options":"",loading:t.value,readonly:""},null,8,["modelValue","options","loading"])])),f.value==1?(_(),S("div",ll,[e(O,{dense:"",filled:"",label:"PO Number",modelValue:n.value.TRCV_REFFNO,"onUpdate:modelValue":d[7]||(d[7]=i=>n.value.TRCV_REFFNO=i),"use-input":"","input-debounce":"500",options:I.value,onFilter:d[8]||(d[8]=(i,s,l)=>r(i,s,l,"po")),behavior:"dialog","option-label":"PO_CUSTDESC","option-value":"TPCHORD_PCHCD","emit-value":"","map-options":"",loading:t.value,readonly:""},null,8,["modelValue","options","loading"])])):(_(),S("div",al,[e(O,{dense:"",filled:"",label:"JAT Invoice No",modelValue:n.value.TRCV_REFFNO,"onUpdate:modelValue":d[9]||(d[9]=i=>n.value.TRCV_REFFNO=i),"use-input":"","input-debounce":"500",options:v.value,onFilter:d[10]||(d[10]=(i,s,l)=>r(i,s,l,"inv")),behavior:"dialog","option-label":"LABEL","option-value":"TDLVORD_DLVCD","emit-value":"","map-options":"",loading:t.value,readonly:""},null,8,["modelValue","options","loading"])]))]),u("div",ol,[u("div",tl,[e(h,{label:"Doc Supplier No",dense:"",filled:"",modelValue:n.value.TRCV_DOCNO,"onUpdate:modelValue":d[11]||(d[11]=i=>n.value.TRCV_DOCNO=i),readonly:""},null,8,["modelValue"])])])]),u("div",nl,[u("div",sl,[e(De,{modelValue:f.value,"onUpdate:modelValue":[d[12]||(d[12]=i=>f.value=i),d[13]||(d[13]=i=>T())],spread:"","no-caps":"","toggle-color":"purple",color:"white","text-color":"black",options:[{label:"From PO",value:1},{label:"Return",value:2}],readonly:""},null,8,["modelValue"])])]),u("fieldset",il,[dl,e(pe,{bordered:"",dense:""},{default:a(()=>[m.value.length>0?(_(!0),S(x,{key:0},B(m.value,(i,s)=>(_(),M(j,{key:s,class:"q-my-sm",dense:"",loading:t.value},{default:a(()=>[e(U,{avatar:""},{default:a(()=>[e(de,{"text-color":"blue"},{default:a(()=>[y(q(s+1),1)]),_:2},1024)]),_:2},1024),e(U,null,{default:a(()=>[e(k,null,{default:a(()=>[e(O,{dense:"",filled:"",label:"Item Code",modelValue:i.item_code,"onUpdate:modelValue":l=>i.item_code=l,"use-input":"","input-debounce":"500",options:F.value,onFilter:d[14]||(d[14]=(l,o,V)=>r(l,o,V,"item")),behavior:"dialog","option-label":"MITM_ITMNMREAL","option-value":"MITM_ITMNM","emit-value":"","map-options":"",loading:t.value,readonly:""},null,8,["modelValue","onUpdate:modelValue","options","loading"])]),_:2},1024)]),_:2},1024),e(U,null,{default:a(()=>[e(k,null,{default:a(()=>[e(h,{dense:"",label:"Qty",filled:"",modelValue:i.quantity,"onUpdate:modelValue":l=>i.quantity=l,readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(U,null,{default:a(()=>[e(k,null,{default:a(()=>[e(h,{dense:"",label:"Price",filled:"",modelValue:i.unit_price,"onUpdate:modelValue":l=>i.unit_price=l,readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(U,{side:""},{default:a(()=>[e(b,{icon:"check",color:"indigo",flat:"",onClick:l=>z(s)},{default:a(()=>[e(A,null,{default:a(()=>[y(q(i.IS_CONFIRMED==1?"Already confirmed":"Not confirmed yet, click to confirm."),1)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["loading"]))),128)):L((_(),M(j,{key:1,class:"q-my-sm",clickable:""},{default:a(()=>[e(U,null,{default:a(()=>[e(k,null,{default:a(()=>[y(" Choose incoming first to access item list ")]),_:1})]),_:1})]),_:1})),[[ue]])]),_:1})])]),_:1}),e(re,{align:"right"},{default:a(()=>[e(b,{label:"Confirm All",color:"primary",onClick:d[15]||(d[15]=i=>G()),disable:c.stateSubmit,loading:t.value},null,8,["disable","loading"]),e(b,{flat:"",label:"Cancel",color:"red",onClick:Y(ee)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},rl={class:"q-pa-md"},cl={class:"row q-pb-md"},ml=u("div",{class:"col"},[u("span",{class:"text-h4"},"Incoming")],-1),pl={class:"col text-right"},Cl={class:"row q-pt-md"},vl={class:"col"},hl={__name:"incomingIndex",setup(E){const P=oe(),C=p([]),n=p([{name:"TRCV_RCVCD",label:"Receive ID",field:"TRCV_RCVCD",sortable:!0,align:"left"},{name:"MSUP_SUPNM",label:"Supplier Name",field:"MSUP_SUPNM",sortable:!0,align:"left"},{name:"TOT_RCV",label:"Total Qty",field:"TOT_RCV",sortable:!0,align:"left",format:v=>`${v.toLocaleString()}`},{name:"MSUP_CURCD",label:"Currency",field:"MSUP_CURCD",sortable:!0,align:"left"},{name:"TOT_AMT",label:"Total Amount",field:"TOT_AMT",sortable:!0,align:"left",format:v=>`${v.toLocaleString()}`}]),f=p(!1),m=p(""),t=p("");le(()=>{N()});const N=async()=>{f.value=!0,await R.post("receive/searchAPI",{searchBy:m.value,searchValue:t.value}).then(v=>{f.value=!1,C.value=v.data.data}).catch(v=>{f.value=!1})},w=(v=[])=>{P.dialog({component:Be,componentProps:{dataHeader:v}}).onOk(async T=>{getOutgoingData()})},I=(v=[])=>{P.dialog({component:ul,componentProps:{dataHeader:v}}).onOk(async T=>{getOutgoingData()})},F=v=>{};return(v,T)=>(_(),S("div",rl,[u("div",cl,[ml,u("div",pl,[e(b,{icon:"add",color:"blue",onClick:T[0]||(T[0]=r=>w())},{default:a(()=>[e(A,null,{default:a(()=>[y("Create New Delivery")]),_:1})]),_:1})])]),e(Re),u("div",Cl,[u("div",vl,[e(be,{title:"Outgoing List",rows:C.value,columns:n.value,"row-key":"TDLVORD_DLVCD",loading:f.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":a(()=>[e(O,{outlined:"",modelValue:m.value,"onUpdate:modelValue":T[1]||(T[1]=r=>m.value=r),options:v.columns,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),e(h,{borderless:"",dense:"",modelValue:t.value,"onUpdate:modelValue":[T[2]||(T[2]=r=>t.value=r),T[3]||(T[3]=r=>v.getOutgoingData())],placeholder:"Search",outlined:"",debounce:"1000"},{append:a(()=>[e(ae,{name:"search"})]),_:1},8,["modelValue"])]),header:a(r=>[e(ne,{props:r},{default:a(()=>[e(te,{"auto-width":""},{default:a(()=>[y("Action")]),_:1}),(_(!0),S(x,null,B(r.cols,g=>(_(),M(te,{key:g.name,props:r},{default:a(()=>[y(q(g.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(r=>[e(ne,{props:r},{default:a(()=>[e(se,{"auto-width":""},{default:a(()=>[e(b,{flat:"",color:"orange",icon:"edit",onClick:g=>w(r.row),dense:"",disable:r.row.TRCV_SUBMITTED_AT},{default:a(()=>[e(A,null,{default:a(()=>[y("Edit Data")]),_:1})]),_:2},1032,["onClick","disable"]),e(b,{flat:"",color:"red",icon:"delete",onClick:g=>F(r.row.id),dense:"",disable:r.row.TRCV_SUBMITTED_AT},{default:a(()=>[e(A,null,{default:a(()=>[y("Delete Data")]),_:1})]),_:2},1032,["onClick","disable"]),e(b,{flat:"",color:"indigo",icon:"check",onClick:g=>I(r.row),dense:""},{default:a(()=>[e(A,null,{default:a(()=>[y("Confirm Data")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024),(_(!0),S(x,null,B(r.cols,g=>(_(),M(se,{key:g.name,props:r},{default:a(()=>[y(q(g.value),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{hl as default};
