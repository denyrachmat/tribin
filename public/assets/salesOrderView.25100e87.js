import{Q as C}from"./QTooltip.589a85ad.js";import{s as r,B as v,C as V,D as l,E as e,L as B,M as w,I as t,Z as S,am as U,T as h,Q as f,X as H,Y as F,o as j,P as b,aX as X,H as m,R as P,S as k,O as g}from"./index.335ad5f5.js";import{a as N,u as K,l as I,k as Z,m as y}from"./QTable.7361235a.js";import{Q as q,a as M}from"./QTd.e867b550.js";import{api_web as $}from"./axios.bb649623.js";import{Q as A,a as R,C as Y}from"./ClosePopup.b024c94e.js";import"./use-cache.b0833c75.js";import"./date.c25ee0bb.js";const z=t("div",{class:"text-h6"},"RO Maintenance",-1),G={style:{border:"1px black solid","border-radius":"10px"}},J=t("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[t("b",null,"Header")],-1),W={class:"row"},ee={class:"col"},le={class:"col q-pl-md"},ae={class:"row items-center justify-end"},oe={class:"col q-pl-md"},te={class:"row items-center justify-end"},se={class:"row"},ne={class:"col"},ie={class:"col"},de={__name:"salesOrderCreate",setup(E){N();const n=r({TSLO_SLOCD:"",TSLO_ISSUDT:"",TSLO_PLAN_DLVDT:"",TSLO_QUOCD:"",TSLO_POCD:""}),D=r(""),p=r(""),O=r([]),d=r(!1),c=(i,o,s,L)=>{o(async()=>{L==="quotation"&&await T()})},T=async()=>{d.value=!0,await $.post("quotation/search",{searchBy:D.value,searchValue:p.value}).then(i=>{d.value=!1,O.value=i.data.data}).catch(i=>{d.value=!1})},{dialogRef:Q,onDialogHide:u,onDialogOK:_,onDialogCancel:a}=K();return(i,o)=>(v(),V(F,{ref_key:"dialogRef",ref:Q,onHide:H(u),"transition-show":"slide-up","transition-hide":"slide-down","full-width":""},{default:l(()=>[e(B,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:l(()=>[e(w,null,{default:l(()=>[z]),_:1}),e(w,{class:"q-pa-sm"},{default:l(()=>[t("fieldset",G,[J,t("div",W,[t("div",ee,[e(S,{label:"RO Code",dense:"",filled:"",modelValue:n.value.TSLO_SLOCD,"onUpdate:modelValue":o[0]||(o[0]=s=>n.value.TSLO_SLOCD=s),disable:"",loading:d.value},null,8,["modelValue","loading"])]),t("div",le,[e(S,{filled:"",modelValue:n.value.TSLO_ISSUDT,"onUpdate:modelValue":o[2]||(o[2]=s=>n.value.TSLO_ISSUDT=s),dense:"",label:"Issue Date",loading:d.value,onClick:o[3]||(o[3]=s=>i.quotationIssueDate.qDateProxy.show()),mask:"####-##-##","fill-mask":"",hint:"Mask: YYYY-MM-DD"},{append:l(()=>[e(U,{name:"event",class:"cursor-pointer"},{default:l(()=>[e(A,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(R,{modelValue:n.value.TSLO_ISSUDT,"onUpdate:modelValue":o[1]||(o[1]=s=>n.value.TSLO_ISSUDT=s),mask:"YYYY-MM-DD"},{default:l(()=>[t("div",ae,[h(e(f,{label:"Close",color:"primary",flat:""},null,512),[[Y]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","loading"])]),t("div",oe,[e(S,{filled:"",modelValue:n.value.TSLO_PLAN_DLVDT,"onUpdate:modelValue":o[5]||(o[5]=s=>n.value.TSLO_PLAN_DLVDT=s),dense:"",label:"Delivery Date",loading:d.value,onClick:o[6]||(o[6]=s=>i.quotationIssueDate.qDateProxy.show()),mask:"####-##-##","fill-mask":"",hint:"Mask: YYYY-MM-DD"},{append:l(()=>[e(U,{name:"event",class:"cursor-pointer"},{default:l(()=>[e(A,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(R,{modelValue:n.value.TSLO_PLAN_DLVDT,"onUpdate:modelValue":o[4]||(o[4]=s=>n.value.TSLO_PLAN_DLVDT=s),mask:"YYYY-MM-DD"},{default:l(()=>[t("div",te,[h(e(f,{label:"Close",color:"primary",flat:""},null,512),[[Y]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","loading"])])]),t("div",se,[t("div",ne,[e(I,{dense:"",filled:"",label:"Sales Quotation Code",modelValue:n.value.TSLO_QUOCD,"onUpdate:modelValue":o[7]||(o[7]=s=>n.value.TSLO_QUOCD=s),"use-input":"","input-debounce":"500",options:O.value,onFilter:o[8]||(o[8]=(s,L,x)=>c(s,L,x,"quotation")),behavior:"dialog","option-label":"DESCSEL","option-value":"TQUO_QUOCD","emit-value":"","map-options":"",loading:d.value},null,8,["modelValue","options","loading"])]),t("div",ie,[e(S,{label:"PO Number",dense:"",filled:"",modelValue:n.value.TSLO_POCD,"onUpdate:modelValue":o[9]||(o[9]=s=>n.value.TSLO_POCD=s),loading:d.value},null,8,["modelValue","loading"])])])])]),_:1})]),_:1})]),_:1},8,["onHide"]))}};const ue={class:"q-pa-md"},re={class:"row q-pb-md"},_e=t("div",{class:"col"},[t("span",{class:"text-h4"},"Sales Order / Receive Order")],-1),me={class:"col text-right"},ce={class:"row q-pt-md"},ve={class:"col"},Qe={__name:"salesOrderView",setup(E){const n=N(),D=r("TQUO_QUOCD"),p=r(""),O=r([]),d=r([{name:"TSLO_SLOCD",label:"RO. Code",field:"TSLO_SLOCD",sortable:!0,align:"left"},{name:"MCUS_CUSNM",label:"Customer Name",field:"MCUS_CUSNM",sortable:!0,align:"left"},{name:"TSLO_ADDRESS_NAME",label:"Customer Addr.",field:"TSLO_ADDRESS_NAME",sortable:!0,align:"left"},{name:"TSLO_CUSCD",label:"Customer Code",field:"TSLO_CUSCD",sortable:!0,align:"left"},{name:"TSLO_ISSUDT",label:"Issue Date",field:"TSLO_ISSUDT",sortable:!0,align:"left"},{name:"TSLO_QUOCD",label:"Quot. Code",field:"TSLO_QUOCD",sortable:!0,align:"left"}]),c=r(!1);j(()=>{T()});const T=async()=>{c.value=!0,await $.post("receive-order/searchAPI",{searchBy:D.value,searchValue:p.value}).then(u=>{c.value=!1,O.value=u.data.data}).catch(u=>{c.value=!1})},Q=()=>{n.dialog({component:de}).onOk(async u=>{T()})};return(u,_)=>(v(),b("div",ue,[t("div",re,[_e,t("div",me,[e(f,{icon:"add",color:"blue",onClick:Q},{default:l(()=>[e(C,null,{default:l(()=>[m("Create New RO")]),_:1})]),_:1})])]),e(X),t("div",ce,[t("div",ve,[e(Z,{title:"Created RO",rows:O.value,columns:d.value,"row-key":"name",loading:c.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":l(()=>[e(I,{outlined:"",modelValue:D.value,"onUpdate:modelValue":_[0]||(_[0]=a=>D.value=a),options:d.value,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),e(S,{borderless:"",dense:"",modelValue:p.value,"onUpdate:modelValue":[_[1]||(_[1]=a=>p.value=a),_[2]||(_[2]=a=>u.dataQuo())],placeholder:"Search",outlined:"",debounce:"1000"},{append:l(()=>[e(U,{name:"search"})]),_:1},8,["modelValue"])]),header:l(a=>[e(q,{props:a},{default:l(()=>[e(y,{"auto-width":""},{default:l(()=>[m("Action")]),_:1}),(v(!0),b(P,null,k(a.cols,i=>(v(),V(y,{key:i.name,props:a},{default:l(()=>[m(g(i.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(a=>[e(q,{props:a},{default:l(()=>[e(M,{"auto-width":""},{default:l(()=>[e(f,{flat:"",color:a.row.TQUO_APPRVDT!==null?"grey":"orange",icon:"edit",onClick:i=>u.onClickEdit(a.row.TQUO_QUOCD),dense:"",disable:a.row.TQUO_APPRVDT!==null},{default:l(()=>[e(C,null,{default:l(()=>[m(g(a.row.TQUO_APPRVDT?"Quotation already approved, cannot edit !":"Edit this quotation"),1)]),_:2},1024)]),_:2},1032,["color","onClick","disable"]),e(f,{flat:"",color:a.row.TQUO_APPRVDT!==null?"grey":"red",icon:"delete",onClick:i=>u.onClickDelete(a.row.TQUO_QUOCD),dense:"",disable:a.row.TQUO_APPRVDT!==null},{default:l(()=>[e(C,null,{default:l(()=>[m(g(a.row.TQUO_APPRVDT?"Quotation already approved, cannot delete !":"Delete this quotation"),1)]),_:2},1024)]),_:2},1032,["color","onClick","disable"]),e(f,{flat:"",color:"indigo",icon:"print",onClick:i=>u.onClickPrint(a.row.TQUO_QUOCD),dense:""},{default:l(()=>[e(C,null,{default:l(()=>[m("Print this quotation")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024),(v(!0),b(P,null,k(a.cols,i=>(v(),V(M,{key:i.name,props:a},{default:l(()=>[m(g(i.value),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{Qe as default};
