import{u as L,j as B,k as J,l as V}from"./QTable.32bc3b8b.js";import{s as d,B as r,C as k,D as e,E as t,L as P,M as y,I as c,bl as M,X as N,Y as W,o as q,P as D,Z as x,am as G,R as Q,S,H as s,O,Q as w}from"./index.de6179bc.js";import{Q as U,a as $}from"./QTd.8e28eeea.js";import{Q as g}from"./QTooltip.f89c5dc2.js";import{api_web as h}from"./axios.160c6f4c.js";const H=c("div",{class:"text-h6"},"Update Surat Jalan",-1),j={class:"row"},F={class:"col"},K={__name:"updateSJ",setup(R){L();const p=d([{label:"General",value:"general"},{label:"Forklift",value:"forklift"},{label:"Genset",value:"genset"}]),u=d(""),{dialogRef:f,onDialogHide:l,onDialogOK:m,onDialogCancel:v}=useDialogPluginComponent();return(b,_)=>(r(),k(W,{ref_key:"dialogRef",ref:f,onHide:N(l),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:e(()=>[t(P,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:e(()=>[t(y,null,{default:e(()=>[H]),_:1}),t(y,{class:"q-pa-sm"},{default:e(()=>[c("div",j,[c("div",F,[t(M,{options:p.value,type:"radio",modelValue:u.value,"onUpdate:modelValue":_[0]||(_[0]=C=>u.value=C)},null,8,["options","modelValue"])])])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},E={class:"q-pa-md"},A={class:"row"},X={class:"col"},te={__name:"invoiceView",setup(R){const p=L(),u=d([]),f=d([{name:"TDLVORD_DLVCD",label:"DO Number",field:"TDLVORD_DLVCD",sortable:!0,align:"left"},{name:"MCUS_CUSNM",label:"Customer",field:"MCUS_CUSNM",sortable:!0,align:"left"}]),l=d(!1),m=d(""),v=d("");q(()=>{b()});const b=async()=>{l.value=!0,await h.post("invoices/search",{searchBy:m.value,searchValue:v.value}).then(n=>{l.value=!1,u.value=n.data.data}).catch(n=>{l.value=!1})},_=async n=>{l.value=!0,await h.post("invoices/printInvoice",n).then(o=>{l.value=!1,window.open("").document.write("<iframe width='100%' height='100%' src='data:application/pdf;base64, "+encodeURI(o.data)+"'></iframe>")}).catch(o=>{l.value=!1})},C=async n=>{l.value=!0,await h.get(`invoices/printKwitansi/${btoa(n)}`).then(o=>{l.value=!1,window.open("").document.write("<iframe width='100%' height='100%' src='data:application/pdf;base64, "+encodeURI(o.data)+"'></iframe>")}).catch(o=>{l.value=!1})},T=async n=>{p.dialog({title:"Options",message:"Choose type surat jalan",options:{type:"radio",model:"general",items:[{label:"General",value:"general"},{label:"Forklift",value:"forklift"},{label:"Genset",value:"genset"}]},cancel:!0,persistent:!0}).onOk(async o=>{l.value=!0,await h.get(`invoices/printSJ/${btoa(n)}`).then(a=>{l.value=!1,window.open("").document.write("<iframe width='100%' height='100%' src='data:application/pdf;base64, "+encodeURI(a.data)+"'></iframe>")}).catch(a=>{l.value=!1})})},I=n=>{p.dialog({component:K}).onOk(async o=>{b()})};return(n,o)=>(r(),D("div",E,[c("div",A,[c("div",X,[t(B,{title:"Invoice List",rows:u.value,columns:f.value,"row-key":"name",loading:l.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":e(()=>[t(J,{outlined:"",modelValue:m.value,"onUpdate:modelValue":o[0]||(o[0]=a=>m.value=a),options:f.value,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),t(x,{borderless:"",dense:"",modelValue:v.value,"onUpdate:modelValue":[o[1]||(o[1]=a=>v.value=a),o[2]||(o[2]=a=>n.dataOutstanding())],placeholder:"Search",outlined:"",debounce:"1000"},{append:e(()=>[t(G,{name:"search"})]),_:1},8,["modelValue"])]),header:e(a=>[t(U,{props:a},{default:e(()=>[(r(!0),D(Q,null,S(a.cols,i=>(r(),k(V,{key:i.name,props:a},{default:e(()=>[s(O(i.label),1)]),_:2},1032,["props"]))),128)),t(V,{"auto-width":""},{default:e(()=>[s("Action")]),_:1})]),_:2},1032,["props"])]),body:e(a=>[t(U,{props:a},{default:e(()=>[(r(!0),D(Q,null,S(a.cols,i=>(r(),k($,{key:i.name,props:a},{default:e(()=>[s(O(i.value),1)]),_:2},1032,["props"]))),128)),t($,{"auto-width":""},{default:e(()=>[t(w,{flat:"",color:"red",icon:"list",dense:"",onClick:i=>I(a.row)},{default:e(()=>[t(g,null,{default:e(()=>[s("Update Surat Jalan")]),_:1})]),_:2},1032,["onClick"]),t(w,{flat:"",color:"green",icon:"print",dense:"",onClick:i=>_(a.row)},{default:e(()=>[t(g,null,{default:e(()=>[s("Print Invoice")]),_:1})]),_:2},1032,["onClick"]),t(w,{flat:"",color:"indigo",icon:"print",dense:"",onClick:i=>C(a.row.TDLVORD_DLVCD)},{default:e(()=>[t(g,null,{default:e(()=>[s("Print Receipt")]),_:1})]),_:2},1032,["onClick"]),t(w,{flat:"",color:"orange",icon:"print",dense:"",onClick:i=>T(a.row.TDLVORD_DLVCD)},{default:e(()=>[t(g,null,{default:e(()=>[s("Print Surat Jalan")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{te as default};
