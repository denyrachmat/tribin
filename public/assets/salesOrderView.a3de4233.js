import{Q as b}from"./QTooltip.4f8023d7.js";import{s as i,B as p,C as V,D as l,E as e,L as H,M as h,I as o,Z as O,am as w,T as y,Q as D,O as T,X as F,Y as j,o as X,P as U,aX as K,H as c,R as k,S as P}from"./index.d75a180b.js";import{a as I,u as Z,l as $,k as z,m as q}from"./QTable.dff94f7e.js";import{Q as M,a as R}from"./QTd.d2354722.js";import{api_web as x}from"./axios.3fb6eda4.js";import{Q as A,a as N,C as Y}from"./ClosePopup.06aa003d.js";import"./use-cache.b0833c75.js";import"./date.c30eb756.js";const G=o("div",{class:"text-h6"},"RO Maintenance",-1),J={style:{border:"1px black solid","border-radius":"10px"}},W=o("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[o("b",null,"Header")],-1),ee={class:"row"},le={class:"col"},ae={class:"col q-pl-md"},oe={class:"row items-center justify-end"},te={class:"col q-pl-md"},se={class:"row items-center justify-end"},ne={class:"row"},de={class:"col"},ie={class:"col q-pl-md"},ue=o("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[o("b",null,"Detail Items")],-1),re={__name:"salesOrderCreate",setup(E){I();const n=i({TSLO_SLOCD:"",TSLO_ISSUDT:"",TSLO_PLAN_DLVDT:"",TSLO_QUOCD:"",TSLO_POCD:""});i(""),i("");const v=i([]),d=i(!1),S=i(1),C=(m,a,s,L)=>{a(async()=>{L==="quotation"&&await f(m)})},f=async(m="")=>{d.value=!0,await x.post("quotation/search",{searchBy:"MCUS_CUSNM",searchValue:m}).then(a=>{d.value=!1,v.value=a.data.data}).catch(a=>{d.value=!1})},g=()=>S.value===1?"Rental":S.value===2?"Sales":"Service",Q=m=>{console.log(m)},{dialogRef:u,onDialogHide:_,onDialogOK:t,onDialogCancel:r}=Z();return(m,a)=>(p(),V(j,{ref_key:"dialogRef",ref:u,onHide:F(_),"transition-show":"slide-up","transition-hide":"slide-down","full-width":""},{default:l(()=>[e(H,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:l(()=>[e(h,null,{default:l(()=>[G]),_:1}),e(h,{class:"q-pa-sm"},{default:l(()=>[o("fieldset",J,[W,o("div",ee,[o("div",le,[e(O,{label:"RO Code",dense:"",filled:"",modelValue:n.value.TSLO_SLOCD,"onUpdate:modelValue":a[0]||(a[0]=s=>n.value.TSLO_SLOCD=s),disable:"",loading:d.value},null,8,["modelValue","loading"])]),o("div",ae,[e(O,{filled:"",modelValue:n.value.TSLO_ISSUDT,"onUpdate:modelValue":a[2]||(a[2]=s=>n.value.TSLO_ISSUDT=s),dense:"",label:"Issue Date",loading:d.value,onClick:a[3]||(a[3]=s=>m.quotationIssueDate.qDateProxy.show()),mask:"####-##-##","fill-mask":"",hint:"Mask: YYYY-MM-DD"},{append:l(()=>[e(w,{name:"event",class:"cursor-pointer"},{default:l(()=>[e(A,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(N,{modelValue:n.value.TSLO_ISSUDT,"onUpdate:modelValue":a[1]||(a[1]=s=>n.value.TSLO_ISSUDT=s),mask:"YYYY-MM-DD"},{default:l(()=>[o("div",oe,[y(e(D,{label:"Close",color:"primary",flat:""},null,512),[[Y]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","loading"])]),o("div",te,[e(O,{filled:"",modelValue:n.value.TSLO_PLAN_DLVDT,"onUpdate:modelValue":a[5]||(a[5]=s=>n.value.TSLO_PLAN_DLVDT=s),dense:"",label:"Delivery Date",loading:d.value,onClick:a[6]||(a[6]=s=>m.quotationIssueDate.qDateProxy.show()),mask:"####-##-##","fill-mask":"",hint:"Mask: YYYY-MM-DD"},{append:l(()=>[e(w,{name:"event",class:"cursor-pointer"},{default:l(()=>[e(A,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(N,{modelValue:n.value.TSLO_PLAN_DLVDT,"onUpdate:modelValue":a[4]||(a[4]=s=>n.value.TSLO_PLAN_DLVDT=s),mask:"YYYY-MM-DD"},{default:l(()=>[o("div",se,[y(e(D,{label:"Close",color:"primary",flat:""},null,512),[[Y]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","loading"])])]),o("div",ne,[o("div",de,[e($,{dense:"",filled:"",label:"Sales Quotation Code",modelValue:n.value.TSLO_QUOCD,"onUpdate:modelValue":[a[7]||(a[7]=s=>n.value.TSLO_QUOCD=s),Q],"use-input":"","input-debounce":"500",options:v.value,onFilter:a[8]||(a[8]=(s,L,B)=>C(s,L,B,"quotation")),behavior:"dialog","option-label":"DESCSEL","option-value":"TQUO_QUOCD","emit-value":"","map-options":"",loading:d.value},null,8,["modelValue","options","loading"])]),o("div",ie,[e(O,{label:"PO Number",dense:"",filled:"",modelValue:n.value.TSLO_POCD,"onUpdate:modelValue":a[9]||(a[9]=s=>n.value.TSLO_POCD=s),loading:d.value},null,8,["modelValue","loading"])])])]),o("fieldset",{style:{border:"1px black solid","border-radius":"10px",height:"35vh",overflow:"auto"}},[ue,o("div",{class:"row q-pb-md"},[o("div",{class:"col"},T(g))])])]),_:1})]),_:1})]),_:1},8,["onHide"]))}};const _e={class:"q-pa-md"},me={class:"row q-pb-md"},ce=o("div",{class:"col"},[o("span",{class:"text-h4"},"Sales Order / Receive Order")],-1),ve={class:"col text-right"},fe={class:"row q-pt-md"},pe={class:"col"},Le={__name:"salesOrderView",setup(E){const n=I(),v=i("TQUO_QUOCD"),d=i(""),S=i([]),C=i([{name:"TSLO_SLOCD",label:"RO. Code",field:"TSLO_SLOCD",sortable:!0,align:"left"},{name:"MCUS_CUSNM",label:"Customer Name",field:"MCUS_CUSNM",sortable:!0,align:"left"},{name:"TSLO_ADDRESS_NAME",label:"Customer Addr.",field:"TSLO_ADDRESS_NAME",sortable:!0,align:"left"},{name:"TSLO_CUSCD",label:"Customer Code",field:"TSLO_CUSCD",sortable:!0,align:"left"},{name:"TSLO_ISSUDT",label:"Issue Date",field:"TSLO_ISSUDT",sortable:!0,align:"left"},{name:"TSLO_QUOCD",label:"Quot. Code",field:"TSLO_QUOCD",sortable:!0,align:"left"}]),f=i(!1);X(()=>{g()});const g=async()=>{f.value=!0,await x.post("receive-order/searchAPI",{searchBy:v.value,searchValue:d.value}).then(u=>{f.value=!1,S.value=u.data.data}).catch(u=>{f.value=!1})},Q=()=>{n.dialog({component:re}).onOk(async u=>{g()})};return(u,_)=>(p(),U("div",_e,[o("div",me,[ce,o("div",ve,[e(D,{icon:"add",color:"blue",onClick:Q},{default:l(()=>[e(b,null,{default:l(()=>[c("Create New RO")]),_:1})]),_:1})])]),e(K),o("div",fe,[o("div",pe,[e(z,{title:"Created RO",rows:S.value,columns:C.value,"row-key":"name",loading:f.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":l(()=>[e($,{outlined:"",modelValue:v.value,"onUpdate:modelValue":_[0]||(_[0]=t=>v.value=t),options:C.value,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),e(O,{borderless:"",dense:"",modelValue:d.value,"onUpdate:modelValue":[_[1]||(_[1]=t=>d.value=t),_[2]||(_[2]=t=>u.dataQuo())],placeholder:"Search",outlined:"",debounce:"1000"},{append:l(()=>[e(w,{name:"search"})]),_:1},8,["modelValue"])]),header:l(t=>[e(M,{props:t},{default:l(()=>[e(q,{"auto-width":""},{default:l(()=>[c("Action")]),_:1}),(p(!0),U(k,null,P(t.cols,r=>(p(),V(q,{key:r.name,props:t},{default:l(()=>[c(T(r.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(t=>[e(M,{props:t},{default:l(()=>[e(R,{"auto-width":""},{default:l(()=>[e(D,{flat:"",color:t.row.TQUO_APPRVDT!==null?"grey":"orange",icon:"edit",onClick:r=>u.onClickEdit(t.row.TQUO_QUOCD),dense:"",disable:t.row.TQUO_APPRVDT!==null},{default:l(()=>[e(b,null,{default:l(()=>[c(T(t.row.TQUO_APPRVDT?"Quotation already approved, cannot edit !":"Edit this quotation"),1)]),_:2},1024)]),_:2},1032,["color","onClick","disable"]),e(D,{flat:"",color:t.row.TQUO_APPRVDT!==null?"grey":"red",icon:"delete",onClick:r=>u.onClickDelete(t.row.TQUO_QUOCD),dense:"",disable:t.row.TQUO_APPRVDT!==null},{default:l(()=>[e(b,null,{default:l(()=>[c(T(t.row.TQUO_APPRVDT?"Quotation already approved, cannot delete !":"Delete this quotation"),1)]),_:2},1024)]),_:2},1032,["color","onClick","disable"]),e(D,{flat:"",color:"indigo",icon:"print",onClick:r=>u.onClickPrint(t.row.TQUO_QUOCD),dense:""},{default:l(()=>[e(b,null,{default:l(()=>[c("Print this quotation")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024),(p(!0),U(k,null,P(t.cols,r=>(p(),V(R,{key:r.name,props:t},{default:l(()=>[c(T(r.value),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{Le as default};
