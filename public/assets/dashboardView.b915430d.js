import{B as s,C,D as t,E as e,J as y,K as u,L as S,Q as P,M as T,O as Q,I as a,s as f,P as B,aa as N,a$ as c,S as I,o as M,R as d,aY as w,aZ as k,b4 as H,H as $}from"./index.ab4e8e90.js";import{u as O,b as R,a as E,o as L}from"./use-dialog-plugin-component.c5c471cb.js";import{d as V,Q as x,b as K}from"./date.6702ea48.js";import{api_web as U}from"./axios.a00d1c08.js";const J=a("div",{class:"text-h6"},"Review Item List",-1),z={__name:"viewListApprovalItem",setup(D){const{dialogRef:g,onDialogHide:h,onDialogOK:v,onDialogCancel:_}=O();return(i,p)=>(s(),C(Q,{ref_key:"dialogRef",ref:g,onHide:T(h),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:t(()=>[e(y,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:t(()=>[e(u,null,{default:t(()=>[J]),_:1}),e(u,{class:"q-pa-sm",style:{height:"70vh",overflow:"auto"}}),e(S,{align:"center"},{default:t(()=>[e(P,{label:"OK",color:"primary",onClick:p[0]||(p[0]=A=>T(v)()),disable:i.stateSubmit},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},G=a("div",{class:"text-h6"},"Approval List",-1),j={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},F={class:"text-h5 text-bold"},Y={class:"text-h6 text-bold"},Z={class:"text-subtitle2"},W={class:"row"},X={class:"col"},ee={class:"col text-right"},te={__name:"viewListApproval",props:{listApprv:Array},setup(D){const g=R(),h=D,v=f([{name:"APP_CD",label:"Doc Code",field:"APP_CD"},{name:"APP_CUSNM",label:"Customer",field:"APP_CUSNM"},{name:"APP_SBJCT",label:"Subject",field:"APP_SBJCT"},{name:"APP_ATTN",label:"Attn",field:"APP_ATTN"},{name:"CREATED_AT",label:"Created Date",field:"CREATED_AT"}]),_=f(""),i=(o,r="days")=>{const n=new Date,q=new Date(o);return V.getDateDiff(n,q,r)},p=o=>{g.dialog({component:z,componentProps:{cd:o}}).onOk(async r=>{quotationGroupConditions.value=r.MCONDITION_RPT_STAT,quotationConditions.value=r.group})},{dialogRef:A,onDialogHide:m,onDialogOK:b,onDialogCancel:l}=O();return(o,r)=>(s(),C(Q,{ref_key:"dialogRef",ref:A,onHide:T(m),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:t(()=>[e(y,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:t(()=>[e(u,null,{default:t(()=>[G]),_:1}),e(u,{class:"q-pa-sm",style:{height:"70vh",overflow:"auto"}},{default:t(()=>[e(E,{grid:"",flat:"",bordered:"","card-container-class":o.cardContainerClass,title:"Outstanding Approval",rows:h.listApprv,columns:v.value,"row-key":"name",filter:_.value,"hide-header":"",pagination:{rowsPerPage:50},"rows-per-page-options":o.rowsPerPageOptions},{"top-right":t(()=>[e(B,{borderless:"",dense:"",debounce:"300",modelValue:_.value,"onUpdate:modelValue":r[0]||(r[0]=n=>_.value=n),placeholder:"Search"},{append:t(()=>[e(N,{name:"search"})]),_:1},8,["modelValue"])]),item:t(n=>[a("div",j,[e(y,{flat:"",bordered:""},{default:t(()=>[e(u,{class:"text-center bg-secondary text-white"},{default:t(()=>[a("div",F,c(n.row.APP_CUSNM),1)]),_:2},1024),e(I),e(u,null,{default:t(()=>[a("div",Y,c(n.row.APP_CD),1),a("div",Z,c(n.row.APP_SBJCT),1)]),_:2},1024),e(u,null,{default:t(()=>[a("div",W,[a("div",X,[e(P,{label:"Preview",color:"primary",outline:"",onClick:q=>p(n.row.APP_CD)},null,8,["onClick"])]),a("div",ee,c(i(n.row.CREATED_AT)<30?`${i(n.row.CREATED_AT)} Days Ago`:`${i(n.row.CREATED_AT,"months")} Month ago`),1)])]),_:2},1024)]),_:2},1024)])]),_:1},8,["card-container-class","rows","columns","filter","rows-per-page-options"])]),_:1}),e(S,{align:"right"},{default:t(()=>[e(P,{label:"OK",color:"primary",onClick:r[1]||(r[1]=n=>T(b)()),disable:o.stateSubmit},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},oe={class:"q-pa-md bg-grey-5 window-height"},ae={class:"row"},le={class:"row"},se={class:"col"},ne={class:"text-h3 text-cyan"},ie={class:"text-subtitle2 text-cyan"},re={class:"col text-right"},ce={class:"row q-pa-sm"},de={class:"col"},ue={key:1},he={__name:"dashboardView",setup(D){const g=R(),h=f([{total:900,title:"Total Sales",icon:"shopping_cart",color:"cyan"},{total:900,title:"Total Purchase",icon:"shopping_bag",color:"cyan"},{total:900,title:"Total Profit",icon:"payments",color:"cyan"},{total:15,title:"Total Customer",icon:"group",color:"cyan"},{total:15,title:"Total Customer",icon:"group",color:"cyan"},{total:15,title:"Total Customer",icon:"group",color:"cyan"},{total:15,title:"Total Customer",icon:"group",color:"cyan"},{total:15,title:"Total Customer",icon:"group",color:"cyan"}]),v=f([{name:"name",label:"Business",field:"name",sortable:!0,align:"left"},{name:"quot",label:"Quotation",field:"quot_count",sortable:!0,align:"center"},{name:"pr",label:"Purchase Request",field:"pr_count",sortable:!0,align:"center"},{name:"po",label:"Purchase Order",field:"po_count",sortable:!0,align:"center"},{name:"spk",label:"SPK",field:"spk_count",sortable:!0,align:"center"}]),_=f([]),i=f(!1);f(null),M(async()=>{await p()});const p=async()=>{i.value=!0,await U.get("/approval/notificationsAPI/top-user").then(m=>{i.value=!1,_.value=m.data}).catch(m=>{i.value=!1})},A=m=>{g.dialog({component:te,componentProps:{listApprv:m}}).onOk(async b=>{quotationGroupConditions.value=b.MCONDITION_RPT_STAT,quotationConditions.value=b.group})};return(m,b)=>(s(),d("div",oe,[a("div",ae,[(s(!0),d(w,null,k(h.value,(l,o)=>(s(),d("div",{class:H("col-3 q-pa-sm"),key:o},[e(y,null,{default:t(()=>[e(u,null,{default:t(()=>[a("div",le,[a("div",se,[a("div",ne,c(l.total),1),a("div",ie,c(l.title),1)]),a("div",re,[e(N,{name:l.icon,size:"4.4em",color:l.color},null,8,["name","color"])])])]),_:2},1024)]),_:2},1024)]))),128))]),a("div",ce,[a("div",de,[e(E,{flat:"",bordered:"",title:"Approval List",rows:_.value,columns:v.value,"row-key":"name",loading:i.value},{"top-right":t(()=>[e(P,{flat:"",icon:"refresh",color:"cyan",onClick:p})]),header:t(l=>[e(x,{props:l},{default:t(()=>[(s(!0),d(w,null,k(l.cols,o=>(s(),C(L,{key:o.name,props:l},{default:t(()=>[$(c(o.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:t(l=>[e(x,{props:l},{default:t(()=>[(s(!0),d(w,null,k(l.cols,o=>(s(),C(K,{key:o.name,props:l},{default:t(()=>[o.name==="quot"||o.name==="pr"||o.name==="po"||o.name==="spk"?(s(),d(w,{key:0},[o.value>0?(s(),C(P,{key:0,flat:"",color:"blue",onClick:r=>A(l.row[o.name.split("_")[0]])},{default:t(()=>[a("b",null,c(o.value),1)]),_:2},1032,["onClick"])):(s(),d("span",ue,c(o.value),1))],64)):(s(),d(w,{key:1},[$(c(o.value),1)],64))]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{he as default};
