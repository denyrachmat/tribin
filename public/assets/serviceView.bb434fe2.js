import{Q as h}from"./QTooltip.820f5a40.js";import{B as d,C as g,D as a,E as e,J as P,K as Q,I as o,P as w,L as R,Q as p,M as k,O as T,s as _,o as U,R as b,S as B,H as r,aa as x,aY as O,aZ as S,a$ as D}from"./index.8701441e.js";import{u as K,b as E,a as I,c as j,o as V}from"./use-dialog-plugin-component.fef48ec8.js";import{Q as y,a as $}from"./QTd.e03f777c.js";import{api_web as A}from"./axios.8342e680.js";const F=o("div",{class:"text-h6"},"Create Order",-1),L={class:"row"},M={class:"col"},J={class:"col"},Y={__name:"serviceCreateOrder",setup(N){const{dialogRef:v,onDialogHide:u,onDialogOK:m,onDialogCancel:f}=K();return(c,s)=>(d(),g(T,{ref_key:"dialogRef",ref:v,onHide:k(u),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:a(()=>[e(P,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:a(()=>[e(Q,null,{default:a(()=>[F]),_:1}),e(Q,{class:"q-pa-sm"},{default:a(()=>[o("div",L,[o("div",M,[e(w,{label:"SPK No",readonly:""})]),o("div",J,[e(w,{label:"Issue Date"})])])]),_:1}),e(R,{align:"right"},{default:a(()=>[e(p,{label:"OK",color:"primary",onClick:s[0]||(s[0]=C=>c.onSubmitData()),disable:c.stateSubmit},null,8,["disable"]),e(p,{flat:"",label:"Cancel",color:"red",onClick:k(f)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}};const Z={class:"q-pa-md"},z={class:"row q-pb-md"},G=o("div",{class:"col"},[o("span",{class:"text-h4"},"Receive Order ")],-1),W={class:"col text-right"},X={class:"row q-pt-md"},ee={class:"col"},ne={__name:"serviceView",setup(N){const v=E(),u=_("SRVH_DOCNO"),m=_(""),f=_([]),c=_([{name:"SRVH_DOCNO",label:"SPK No",field:"SRVH_DOCNO",sortable:!0,align:"left"},{name:"SRVH_CUSCD",label:"Cust",field:"SRVH_CUSCD",sortable:!0,align:"left"},{name:"created_at",label:"Created Date",field:"created_at",sortable:!0,align:"left"}]),s=_(!1);U(()=>{C()});const C=async()=>{s.value=!0,await A.post("service/search",{searchBy:u.value,searchValue:m.value}).then(t=>{s.value=!1,f.value=t.data.data}).catch(t=>{s.value=!1})},q=()=>{v.dialog({component:Y}).onOk(async t=>{C()})},H=t=>{window.open("https://joss.jatpowerindo.co.id/PDF/quotation/"+btoa(t),"_blank").focus()};return(t,i)=>(d(),b("div",Z,[o("div",z,[G,o("div",W,[e(p,{icon:"add",color:"blue",onClick:q},{default:a(()=>[e(h,null,{default:a(()=>[r("Create New Order")]),_:1})]),_:1})])]),e(B),o("div",X,[o("div",ee,[e(I,{title:"Created Order",rows:f.value,columns:c.value,"row-key":"name",loading:s.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":a(()=>[e(j,{outlined:"",modelValue:u.value,"onUpdate:modelValue":i[0]||(i[0]=l=>u.value=l),options:c.value,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),e(w,{borderless:"",dense:"",modelValue:m.value,"onUpdate:modelValue":[i[1]||(i[1]=l=>m.value=l),i[2]||(i[2]=l=>t.dataQuo())],placeholder:"Search",outlined:"",debounce:"1000"},{append:a(()=>[e(x,{name:"search"})]),_:1},8,["modelValue"])]),header:a(l=>[e(y,{props:l},{default:a(()=>[(d(!0),b(O,null,S(l.cols,n=>(d(),g(V,{key:n.name,props:l},{default:a(()=>[r(D(n.label),1)]),_:2},1032,["props"]))),128)),e(V,{"auto-width":""},{default:a(()=>[r("Action")]),_:1})]),_:2},1032,["props"])]),body:a(l=>[e(y,{props:l},{default:a(()=>[(d(!0),b(O,null,S(l.cols,n=>(d(),g($,{key:n.name,props:l},{default:a(()=>[r(D(n.value),1)]),_:2},1032,["props"]))),128)),e($,{"auto-width":""},{default:a(()=>[e(p,{flat:"",color:"orange",icon:"edit",onClick:n=>t.onClickEdit(l.row.TQUO_QUOCD),dense:""},{default:a(()=>[e(h,null,{default:a(()=>[r("Edit this quotation")]),_:1})]),_:2},1032,["onClick"]),e(p,{flat:"",color:"indigo",icon:"print",onClick:n=>H(l.row.TQUO_QUOCD),dense:""},{default:a(()=>[e(h,null,{default:a(()=>[r("Print this order")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{ne as default};
