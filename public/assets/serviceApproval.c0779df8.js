import{s as u,o as Q,B as S,C as R,D as e,E as a,L as x,M as f,P as T,R as O,S as M,bc as k,U as N,H as s,O as n,Q as y,X as U,Y as L,I as l,Z as q,am as $,aX as A}from"./index.48dee3f6.js";import{a as H,u as B,Q as F,b as E,c as _,d,k as K}from"./QTable.9717ce21.js";import{api_web as I}from"./axios.98aa4835.js";import{Q as Y}from"./QTooltip.a7b44c80.js";import{_ as X}from"./serviceOprItemAdd.b4f77cfa.js";const z=l("div",{class:"text-h6"},"View List Price",-1),G={__name:"serviceApprovalDetView",props:{idHeader:String},setup(C){const h=H(),{dialogRef:v,onDialogHide:m,onDialogOK:p,onDialogCancel:w}=B(),b=C,t=u([]),r=u(!1);Q(()=>{o()});const o=async()=>{r.value=!0,await I.get(`servicesAdmins/viewUnapproveMgrDet/${btoa(b.idHeader)}`).then(c=>{r.value=!1,t.value=c.data}).catch(c=>{r.value=!1})},D=c=>{let g=0;return c.map(i=>{g+=i.TSRVF_QTY*i.TSRVF_PRC}),g},P=c=>{h.dialog({component:X,componentProps:{mode:"view",dataItem:c}}).onOk(async g=>{})};return(c,g)=>(S(),R(L,{ref_key:"dialogRef",ref:v,onHide:U(m),"transition-show":"slide-up","transition-hide":"slide-down","full-width":""},{default:e(()=>[a(x,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:e(()=>[a(f,null,{default:e(()=>[z]),_:1}),a(f,{class:"q-pa-sm"},{default:e(()=>[a(F,{bordered:"",loading:r.value},{default:e(()=>[(S(!0),T(O,null,M(t.value,(i,V)=>(S(),R(E,{key:V,class:k("q-my-sm")},{default:e(()=>[a(_,{avatar:""},{default:e(()=>[a(N,{color:i.TSRVD_FLGSTS===0?"red":"primary","text-color":"white"},{default:e(()=>[s(n(V+1),1)]),_:2},1032,["color"])]),_:2},1024),a(_,null,{default:e(()=>[a(d,null,{default:e(()=>[s(n(i.TSRVD_ITMCD),1)]),_:2},1024),a(d,{caption:""},{default:e(()=>[s(" Item ")]),_:1})]),_:2},1024),a(_,null,{default:e(()=>[a(d,null,{default:e(()=>[s(n(i.TSRVD_QTY),1)]),_:2},1024),a(d,{caption:""},{default:e(()=>[s(" Qty ")]),_:1})]),_:2},1024),a(_,null,{default:e(()=>[a(d,null,{default:e(()=>[s(n(i.TSRVD_REMARK),1)]),_:2},1024),a(d,{caption:""},{default:e(()=>[s(" Remarks ")]),_:1})]),_:2},1024),a(_,null,{default:e(()=>[a(d,null,{default:e(()=>[s("Rp. "+n(D(i.list_fix_det).toLocaleString()),1)]),_:2},1024),a(d,{caption:""},{default:e(()=>[s(" Total Fix Price ")]),_:1})]),_:2},1024),a(_,{side:""},{default:e(()=>[a(y,{icon:"visibility",flat:"",color:"primary",onClick:ie=>P(i)},{default:e(()=>[a(Y,null,{default:e(()=>[s("View list fix items")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},Z={class:"q-pa-md"},j={class:"row"},J={class:"col"},W={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},ee={class:"text-h5 text-bold"},ae={class:"text-h6 text-bold"},te={class:"text-subtitle2"},le={class:"text-h6 text-bold"},oe=l("div",{class:"text-subtitle2"},"Resolved Items",-1),se={class:"row"},ne={class:"col"},fe={__name:"serviceApproval",setup(C){const h=H();u([{name:"SRVH_DOCNO",label:"SPK No",field:"SRVH_DOCNO",sortable:!0,align:"left"},{name:"MCUS_CUSNM",label:"Customer Name",field:"MCUS_CUSNM",sortable:!0,align:"left"},{name:"resolve",label:"Resolved Line",sortable:!0,align:"left",field:t=>t.resolve.length},{name:"unresolve",label:"Unresolved Line",sortable:!0,align:"left",field:t=>t.unresolve.length},{name:"SRVH_ISSDT",label:"Submited Date",field:"SRVH_ISSDT",sortable:!0,align:"left"}]);const v=u([]),m=u(""),p=u(!1);u(null),Q(()=>{w()});const w=async()=>{p.value=!0,await I.get("servicesAdmins/listUnapproveMgr").then(t=>{p.value=!1,v.value=t.data}).catch(t=>{p.value=!1})},b=t=>{h.dialog({component:G,componentProps:{idHeader:t}}).onOk(async r=>{w()})};return(t,r)=>(S(),T("div",Z,[l("div",j,[l("div",J,[a(K,{grid:"",flat:"",bordered:"","card-container-class":t.cardContainerClass,title:"Approve Service Pricing",rows:v.value,columns:t.columns,"row-key":"name",filter:m.value,"hide-header":"",pagination:{rowsPerPage:50},"rows-per-page-options":t.rowsPerPageOptions,loading:p.value},{"top-right":e(()=>[a(q,{borderless:"",dense:"",debounce:"300",modelValue:m.value,"onUpdate:modelValue":r[0]||(r[0]=o=>m.value=o),placeholder:"Search"},{append:e(()=>[a($,{name:"search"})]),_:1},8,["modelValue"])]),item:e(o=>[l("div",W,[a(x,{flat:"",bordered:""},{default:e(()=>[a(f,{class:k("text-center bg-green text-white")},{default:e(()=>[l("div",ee,n(o.row.SRVH_DOCNO),1)]),_:2},1024),a(A),a(f,null,{default:e(()=>[l("div",ae,n(o.row.MCUS_CUSNM),1),l("div",te,n(o.row.SRVH_ISSDT),1)]),_:2},1024),a(f,null,{default:e(()=>[l("div",le,n(o.row.resolve.length)+" of "+n(o.row.detail.length),1),oe]),_:2},1024),a(f,null,{default:e(()=>[l("div",se,[l("div",ne,[a(y,{color:"primary",label:"View Data",onClick:D=>b(o.row.SRVH_DOCNO)},null,8,["onClick"])])])]),_:2},1024)]),_:2},1024)])]),_:1},8,["card-container-class","rows","columns","filter","rows-per-page-options","loading"])])])]))}};export{fe as default};
