import{Q as k}from"./QTooltip.96476453.js";import{s as c,B as r,C as b,D as l,E as a,J as A,K as R,I as s,P as g,aa as P,aW as L,Q as m,R as V,aU as Q,aV as y,aZ as E,H as u,aX as I,aY as K,L as j,M as H,O as F,o as J,S as W}from"./index.dc7cb627.js";import{u as X,b as $,Q as Z,j as z,k as T,l as G,c as q,a as ee,m as N}from"./use-dialog-plugin-component.36377d41.js";import{Q as U,a as M}from"./date.55276bbe.js";import{api_web as O}from"./axios.f36f7258.js";import{Q as ae,a as le,C as te}from"./ClosePopup.a406b86c.js";const oe=s("div",{class:"text-h6"},"Create Order",-1),se={style:{border:"1px black solid","border-radius":"10px"}},ne=s("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[s("b",null,"Header")],-1),de={class:"row"},ie={class:"col"},re={class:"col q-pl-md"},ue={class:"row items-center justify-end"},ce={class:"row"},me={class:"col"},_e={style:{border:"1px black solid","border-radius":"10px",height:"35vh",overflow:"auto"}},pe={style:{"margin-left":"1em",padding:"0.2em 0.8em"}},ve=s("b",null,"Detail Items",-1),fe={class:"row"},Ce={class:"col text-right"},ge={__name:"serviceCreateOrder",setup(Y){const{dialogRef:h,onDialogHide:_,onDialogOK:v,onDialogCancel:f}=X();$();const n=c({SRVH_DOCNO:"",SRVH_ISSDT:"",SRVH_CUSCD:""}),i=c([]),C=(o,e,t,p)=>{e(async()=>{p==="cust"&&await S(o),p==="item"&&await D(o)})},S=async o=>{loading.value=!0,await O.post("customer/searchAPI",{searchValue:o}).then(e=>{loading.value=!1,listCustomers.value=e.data.data}).catch(()=>{loading.value=!1})},D=async o=>{loading.value=!0,await O.post("item/searchAPI",{searchValue:o}).then(e=>{loading.value=!1,i.value=e.data.data}).catch(()=>{loading.value=!1})},d=()=>{i.value.push({TSRVD_ITMCD:"",TSRVD_LINE:i.value.length+1})};return(o,e)=>(r(),b(F,{ref_key:"dialogRef",ref:h,onHide:H(_),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:l(()=>[a(A,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:l(()=>[a(R,null,{default:l(()=>[oe]),_:1}),a(R,{class:"q-pa-sm"},{default:l(()=>[s("fieldset",se,[ne,s("div",de,[s("div",ie,[a(g,{label:"SPK No",readonly:"",dense:"",modelValue:n.value.SRVH_DOCNO,"onUpdate:modelValue":e[0]||(e[0]=t=>n.value.SRVH_DOCNO=t),filled:""},null,8,["modelValue"])]),s("div",re,[a(g,{filled:"",modelValue:n.value.SRVH_ISSDT,"onUpdate:modelValue":e[2]||(e[2]=t=>n.value.SRVH_ISSDT=t),dense:"",label:"Issue Date",loading:o.loading,onClick:e[3]||(e[3]=t=>o.quotationIssueDate.qDateProxy.show()),mask:"####-##-##","fill-mask":"",hint:"Mask: YYYY-MM-DD"},{append:l(()=>[a(P,{name:"event",class:"cursor-pointer"},{default:l(()=>[a(ae,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[a(le,{modelValue:n.value.SRVH_ISSDT,"onUpdate:modelValue":e[1]||(e[1]=t=>n.value.SRVH_ISSDT=t),mask:"YYYY-MM-DD"},{default:l(()=>[s("div",ue,[L(a(m,{label:"Close",color:"primary",flat:""},null,512),[[te]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","loading"])])]),s("div",ce,[s("div",me,[a(g,{label:"Customer Choose",dense:"",modelValue:n.value.SRVH_CUSCD,"onUpdate:modelValue":e[4]||(e[4]=t=>n.value.SRVH_CUSCD=t),filled:""},null,8,["modelValue"])])])]),s("fieldset",_e,[s("legend",pe,[ve,s("div",fe,[s("div",Ce,[a(m,{flat:"",icon:"add",color:"blue",onClick:e[5]||(e[5]=t=>d())})])]),a(Z,{bordered:"",dense:""},{default:l(()=>[o.listSavedItems.length>0?(r(!0),V(Q,{key:0},y(o.listSavedItems,(t,p)=>(r(),b(z,{key:p,class:"q-my-sm",dense:""},{default:l(()=>[a(T,{avatar:""},{default:l(()=>[a(E,{"text-color":"blue"},{default:l(()=>[u(I(p+1),1)]),_:2},1024)]),_:2},1024),a(T,null,{default:l(()=>[a(G,null,{default:l(()=>[a(q,{dense:"",filled:"",label:"Item Name",modelValue:t.item,"onUpdate:modelValue":w=>t.item=w,"use-input":"","input-debounce":"500",options:i.value,onFilter:e[6]||(e[6]=(w,x,B)=>C(w,x,B,"item")),behavior:"dialog","option-label":"MITM_ITMNM","option-value":"MITM_ITMNM","emit-value":"","map-options":"",loading:o.loading},null,8,["modelValue","onUpdate:modelValue","options","loading"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)):K("",!0)]),_:1})])])]),_:1}),a(j,{align:"right"},{default:l(()=>[a(m,{label:"OK",color:"primary",onClick:e[7]||(e[7]=t=>o.onSubmitData()),disable:o.stateSubmit},null,8,["disable"]),a(m,{flat:"",label:"Cancel",color:"red",onClick:H(f)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}};const Ve={class:"q-pa-md"},be={class:"row q-pb-md"},he=s("div",{class:"col"},[s("span",{class:"text-h4"},"Receive Order ")],-1),Se={class:"col text-right"},De={class:"row q-pt-md"},we={class:"col"},He={__name:"serviceView",setup(Y){const h=$(),_=c("SRVH_DOCNO"),v=c(""),f=c([]),n=c([{name:"SRVH_DOCNO",label:"SPK No",field:"SRVH_DOCNO",sortable:!0,align:"left"},{name:"SRVH_CUSCD",label:"Cust",field:"SRVH_CUSCD",sortable:!0,align:"left"},{name:"created_at",label:"Created Date",field:"created_at",sortable:!0,align:"left"}]),i=c(!1);J(()=>{C()});const C=async()=>{i.value=!0,await O.post("service/search",{searchBy:_.value,searchValue:v.value}).then(d=>{i.value=!1,f.value=d.data.data}).catch(d=>{i.value=!1})},S=()=>{h.dialog({component:ge}).onOk(async d=>{C()})},D=d=>{window.open("https://joss.jatpowerindo.co.id/PDF/quotation/"+btoa(d),"_blank").focus()};return(d,o)=>(r(),V("div",Ve,[s("div",be,[he,s("div",Se,[a(m,{icon:"add",color:"blue",onClick:S},{default:l(()=>[a(k,null,{default:l(()=>[u("Create New Order")]),_:1})]),_:1})])]),a(W),s("div",De,[s("div",we,[a(ee,{title:"Created Order",rows:f.value,columns:n.value,"row-key":"name",loading:i.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":l(()=>[a(q,{outlined:"",modelValue:_.value,"onUpdate:modelValue":o[0]||(o[0]=e=>_.value=e),options:n.value,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),a(g,{borderless:"",dense:"",modelValue:v.value,"onUpdate:modelValue":[o[1]||(o[1]=e=>v.value=e),o[2]||(o[2]=e=>d.dataQuo())],placeholder:"Search",outlined:"",debounce:"1000"},{append:l(()=>[a(P,{name:"search"})]),_:1},8,["modelValue"])]),header:l(e=>[a(U,{props:e},{default:l(()=>[(r(!0),V(Q,null,y(e.cols,t=>(r(),b(N,{key:t.name,props:e},{default:l(()=>[u(I(t.label),1)]),_:2},1032,["props"]))),128)),a(N,{"auto-width":""},{default:l(()=>[u("Action")]),_:1})]),_:2},1032,["props"])]),body:l(e=>[a(U,{props:e},{default:l(()=>[(r(!0),V(Q,null,y(e.cols,t=>(r(),b(M,{key:t.name,props:e},{default:l(()=>[u(I(t.value),1)]),_:2},1032,["props"]))),128)),a(M,{"auto-width":""},{default:l(()=>[a(m,{flat:"",color:"orange",icon:"edit",onClick:t=>d.onClickEdit(e.row.TQUO_QUOCD),dense:""},{default:l(()=>[a(k,null,{default:l(()=>[u("Edit this quotation")]),_:1})]),_:2},1032,["onClick"]),a(m,{flat:"",color:"indigo",icon:"print",onClick:t=>D(e.row.TQUO_QUOCD),dense:""},{default:l(()=>[a(k,null,{default:l(()=>[u("Print this order")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{He as default};
