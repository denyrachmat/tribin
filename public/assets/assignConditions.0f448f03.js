import{h as n,c as E,J as q,K as $,s as u,o as G,B as m,L as N,I as l,E as t,D as e,M as L,Q as g,H as d,O as D,C,P as U,R as z,S as F,T as H,U as O}from"./index.0e31c489.js";import{Q as h}from"./QTooltip.aeab9340.js";import{u as K,a as J,Q as Y,b as j,c as v,d as T,e as S}from"./QTable.db39f756.js";import{api as w,api_web as x}from"./axios.de1291bd.js";import{_ as W}from"./assignConditionsView.38e69c6a.js";const X=[n("g",{transform:"translate(20 50)"},[n("rect",{x:"-10",y:"-30",width:"20",height:"60",fill:"currentColor",opacity:"0.6"},[n("animateTransform",{attributeName:"transform",type:"scale",from:"2",to:"1",begin:"0s",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keySplines:"0.1 0.9 0.4 1",keyTimes:"0;1",values:"2;1"})])]),n("g",{transform:"translate(50 50)"},[n("rect",{x:"-10",y:"-30",width:"20",height:"60",fill:"currentColor",opacity:"0.8"},[n("animateTransform",{attributeName:"transform",type:"scale",from:"2",to:"1",begin:"0.1s",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keySplines:"0.1 0.9 0.4 1",keyTimes:"0;1",values:"2;1"})])]),n("g",{transform:"translate(80 50)"},[n("rect",{x:"-10",y:"-30",width:"20",height:"60",fill:"currentColor",opacity:"0.9"},[n("animateTransform",{attributeName:"transform",type:"scale",from:"2",to:"1",begin:"0.2s",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keySplines:"0.1 0.9 0.4 1",keyTimes:"0;1",values:"2;1"})])])];var M=E({name:"QSpinnerFacebook",props:q,setup(k){const{cSize:c,classes:i}=$(k);return()=>n("svg",{class:i.value,width:c.value,height:c.value,viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},X)}});const Z={class:"q-pa-md"},ee=l("div",{class:"row"},[l("div",{class:"col"},[l("div",{class:"text-h6"},"Assign Condition Group")])],-1),te={class:"row q-pt-md"},ae={class:"col"},oe={class:"row"},se={class:"col"},ne={class:"col text-right"},le={class:"row q-pt-md"},ie={class:"col",style:{"max-height":"80vh",overflow:"auto"}},me={__name:"assignConditions",setup(k){u([{name:"id",align:"left",label:"ID",field:"id",sortable:!0},{name:"MCONDITION_DESCRIPTION",align:"left",label:"Description",field:"MCONDITION_DESCRIPTION",sortable:!0}]);const c=u([]);u({sortBy:"desc",descending:!1,rowsPerPage:0});const i=u([]),r=u(""),y=u("new"),_=u(!1),o=K();J(),G(()=>{b()});const f=()=>{i.value=[],r.value="",y.value="new"},Q=()=>{o.dialog({title:"Confirmation",message:"Are you sure want to delete this group ?",cancel:!0,persistent:!0}).onOk(async()=>{o.loading.show({spinner:M,spinnerColor:"yellow",spinnerSize:140,backgroundColor:"purple",message:"Save your information, Hang on...",messageColor:"black"}),await w.delete(`/master/conditions/deleteDataGroup/${btoa(r.value)}`).then(a=>{o.loading.hide(),f()})})},b=async()=>{_.value=!0,await w.get("/master/conditions/getdata").then(a=>{console.log(a),_.value=!1,c.value=a.data}).catch(a=>{_.value=!1})},R=()=>{o.dialog({component:W}).onOk(async a=>{r.value=a.MCONDITION_RPT_STAT,i.value=a.group.map(s=>s.id),y.value="edit"})},P=()=>{o.dialog({title:"Confirmation",message:"Do you want to save this group ?",cancel:!0,persistent:!0}).onOk(async()=>{o.loading.show({spinner:M,spinnerColor:"yellow",spinnerSize:140,backgroundColor:"purple",message:"Save your information, Hang on...",messageColor:"black"}),await w.post("/master/conditions/assignGroup",{data:i.value,MCONDITION_RPT_STAT:r.value}).then(async a=>{o.loading.hide(),f()}).catch(a=>{o.loading.hide()})})},A=()=>{o.dialog({title:"Add Conditions",message:"Input conditions",prompt:{model:"",isValid:a=>a.length>2,type:"text"},cancel:!0,persistent:!0}).onOk(async a=>{await x.post("condition",{MCONDITION_DESCRIPTION:a,MCONDITION_ORDER_NUMBER:null}).then(async s=>{f(),await b()})})},B=a=>{o.dialog({title:"Confirmation",message:"Are you sure want to delete this data ?",cancel:!0,persistent:!0}).onOk(async()=>{await x.delete(`condition/${btoa(a)}`).then(async s=>{f(),await b()})})};return(a,s)=>(m(),N("div",Z,[ee,l("div",te,[l("div",ae,[l("div",oe,[l("div",se,[t(L,{label:"Group Name",outlined:"",dense:"",modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=p=>r.value=p),disable:y.value==="edit"},{after:e(()=>[t(g,{dense:"",icon:"search",color:"blue",flat:"",onClick:R})]),_:1},8,["modelValue","disable"])]),l("div",ne,[t(Y,{outline:""},{default:e(()=>[t(g,{outline:"",color:"blue",icon:"description",onClick:f},{default:e(()=>[t(h,null,{default:e(()=>[d("New")]),_:1})]),_:1}),t(g,{outline:"",color:"blue",icon:"save",onClick:P,disable:!r.value||i.value.length===0},{default:e(()=>[t(h,null,{default:e(()=>[d("Save Conditions")]),_:1})]),_:1},8,["disable"]),t(g,{outline:"",color:"blue",icon:"add",onClick:s[1]||(s[1]=p=>A())},{default:e(()=>[t(h,null,{default:e(()=>[d("Add more conditions")]),_:1})]),_:1}),t(g,{outline:"",color:"red",icon:"delete",onClick:Q,disable:!r.value},{default:e(()=>[t(h,null,{default:e(()=>[d("Delete")]),_:1})]),_:1},8,["disable"])]),_:1})])]),l("div",le,[l("div",ie,[t(j,{bordered:""},{default:e(()=>[c.value.length===0?D((m(),C(T,{key:0,class:"q-my-sm",clickable:"",tag:"label"},{default:e(()=>[_.value?(m(),C(v,{key:0},{default:e(()=>[d(" Data is loading, please wait. ")]),_:1})):(m(),C(v,{key:1},{default:e(()=>[d(" No Data Available ! ")]),_:1}))]),_:1})),[[O]]):(m(!0),N(U,{key:1},z(c.value,(p,V)=>D((m(),C(T,{key:V,class:"q-my-sm",clickable:"",tag:"label"},{default:e(()=>[t(v,{side:"",top:""},{default:e(()=>[t(F,{modelValue:i.value,"onUpdate:modelValue":s[2]||(s[2]=I=>i.value=I),val:p.id},null,8,["modelValue","val"])]),_:2},1024),t(v,null,{default:e(()=>[t(S,null,{default:e(()=>[d(H(p.MCONDITION_DESCRIPTION),1)]),_:2},1024),t(S,{caption:"",lines:"1"},{default:e(()=>[d("Description")]),_:1})]),_:2},1024),t(v,{side:""},{default:e(()=>[t(g,{icon:"delete",color:"red",outline:"",onClick:I=>B(p.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)),[[O]])),128))]),_:1})])])])])]))}};export{me as default};
