import{h as o,c as D,K as P,L as R,t as f,o as B,a as E,C as c,R as d,J as t,F as e,E as a,P as v,aI as V,Q as w,S,T,U as O,D as k,V as $,I as r,av as x,O as z,M as j,W as F}from"./index.c5a9bf68.js";import{a as u,b as g,Q as b}from"./QItemLabel.e6944c79.js";import{Q}from"./QList.41fcd788.js";import{u as J}from"./use-quasar.ec7442dd.js";import{api_web as K}from"./axios.75ab8407.js";const U=[o("circle",{cx:"15",cy:"15",r:"15"},[o("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),o("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]),o("circle",{cx:"60",cy:"15",r:"9","fill-opacity":".3"},[o("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),o("animate",{attributeName:"fill-opacity",from:".5",to:".5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})]),o("circle",{cx:"105",cy:"15",r:"15"},[o("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),o("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})])];var W=D({name:"QSpinnerDots",props:P,setup(C){const{cSize:p,classes:h}=R(C);return()=>o("svg",{class:h.value,fill:"currentColor",width:p.value,height:p.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg"},U)}});const G={class:"q-pa-md"},H=t("div",{class:"row q-pb-md"},[t("div",{class:"col"},[t("span",{class:"text-h4"},"POS")]),t("div",{class:"col text-right"})],-1),X={class:"row bg-grey q-pa-md full-width",style:{height:"86vh"}},Y={class:"col-4 q-pa-xs"},Z={class:"row bg-white"},ee={class:"col",style:{height:"50vh",overflow:"auto"}},te={class:"row q-pt-xs",style:{height:"30vh"}},ae={class:"col bg-white vertical-middle"},se={class:"row"},le={class:"col q-pa-sm",style:{height:"20vh"}},oe={class:"text-h6 text-bold"},ie={class:"row",style:{height:"10vh"}},ce={class:"col-sm-6 col-12 q-pa-sm"},ne={class:"col-sm-6 col-12 q-pa-sm"},re={class:"col q-pa-xs"},de={class:"row bg-white",style:{height:"80vh",overflow:"auto"}},ue={class:"col",style:{"max-height":"300px"}},_e={class:"row q-col-gutter-sm"},me={class:"text-center"},ve={class:"row items-center"},pe={class:"col text-bold ellipsis"},he={key:0,class:"row justify-center q-my-md"},fe={key:1,class:"row justify-center q-my-md"},Ce={__name:"posSalesIndex",setup(C){const p=J(),h=f([]),n=f([]),_=f(!1),y=f(0);B(()=>{I("")});const q=E(()=>n.value.length>0?n.value.reduce((s,i)=>s+i.LATEST_PRC,0):0),I=async s=>{_.value=!0,y.value=y.value+1,await K.post("item/searchAPIStockAndPriceOnly",{searchValue:s,page:y.value}).then(i=>{_.value=!1,i.data.data.data.map(l=>{let m=n.value.findIndex(M=>M.MITM_ITMCD===l.MITM_ITMCD);console.log(m),m===-1&&h.value.push(l)})}).catch(()=>{_.value=!1})},N=s=>{n.value.push(s)},A=async(s,i)=>{await I(""),i()},L=s=>{p.dialog({title:"Confirmation",message:"Are you sure want to delete this line ??",cancel:!0,persistent:!0}).onOk(async()=>{n.value.splice(s,1)})};return(s,i)=>(c(),d("div",G,[H,t("div",X,[t("div",Y,[t("div",Z,[t("div",ee,[e(Q,{bordered:"",loading:_.value},{default:a(()=>[n.value.length>0?(c(!0),d(S,{key:0},T(n.value,l=>O((c(),k(b,{key:l.id,class:"q-my-sm"},{default:a(()=>[e(u,{avatar:""},{default:a(()=>[e($,{color:"primary","text-color":"white",icon:"category"})]),_:1}),e(u,null,{default:a(()=>[e(g,null,{default:a(()=>[r(v(l.MITM_ITMNM),1)]),_:2},1024),e(g,{caption:"",lines:"1"},{default:a(()=>[r(v(l.LATEST_PRC),1)]),_:2},1024)]),_:2},1024),e(u,{side:""},{default:a(()=>[e(x,{name:"delete",color:"red",onClick:i[0]||(i[0]=m=>L(s.idx))})]),_:1})]),_:2},1024)),[[F]])),128)):(c(),k(b,{key:1},{default:a(()=>[e(u,null,{default:a(()=>[r(" No item selected!! ")]),_:1})]),_:1}))]),_:1},8,["loading"])])]),t("div",te,[t("div",ae,[t("div",se,[t("div",le,[t("div",oe,"Total : Rp. "+v(q.value),1)])]),e(V),t("div",ie,[t("div",ce,[e(w,{color:"primary",class:"full-width"},{default:a(()=>[r(" Submit ")]),_:1})]),t("div",ne,[e(w,{color:"red",class:"full-width"},{default:a(()=>[r(" Cancel ")]),_:1})])])])])]),t("div",re,[t("div",de,[t("div",ue,[t("div",_e,[(c(!0),d(S,null,T(h.value,(l,m)=>(c(),d("div",{class:"col-6",key:`sm-${m}`},[e(j,{flat:"",bordered:""},{default:a(()=>[t("div",me,[e(x,{name:"category",size:"8em"})]),e(z,null,{default:a(()=>[t("div",ve,[t("div",pe,v(l.MITM_ITMNM),1)])]),_:2},1024),e(Q,null,{default:a(()=>[e(b,{clickable:"",onClick:M=>N(l)},{default:a(()=>[e(u,{avatar:""},{default:a(()=>[e(x,{color:"primary",name:"add"})]),_:1}),e(u,null,{default:a(()=>[e(g,null,{default:a(()=>[r("Add Item")]),_:1}),e(g,{caption:""},{default:a(()=>[r("Rp. "+v(l.LATEST_PRC),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]))),128))]),_.value?(c(),d("div",he,[e(W,{color:"primary",size:"40px"})])):(c(),d("div",fe,[e(w,{color:"primary",label:"Load more",onClick:A})]))])])])])]))}};export{Ce as default};
