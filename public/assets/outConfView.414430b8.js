import{s as p,o as q,B as _,C as y,D as l,E as e,L as B,M as O,I as a,O as I,P as h,R as k,S as w,bc as P,Z as Q,Q as b,W as F,X as R,Y as K,aX as X,am as z,H as T}from"./index.6164eeef.js";import{a as E,u as W,l as N,k as Y,m as S}from"./QTable.4d64f8a2.js";import{Q as U,a as $}from"./QTd.17678bc8.js";import{Q as Z}from"./QTooltip.1e89cd77.js";import{api_web as A}from"./axios.88e3114f.js";const j={class:"text-h6"},G={style:{border:"1px black solid","border-radius":"10px"}},J=a("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[a("b",null,"Item Checker")],-1),ee={class:"col"},ae={class:"col q-pl-md"},le={class:"col q-pl-md"},oe={style:{border:"1px black solid","border-radius":"10px",height:"35vh",overflow:"auto"}},te={style:{"margin-left":"1em",padding:"0.2em 0.8em"}},se={class:"row"},ne=a("div",{class:"col"},[a("b",null,"Accesories")],-1),ie={class:"col text-right"},de=a("div",{class:"row"},[a("div")],-1),re={__name:"onCheckItem",props:{idHead:String,dataHeader:Array},setup(L){const C=E(),g=L,f=p([]),r=p([]),t=p(!1);q(()=>{f.value=g.dataHeader.dlvdet,v()});const v=async c=>{t.value=!0,await A.post("item/searchAPITBL",{searchValue:c}).then(s=>{t.value=!1,r.value=s.data.data}).catch(()=>{t.value=!1})},V=(c,s,d,D)=>{s(async()=>{D==="item"&&await v(c)})},M=()=>{const c=f.value.filter(s=>!s.TDLVORDDETA_ITMCD_ACT);c.length>0?c.map(s=>{C.notify({color:"negative",message:`item ${s.MITM_ITMNMREAL} item actual not filled yet, please add it first !!`})}):C.dialog({title:"Confirmation",message:"Are you sure want to save this outgoing ?",cancel:!0,persistent:!0}).onOk(async()=>{t.value=!0,await A.post("delivery/confirm",{id:g.idHead,data:f.value}).then(s=>{t.value=!1,r.value=s.data.data}).catch(()=>{t.value=!1})})},{dialogRef:n,onDialogHide:i,onDialogOK:o,onDialogCancel:u}=W();return(c,s)=>(_(),y(K,{ref_key:"dialogRef",ref:n,onHide:R(i),"transition-show":"slide-up","transition-hide":"slide-down","full-width":""},{default:l(()=>[e(B,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:l(()=>[e(O,null,{default:l(()=>[a("div",j,"Item Check "+I(c.val),1)]),_:1}),e(O,null,{default:l(()=>[a("fieldset",G,[J,(_(!0),h(k,null,w(f.value,(d,D)=>(_(),h("div",{class:P(`row ${D>0?"q-pt-md":""}`),key:D},[a("div",ee,[e(Q,{filled:"",dense:"",label:"Item Request",modelValue:d.MITM_ITMNMREAL,"onUpdate:modelValue":m=>d.MITM_ITMNMREAL=m,readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),a("div",ae,[e(Q,{filled:"",dense:"",label:"Qty",modelValue:d.TDLVORDDETA_ITMQT,"onUpdate:modelValue":m=>d.TDLVORDDETA_ITMQT=m,readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),a("div",le,[e(N,{dense:"",filled:"",label:"Item Code Confirmation",modelValue:d.TDLVORDDETA_ITMCD_ACT,"onUpdate:modelValue":m=>d.TDLVORDDETA_ITMCD_ACT=m,"use-input":"","input-debounce":"500",options:r.value,onFilter:(m,H,x)=>V(m||d.MITM_ITMNMREAL,H,x,"item"),behavior:"dialog","option-label":"MITM_ITMNM","option-value":"MITM_ITMCD","emit-value":"","map-options":"",loading:t.value},null,8,["modelValue","onUpdate:modelValue","options","onFilter","loading"])])],2))),128))]),a("fieldset",oe,[a("legend",te,[a("div",se,[ne,a("div",ie,[e(b,{icon:"add",color:"indigo",flat:"",dense:""})])])]),de])]),_:1}),e(F,{align:"right"},{default:l(()=>[e(b,{label:"OK",color:"primary",onClick:s[0]||(s[0]=d=>M()),loading:t.value},null,8,["loading"]),e(b,{flat:"",label:"Cancel",color:"red",onClick:R(u)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},ue={class:"q-pa-md"},ce=a("div",{class:"row q-pb-md"},[a("div",{class:"col"},[a("span",{class:"text-h4"},"Outgoing Confirmation")])],-1),me={class:"row q-pt-md"},pe={class:"col"},Ce={__name:"outConfView",setup(L){const C=E(),g=p([]),f=p([{name:"TDLVORD_DLVCD",label:"DO Number",field:"TDLVORD_DLVCD",sortable:!0,align:"left"},{name:"MCUS_CUSNM",label:"Customer",field:"MCUS_CUSNM",sortable:!0,align:"left"}]),r=p(!1),t=p(""),v=p("");q(()=>{V()});const V=async()=>{r.value=!0,await A.post("delivery/unconfirmed",{searchBy:t.value,searchValue:v.value}).then(n=>{r.value=!1,g.value=n.data.data}).catch(n=>{r.value=!1})},M=n=>{console.log(n),C.dialog({component:re,componentProps:{idHead:n.TDLVORD_DLVCD,dataHeader:n}}).onOk(async i=>{})};return(n,i)=>(_(),h("div",ue,[ce,e(X),a("div",me,[a("div",pe,[e(Y,{title:"Outstanding Confirmation",rows:g.value,columns:f.value,"row-key":"name",loading:r.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":l(()=>[e(N,{outlined:"",modelValue:t.value,"onUpdate:modelValue":i[0]||(i[0]=o=>t.value=o),options:f.value,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),e(Q,{borderless:"",dense:"",modelValue:v.value,"onUpdate:modelValue":[i[1]||(i[1]=o=>v.value=o),i[2]||(i[2]=o=>n.dataOutstanding())],placeholder:"Search",outlined:"",debounce:"1000"},{append:l(()=>[e(z,{name:"search"})]),_:1},8,["modelValue"])]),header:l(o=>[e(U,{props:o},{default:l(()=>[(_(!0),h(k,null,w(o.cols,u=>(_(),y(S,{key:u.name,props:o},{default:l(()=>[T(I(u.label),1)]),_:2},1032,["props"]))),128)),e(S,{"auto-width":""},{default:l(()=>[T("Action")]),_:1})]),_:2},1032,["props"])]),body:l(o=>[e(U,{props:o},{default:l(()=>[(_(!0),h(k,null,w(o.cols,u=>(_(),y($,{key:u.name,props:o},{default:l(()=>[T(I(u.value),1)]),_:2},1032,["props"]))),128)),e($,{"auto-width":""},{default:l(()=>[e(b,{flat:"",color:"green",icon:"check",onClick:u=>M(o.row),dense:""},{default:l(()=>[e(Z,null,{default:l(()=>[T("Confirm Delivery")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{Ce as default};
