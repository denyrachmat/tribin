import{s as m,o as $,B as p,C as b,D as a,E as e,L as P,M as O,I as d,O as I,P as T,R as y,S as Q,bc as F,Z as k,W as x,Q as w,X as R,Y as K,aX as X,am as z,H as h}from"./index.623ba04c.js";import{a as q,u as W,l as E,k as Y,m as S}from"./QTable.d1cea305.js";import{Q as U,a as N}from"./QTd.3ab04198.js";import{Q as Z}from"./QTooltip.446f1a4b.js";import{api_web as A}from"./axios.b446407d.js";const j={class:"text-h6"},G={class:"col"},J={class:"col q-pl-md"},ee={class:"col q-pl-md"},ae={__name:"onCheckItem",props:{idHead:String,dataHeader:Array},setup(L){const C=q(),g=L,f=m([]),u=m([]),t=m(!1);$(()=>{f.value=g.dataHeader.dlvdet,v()});const v=async c=>{t.value=!0,await A.post("item/searchAPITBL",{searchValue:c}).then(o=>{t.value=!1,u.value=o.data.data}).catch(()=>{t.value=!1})},M=(c,o,i,D)=>{o(async()=>{D==="item"&&await v(c)})},V=()=>{const c=f.value.filter(o=>!o.TDLVORDDETA_ITMCD_ACT);c.length>0?c.map(o=>{C.notify({color:"negative",message:`item ${o.MITM_ITMNMREAL} item actual not filled yet, please add it first !!`})}):C.dialog({title:"Confirmation",message:"Are you sure want to save this outgoing ?",cancel:!0,persistent:!0}).onOk(async()=>{t.value=!0,await A.post("delivery/confirm",{id:g.idHead,data:f.value}).then(o=>{t.value=!1,u.value=o.data.data}).catch(()=>{t.value=!1})})},{dialogRef:n,onDialogHide:s,onDialogOK:l,onDialogCancel:r}=W();return(c,o)=>(p(),b(K,{ref_key:"dialogRef",ref:n,onHide:R(s),"transition-show":"slide-up","transition-hide":"slide-down","full-width":""},{default:a(()=>[e(P,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:a(()=>[e(O,null,{default:a(()=>[d("div",j,"Item Check "+I(c.val),1)]),_:1}),e(O,null,{default:a(()=>[(p(!0),T(y,null,Q(f.value,(i,D)=>(p(),T("div",{class:F(`row ${D>0?"q-pt-md":""}`),key:D},[d("div",G,[e(k,{filled:"",dense:"",label:"Item Request",modelValue:i.MITM_ITMNMREAL,"onUpdate:modelValue":_=>i.MITM_ITMNMREAL=_,readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),d("div",J,[e(k,{filled:"",dense:"",label:"Qty",modelValue:i.TDLVORDDETA_ITMQT,"onUpdate:modelValue":_=>i.TDLVORDDETA_ITMQT=_,readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),d("div",ee,[e(E,{dense:"",filled:"",label:"Item Name",modelValue:i.TDLVORDDETA_ITMCD_ACT,"onUpdate:modelValue":_=>i.TDLVORDDETA_ITMCD_ACT=_,"use-input":"","input-debounce":"500",options:u.value,onFilter:(_,H,B)=>M(i.MITM_ITMNMREAL,H,B,"item"),behavior:"dialog","option-label":"MITM_ITMNM","option-value":"MITM_ITMCD","emit-value":"","map-options":"",loading:t.value},null,8,["modelValue","onUpdate:modelValue","options","onFilter","loading"])])],2))),128))]),_:1}),e(x,{align:"right"},{default:a(()=>[e(w,{label:"OK",color:"primary",onClick:o[0]||(o[0]=i=>V()),loading:t.value},null,8,["loading"]),e(w,{flat:"",label:"Cancel",color:"red",onClick:R(r)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},le={class:"q-pa-md"},te=d("div",{class:"row q-pb-md"},[d("div",{class:"col"},[d("span",{class:"text-h4"},"Outgoing Confirmation")])],-1),oe={class:"row q-pt-md"},ne={class:"col"},ce={__name:"outConfView",setup(L){const C=q(),g=m([]),f=m([{name:"TDLVORD_DLVCD",label:"DO Number",field:"TDLVORD_DLVCD",sortable:!0,align:"left"},{name:"MCUS_CUSNM",label:"Customer",field:"MCUS_CUSNM",sortable:!0,align:"left"}]),u=m(!1),t=m(""),v=m("");$(()=>{M()});const M=async()=>{u.value=!0,await A.post("delivery/unconfirmed",{searchBy:t.value,searchValue:v.value}).then(n=>{u.value=!1,g.value=n.data.data}).catch(n=>{u.value=!1})},V=n=>{console.log(n),C.dialog({component:ae,componentProps:{dataHeader:n}}).onOk(async s=>{})};return(n,s)=>(p(),T("div",le,[te,e(X),d("div",oe,[d("div",ne,[e(Y,{title:"Outstanding Confirmation",rows:g.value,columns:f.value,"row-key":"name",loading:u.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":a(()=>[e(E,{outlined:"",modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=l=>t.value=l),options:f.value,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),e(k,{borderless:"",dense:"",modelValue:v.value,"onUpdate:modelValue":[s[1]||(s[1]=l=>v.value=l),s[2]||(s[2]=l=>n.dataOutstanding())],placeholder:"Search",outlined:"",debounce:"1000"},{append:a(()=>[e(z,{name:"search"})]),_:1},8,["modelValue"])]),header:a(l=>[e(U,{props:l},{default:a(()=>[(p(!0),T(y,null,Q(l.cols,r=>(p(),b(S,{key:r.name,props:l},{default:a(()=>[h(I(r.label),1)]),_:2},1032,["props"]))),128)),e(S,{"auto-width":""},{default:a(()=>[h("Action")]),_:1})]),_:2},1032,["props"])]),body:a(l=>[e(U,{props:l},{default:a(()=>[(p(!0),T(y,null,Q(l.cols,r=>(p(),b(N,{key:r.name,props:l},{default:a(()=>[h(I(r.value),1)]),_:2},1032,["props"]))),128)),e(N,{"auto-width":""},{default:a(()=>[e(w,{flat:"",color:"green",icon:"check",onClick:r=>V(l.row),dense:""},{default:a(()=>[e(Z,null,{default:a(()=>[h("Confirm Delivery")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{ce as default};
