import{Q as S}from"./QTooltip.014b20b3.js";import{s as m,o as j,B as I,C as w,D as l,E as e,J,K as Q,I as a,P as g,L as W,Q as f,M as R,O as X,aa as Z,aW as x,H as M,R as $,aU as q,aV as A,aZ as le,aX as H,ap as ae,S as te}from"./index.bc62d882.js";import{u as z,b as P,c as N,Q as oe,j as B,k as U,l as L,a as se,m as K}from"./use-dialog-plugin-component.3e337959.js";import{Q as Y,a as F}from"./date.111edd3c.js";import{api_web as O}from"./axios.f5ecefef.js";import{Q as ne,a as de,C as ie}from"./ClosePopup.c0c301ae.js";const ue=a("div",{class:"text-h6"},"Create Item Master",-1),re={class:"row"},ce={class:"col"},me={class:"col q-pl-md"},_e={class:"row q-pt-md"},pe={class:"col"},ve={class:"col q-pl-md"},fe={class:"row q-pt-md"},Me={class:"col"},Ce={class:"col q-pl-md"},Ie={class:"row q-pt-md"},ge={class:"col"},Ve={__name:"itemCreate",setup(E){const{dialogRef:k,onDialogHide:V,onDialogOK:T,onDialogCancel:h}=z(),D=P(),t=m({MITM_ITMCD:"",MITM_ITMNM:"",MITM_STKUOM:"",MITM_ITMTYPE:1,MITM_BRAND:"",MITM_MODEL:"",MITM_SPEC:"",MITM_ITMCAT:"",MITM_COACD:""}),p=m(!1),v=m([]),r=m([]);j(()=>{d()});const _=(u,s,n,i)=>{s(async()=>{await O.post("item/getListCoasAPI",{search:u}).then(o=>{r.value=o.data})})},C=()=>{D.dialog({title:"Confirmation",message:"Do you want to save this item ?",cancel:!0,persistent:!0}).onOk(async()=>{await O.post("item",t.value).then(u=>{T(u.data.data.value)})})},d=async()=>{p.value=!0,await O.get("item/formAPI").then(u=>{p.value=!1,v.value=u.data.uoms,r.value=u.data.coas}).catch(()=>{p.value=!1})};return(u,s)=>(I(),w(X,{ref_key:"dialogRef",ref:k,onHide:R(V),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:l(()=>[e(J,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:l(()=>[e(Q,null,{default:l(()=>[ue]),_:1}),e(Q,{class:"q-pa-sm"},{default:l(()=>[a("div",re,[a("div",ce,[e(g,{label:"Item Code",dense:"",modelValue:t.value.MITM_ITMCD,"onUpdate:modelValue":s[0]||(s[0]=n=>t.value.MITM_ITMCD=n),filled:""},null,8,["modelValue"])]),a("div",me,[e(g,{label:"Item Name",dense:"",modelValue:t.value.MITM_ITMNM,"onUpdate:modelValue":s[1]||(s[1]=n=>t.value.MITM_ITMNM=n),filled:""},null,8,["modelValue"])])]),a("div",_e,[a("div",pe,[e(N,{dense:"",filled:"",label:"UOM",modelValue:t.value.MITM_STKUOM,"onUpdate:modelValue":s[2]||(s[2]=n=>t.value.MITM_STKUOM=n),options:v.value,behavior:"dialog","option-label":"MUOM_UOMNM","option-value":"MUOM_UOMCD","emit-value":"","map-options":"",loading:p.value},null,8,["modelValue","options","loading"])]),a("div",ve,[e(g,{label:"Item Brand",dense:"",modelValue:t.value.MITM_BRAND,"onUpdate:modelValue":s[3]||(s[3]=n=>t.value.MITM_BRAND=n),filled:""},null,8,["modelValue"])])]),a("div",fe,[a("div",Me,[e(g,{label:"Item Model",dense:"",modelValue:t.value.MITM_MODEL,"onUpdate:modelValue":s[4]||(s[4]=n=>t.value.MITM_MODEL=n),filled:""},null,8,["modelValue"])]),a("div",Ce,[e(g,{label:"Item Specification",dense:"",modelValue:t.value.MITM_SPEC,"onUpdate:modelValue":s[5]||(s[5]=n=>t.value.MITM_SPEC=n),filled:""},null,8,["modelValue"])])]),a("div",Ie,[a("div",ge,[e(N,{dense:"",filled:"",label:"COA",modelValue:t.value.MITM_COACD,"onUpdate:modelValue":s[6]||(s[6]=n=>t.value.MITM_COACD=n),options:r.value,"use-input":"",behavior:"dialog","option-label":"MCOA_COANM","option-value":"MCOA_COACD",onFilter:s[7]||(s[7]=(n,i,o)=>_(n,i,o)),"emit-value":"","map-options":"",loading:p.value},null,8,["modelValue","options","loading"])])])]),_:1}),e(W,{align:"right"},{default:l(()=>[e(f,{label:"OK",color:"primary",onClick:s[8]||(s[8]=n=>C())}),e(f,{flat:"",label:"Cancel",color:"red",onClick:R(h)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},De=a("div",{class:"text-h6"},"Create Order",-1),be={style:{border:"1px black solid","border-radius":"10px"}},Te=a("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[a("b",null,"Header")],-1),he={class:"row"},Se={class:"col"},we={class:"col q-pl-md"},Oe={class:"row items-center justify-end"},ke={class:"row"},ye={class:"col"},Ue={style:{border:"1px black solid","border-radius":"10px",height:"35vh",overflow:"auto"}},$e=a("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[a("b",null,"Detail Items")],-1),Qe={class:"row q-pb-sm"},Re={class:"col text-right"},Ne={__name:"serviceCreateOrder",setup(E){const{dialogRef:k,onDialogHide:V,onDialogOK:T,onDialogCancel:h}=z(),D=P(),t=m({SRVH_DOCNO:"",SRVH_ISSDT:"",SRVH_CUSCD:""}),p=m([]),v=m([]),r=m(!1),_=(i,o,c,b)=>{o(async()=>{b==="cust"&&await C(i),b==="item"&&await d(i)})},C=async i=>{r.value=!0,await O.post("customer/searchAPI",{searchValue:i}).then(o=>{r.value=!1,listCustomers.value=o.data.data}).catch(()=>{r.value=!1})},d=async i=>{r.value=!0,await O.post("item/searchAPI",{searchValue:i}).then(o=>{r.value=!1,p.value=o.data.data}).catch(()=>{r.value=!1})},u=()=>{v.value.push({TSRVD_ITMCD:"",TSRVD_LINE:v.value.length+1})},s=i=>{D.dialog({title:"Confirmation",message:`Do you want to delete this lines no ${i+1} ?`,cancel:!0,persistent:!0}).onOk(async()=>{v.value.splice(i,1)})},n=i=>{D.dialog({component:Ve}).onOk(async o=>{v.value[i].TSRVD_ITMCD=o.MITM_ITMNM})};return(i,o)=>(I(),w(X,{ref_key:"dialogRef",ref:k,onHide:R(V),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:l(()=>[e(J,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:l(()=>[e(Q,null,{default:l(()=>[De]),_:1}),e(Q,{class:"q-pa-sm"},{default:l(()=>[a("fieldset",be,[Te,a("div",he,[a("div",Se,[e(g,{label:"SPK No",readonly:"",dense:"",modelValue:t.value.SRVH_DOCNO,"onUpdate:modelValue":o[0]||(o[0]=c=>t.value.SRVH_DOCNO=c),filled:""},null,8,["modelValue"])]),a("div",we,[e(g,{filled:"",modelValue:t.value.SRVH_ISSDT,"onUpdate:modelValue":o[2]||(o[2]=c=>t.value.SRVH_ISSDT=c),dense:"",label:"Issue Date",loading:r.value,onClick:o[3]||(o[3]=c=>i.quotationIssueDate.qDateProxy.show()),mask:"####-##-##","fill-mask":"",hint:"Mask: YYYY-MM-DD"},{append:l(()=>[e(Z,{name:"event",class:"cursor-pointer"},{default:l(()=>[e(ne,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(de,{modelValue:t.value.SRVH_ISSDT,"onUpdate:modelValue":o[1]||(o[1]=c=>t.value.SRVH_ISSDT=c),mask:"YYYY-MM-DD"},{default:l(()=>[a("div",Oe,[x(e(f,{label:"Close",color:"primary",flat:""},null,512),[[ie]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","loading"])])]),a("div",ke,[a("div",ye,[e(g,{label:"Customer Choose",dense:"",modelValue:t.value.SRVH_CUSCD,"onUpdate:modelValue":o[4]||(o[4]=c=>t.value.SRVH_CUSCD=c),filled:""},null,8,["modelValue"])])])]),a("fieldset",Ue,[$e,a("div",Qe,[a("div",Re,[e(f,{flat:"",icon:"add",color:"blue",onClick:o[5]||(o[5]=c=>u())},{default:l(()=>[e(S,null,{default:l(()=>[M("Add lines")]),_:1})]),_:1})])]),e(oe,{bordered:"",dense:""},{default:l(()=>[v.value.length>0?(I(!0),$(q,{key:0},A(v.value,(c,b)=>(I(),w(B,{key:b,class:"q-my-sm",dense:""},{default:l(()=>[e(U,{avatar:""},{default:l(()=>[e(le,{"text-color":"blue"},{default:l(()=>[M(H(b+1),1)]),_:2},1024)]),_:2},1024),e(U,null,{default:l(()=>[e(L,null,{default:l(()=>[e(N,{dense:"",filled:"",label:"Item Name",modelValue:c.TSRVD_ITMCD,"onUpdate:modelValue":y=>c.TSRVD_ITMCD=y,"use-input":"","input-debounce":"500",options:p.value,onFilter:o[6]||(o[6]=(y,G,ee)=>_(y,G,ee,"item")),behavior:"dialog","option-label":"MITM_ITMNM","option-value":"MITM_ITMNM","emit-value":"","map-options":"",loading:r.value},null,8,["modelValue","onUpdate:modelValue","options","loading"])]),_:2},1024)]),_:2},1024),e(U,{side:""},{default:l(()=>[e(f,{icon:"delete",color:"red",flat:"",onClick:y=>s(b)},{default:l(()=>[e(S,null,{default:l(()=>[M("Delete line")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024),e(U,{side:""},{default:l(()=>[e(f,{icon:"library_add",color:"indigo",flat:"",onClick:y=>n(b)},{default:l(()=>[e(S,null,{default:l(()=>[M("Add new item")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)):x((I(),w(B,{key:1,class:"q-my-sm",clickable:""},{default:l(()=>[e(U,null,{default:l(()=>[e(L,null,{default:l(()=>[M(" No Items Added ")]),_:1})]),_:1})]),_:1})),[[ae]])]),_:1})])]),_:1}),e(W,{align:"right"},{default:l(()=>[e(f,{label:"OK",color:"primary",onClick:o[7]||(o[7]=c=>i.onSubmitData()),disable:i.stateSubmit},null,8,["disable"]),e(f,{flat:"",label:"Cancel",color:"red",onClick:R(h)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}};const qe={class:"q-pa-md"},Ae={class:"row q-pb-md"},He=a("div",{class:"col"},[a("span",{class:"text-h4"},"Receive Order ")],-1),Pe={class:"col text-right"},Ee={class:"row q-pt-md"},xe={class:"col"},Je={__name:"serviceView",setup(E){const k=P(),V=m("SRVH_DOCNO"),T=m(""),h=m([]),D=m([{name:"SRVH_DOCNO",label:"SPK No",field:"SRVH_DOCNO",sortable:!0,align:"left"},{name:"SRVH_CUSCD",label:"Cust",field:"SRVH_CUSCD",sortable:!0,align:"left"},{name:"created_at",label:"Created Date",field:"created_at",sortable:!0,align:"left"}]),t=m(!1);j(()=>{p()});const p=async()=>{t.value=!0,await O.post("service/search",{searchBy:V.value,searchValue:T.value}).then(_=>{t.value=!1,h.value=_.data.data}).catch(_=>{t.value=!1})},v=()=>{k.dialog({component:Ne}).onOk(async _=>{p()})},r=_=>{window.open("https://joss.jatpowerindo.co.id/PDF/quotation/"+btoa(_),"_blank").focus()};return(_,C)=>(I(),$("div",qe,[a("div",Ae,[He,a("div",Pe,[e(f,{icon:"add",color:"blue",onClick:v},{default:l(()=>[e(S,null,{default:l(()=>[M("Create New Order")]),_:1})]),_:1})])]),e(te),a("div",Ee,[a("div",xe,[e(se,{title:"Created Order",rows:h.value,columns:D.value,"row-key":"name",loading:t.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":l(()=>[e(N,{outlined:"",modelValue:V.value,"onUpdate:modelValue":C[0]||(C[0]=d=>V.value=d),options:D.value,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),e(g,{borderless:"",dense:"",modelValue:T.value,"onUpdate:modelValue":[C[1]||(C[1]=d=>T.value=d),C[2]||(C[2]=d=>_.dataQuo())],placeholder:"Search",outlined:"",debounce:"1000"},{append:l(()=>[e(Z,{name:"search"})]),_:1},8,["modelValue"])]),header:l(d=>[e(Y,{props:d},{default:l(()=>[(I(!0),$(q,null,A(d.cols,u=>(I(),w(K,{key:u.name,props:d},{default:l(()=>[M(H(u.label),1)]),_:2},1032,["props"]))),128)),e(K,{"auto-width":""},{default:l(()=>[M("Action")]),_:1})]),_:2},1032,["props"])]),body:l(d=>[e(Y,{props:d},{default:l(()=>[(I(!0),$(q,null,A(d.cols,u=>(I(),w(F,{key:u.name,props:d},{default:l(()=>[M(H(u.value),1)]),_:2},1032,["props"]))),128)),e(F,{"auto-width":""},{default:l(()=>[e(f,{flat:"",color:"orange",icon:"edit",onClick:u=>_.onClickEdit(d.row.TQUO_QUOCD),dense:""},{default:l(()=>[e(S,null,{default:l(()=>[M("Edit this quotation")]),_:1})]),_:2},1032,["onClick"]),e(f,{flat:"",color:"indigo",icon:"print",onClick:u=>r(d.row.TQUO_QUOCD),dense:""},{default:l(()=>[e(S,null,{default:l(()=>[M("Print this order")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{Je as default};
