import{s as c,o as R,B as D,R as g,I as a,E as s,D as o,P as v,aa as C,J as V,K as _,ba as b,aX as r,S as w,Q as T}from"./index.8493f37b.js";import{b as p,a as O}from"./use-dialog-plugin-component.f1a43afb.js";import{d as x}from"./date.8a90fd9b.js";import{api_web as N}from"./axios.ae214d7d.js";import{_ as I}from"./serviceOprUpdateOrder.b7910825.js";import"./QTooltip.23b0df1e.js";import"./QBadge.4ce888c4.js";const U={class:"q-pa-md"},H={class:"row"},Q={class:"col"},M={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},P={class:"text-h5 text-bold"},k={class:"text-h6 text-bold"},y={class:"text-subtitle2"},B={class:"text-h6 text-bold"},E=a("div",{class:"text-subtitle2"},"Resolved Items",-1),K={class:"row"},L={class:"col"},Y=a("div",{class:"col text-right"},null,-1),j={__name:"serviceOprView",setup($){const h=p();c([{name:"SRVH_DOCNO",label:"SPK No",field:"SRVH_DOCNO",sortable:!0,align:"left"},{name:"MCUS_CUSNM",label:"Customer Name",field:"MCUS_CUSNM",sortable:!0,align:"left"},{name:"resolve",label:"Resolved Line",sortable:!0,align:"left",field:e=>e.resolve.length},{name:"unresolve",label:"Unresolved Line",sortable:!0,align:"left",field:e=>e.unresolve.length},{name:"SRVH_ISSDT",label:"Submited Date",field:"SRVH_ISSDT",sortable:!0,align:"left"}]);const u=c([]),n=c(""),i=c(!1);R(()=>{m()});const m=async()=>{i.value=!0,await N.post("servicesOPR/search",{searchBy:"",searchValue:n.value}).then(e=>{i.value=!1,u.value=e.data.data}).catch(e=>{i.value=!1})},f=(e,d)=>{const t={SRVH_DOCNO:e.SRVH_DOCNO,SRVH_ISSDT:x.formatDate(e.SRVH_ISSDT,"YYYY-MM-DD"),SRVH_CUSCD:e.MCUS_CUSCD};let S=[];e.detail.map(l=>{S.push({id:l.id,TSRVD_ITMCD:l.TSRVD_ITMCD,TSRVD_FLGSTS:l.TSRVD_FLGSTS,TSRVD_LINE:l.TSRVD_LINE,TSRVD_QTY:l.TSRVD_QTY,TSRVD_CUSTRMK:l.TSRVD_CUSTRMK,TSRVD_REMARK:l.TSRVD_REMARK,listFixDet:l.list_fix_det})}),h.dialog({component:I,componentProps:{header:t,detail:S,mode:d}}).onOk(async l=>{m()})};return(e,d)=>(D(),g("div",U,[a("div",H,[a("div",Q,[s(O,{grid:"",flat:"",bordered:"","card-container-class":e.cardContainerClass,title:"Outstanding Order",rows:u.value,columns:e.columns,"row-key":"name",filter:n.value,"hide-header":"",pagination:{rowsPerPage:50},"rows-per-page-options":e.rowsPerPageOptions,loading:i.value},{"top-right":o(()=>[s(v,{borderless:"",dense:"",debounce:"300",modelValue:n.value,"onUpdate:modelValue":d[0]||(d[0]=t=>n.value=t),placeholder:"Search"},{append:o(()=>[s(C,{name:"search"})]),_:1},8,["modelValue"])]),item:o(t=>[a("div",M,[s(V,{flat:"",bordered:""},{default:o(()=>[s(_,{class:b(`text-center ${t.row.resolve.length==t.row.detail.length?"bg-indigo ":"bg-secondary "}text-white`)},{default:o(()=>[a("div",P,r(t.row.SRVH_DOCNO),1)]),_:2},1032,["class"]),s(w),s(_,null,{default:o(()=>[a("div",k,r(t.row.MCUS_CUSNM),1),a("div",y,r(t.row.SRVH_ISSDT),1)]),_:2},1024),s(_,null,{default:o(()=>[a("div",B,r(t.row.resolve.length)+" of "+r(t.row.detail.length),1),E]),_:2},1024),s(_,null,{default:o(()=>[a("div",K,[a("div",L,[s(T,{label:"Resolve",color:"primary",outline:"",onClick:S=>f(t.row,t.row.resolve.length==t.row.detail.length?"approve":"edit")},null,8,["onClick"])]),Y])]),_:2},1024)]),_:2},1024)])]),_:1},8,["card-container-class","rows","columns","filter","rows-per-page-options","loading"])])])]))}};export{j as default};
