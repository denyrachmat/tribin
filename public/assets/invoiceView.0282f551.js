import{a as I,u as A,k as B,l as N,m as L}from"./QTable.9a4dd24b.js";import{o as P,s,B as c,C as k,D as a,E as o,L as E,M as Q,I as f,bl as G,Q as p,H as d,O as S,X as M,Y as q,P as V,Z as x,am as W,R as O,S as J}from"./index.81debb10.js";import{Q as R,a as $}from"./QTd.8b10fcb9.js";import{Q as g}from"./QTooltip.d2e4dac2.js";import{api_web as w}from"./axios.134ed65c.js";import{Q as j}from"./QBadge.b4b68174.js";import{_ as H}from"./assignConditionsView.05b2b524.js";import{_ as F}from"./viewAssignedCond.51588ae4.js";const K=f("div",{class:"text-h6"},"Update Surat Jalan",-1),Y={class:"row"},X={class:"col"},Z={class:"col text-right"},z={__name:"updateSJ",props:{dataSJDB:Array},setup(y){const m=I(),v=y;P(()=>{v.dataSJDB&&(u.value=v.dataSJDB)});const D=s([{label:"General",value:"general"},{label:"Forklift",value:"forklift"},{label:"Genset",value:"genset"}]),l=s(""),u=s({TDLVSJDETA_DLVCD:"",TDLVSJDETA_TYPE:"",TDLVSJDETA_CONDGRP:"",TDLVSJDETA_STARTDT:"",TDLVSJDETA_ENDDT:""}),r=s([]),_=s(!1),C=()=>{m.dialog({component:H}).onOk(async e=>{u.value.TDLVSJDETA_CONDGRP=e.MCONDITION_RPT_STAT,r.value=e.group})},h=()=>{m.dialog({component:F,componentProps:{listCond:r.value}}).onOk(async e=>{})},{dialogRef:b,onDialogHide:T,onDialogOK:i,onDialogCancel:t}=A();return(e,n)=>(c(),k(q,{ref_key:"dialogRef",ref:b,onHide:M(T),"transition-show":"slide-up","transition-hide":"slide-down","full-width":""},{default:a(()=>[o(E,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:a(()=>[o(Q,null,{default:a(()=>[K]),_:1}),o(Q,{class:"q-pa-sm"},{default:a(()=>[f("div",Y,[f("div",X,[o(G,{options:D.value,type:"radio",modelValue:l.value,"onUpdate:modelValue":n[0]||(n[0]=U=>l.value=U)},null,8,["options","modelValue"])]),f("div",Z,[o(p,{color:"blue",label:"Assign Conditions",onClick:C,loading:_.value},null,8,["loading"]),o(p,{icon:"visibility",color:"indigo",flat:"",onClick:h,loading:_.value},{default:a(()=>[o(g,null,{default:a(()=>[d("View Conditions")]),_:1}),o(j,{color:"red",floating:""},{default:a(()=>[d(S(r.value.length),1)]),_:1})]),_:1},8,["loading"])])])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},ee={class:"q-pa-md"},ae={class:"row"},oe={class:"col"},ce={__name:"invoiceView",setup(y){const m=I(),v=s([]),D=s([{name:"TDLVORD_DLVCD",label:"DO Number",field:"TDLVORD_DLVCD",sortable:!0,align:"left"},{name:"MCUS_CUSNM",label:"Customer",field:"MCUS_CUSNM",sortable:!0,align:"left"}]),l=s(!1),u=s(""),r=s("");P(()=>{_()});const _=async()=>{l.value=!0,await w.post("invoices/search",{searchBy:u.value,searchValue:r.value}).then(i=>{l.value=!1,v.value=i.data.data}).catch(i=>{l.value=!1})},C=async i=>{l.value=!0,await w.post("invoices/printInvoice",i).then(t=>{l.value=!1,window.open("").document.write("<iframe width='100%' height='100%' src='data:application/pdf;base64, "+encodeURI(t.data)+"'></iframe>")}).catch(t=>{l.value=!1})},h=async i=>{l.value=!0,await w.get(`invoices/printKwitansi/${btoa(i)}`).then(t=>{l.value=!1,window.open("").document.write("<iframe width='100%' height='100%' src='data:application/pdf;base64, "+encodeURI(t.data)+"'></iframe>")}).catch(t=>{l.value=!1})},b=async i=>{m.dialog({title:"Options",message:"Choose type surat jalan",options:{type:"radio",model:"general",items:[{label:"General",value:"general"},{label:"Forklift",value:"forklift"},{label:"Genset",value:"genset"}]},cancel:!0,persistent:!0}).onOk(async t=>{l.value=!0,await w.get(`invoices/printSJ/${btoa(i)}`).then(e=>{l.value=!1,window.open("").document.write("<iframe width='100%' height='100%' src='data:application/pdf;base64, "+encodeURI(e.data)+"'></iframe>")}).catch(e=>{l.value=!1})})},T=i=>{m.dialog({component:z}).onOk(async t=>{_()})};return(i,t)=>(c(),V("div",ee,[f("div",ae,[f("div",oe,[o(B,{title:"Invoice List",rows:v.value,columns:D.value,"row-key":"name",loading:l.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":a(()=>[o(N,{outlined:"",modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e),options:D.value,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),o(x,{borderless:"",dense:"",modelValue:r.value,"onUpdate:modelValue":[t[1]||(t[1]=e=>r.value=e),t[2]||(t[2]=e=>i.dataOutstanding())],placeholder:"Search",outlined:"",debounce:"1000"},{append:a(()=>[o(W,{name:"search"})]),_:1},8,["modelValue"])]),header:a(e=>[o(R,{props:e},{default:a(()=>[(c(!0),V(O,null,J(e.cols,n=>(c(),k(L,{key:n.name,props:e},{default:a(()=>[d(S(n.label),1)]),_:2},1032,["props"]))),128)),o(L,{"auto-width":""},{default:a(()=>[d("Action")]),_:1})]),_:2},1032,["props"])]),body:a(e=>[o(R,{props:e},{default:a(()=>[(c(!0),V(O,null,J(e.cols,n=>(c(),k($,{key:n.name,props:e},{default:a(()=>[d(S(n.value),1)]),_:2},1032,["props"]))),128)),o($,{"auto-width":""},{default:a(()=>[o(p,{flat:"",color:"red",icon:"list",dense:"",onClick:n=>T(e.row.dlvsj)},{default:a(()=>[o(g,null,{default:a(()=>[d("Update Surat Jalan")]),_:1})]),_:2},1032,["onClick"]),o(p,{flat:"",color:"green",icon:"print",dense:"",onClick:n=>C(e.row)},{default:a(()=>[o(g,null,{default:a(()=>[d("Print Invoice")]),_:1})]),_:2},1032,["onClick"]),o(p,{flat:"",color:"indigo",icon:"print",dense:"",onClick:n=>h(e.row.TDLVORD_DLVCD)},{default:a(()=>[o(g,null,{default:a(()=>[d("Print Receipt")]),_:1})]),_:2},1032,["onClick"]),o(p,{flat:"",color:"orange",icon:"print",dense:"",onClick:n=>b(e.row.TDLVORD_DLVCD),disable:!e.row.dlvsj},{default:a(()=>[o(g,null,{default:a(()=>[d("Print Surat Jalan")]),_:1})]),_:2},1032,["onClick","disable"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{ce as default};
