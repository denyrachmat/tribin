import{s,o as V,B as u,J as k,I as l,E as a,D as e,K as B,Q as c,H as n,L as N,C as v,M as x,O as M,P as R,R as q,S as w}from"./index.05ce2e6f.js";import{Q as b}from"./QTooltip.f5a73764.js";import{u as A,a as E,Q as G,b as L,c as r,d as O,e as y}from"./QTable.5b967f61.js";import{api as D}from"./axios.edff6011.js";import{_ as $}from"./assignConditionsView.4b731d3d.js";const K={class:"q-pa-md"},U=l("div",{class:"row"},[l("div",{class:"col"},[l("div",{class:"text-h6"},"Assign Condition Group")])],-1),F={class:"row q-pt-md"},H={class:"col"},J={class:"row"},j={class:"col"},z={class:"col text-right"},W={class:"row q-pt-md"},X={class:"col",style:{"max-height":"80vh",overflow:"auto"}},oe={__name:"assignConditions",setup(Y){s([{name:"id",align:"left",label:"ID",field:"id",sortable:!0},{name:"MCONDITION_DESCRIPTION",align:"left",label:"Description",field:"MCONDITION_DESCRIPTION",sortable:!0}]);const p=s([]);s({sortBy:"desc",descending:!1,rowsPerPage:0});const i=s([]),o=s(""),f=s("new"),_=s(!1),g=A();E(),V(()=>{Q()});const C=()=>{i.value=[],o.value="",f.value="new"},T=()=>{g.dialog({title:"Confirmation",message:"Are you sure want to delete this group ?",cancel:!0,persistent:!0}).onOk(async()=>{await D.delete(`/master/conditions/deleteDataGroup/${btoa(o.value)}`).then(t=>{C()})})},Q=async()=>{_.value=!0,await D.get("/master/conditions/getdata").then(t=>{console.log(t),_.value=!1,p.value=t.data}).catch(t=>{_.value=!1})},P=()=>{g.dialog({component:$}).onOk(async t=>{o.value=t.MCONDITION_RPT_STAT,i.value=t.group.map(d=>d.id),f.value="edit"})},S=()=>{g.dialog({title:"Confirmation",message:"Do you want to save this group ?",cancel:!0,persistent:!0}).onOk(async()=>{await D.post("/master/conditions/assignGroup",{data:i.value,MCONDITION_RPT_STAT:o.value}).then(t=>{C()})})};return(t,d)=>(u(),k("div",K,[U,l("div",F,[l("div",H,[l("div",J,[l("div",j,[a(B,{label:"Group Name",outlined:"",dense:"",modelValue:o.value,"onUpdate:modelValue":d[0]||(d[0]=m=>o.value=m),disable:f.value==="edit"},{after:e(()=>[a(c,{dense:"",icon:"search",color:"blue",flat:"",onClick:P})]),_:1},8,["modelValue","disable"])]),l("div",z,[a(G,{outline:""},{default:e(()=>[a(c,{outline:"",color:"blue",icon:"description",onClick:C},{default:e(()=>[a(b,null,{default:e(()=>[n("New")]),_:1})]),_:1}),a(c,{outline:"",color:"blue",icon:"save",onClick:S,disable:!o.value||i.value.length===0},{default:e(()=>[a(b,null,{default:e(()=>[n("Save Conditions")]),_:1})]),_:1},8,["disable"]),a(c,{outline:"",color:"red",icon:"delete",onClick:T,disable:!o.value},{default:e(()=>[a(b,null,{default:e(()=>[n("Delete")]),_:1})]),_:1},8,["disable"])]),_:1})])]),l("div",W,[l("div",X,[a(L,{bordered:""},{default:e(()=>[p.value.length===0?N((u(),v(O,{key:0,class:"q-my-sm",clickable:"",tag:"label"},{default:e(()=>[_.value?(u(),v(r,{key:0},{default:e(()=>[n(" Data is loading, please wait. ")]),_:1})):(u(),v(r,{key:1},{default:e(()=>[n(" No Data Available ! ")]),_:1}))]),_:1})),[[w]]):(u(!0),k(x,{key:1},M(p.value,(m,h)=>N((u(),v(O,{key:h,class:"q-my-sm",clickable:"",tag:"label"},{default:e(()=>[a(r,{side:"",top:""},{default:e(()=>[a(R,{modelValue:i.value,"onUpdate:modelValue":d[1]||(d[1]=I=>i.value=I),val:m.id},null,8,["modelValue","val"])]),_:2},1024),a(r,null,{default:e(()=>[a(y,null,{default:e(()=>[n(q(m.MCONDITION_DESCRIPTION),1)]),_:2},1024),a(y,{caption:"",lines:"1"},{default:e(()=>[n("Description")]),_:1})]),_:2},1024),a(r,{side:""},{default:e(()=>[a(c,{name:"delete",color:"red",flat:"",onClick:I=>t.onDeleteCondition(h)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)),[[w]])),128))]),_:1})])])])])]))}};export{oe as default};
