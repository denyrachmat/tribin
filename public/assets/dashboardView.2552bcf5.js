import{s as p,B as n,C as f,D as t,E as a,J as P,K as u,P as x,aa as Q,I as o,a$ as i,S as q,Q as w,L as $,M as T,O as N,o as B,R as c,aY as _,aZ as C,b4 as O,H as D}from"./index.2062e355.js";import{u as E,a as S,b as R,o as V}from"./use-dialog-plugin-component.605915e6.js";import{d as I,Q as k,b as M}from"./date.7a39b4ce.js";import{api_web as L}from"./axios.83d28b2e.js";const U=o("div",{class:"text-h6"},"Approval List",-1),H={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},J={class:"text-h5 text-bold"},K={class:"text-h6 text-bold"},z={class:"text-subtitle2"},j={class:"row"},F={class:"col"},G={class:"col text-right"},Y={__name:"viewListApproval",props:{listApprv:Array},setup(A){const g=A,h=p([{name:"APP_CD",label:"Doc Code",field:"APP_CD"},{name:"APP_CUSNM",label:"Customer",field:"APP_CUSNM"},{name:"APP_SBJCT",label:"Subject",field:"APP_SBJCT"},{name:"APP_ATTN",label:"Attn",field:"APP_ATTN"},{name:"CREATED_AT",label:"Created Date",field:"CREATED_AT"}]);p([]);const b=s=>{const r=new Date,e=new Date(s);return I.getDateDiff(r,e,"days")},{dialogRef:m,onDialogHide:d,onDialogOK:v,onDialogCancel:y}=E();return(s,r)=>(n(),f(N,{ref_key:"dialogRef",ref:m,onHide:T(d),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:t(()=>[a(P,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:t(()=>[a(u,null,{default:t(()=>[U]),_:1}),a(u,{class:"q-pa-sm"},{default:t(()=>[a(S,{grid:"",flat:"",bordered:"","card-container-class":s.cardContainerClass,title:"Outstanding Approval",rows:g.listApprv,columns:h.value,"row-key":"name",filter:s.filter,"hide-header":"",pagination:{rowsPerPage:50},"rows-per-page-options":s.rowsPerPageOptions},{"top-right":t(()=>[a(x,{borderless:"",dense:"",debounce:"300",modelValue:s.filter,"onUpdate:modelValue":r[0]||(r[0]=e=>s.filter=e),placeholder:"Search"},{append:t(()=>[a(Q,{name:"search"})]),_:1},8,["modelValue"])]),item:t(e=>[o("div",H,[a(P,{flat:"",bordered:""},{default:t(()=>[a(u,{class:"text-center bg-secondary text-white"},{default:t(()=>[o("div",J,i(e.row.APP_CUSNM),1)]),_:2},1024),a(q),a(u,null,{default:t(()=>[o("div",K,i(e.row.APP_CD),1),o("div",z,i(e.row.APP_SBJCT),1)]),_:2},1024),a(u,null,{default:t(()=>[o("div",j,[o("div",F,[a(w,{label:"Preview",color:"primary",outline:""})]),o("div",G,i(b(e.row.CREATED_AT))+" Days Ago ",1)])]),_:2},1024)]),_:2},1024)])]),_:1},8,["card-container-class","rows","columns","filter","rows-per-page-options"])]),_:1}),a($,{align:"right"},{default:t(()=>[a(w,{label:"OK",color:"primary",onClick:r[1]||(r[1]=e=>T(v)()),disable:s.stateSubmit},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},Z={class:"q-pa-md bg-grey-5 window-height"},W={class:"row"},X={class:"row"},ee={class:"col"},te={class:"text-h3 text-cyan"},ae={class:"text-subtitle2 text-cyan"},oe={class:"col text-right"},le={class:"row q-pa-sm"},se={class:"col"},ne={key:1},pe={__name:"dashboardView",setup(A){const g=R(),h=p([{total:900,title:"Total Sales",icon:"shopping_cart",color:"cyan"},{total:900,title:"Total Purchase",icon:"shopping_bag",color:"cyan"},{total:900,title:"Total Profit",icon:"payments",color:"cyan"},{total:15,title:"Total Customer",icon:"group",color:"cyan"},{total:15,title:"Total Customer",icon:"group",color:"cyan"},{total:15,title:"Total Customer",icon:"group",color:"cyan"},{total:15,title:"Total Customer",icon:"group",color:"cyan"},{total:15,title:"Total Customer",icon:"group",color:"cyan"}]),b=p([{name:"name",label:"Business",field:"name",sortable:!0,align:"left"},{name:"quot",label:"Quotation",field:"quot_count",sortable:!0,align:"center"},{name:"pr",label:"Purchase Request",field:"pr_count",sortable:!0,align:"center"},{name:"po",label:"Purchase Order",field:"po_count",sortable:!0,align:"center"},{name:"spk",label:"SPK",field:"spk_count",sortable:!0,align:"center"}]),m=p([]),d=p(!1);B(()=>{v()});const v=async()=>{d.value=!0,await L.get("/approval/notificationsAPI/top-user").then(s=>{d.value=!1,m.value=s.data}).catch(s=>{d.value=!1})},y=s=>{g.dialog({component:Y,componentProps:{listApprv:s}}).onOk(async r=>{quotationGroupConditions.value=r.MCONDITION_RPT_STAT,quotationConditions.value=r.group})};return(s,r)=>(n(),c("div",Z,[o("div",W,[(n(!0),c(_,null,C(h.value,(e,l)=>(n(),c("div",{class:O("col-3 q-pa-sm"),key:l},[a(P,null,{default:t(()=>[a(u,null,{default:t(()=>[o("div",X,[o("div",ee,[o("div",te,i(e.total),1),o("div",ae,i(e.title),1)]),o("div",oe,[a(Q,{name:e.icon,size:"4.4em",color:e.color},null,8,["name","color"])])])]),_:2},1024)]),_:2},1024)]))),128))]),o("div",le,[o("div",se,[a(S,{flat:"",bordered:"",title:"Approval List",rows:m.value,columns:b.value,"row-key":"name",loading:d.value},{header:t(e=>[a(k,{props:e},{default:t(()=>[(n(!0),c(_,null,C(e.cols,l=>(n(),f(V,{key:l.name,props:e},{default:t(()=>[D(i(l.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:t(e=>[a(k,{props:e},{default:t(()=>[(n(!0),c(_,null,C(e.cols,l=>(n(),f(M,{key:l.name,props:e},{default:t(()=>[l.name==="quot"||l.name==="pr"||l.name==="po"||l.name==="spk"?(n(),c(_,{key:0},[l.value>0?(n(),f(w,{key:0,flat:"",color:"blue",onClick:re=>y(e.row[l.name.split("_")[0]])},{default:t(()=>[o("b",null,i(l.value),1)]),_:2},1032,["onClick"])):(n(),c("span",ne,i(l.value),1))],64)):(n(),c(_,{key:1},[D(i(l.value),1)],64))]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{pe as default};
