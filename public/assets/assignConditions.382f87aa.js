import{h as C,c as X,K as Z,L as j,t as m,o as E,C as h,D as O,E as e,F as a,M as F,O as Q,J as s,P as S,R as $,S as K,T as L,U as M,V as ee,I as u,Q as _,W as P,X as ae,Y as A,Z as z,$ as oe,a0 as te}from"./index.3be376a1.js";import{Q as D}from"./QTooltip.baa458bf.js";import{Q as le}from"./QBtnGroup.92e4ed2a.js";import{Q as V,a as w,b as G,c as U}from"./QSelect.d8b680cf.js";import{Q as Y}from"./QList.29a05b20.js";import{u as x}from"./format.405dd528.js";import{u as B}from"./use-dialog-plugin-component.183704a2.js";import{api as q,api_web as R}from"./axios.de676b17.js";import{_ as ne}from"./assignConditionsView.e9ad62ab.js";import"./QTable.0ea2cfc2.js";const se=[C("g",{transform:"translate(20 50)"},[C("rect",{x:"-10",y:"-30",width:"20",height:"60",fill:"currentColor",opacity:"0.6"},[C("animateTransform",{attributeName:"transform",type:"scale",from:"2",to:"1",begin:"0s",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keySplines:"0.1 0.9 0.4 1",keyTimes:"0;1",values:"2;1"})])]),C("g",{transform:"translate(50 50)"},[C("rect",{x:"-10",y:"-30",width:"20",height:"60",fill:"currentColor",opacity:"0.8"},[C("animateTransform",{attributeName:"transform",type:"scale",from:"2",to:"1",begin:"0.1s",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keySplines:"0.1 0.9 0.4 1",keyTimes:"0;1",values:"2;1"})])]),C("g",{transform:"translate(80 50)"},[C("rect",{x:"-10",y:"-30",width:"20",height:"60",fill:"currentColor",opacity:"0.9"},[C("animateTransform",{attributeName:"transform",type:"scale",from:"2",to:"1",begin:"0.2s",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keySplines:"0.1 0.9 0.4 1",keyTimes:"0;1",values:"2;1"})])])];var J=X({name:"QSpinnerFacebook",props:Z,setup(T){const{cSize:f,classes:c}=j(T);return()=>C("svg",{class:c.value,width:f.value,height:f.value,viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},se)}});const ie=s("div",{class:"text-h6"},"Position Assign",-1),re={class:"text-h5"},de={__name:"positionAssignCondition",props:{groups:String,listCond:Array},setup(T){const{dialogRef:f,onDialogHide:c,onDialogOK:g,onDialogCancel:N}=B(),d=x(),i=T,l=m([]);E(()=>{l.value=i.listCond,l.value=l.value.sort((t,n)=>t.MCONDITION_ORDER_NUMBER-n.MCONDITION_ORDER_NUMBER)});const p=t=>{I(l.value,t,t-1)},y=t=>{I(l.value,t,t+1)},I=(t,n,b)=>{let o=t[n];t[n]=t[b],t[b]=o},v=()=>{d.dialog({title:"Confirmation",message:"Do you want to save this group ?",cancel:!0,persistent:!0}).onOk(async()=>{d.loading.show({spinner:J,spinnerColor:"yellow",spinnerSize:140,backgroundColor:"purple",message:"Save your information, Hang on...",messageColor:"black"});const t=l.value.map(n=>n.id);await q.post("/master/conditions/assignGroup",{data:t,MCONDITION_RPT_STAT:i.groups}).then(async n=>{d.loading.hide(),g()}).catch(n=>{d.loading.hide()})})};return(t,n)=>(h(),O(z,{ref_key:"dialogRef",ref:f,onHide:A(c),"transition-show":"slide-up","transition-hide":"slide-down","full-width":""},{default:e(()=>[a(F,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:e(()=>[a(Q,null,{default:e(()=>[ie]),_:1}),a(Q,{class:"q-pa-sm"},{default:e(()=>[s("span",re,S(i.groups),1),a(Y,{bordered:""},{default:e(()=>[(h(!0),$(K,null,L(l.value,(b,o)=>M((h(),O(V,{key:b.id,class:"q-my-sm",clickable:"",dense:""},{default:e(()=>[a(w,{avatar:""},{default:e(()=>[a(ee,{color:"primary","text-color":"white"},{default:e(()=>[u(S(o+1),1)]),_:2},1024)]),_:2},1024),a(w,null,{default:e(()=>[a(G,null,{default:e(()=>[u(S(b.MCONDITION_DESCRIPTION),1)]),_:2},1024)]),_:2},1024),a(w,{side:""},{default:e(()=>[a(_,{icon:"arrow_upward",color:"green",flat:"",disable:o===0,onClick:r=>p(o)},{default:e(()=>[a(D,null,{default:e(()=>[u("Promote Positions")]),_:1})]),_:2},1032,["disable","onClick"])]),_:2},1024),a(w,{side:""},{default:e(()=>[a(_,{icon:"arrow_downward",color:"green",flat:"",disable:o===l.value.length-1,onClick:r=>y(o)},{default:e(()=>[a(D,null,{default:e(()=>[u("Demote Positions")]),_:1})]),_:2},1032,["disable","onClick"])]),_:2},1024)]),_:2},1024)),[[P]])),128))]),_:1})]),_:1}),a(ae,{align:"right"},{default:e(()=>[a(_,{label:"OK",color:"primary",onClick:n[0]||(n[0]=b=>v()),disable:t.loading,loading:t.loading},null,8,["disable","loading"]),a(_,{flat:"",label:"Cancel",color:"red",onClick:A(N),loading:t.loading},null,8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},ue=s("div",{class:"text-h6"},"Transfer data to another CG",-1),ce={class:"row"},pe={class:"col"},me={class:"row q-pt-md"},fe={class:"col"},ge={__name:"exportDataView",props:{dataTransfer:Array},setup(T){const{dialogRef:f,onDialogHide:c,onDialogOK:g,onDialogCancel:N}=B();x();const d=m(""),i=m(""),l=m([]),p=m(!1);E(()=>{y(),I()});const y=async()=>{p.value=!0,await R.get("company").then(v=>{p.value=!1,l.value=v.data}).catch(v=>{p.value=!1})},I=async()=>{p.value=!0,await R.get("company").then(v=>{p.value=!1,d.value=v.data}).catch(v=>{p.value=!1})};return(v,t)=>(h(),O(z,{ref_key:"dialogRef",ref:f,onHide:A(c),"transition-show":"slide-up","transition-hide":"slide-down","full-width":""},{default:e(()=>[a(F,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:e(()=>[a(Q,null,{default:e(()=>[ue]),_:1}),a(Q,{class:"q-pa-sm"},{default:e(()=>[s("div",ce,[s("div",pe,[a(U,{dense:"",filled:"",label:"From CG",modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=n=>d.value=n),options:l.value,"option-label":"name","option-value":"connection","emit-value":"","map-options":"",loading:p.value},null,8,["modelValue","options","loading"])])]),s("div",me,[s("div",fe,[a(U,{dense:"",filled:"",label:"To CG",modelValue:i.value,"onUpdate:modelValue":t[1]||(t[1]=n=>i.value=n),options:l.value,"option-label":"name","option-value":"connection","emit-value":"","map-options":"",loading:p.value},null,8,["modelValue","options","loading"])])])]),_:1})]),_:1})]),_:1},8,["onHide"]))}};const _e={class:"q-pa-md"},ve=s("div",{class:"row"},[s("div",{class:"col"},[s("div",{class:"text-h6"},"Assign Condition Group")])],-1),Ce={class:"row q-pt-md"},he={class:"col"},we={class:"row"},be={class:"col"},ye={class:"col text-right"},ke={class:"row q-pt-md"},De={class:"col",style:{"max-height":"80vh",overflow:"auto"}},Ae={__name:"assignConditions",setup(T){m([{name:"id",align:"left",label:"ID",field:"id",sortable:!0},{name:"MCONDITION_DESCRIPTION",align:"left",label:"Description",field:"MCONDITION_DESCRIPTION",sortable:!0}]);const f=m([]);m({sortBy:"desc",descending:!1,rowsPerPage:0});const c=m([]),g=m(""),N=m("new"),d=m(!1),i=x();B(),E(()=>{y()});const l=()=>{c.value=[],g.value="",N.value="new"},p=()=>{i.dialog({title:"Confirmation",message:"Are you sure want to delete this group ?",cancel:!0,persistent:!0}).onOk(async()=>{i.loading.show({spinner:J,spinnerColor:"yellow",spinnerSize:140,backgroundColor:"purple",message:"Save your information, Hang on...",messageColor:"black"}),await q.delete(`/master/conditions/deleteDataGroup/${btoa(g.value)}`).then(o=>{i.loading.hide(),l()})})},y=async()=>{d.value=!0,await q.get("/master/conditions/getdata").then(o=>{console.log(o),d.value=!1,f.value=o.data}).catch(o=>{d.value=!1})},I=()=>{i.dialog({component:ne}).onOk(async o=>{g.value=o.MCONDITION_RPT_STAT,c.value=o.group.map(r=>r.id),N.value="edit"})},v=()=>{i.dialog({component:de,componentProps:{groups:g.value,listCond:f.value.filter(o=>c.value.includes(o.id))}}).onOk(async o=>{l()})},t=()=>{i.dialog({title:"Add Conditions",message:"Input conditions",prompt:{model:"",isValid:o=>o.length>2,type:"text"},cancel:!0,persistent:!0}).onOk(async o=>{await R.post("condition",{MCONDITION_DESCRIPTION:o,MCONDITION_ORDER_NUMBER:null}).then(async r=>{l(),await y()})})},n=o=>{i.dialog({title:"Confirmation",message:"Are you sure want to delete this data ?",cancel:!0,persistent:!0}).onOk(async()=>{await R.delete(`condition/${btoa(o)}`).then(async r=>{l(),await y()})})},b=()=>{i.dialog({component:ge,componentProps:{dataTransfer:[]}}).onOk(async o=>{})};return(o,r)=>(h(),$("div",_e,[ve,s("div",Ce,[s("div",he,[s("div",we,[s("div",be,[a(oe,{label:"Group Name",outlined:"",dense:"",modelValue:g.value,"onUpdate:modelValue":r[0]||(r[0]=k=>g.value=k),disable:N.value==="edit"},{after:e(()=>[a(_,{dense:"",icon:"search",color:"blue",flat:"",onClick:I})]),_:1},8,["modelValue","disable"])]),s("div",ye,[a(le,{outline:""},{default:e(()=>[a(_,{outline:"",color:"blue",icon:"description",onClick:l},{default:e(()=>[a(D,null,{default:e(()=>[u("New")]),_:1})]),_:1}),a(_,{outline:"",color:"blue",icon:"save",onClick:v,disable:!g.value||c.value.length===0},{default:e(()=>[a(D,null,{default:e(()=>[u("Save Conditions")]),_:1})]),_:1},8,["disable"]),a(_,{outline:"",color:"blue",icon:"add",onClick:r[1]||(r[1]=k=>t())},{default:e(()=>[a(D,null,{default:e(()=>[u("Add more conditions")]),_:1})]),_:1}),a(_,{outline:"",color:"orange",icon:"send",onClick:r[2]||(r[2]=k=>b())},{default:e(()=>[a(D,null,{default:e(()=>[u("Transfer Data from This CG to Another CG")]),_:1})]),_:1}),a(_,{outline:"",color:"red",icon:"delete",onClick:p,disable:!g.value},{default:e(()=>[a(D,null,{default:e(()=>[u("Delete")]),_:1})]),_:1},8,["disable"])]),_:1})])]),s("div",ke,[s("div",De,[a(Y,{bordered:""},{default:e(()=>[f.value.length===0?M((h(),O(V,{key:0,class:"q-my-sm",clickable:"",tag:"label"},{default:e(()=>[d.value?(h(),O(w,{key:0},{default:e(()=>[u(" Data is loading, please wait. ")]),_:1})):(h(),O(w,{key:1},{default:e(()=>[u(" No Data Available ! ")]),_:1}))]),_:1})),[[P]]):(h(!0),$(K,{key:1},L(f.value,(k,W)=>M((h(),O(V,{key:W,class:"q-my-sm",clickable:"",tag:"label"},{default:e(()=>[a(w,{side:"",top:""},{default:e(()=>[a(te,{modelValue:c.value,"onUpdate:modelValue":r[3]||(r[3]=H=>c.value=H),val:k.id},null,8,["modelValue","val"])]),_:2},1024),a(w,null,{default:e(()=>[a(G,null,{default:e(()=>[u(S(k.MCONDITION_DESCRIPTION),1)]),_:2},1024),a(G,{caption:"",lines:"1"},{default:e(()=>[u("Description")]),_:1})]),_:2},1024),a(w,{side:""},{default:e(()=>[a(_,{icon:"delete",color:"red",outline:"",onClick:H=>n(k.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)),[[P]])),128))]),_:1})])])])])]))}};export{Ae as default};
