import{s as n,o as y,B as Q,C as P,D as o,J as m,K as x,E as e,L as f,I as i,M as B,Q as d,H as v,O as M,P as R}from"./index.6785e0e9.js";import{Q as C}from"./QTooltip.f59e224e.js";import{u as V,a as q,Q as A,b as G}from"./use-dialog-plugin-component.3fb0d1da.js";import{api as _}from"./axios.f2ad7e72.js";import{_ as S}from"./assignConditionsView.1fac7775.js";const H=i("div",{class:"text-h6"},"Assign Condition Group",-1),K={class:"row"},$={class:"col"},E={class:"col text-right"},U={class:"row q-pt-md"},J={class:"col"},Z={__name:"assignConditions",setup(L){const w=n([{name:"id",align:"left",label:"ID",field:"id",sortable:!0},{name:"MCONDITION_DESCRIPTION",align:"left",label:"Description",field:"MCONDITION_DESCRIPTION",sortable:!0}]),g=n([]),D=n({sortBy:"desc",descending:!1,rowsPerPage:0}),l=n([]),t=n(""),u=n("new"),c=V(),{dialogRef:b,onDialogHide:O,onDialogOK:j,onDialogCancel:h}=q();y(()=>{k()});const p=()=>{l.value=[],t.value="",u.value="new"},N=()=>{c.dialog({title:"Confirmation",message:"Are you sure want to delete this group ?",cancel:!0,persistent:!0}).onOk(async()=>{await _.delete(`/master/conditions/deleteDataGroup/${btoa(t.value)}`).then(a=>{p()})})},k=async()=>{await _.get("/master/conditions/getdata").then(a=>{console.log(a),g.value=a.data})},I=()=>{c.dialog({component:S}).onOk(async a=>{t.value=a.MCONDITION_RPT_STAT,l.value=a.group,u.value="edit"})},T=()=>{c.dialog({title:"Confirmation",message:"Do you want to save this group ?",cancel:!0,persistent:!0}).onOk(async()=>{await _.post("/master/conditions/assignGroup",{data:l.value,MCONDITION_RPT_STAT:t.value}).then(a=>{p()})})};return(a,s)=>(Q(),P(x,{ref_key:"dialogRef",ref:b,onHide:m(O),"transition-show":"slide-up","transition-hide":"slide-down","full-width":""},{default:o(()=>[e(R,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:o(()=>[e(f,null,{default:o(()=>[H]),_:1}),e(f,{class:"q-pa-sm"},{default:o(()=>[i("div",K,[i("div",$,[e(B,{label:"Group Name",outlined:"",dense:"",modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=r=>t.value=r),disable:u.value==="edit"},{after:o(()=>[e(d,{dense:"",icon:"search",color:"blue",flat:"",onClick:I})]),_:1},8,["modelValue","disable"])]),i("div",E,[e(A,{outline:""},{default:o(()=>[e(d,{outline:"",color:"blue",icon:"description",onClick:p},{default:o(()=>[e(C,null,{default:o(()=>[v("New")]),_:1})]),_:1}),e(d,{outline:"",color:"red",icon:"delete",onClick:N},{default:o(()=>[e(C,null,{default:o(()=>[v("Delete")]),_:1})]),_:1})]),_:1})])]),i("div",U,[i("div",J,[e(G,{class:"my-sticky-header-table",flat:"",bordered:"",title:"Conditions",rows:g.value,columns:w.value,"row-key":"id",dense:"",pagination:D.value,selection:"multiple",selected:l.value,"onUpdate:selected":s[1]||(s[1]=r=>l.value=r)},null,8,["rows","columns","pagination","selected"])])])]),_:1}),e(M,{align:"right"},{default:o(()=>[e(d,{label:"OK",color:"primary",onClick:s[2]||(s[2]=r=>T()),disable:l.value.length===0||!t.value},null,8,["disable"]),e(d,{flat:"",label:"Cancel",color:"red",onClick:m(h)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}};export{Z as default};
