import{h as p,c as F,J as Y,K as J,s as h,o as E,B as _,C as b,D as e,E as a,L as W,M as q,I as r,O,P as S,R as x,S as H,T as Q,U as X,H as i,Q as m,V as P,W as Z,X as V,Y as j,Z as ee,$ as ae}from"./index.d204e30e.js";import{Q as k}from"./QTooltip.4c00525b.js";import{u as G,a as K,Q as L,b as M,c as v,d as A,e as te}from"./QTable.f48883b8.js";import{api as R,api_web as B}from"./axios.a043fa38.js";import{_ as oe}from"./assignConditionsView.bd5279f3.js";const le=[p("g",{transform:"translate(20 50)"},[p("rect",{x:"-10",y:"-30",width:"20",height:"60",fill:"currentColor",opacity:"0.6"},[p("animateTransform",{attributeName:"transform",type:"scale",from:"2",to:"1",begin:"0s",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keySplines:"0.1 0.9 0.4 1",keyTimes:"0;1",values:"2;1"})])]),p("g",{transform:"translate(50 50)"},[p("rect",{x:"-10",y:"-30",width:"20",height:"60",fill:"currentColor",opacity:"0.8"},[p("animateTransform",{attributeName:"transform",type:"scale",from:"2",to:"1",begin:"0.1s",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keySplines:"0.1 0.9 0.4 1",keyTimes:"0;1",values:"2;1"})])]),p("g",{transform:"translate(80 50)"},[p("rect",{x:"-10",y:"-30",width:"20",height:"60",fill:"currentColor",opacity:"0.9"},[p("animateTransform",{attributeName:"transform",type:"scale",from:"2",to:"1",begin:"0.2s",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keySplines:"0.1 0.9 0.4 1",keyTimes:"0;1",values:"2;1"})])])];var U=F({name:"QSpinnerFacebook",props:Y,setup(D){const{cSize:g,classes:u}=J(D);return()=>p("svg",{class:u.value,width:g.value,height:g.value,viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},le)}});const ne=r("div",{class:"text-h6"},"Position Assign",-1),se={class:"text-h5"},ie={__name:"positionAssignCondition",props:{groups:String,listCond:Array},setup(D){const{dialogRef:g,onDialogHide:u,onDialogOK:c,onDialogCancel:w}=G(),f=K(),n=D,s=h([]);E(()=>{console.log(n),s.value=n.listCond});const N=o=>{I(s.value,o,o-1)},y=o=>{I(s.value,o,o+1)},I=(o,d,t)=>{let l=o[d];o[d]=o[t],o[t]=l},T=()=>{f.dialog({title:"Confirmation",message:"Do you want to save this group ?",cancel:!0,persistent:!0}).onOk(async()=>{f.loading.show({spinner:U,spinnerColor:"yellow",spinnerSize:140,backgroundColor:"purple",message:"Save your information, Hang on...",messageColor:"black"});const o=s.value.map(d=>d.id);await R.post("/master/conditions/assignGroup",{data:o,MCONDITION_RPT_STAT:n.groups}).then(async d=>{f.loading.hide(),c()}).catch(d=>{f.loading.hide()})})};return(o,d)=>(_(),b(j,{ref_key:"dialogRef",ref:g,onHide:V(u),"transition-show":"slide-up","transition-hide":"slide-down","full-width":""},{default:e(()=>[a(W,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:e(()=>[a(q,null,{default:e(()=>[ne]),_:1}),a(q,{class:"q-pa-sm"},{default:e(()=>[r("span",se,O(n.groups),1),a(L,{bordered:""},{default:e(()=>[(_(!0),S(x,null,H(s.value,(t,l)=>Q((_(),b(M,{key:t.id,class:"q-my-sm",clickable:"",dense:""},{default:e(()=>[a(v,{avatar:""},{default:e(()=>[a(X,{color:"primary","text-color":"white"},{default:e(()=>[i(O(l+1),1)]),_:2},1024)]),_:2},1024),a(v,null,{default:e(()=>[a(A,null,{default:e(()=>[i(O(t.MCONDITION_DESCRIPTION),1)]),_:2},1024)]),_:2},1024),a(v,{side:""},{default:e(()=>[a(m,{icon:"arrow_upward",color:"green",flat:"",disable:l===0,onClick:C=>N(l)},{default:e(()=>[a(k,null,{default:e(()=>[i("Promote Positions")]),_:1})]),_:2},1032,["disable","onClick"])]),_:2},1024),a(v,{side:""},{default:e(()=>[a(m,{icon:"arrow_downward",color:"green",flat:"",disable:l===s.value.length-1,onClick:C=>y(l)},{default:e(()=>[a(k,null,{default:e(()=>[i("Demote Positions")]),_:1})]),_:2},1032,["disable","onClick"])]),_:2},1024)]),_:2},1024)),[[P]])),128))]),_:1})]),_:1}),a(Z,{align:"right"},{default:e(()=>[a(m,{label:"OK",color:"primary",onClick:d[0]||(d[0]=t=>T()),disable:o.loading,loading:o.loading},null,8,["disable","loading"]),a(m,{flat:"",label:"Cancel",color:"red",onClick:V(w),loading:o.loading},null,8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}};const re={class:"q-pa-md"},de=r("div",{class:"row"},[r("div",{class:"col"},[r("div",{class:"text-h6"},"Assign Condition Group")])],-1),ue={class:"row q-pt-md"},ce={class:"col"},pe={class:"row"},me={class:"col"},ge={class:"col text-right"},fe={class:"row q-pt-md"},_e={class:"col",style:{"max-height":"80vh",overflow:"auto"}},we={__name:"assignConditions",setup(D){h([{name:"id",align:"left",label:"ID",field:"id",sortable:!0},{name:"MCONDITION_DESCRIPTION",align:"left",label:"Description",field:"MCONDITION_DESCRIPTION",sortable:!0}]);const g=h([]);h({sortBy:"desc",descending:!1,rowsPerPage:0});const u=h([]),c=h(""),w=h("new"),f=h(!1),n=K();G(),E(()=>{y()});const s=()=>{u.value=[],c.value="",w.value="new"},N=()=>{n.dialog({title:"Confirmation",message:"Are you sure want to delete this group ?",cancel:!0,persistent:!0}).onOk(async()=>{n.loading.show({spinner:U,spinnerColor:"yellow",spinnerSize:140,backgroundColor:"purple",message:"Save your information, Hang on...",messageColor:"black"}),await R.delete(`/master/conditions/deleteDataGroup/${btoa(c.value)}`).then(t=>{n.loading.hide(),s()})})},y=async()=>{f.value=!0,await R.get("/master/conditions/getdata").then(t=>{console.log(t),f.value=!1,g.value=t.data}).catch(t=>{f.value=!1})},I=()=>{n.dialog({component:oe}).onOk(async t=>{c.value=t.MCONDITION_RPT_STAT,u.value=t.group.map(l=>l.id),w.value="edit"})},T=()=>{n.dialog({component:ie,componentProps:{groups:c.value,listCond:g.value.filter(t=>u.value.includes(t.id))}}).onOk(async t=>{s()})},o=()=>{n.dialog({title:"Add Conditions",message:"Input conditions",prompt:{model:"",isValid:t=>t.length>2,type:"text"},cancel:!0,persistent:!0}).onOk(async t=>{await B.post("condition",{MCONDITION_DESCRIPTION:t,MCONDITION_ORDER_NUMBER:null}).then(async l=>{s(),await y()})})},d=t=>{n.dialog({title:"Confirmation",message:"Are you sure want to delete this data ?",cancel:!0,persistent:!0}).onOk(async()=>{await B.delete(`condition/${btoa(t)}`).then(async l=>{s(),await y()})})};return(t,l)=>(_(),S("div",re,[de,r("div",ue,[r("div",ce,[r("div",pe,[r("div",me,[a(ee,{label:"Group Name",outlined:"",dense:"",modelValue:c.value,"onUpdate:modelValue":l[0]||(l[0]=C=>c.value=C),disable:w.value==="edit"},{after:e(()=>[a(m,{dense:"",icon:"search",color:"blue",flat:"",onClick:I})]),_:1},8,["modelValue","disable"])]),r("div",ge,[a(te,{outline:""},{default:e(()=>[a(m,{outline:"",color:"blue",icon:"description",onClick:s},{default:e(()=>[a(k,null,{default:e(()=>[i("New")]),_:1})]),_:1}),a(m,{outline:"",color:"blue",icon:"save",onClick:T,disable:!c.value||u.value.length===0},{default:e(()=>[a(k,null,{default:e(()=>[i("Save Conditions")]),_:1})]),_:1},8,["disable"]),a(m,{outline:"",color:"blue",icon:"add",onClick:l[1]||(l[1]=C=>o())},{default:e(()=>[a(k,null,{default:e(()=>[i("Add more conditions")]),_:1})]),_:1}),a(m,{outline:"",color:"red",icon:"delete",onClick:N,disable:!c.value},{default:e(()=>[a(k,null,{default:e(()=>[i("Delete")]),_:1})]),_:1},8,["disable"])]),_:1})])]),r("div",fe,[r("div",_e,[a(L,{bordered:""},{default:e(()=>[g.value.length===0?Q((_(),b(M,{key:0,class:"q-my-sm",clickable:"",tag:"label"},{default:e(()=>[f.value?(_(),b(v,{key:0},{default:e(()=>[i(" Data is loading, please wait. ")]),_:1})):(_(),b(v,{key:1},{default:e(()=>[i(" No Data Available ! ")]),_:1}))]),_:1})),[[P]]):(_(!0),S(x,{key:1},H(g.value,(C,z)=>Q((_(),b(M,{key:z,class:"q-my-sm",clickable:"",tag:"label"},{default:e(()=>[a(v,{side:"",top:""},{default:e(()=>[a(ae,{modelValue:u.value,"onUpdate:modelValue":l[2]||(l[2]=$=>u.value=$),val:C.id},null,8,["modelValue","val"])]),_:2},1024),a(v,null,{default:e(()=>[a(A,null,{default:e(()=>[i(O(C.MCONDITION_DESCRIPTION),1)]),_:2},1024),a(A,{caption:"",lines:"1"},{default:e(()=>[i("Description")]),_:1})]),_:2},1024),a(v,{side:""},{default:e(()=>[a(m,{icon:"delete",color:"red",outline:"",onClick:$=>d(C.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)),[[P]])),128))]),_:1})])])])])]))}};export{we as default};
