import{Q as B}from"./QTooltip.308c05a6.js";import{s as M,o as fe,B as q,C as $,D as i,E as a,L as me,M as X,I as T,Z as E,W as _e,Q as N,X as Z,Y as ge,a as F,c as Te,w as ze,j as Ee,h as k,aa as Xe,d as Ze,bd as Se,av as Je,aw as el,ay as ll,g as ye,aO as He,ab as Be,ag as tl,ah as al,aj as ol,be as nl,p as il,bf as sl,bg as ul,aW as rl,aV as dl,am as De,aU as cl,aX as Qe,H as x,T as Fe,P as ee,a$ as G,R as he,S as Ce,U as vl,O as ne,V as fl}from"./index.5d71cca7.js";import{u as re,k as se,t as ml,w as Oe,Q as _l,a as qe,b as W,c as Ne,j as gl,l as $e,x as pl}from"./QTable.9a5f608a.js";import{Q as xe,a as Pe}from"./QTd.686edcba.js";import{d as ve}from"./date.2496fbe8.js";import{api_web as Y}from"./axios.e4823309.js";import{Q as Sl,a as hl,C as Cl}from"./ClosePopup.7bea36a5.js";import{u as ue,g as bl}from"./use-dialog-plugin-component.7de2e095.js";import{_ as Tl}from"./serviceOprUpdateOrder.d39b99cd.js";import"./use-cache.b0833c75.js";import"./QBtnGroup.48ab032e.js";import"./QBadge.b2faf003.js";import"./serviceOprItemAdd.f6f2d39f.js";const yl=T("div",{class:"text-h6"},"Create Item Master",-1),Dl={class:"row"},Ml={class:"col"},wl={class:"col q-pl-md"},kl={class:"row q-pt-md"},Vl={class:"col"},Rl={class:"col q-pl-md"},Ul={class:"row q-pt-md"},Il={class:"col"},Fl={class:"col q-pl-md"},Ol={class:"row q-pt-md"},ql={class:"col"},Nl={__name:"itemCreate",props:{ItemCat:String},setup(l){const{dialogRef:y,onDialogHide:_,onDialogOK:c,onDialogCancel:h}=ue(),f=re(),n=M({MITM_ITMCD:"",MITM_ITMNM:"",MITM_STKUOM:"",MITM_ITMTYPE:1,MITM_BRAND:"",MITM_MODEL:"",MITM_SPEC:"",MITM_ITMCAT:"",MITM_COACD:"",MITM_ITMCAT:""}),S=M(!1),w=M([]),U=M([]),p=l;fe(()=>{R(),n.value.MITM_ITMCAT=p.ItemCat});const C=(e,m,o,g)=>{m(async()=>{await Y.post("item/getListCoasAPI",{search:e}).then(t=>{U.value=t.data})})},O=()=>{f.dialog({title:"Confirmation",message:"Do you want to save this item ?",cancel:!0,persistent:!0}).onOk(async()=>{await Y.post("item",n.value).then(e=>{c(e.data.data.value)})})},R=async()=>{S.value=!0,await Y.get("item/formAPI").then(e=>{S.value=!1,w.value=e.data.uoms,U.value=e.data.coas}).catch(()=>{S.value=!1})};return(e,m)=>(q(),$(ge,{ref_key:"dialogRef",ref:y,onHide:Z(_),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:i(()=>[a(me,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:i(()=>[a(X,null,{default:i(()=>[yl]),_:1}),a(X,{class:"q-pa-sm"},{default:i(()=>[T("div",Dl,[T("div",Ml,[a(E,{label:"Item Code",dense:"",modelValue:n.value.MITM_ITMCD,"onUpdate:modelValue":m[0]||(m[0]=o=>n.value.MITM_ITMCD=o),filled:""},null,8,["modelValue"])]),T("div",wl,[a(E,{label:"Item Name",dense:"",modelValue:n.value.MITM_ITMNM,"onUpdate:modelValue":m[1]||(m[1]=o=>n.value.MITM_ITMNM=o),filled:""},null,8,["modelValue"])])]),T("div",kl,[T("div",Vl,[a(se,{dense:"",filled:"",label:"UOM",modelValue:n.value.MITM_STKUOM,"onUpdate:modelValue":m[2]||(m[2]=o=>n.value.MITM_STKUOM=o),options:w.value,behavior:"dialog","option-label":"MUOM_UOMNM","option-value":"MUOM_UOMCD","emit-value":"","map-options":"",loading:S.value},null,8,["modelValue","options","loading"])]),T("div",Rl,[a(E,{label:"Item Brand",dense:"",modelValue:n.value.MITM_BRAND,"onUpdate:modelValue":m[3]||(m[3]=o=>n.value.MITM_BRAND=o),filled:""},null,8,["modelValue"])])]),T("div",Ul,[T("div",Il,[a(E,{label:"Item Model",dense:"",modelValue:n.value.MITM_MODEL,"onUpdate:modelValue":m[4]||(m[4]=o=>n.value.MITM_MODEL=o),filled:""},null,8,["modelValue"])]),T("div",Fl,[a(E,{label:"Item Specification",dense:"",modelValue:n.value.MITM_SPEC,"onUpdate:modelValue":m[5]||(m[5]=o=>n.value.MITM_SPEC=o),filled:""},null,8,["modelValue"])])]),T("div",Ol,[T("div",ql,[a(se,{dense:"",filled:"",label:"COA",modelValue:n.value.MITM_COACD,"onUpdate:modelValue":m[6]||(m[6]=o=>n.value.MITM_COACD=o),options:U.value,"use-input":"",behavior:"dialog","option-label":"MCOA_COANM","option-value":"MCOA_COACD",onFilter:m[7]||(m[7]=(o,g,t)=>C(o,g,t)),"emit-value":"","map-options":"",loading:S.value},null,8,["modelValue","options","loading"])])])]),_:1}),a(_e,{align:"right"},{default:i(()=>[a(N,{label:"OK",color:"primary",onClick:m[8]||(m[8]=o=>O())}),a(N,{flat:"",label:"Cancel",color:"red",onClick:Z(h)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},$l=T("div",{class:"text-h6"},"Create New Customer Data",-1),xl={class:"row q-pb-md"},Pl={class:"col"},Al={class:"row q-pb-md"},Ll={class:"col"},zl={class:"col q-pl-md"},El={class:"row"},Hl={class:"col"},Bl={__name:"customerView",setup(l){const{dialogRef:y,onDialogHide:_,onDialogOK:c,onDialogCancel:h}=ue(),f=re(),n=M({MCUS_CUSCD:"",MCUS_CUSNM:"",MCUS_CURCD:"IDR",MCUS_TAXREG:"-",MCUS_ADDR1:"",MCUS_TELNO:"",MCUS_PIC_NAME:"-",MCUS_PIC_TELNO:"-",MCUS_TYPE:1,MCUS_GROUP:"SERVICE",MCUS_EMAIL:""}),S=M(!1),w=()=>{f.dialog({title:"Confirmation",message:"Do you want to save this customer ?",cancel:!0,persistent:!0}).onOk(async()=>{S.value=!0,await Y.post("customer",n.value).then(U=>{S.value=!1,c(U.data)}).catch(U=>{S.value=!1})})};return(U,p)=>(q(),$(ge,{ref_key:"dialogRef",ref:y,onHide:Z(_),"transition-show":"slide-up","transition-hide":"slide-down","full-width":""},{default:i(()=>[a(me,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:i(()=>[a(X,null,{default:i(()=>[$l]),_:1}),a(X,{class:"q-pa-sm"},{default:i(()=>[T("div",xl,[T("div",Pl,[a(E,{label:"Customer Name",dense:"",modelValue:n.value.MCUS_CUSNM,"onUpdate:modelValue":p[0]||(p[0]=C=>n.value.MCUS_CUSNM=C),filled:""},null,8,["modelValue"])])]),T("div",Al,[T("div",Ll,[a(E,{label:"Customer Email",dense:"",modelValue:n.value.MCUS_EMAIL,"onUpdate:modelValue":p[1]||(p[1]=C=>n.value.MCUS_EMAIL=C),filled:""},null,8,["modelValue"])]),T("div",zl,[a(E,{label:"Customer Phone",dense:"",modelValue:n.value.MCUS_TELNO,"onUpdate:modelValue":p[2]||(p[2]=C=>n.value.MCUS_TELNO=C),filled:"",mask:"####-####-####"},null,8,["modelValue"])])]),T("div",El,[T("div",Hl,[a(E,{label:"Customer Address",dense:"",modelValue:n.value.MCUS_ADDR1,"onUpdate:modelValue":p[3]||(p[3]=C=>n.value.MCUS_ADDR1=C),filled:"",type:"textarea"},null,8,["modelValue"])])])]),_:1}),a(_e,{align:"right"},{default:i(()=>[a(N,{label:"OK",color:"primary",onClick:p[4]||(p[4]=C=>w()),loading:S.value},null,8,["loading"]),a(N,{flat:"",label:"Cancel",color:"red",onClick:Z(h),loading:S.value},null,8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},Ql={ratio:[String,Number]};function Yl(l,y){return F(()=>{const _=Number(l.ratio||(y!==void 0?y.value:void 0));return isNaN(_)!==!0&&_>0?{paddingBottom:`${100/_}%`}:null})}const jl=16/9;var Kl=Te({name:"QImg",props:{...Ql,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:jl},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(l,{slots:y,emit:_}){const c=M(l.initialRatio),h=Yl(l,c);let f=null,n=!1;const S=[M(null),M(o())],w=M(0),U=M(!1),p=M(!1),C=F(()=>`q-img q-img--${l.noNativeMenu===!0?"no-":""}menu`),O=F(()=>({width:l.width,height:l.height})),R=F(()=>`q-img__image ${l.imgClass!==void 0?l.imgClass+" ":""}q-img__image--with${l.noTransition===!0?"out":""}-transition`),e=F(()=>({...l.imgStyle,objectFit:l.fit,objectPosition:l.position}));ze(()=>m(),g);function m(){return l.src||l.srcset||l.sizes?{src:l.src,srcset:l.srcset,sizes:l.sizes}:null}function o(){return l.placeholderSrc!==void 0?{src:l.placeholderSrc}:null}function g(d){f!==null&&(clearTimeout(f),f=null),p.value=!1,d===null?(U.value=!1,S[w.value^1].value=o()):U.value=!0,S[w.value].value=d}function t({target:d}){n!==!0&&(f!==null&&(clearTimeout(f),f=null),c.value=d.naturalHeight===0?.5:d.naturalWidth/d.naturalHeight,s(d,1))}function s(d,b){n===!0||b===1e3||(d.complete===!0?P(d):f=setTimeout(()=>{f=null,s(d,b+1)},50))}function P(d){n!==!0&&(w.value=w.value^1,S[w.value].value=null,U.value=!1,p.value=!1,_("load",d.currentSrc||d.src))}function A(d){f!==null&&(clearTimeout(f),f=null),U.value=!1,p.value=!0,S[w.value].value=null,S[w.value^1].value=o(),_("error",d)}function u(d){const b=S[d].value,D={key:"img_"+d,class:R.value,style:e.value,crossorigin:l.crossorigin,decoding:l.decoding,referrerpolicy:l.referrerpolicy,height:l.height,width:l.width,loading:l.loading,fetchpriority:l.fetchpriority,"aria-hidden":"true",draggable:l.draggable,...b};return w.value===d?(D.class+=" q-img__image--waiting",Object.assign(D,{onLoad:t,onError:A})):D.class+=" q-img__image--loaded",k("div",{class:"q-img__container absolute-full",key:"img"+d},k("img",D))}function v(){return U.value!==!0?k("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},Ze(y[p.value===!0?"error":"default"])):k("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},y.loading!==void 0?y.loading():l.noSpinner===!0?void 0:[k(Se,{color:l.spinnerColor,size:l.spinnerSize})])}return g(m()),Ee(()=>{n=!0,f!==null&&(clearTimeout(f),f=null)}),()=>{const d=[];return h.value!==null&&d.push(k("div",{key:"filler",style:h.value})),p.value!==!0&&(S[0].value!==null&&d.push(u(0)),S[1].value!==null&&d.push(u(1))),d.push(k(Xe,{name:"q-transition--fade"},v)),k("div",{class:C.value,style:O.value,role:"img","aria-label":l.alt},d)}}});const Gl={...Je,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:l=>l>=0&&l<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},be=50,Ye=2*be,je=Ye*Math.PI,Wl=Math.round(je*1e3)/1e3;var Xl=Te({name:"QCircularProgress",props:{...Gl,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(l,{slots:y}){const{proxy:{$q:_}}=ye(),c=el(l),h=F(()=>{const R=(_.lang.rtl===!0?-1:1)*l.angle;return{transform:l.reverse!==(_.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-R}deg)`:`rotate3d(0, 0, 1, ${R-90}deg)`}}),f=F(()=>l.instantFeedback!==!0&&l.indeterminate!==!0?{transition:`stroke-dashoffset ${l.animationSpeed}ms ease 0s, stroke ${l.animationSpeed}ms ease`}:""),n=F(()=>Ye/(1-l.thickness/2)),S=F(()=>`${n.value/2} ${n.value/2} ${n.value} ${n.value}`),w=F(()=>ml(l.value,l.min,l.max)),U=F(()=>l.max-l.min),p=F(()=>l.thickness/2*n.value),C=F(()=>{const R=(l.max-w.value)/U.value,e=l.rounded===!0&&w.value<l.max&&R<.25?p.value/2*(1-R/.25):0;return je*R+e});function O({thickness:R,offset:e,color:m,cls:o,rounded:g}){return k("circle",{class:"q-circular-progress__"+o+(m!==void 0?` text-${m}`:""),style:f.value,fill:"transparent",stroke:"currentColor","stroke-width":R,"stroke-dasharray":Wl,"stroke-dashoffset":e,"stroke-linecap":g,cx:n.value,cy:n.value,r:be})}return()=>{const R=[];l.centerColor!==void 0&&l.centerColor!=="transparent"&&R.push(k("circle",{class:`q-circular-progress__center text-${l.centerColor}`,fill:"currentColor",r:be-p.value/2,cx:n.value,cy:n.value})),l.trackColor!==void 0&&l.trackColor!=="transparent"&&R.push(O({cls:"track",thickness:p.value,offset:0,color:l.trackColor})),R.push(O({cls:"circle",thickness:p.value,offset:C.value,color:l.color,rounded:l.rounded===!0?"round":void 0}));const e=[k("svg",{class:"q-circular-progress__svg",style:h.value,viewBox:S.value,"aria-hidden":"true"},R)];return l.showValue===!0&&e.push(k("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:l.fontSize}},y.default!==void 0?y.default():[k("div",w.value)])),k("div",{class:`q-circular-progress q-circular-progress--${l.indeterminate===!0?"in":""}determinate`,style:c.value,role:"progressbar","aria-valuemin":l.min,"aria-valuemax":l.max,"aria-valuenow":l.indeterminate===!0?void 0:w.value},ll(y.internal,e))}}});function oe(l,y,_,c){const h=[];return l.forEach(f=>{c(f)===!0?h.push(f):y.push({failedPropValidation:_,file:f})}),h}function ce(l){l&&l.dataTransfer&&(l.dataTransfer.dropEffect="copy"),Be(l)}const Zl={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Jl=["rejected"];function et({editable:l,dnd:y,getFileInput:_,addFilesToQueue:c}){const{props:h,emit:f,proxy:n}=ye(),S=M(null),w=F(()=>h.accept!==void 0?h.accept.split(",").map(t=>(t=t.trim(),t==="*"?"*/":(t.endsWith("/*")&&(t=t.slice(0,t.length-1)),t.toUpperCase()))):null),U=F(()=>parseInt(h.maxFiles,10)),p=F(()=>parseInt(h.maxTotalSize,10));function C(t){if(l.value)if(t!==Object(t)&&(t={target:null}),t.target!==null&&t.target.matches('input[type="file"]')===!0)t.clientX===0&&t.clientY===0&&He(t);else{const s=_();s&&s!==t.target&&s.click(t)}}function O(t){l.value&&t&&c(null,t)}function R(t,s,P,A){let u=Array.from(s||t.target.files);const v=[],d=()=>{v.length!==0&&f("rejected",v)};if(h.accept!==void 0&&w.value.indexOf("*/")===-1&&(u=oe(u,v,"accept",b=>w.value.some(D=>b.type.toUpperCase().startsWith(D)||b.name.toUpperCase().endsWith(D))),u.length===0))return d();if(h.maxFileSize!==void 0){const b=parseInt(h.maxFileSize,10);if(u=oe(u,v,"max-file-size",D=>D.size<=b),u.length===0)return d()}if(h.multiple!==!0&&u.length!==0&&(u=[u[0]]),u.forEach(b=>{b.__key=b.webkitRelativePath+b.lastModified+b.name+b.size}),A===!0){const b=P.map(D=>D.__key);u=oe(u,v,"duplicate",D=>b.includes(D.__key)===!1)}if(u.length===0)return d();if(h.maxTotalSize!==void 0){let b=A===!0?P.reduce((D,H)=>D+H.size,0):0;if(u=oe(u,v,"max-total-size",D=>(b+=D.size,b<=p.value)),u.length===0)return d()}if(typeof h.filter=="function"){const b=h.filter(u);u=oe(u,v,"filter",D=>b.includes(D))}if(h.maxFiles!==void 0){let b=A===!0?P.length:0;if(u=oe(u,v,"max-files",()=>(b++,b<=U.value)),u.length===0)return d()}if(d(),u.length!==0)return u}function e(t){ce(t),y.value!==!0&&(y.value=!0)}function m(t){Be(t),(t.relatedTarget!==null||tl.is.safari!==!0?t.relatedTarget!==S.value:document.elementsFromPoint(t.clientX,t.clientY).includes(S.value)===!1)===!0&&(y.value=!1)}function o(t){ce(t);const s=t.dataTransfer.files;s.length!==0&&c(null,s),y.value=!1}function g(t){if(y.value===!0)return k("div",{ref:S,class:`q-${t}__dnd absolute-full`,onDragenter:ce,onDragover:ce,onDragleave:m,onDrop:o})}return Object.assign(n,{pickFiles:C,addFiles:O}),{pickFiles:C,addFiles:O,onDragover:e,onDragleave:m,processFiles:R,getDndNode:g,maxFilesNumber:U,maxTotalSizeNumber:p}}function Ae(l){return(l*100).toFixed(2)+"%"}const lt={...al,...Zl,label:String,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,noThumbnails:Boolean,autoUpload:Boolean,hideUploadBtn:Boolean,disable:Boolean,readonly:Boolean},Ke=[...Jl,"start","finish","added","removed"];function tt(l,y){const _=ye(),{props:c,slots:h,emit:f,proxy:n}=_,{$q:S}=n,w=ol(c,S);function U(r,I,L){if(r.__status=I,I==="idle"){r.__uploaded=0,r.__progress=0,r.__sizeLabel=Oe(r.size),r.__progressLabel="0.00%";return}if(I==="failed"){n.$forceUpdate();return}r.__uploaded=I==="uploaded"?r.size:L,r.__progress=I==="uploaded"?1:Math.min(.9999,r.__uploaded/r.size),r.__progressLabel=Ae(r.__progress),n.$forceUpdate()}const p=F(()=>c.disable!==!0&&c.readonly!==!0),C=M(!1),O=M(null),R=M(null),e={files:M([]),queuedFiles:M([]),uploadedFiles:M([]),uploadedSize:M(0),updateFileStatus:U,isAlive:()=>nl(_)===!1},{pickFiles:m,addFiles:o,onDragover:g,onDragleave:t,processFiles:s,getDndNode:P,maxFilesNumber:A,maxTotalSizeNumber:u}=et({editable:p,dnd:C,getFileInput:ke,addFilesToQueue:Ve});Object.assign(e,l({props:c,slots:h,emit:f,helpers:e,exposeApi:r=>{Object.assign(e,r)}})),e.isBusy===void 0&&(e.isBusy=M(!1));const v=M(0),d=F(()=>v.value===0?0:e.uploadedSize.value/v.value),b=F(()=>Ae(d.value)),D=F(()=>Oe(v.value)),H=F(()=>p.value===!0&&e.isUploading.value!==!0&&(c.multiple===!0||e.queuedFiles.value.length===0)&&(c.maxFiles===void 0||e.files.value.length<A.value)&&(c.maxTotalSize===void 0||v.value<u.value)),V=F(()=>p.value===!0&&e.isBusy.value!==!0&&e.isUploading.value!==!0&&e.queuedFiles.value.length!==0);il(sl,Ue);const J=F(()=>"q-uploader column no-wrap"+(w.value===!0?" q-uploader--dark q-dark":"")+(c.bordered===!0?" q-uploader--bordered":"")+(c.square===!0?" q-uploader--square no-border-radius":"")+(c.flat===!0?" q-uploader--flat no-shadow":"")+(c.disable===!0?" disabled q-uploader--disable":"")+(C.value===!0?" q-uploader--dnd":"")),le=F(()=>"q-uploader__header"+(c.color!==void 0?` bg-${c.color}`:"")+(c.textColor!==void 0?` text-${c.textColor}`:""));ze(e.isUploading,(r,I)=>{I===!1&&r===!0?f("start"):I===!0&&r===!1&&f("finish")});function te(){c.disable===!1&&(e.abort(),e.uploadedSize.value=0,v.value=0,we(),e.files.value=[],e.queuedFiles.value=[],e.uploadedFiles.value=[])}function Q(){c.disable===!1&&Me(["uploaded"],()=>{e.uploadedFiles.value=[]})}function de(){Me(["idle","failed"],({size:r})=>{v.value-=r,e.queuedFiles.value=[]})}function Me(r,I){if(c.disable===!0)return;const L={files:[],size:0},j=e.files.value.filter(z=>r.indexOf(z.__status)===-1?!0:(L.size+=z.size,L.files.push(z),z.__img!==void 0&&window.URL.revokeObjectURL(z.__img.src),!1));L.files.length!==0&&(e.files.value=j,I(L),f("removed",L.files))}function pe(r){c.disable||(r.__status==="uploaded"?e.uploadedFiles.value=e.uploadedFiles.value.filter(I=>I.__key!==r.__key):r.__status==="uploading"?r.__abort():v.value-=r.size,e.files.value=e.files.value.filter(I=>I.__key!==r.__key?!0:(I.__img!==void 0&&window.URL.revokeObjectURL(I.__img.src),!1)),e.queuedFiles.value=e.queuedFiles.value.filter(I=>I.__key!==r.__key),f("removed",[r]))}function we(){e.files.value.forEach(r=>{r.__img!==void 0&&window.URL.revokeObjectURL(r.__img.src)})}function ke(){return R.value||O.value.getElementsByClassName("q-uploader__input")[0]}function Ve(r,I){const L=s(r,I,e.files.value,!0),j=ke();j!=null&&(j.value=""),L!==void 0&&(L.forEach(z=>{if(e.updateFileStatus(z,"idle"),v.value+=z.size,c.noThumbnails!==!0&&z.type.toUpperCase().startsWith("IMAGE")){const Ie=new Image;Ie.src=window.URL.createObjectURL(z),z.__img=Ie}}),e.files.value=e.files.value.concat(L),e.queuedFiles.value=e.queuedFiles.value.concat(L),f("added",L),c.autoUpload===!0&&e.upload())}function Re(){V.value===!0&&e.upload()}function ie(r,I,L){if(r===!0){const j={type:"a",key:I,icon:S.iconSet.uploader[I],flat:!0,dense:!0};let z;return I==="add"?(j.onClick=m,z=Ue):j.onClick=L,k(N,j,z)}}function Ue(){return k("input",{ref:R,class:"q-uploader__input overflow-hidden absolute-full",tabindex:-1,type:"file",title:"",accept:c.accept,multiple:c.multiple===!0?"multiple":void 0,capture:c.capture,onMousedown:He,onClick:m,onChange:Ve})}function Ge(){return h.header!==void 0?h.header(ae):[k("div",{class:"q-uploader__header-content column"},[k("div",{class:"flex flex-center no-wrap q-gutter-xs"},[ie(e.queuedFiles.value.length!==0,"removeQueue",de),ie(e.uploadedFiles.value.length!==0,"removeUploaded",Q),e.isUploading.value===!0?k(Se,{class:"q-uploader__spinner"}):null,k("div",{class:"col column justify-center"},[c.label!==void 0?k("div",{class:"q-uploader__title"},[c.label]):null,k("div",{class:"q-uploader__subtitle"},[D.value+" / "+b.value])]),ie(H.value,"add"),ie(c.hideUploadBtn===!1&&V.value===!0,"upload",e.upload),ie(e.isUploading.value,"clear",e.abort)])])]}function We(){return h.list!==void 0?h.list(ae):e.files.value.map(r=>k("div",{key:r.__key,class:"q-uploader__file relative-position"+(c.noThumbnails!==!0&&r.__img!==void 0?" q-uploader__file--img":"")+(r.__status==="failed"?" q-uploader__file--failed":r.__status==="uploaded"?" q-uploader__file--uploaded":""),style:c.noThumbnails!==!0&&r.__img!==void 0?{backgroundImage:'url("'+r.__img.src+'")'}:null},[k("div",{class:"q-uploader__file-header row flex-center no-wrap"},[r.__status==="failed"?k(De,{class:"q-uploader__file-status",name:S.iconSet.type.negative,color:"negative"}):null,k("div",{class:"q-uploader__file-header-content col"},[k("div",{class:"q-uploader__title"},[r.name]),k("div",{class:"q-uploader__subtitle row items-center no-wrap"},[r.__sizeLabel+" / "+r.__progressLabel])]),r.__status==="uploading"?k(Xl,{value:r.__progress,min:0,max:1,indeterminate:r.__progress===0}):k(N,{round:!0,dense:!0,flat:!0,icon:S.iconSet.uploader[r.__status==="uploaded"?"done":"clear"],onClick:()=>{pe(r)}})])]))}Ee(()=>{e.isUploading.value===!0&&e.abort(),e.files.value.length!==0&&we()});const ae={};for(const r in e)ul(e[r])===!0?rl(ae,r,()=>e[r].value):ae[r]=e[r];return Object.assign(ae,{upload:Re,reset:te,removeUploadedFiles:Q,removeQueuedFiles:de,removeFile:pe,pickFiles:m,addFiles:o}),dl(ae,{canAddFiles:()=>H.value,canUpload:()=>V.value,uploadSizeLabel:()=>D.value,uploadProgressLabel:()=>b.value}),y({...e,upload:Re,reset:te,removeUploadedFiles:Q,removeQueuedFiles:de,removeFile:pe,pickFiles:m,addFiles:o,canAddFiles:H,canUpload:V,uploadSizeLabel:D,uploadProgressLabel:b}),()=>{const r=[k("div",{class:le.value},Ge()),k("div",{class:"q-uploader__list scroll"},We()),P("uploader")];e.isBusy.value===!0&&r.push(k("div",{class:"q-uploader__overlay absolute-full flex flex-center"},[k(Se)]));const I={ref:O,class:J.value};return H.value===!0&&Object.assign(I,{onDragover:g,onDragleave:t}),k("div",I,r)}}const at=bl(Ke);var ot=({name:l,props:y,emits:_,injectPlugin:c})=>Te({name:l,props:{...lt,...y},emits:cl(_)===!0?{...at,..._}:[...Ke,..._],setup(h,{expose:f}){return tt(c,f)}});function K(l){return typeof l=="function"?l:()=>l}const nt={url:[Function,String],method:{type:[Function,String],default:"POST"},fieldName:{type:[Function,String],default:()=>l=>l.name},headers:[Function,Array],formFields:[Function,Array],withCredentials:[Function,Boolean],sendRaw:[Function,Boolean],batch:[Function,Boolean],factory:Function},it=["factoryFailed","uploaded","failed","uploading"];function st({props:l,emit:y,helpers:_}){const c=M([]),h=M([]),f=M(0),n=F(()=>({url:K(l.url),method:K(l.method),headers:K(l.headers),formFields:K(l.formFields),fieldName:K(l.fieldName),withCredentials:K(l.withCredentials),sendRaw:K(l.sendRaw),batch:K(l.batch)})),S=F(()=>f.value>0),w=F(()=>h.value.length!==0);let U;function p(){c.value.forEach(e=>{e.abort()}),h.value.length!==0&&(U=!0)}function C(){const e=_.queuedFiles.value.slice(0);_.queuedFiles.value=[],n.value.batch(e)?O(e):e.forEach(m=>{O([m])})}function O(e){if(f.value++,typeof l.factory!="function"){R(e,{});return}const m=l.factory(e);if(!m)y("factoryFailed",new Error("QUploader: factory() does not return properly"),e),f.value--;else if(typeof m.catch=="function"&&typeof m.then=="function"){h.value.push(m);const o=g=>{_.isAlive()===!0&&(h.value=h.value.filter(t=>t!==m),h.value.length===0&&(U=!1),_.queuedFiles.value=_.queuedFiles.value.concat(e),e.forEach(t=>{_.updateFileStatus(t,"failed")}),y("factoryFailed",g,e),f.value--)};m.then(g=>{U===!0?o(new Error("Aborted")):_.isAlive()===!0&&(h.value=h.value.filter(t=>t!==m),R(e,g))}).catch(o)}else R(e,m||{})}function R(e,m){const o=new FormData,g=new XMLHttpRequest,t=(V,J)=>m[V]!==void 0?K(m[V])(J):n.value[V](J),s=t("url",e);if(!s){console.error("q-uploader: invalid or no URL specified"),f.value--;return}const P=t("formFields",e);P!==void 0&&P.forEach(V=>{o.append(V.name,V.value)});let A=0,u=0,v=0,d=0,b;g.upload.addEventListener("progress",V=>{if(b===!0)return;const J=Math.min(d,V.loaded);_.uploadedSize.value+=J-v,v=J;let le=v-u;for(let te=A;le>0&&te<e.length;te++){const Q=e[te];if(le>Q.size)le-=Q.size,A++,u+=Q.size,_.updateFileStatus(Q,"uploading",Q.size);else{_.updateFileStatus(Q,"uploading",le);return}}},!1),g.onreadystatechange=()=>{g.readyState<4||(g.status&&g.status<400?(_.uploadedFiles.value=_.uploadedFiles.value.concat(e),e.forEach(V=>{_.updateFileStatus(V,"uploaded")}),y("uploaded",{files:e,xhr:g})):(b=!0,_.uploadedSize.value-=v,_.queuedFiles.value=_.queuedFiles.value.concat(e),e.forEach(V=>{_.updateFileStatus(V,"failed")}),y("failed",{files:e,xhr:g})),f.value--,c.value=c.value.filter(V=>V!==g))},g.open(t("method",e),s),t("withCredentials",e)===!0&&(g.withCredentials=!0);const D=t("headers",e);D!==void 0&&D.forEach(V=>{g.setRequestHeader(V.name,V.value)});const H=t("sendRaw",e);e.forEach(V=>{_.updateFileStatus(V,"uploading",0),H!==!0&&o.append(t("fieldName",V),V,V.name),V.xhr=g,V.__abort=()=>{g.abort()},d+=V.size}),y("uploading",{files:e,xhr:g}),c.value.push(g),H===!0?g.send(new Blob(e)):g.send(o)}return{isUploading:S,isBusy:w,abort:p,upload:C}}var ut={name:"QUploader",props:nt,emits:it,injectPlugin:st},rt=ot(ut);const dt={class:"bg-white"},ct={class:"row",style:{height:"50vh"}},vt={class:"col"},ft=T("div",{class:"text-h6"},"Preview Photo",-1),mt={__name:"uploadPhoto",props:{photo:String},emits:[...ue.emits],setup(l){const y=re(),_=M(""),c=l;fe(()=>{c.photo!==""&&(_.value=c.photo)});const h=()=>{y.dialog({title:"Confirmation",message:"Do you want to remove this photo ?",cancel:!0,persistent:!0}).onOk(async()=>{w("")})},f=p=>{var C=new FileReader;C.readAsDataURL(p),C.onload=function(){console.log(C.result)},C.onerror=function(O){console.log("Error: ",O)}},{dialogRef:n,onDialogHide:S,onDialogOK:w,onDialogCancel:U}=ue();return(p,C)=>(q(),$(ge,{ref_key:"dialogRef",ref:n,onHide:Z(S)},{default:i(()=>[T("div",dt,[T("div",ct,[T("div",vt,[_.value?(q(),$(me,{key:0,class:"my-card"},{default:i(()=>[a(X,null,{default:i(()=>[ft]),_:1}),a(Qe),a(X,null,{default:i(()=>[a(Kl,{src:_.value},null,8,["src"])]),_:1}),a(_e,{vertical:""},{default:i(()=>[a(N,{flat:"",onClick:C[0]||(C[0]=O=>h())},{default:i(()=>[x("Change Photo")]),_:1})]),_:1})]),_:1})):(q(),$(rt,{key:1,class:"full-height",url:O=>Z(w)(f(O[0])),label:"Upload Photo",color:"amber","text-color":"black",accept:"image/*",style:{"min-width":"500px"},"max-files":1,"auto-upload":"","send-raw":""},null,8,["url"]))])])])]),_:1},8,["onHide"]))}},_t=T("div",{class:"text-h6"},"Create Order",-1),gt={style:{border:"1px black solid","border-radius":"10px"}},pt=T("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[T("b",null,"Header")],-1),St={class:"row"},ht={class:"col"},Ct={class:"col q-pl-md"},bt={class:"row items-center justify-end"},Tt={class:"row"},yt={class:"col"},Dt=T("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[T("b",null,"Detail Items")],-1),Mt={key:0,class:"row q-pb-sm"},wt={class:"col text-right"},Le={__name:"serviceCreateOrder",props:{header:Array,detail:Array,mode:String},setup(l){const{dialogRef:y,onDialogHide:_,onDialogOK:c,onDialogCancel:h}=ue(),f=re(),n=l;fe(async()=>{n.header&&(await e(),await m(),S.value=n.header,p.value=n.detail)});const S=M({SRVH_DOCNO:"",SRVH_ISSDT:ve.formatDate(Date.now(),"YYYY-MM-DD"),SRVH_CUSCD:""}),w=M([]),U=M([]),p=M([]),C=M(!1),O=M(0),R=(u,v,d,b)=>{v(async()=>{b==="cust"&&await e(u),b==="item"&&await m(u)})},e=async u=>{C.value=!0,await Y.post("customer/searchAPI",{searchValue:u}).then(v=>{C.value=!1,U.value=v.data.data}).catch(()=>{C.value=!1})},m=async u=>{C.value=!0,await Y.post("item/searchAPI",{searchValue:u}).then(v=>{C.value=!1,w.value=v.data.data}).catch(()=>{C.value=!1})},o=()=>{p.value.push({TSRVD_ITMCD:"",TSRVD_LINE:p.value.length+1,TSRVD_QTY:1,TSRVD_CUSTRMK:"",TSRVD_PHOTO:""})},g=u=>{f.dialog({title:"Confirmation",message:`Do you want to delete this lines no ${u+1} ?`,cancel:!0,persistent:!0}).onOk(async()=>{p.value.splice(u,1)}).catch(v=>{f.notify({color:"red",message:"Something's wrong."})})},t=u=>{f.dialog({component:Nl,componentProps:{ItemCat:"SERVICE_ITEMM"}}).onOk(async v=>{await m(""),p.value[u].TSRVD_ITMCD=v.MITM_ITMNM})},s=()=>{f.dialog({title:"Confirmation",message:"Do you want to submit this data ?",cancel:!0,persistent:!0}).onOk(async()=>{C.value=!0,await Y.post("servicesAdmin",{header:S.value,detail:p.value}).then(u=>{C.value=!1,c()})})},P=()=>{f.dialog({component:Bl}).onOk(async u=>{console.log(u),await e(""),p.value[idx].SRVH_CUSCD=u.MCUS_CUSCD})},A=u=>{f.dialog({component:mt,componentProps:{photo:p.value[u].TSRVD_PHOTO}}).onOk(async v=>{console.log(v),v?p.value[u].TSRVD_PHOTO=v:p.value[u].TSRVD_PHOTO="",O.value=O.value+1,console.log(p.value[u])})};return(u,v)=>(q(),$(ge,{ref_key:"dialogRef",ref:y,onHide:Z(_),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:i(()=>[a(me,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:i(()=>[a(X,null,{default:i(()=>[_t]),_:1}),a(X,{class:"q-pa-sm"},{default:i(()=>[T("fieldset",gt,[pt,T("div",St,[T("div",ht,[a(E,{label:"SPK No",readonly:"",dense:"",modelValue:S.value.SRVH_DOCNO,"onUpdate:modelValue":v[0]||(v[0]=d=>S.value.SRVH_DOCNO=d),filled:""},null,8,["modelValue"])]),T("div",Ct,[a(E,{filled:"",modelValue:S.value.SRVH_ISSDT,"onUpdate:modelValue":v[2]||(v[2]=d=>S.value.SRVH_ISSDT=d),dense:"",label:"Issue Date",loading:C.value,onClick:v[3]||(v[3]=d=>u.quotationIssueDate.qDateProxy.show()),mask:"####-##-##","fill-mask":"",hint:"Mask: YYYY-MM-DD",readonly:n.mode==="view"},{append:i(()=>[a(De,{name:"event",class:"cursor-pointer",disable:n.mode==="view"},{default:i(()=>[a(Sl,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:i(()=>[a(hl,{modelValue:S.value.SRVH_ISSDT,"onUpdate:modelValue":v[1]||(v[1]=d=>S.value.SRVH_ISSDT=d),mask:"YYYY-MM-DD"},{default:i(()=>[T("div",bt,[Fe(a(N,{label:"Close",color:"primary",flat:""},null,512),[[Cl]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["disable"])]),_:1},8,["modelValue","loading","readonly"])])]),T("div",Tt,[T("div",yt,[a(se,{dense:"",filled:"",label:"Customer Choose",modelValue:S.value.SRVH_CUSCD,"onUpdate:modelValue":v[5]||(v[5]=d=>S.value.SRVH_CUSCD=d),"use-input":"","input-debounce":"500",options:U.value,onFilter:v[6]||(v[6]=(d,b,D)=>R(d,b,D,"cust")),behavior:"dialog","option-label":"MCUS_CUSNM","option-value":"MCUS_CUSCD","emit-value":"","map-options":"",loading:C.value,readonly:n.mode==="view"},{after:i(()=>[a(N,{round:"",dense:"",flat:"",icon:"person_add",onClick:v[4]||(v[4]=d=>P()),color:"cyan"},{default:i(()=>[a(B,null,{default:i(()=>[x("Add new customer")]),_:1})]),_:1})]),_:1},8,["modelValue","options","loading","readonly"])])])]),(q(),ee("fieldset",{style:{border:"1px black solid","border-radius":"10px",height:"35vh",overflow:"auto"},key:O.value},[Dt,n.mode!=="view"?(q(),ee("div",Mt,[T("div",wt,[a(N,{flat:"",icon:"add",color:"blue",onClick:v[7]||(v[7]=d=>o())},{default:i(()=>[a(B,null,{default:i(()=>[x("Add lines")]),_:1})]),_:1})])])):G("",!0),a(_l,{bordered:"",dense:""},{default:i(()=>[p.value.length>0?(q(!0),ee(he,{key:0},Ce(p.value,(d,b)=>(q(),$(qe,{key:b,class:"q-my-sm",dense:""},{default:i(()=>[a(W,{avatar:""},{default:i(()=>[a(vl,{"text-color":"blue"},{default:i(()=>[x(ne(b+1),1)]),_:2},1024)]),_:2},1024),a(W,null,{default:i(()=>[a(Ne,null,{default:i(()=>[a(se,{dense:"",filled:"",label:"Item Name",modelValue:d.TSRVD_ITMCD,"onUpdate:modelValue":D=>d.TSRVD_ITMCD=D,"use-input":"","input-debounce":"500",options:w.value,onFilter:v[8]||(v[8]=(D,H,V)=>R(D,H,V,"item")),behavior:"dialog","option-label":"MITM_ITMNM","option-value":"MITM_ITMNM","emit-value":"","map-options":"",loading:C.value},null,8,["modelValue","onUpdate:modelValue","options","loading"])]),_:2},1024)]),_:2},1024),a(W,null,{default:i(()=>[a(E,{label:"Qty",filled:"",dense:"",modelValue:d.TSRVD_QTY,"onUpdate:modelValue":D=>d.TSRVD_QTY=D},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(W,null,{default:i(()=>[a(E,{label:"Problem",filled:"",dense:"",modelValue:d.TSRVD_CUSTRMK,"onUpdate:modelValue":D=>d.TSRVD_CUSTRMK=D},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),n.mode!=="view"?(q(),$(W,{key:0,side:""},{default:i(()=>[a(N,{icon:"delete",color:"red",flat:"",onClick:D=>g(b),dense:""},{default:i(()=>[a(B,null,{default:i(()=>[x("Delete line")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)):G("",!0),n.mode!=="view"?(q(),$(W,{key:1,side:""},{default:i(()=>[a(N,{icon:"library_add",color:"indigo",flat:"",onClick:D=>t(b),dense:""},{default:i(()=>[a(B,null,{default:i(()=>[x("Add new item")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)):G("",!0),n.mode!=="view"?(q(),$(W,{key:2,side:""},{default:i(()=>[a(N,{icon:"photo",color:d.TSRVD_PHOTO!=""?"blue":"orange",flat:"",onClick:D=>A(b),dense:""},{default:i(()=>[a(B,null,{default:i(()=>[x("Add photo")]),_:1})]),_:2},1032,["color","onClick"])]),_:2},1024)):G("",!0)]),_:2},1024))),128)):Fe((q(),$(qe,{key:1,class:"q-my-sm",clickable:""},{default:i(()=>[a(W,null,{default:i(()=>[a(Ne,null,{default:i(()=>[x(" No Items Added ")]),_:1})]),_:1})]),_:1})),[[fl]])]),_:1})]))]),_:1}),a(_e,{align:"right"},{default:i(()=>[a(N,{label:"OK",color:"primary",onClick:v[9]||(v[9]=d=>s()),disable:C.value,loading:C.value},null,8,["disable","loading"]),a(N,{flat:"",label:"Cancel",color:"red",onClick:Z(h),loading:C.value},null,8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}};const kt={class:"q-pa-md"},Vt={class:"row q-pb-md"},Rt=T("div",{class:"col"},[T("span",{class:"text-h4"},"Receive Order ")],-1),Ut={class:"col text-right"},It={class:"row q-pt-md"},Ft={class:"col"},Ot={key:1},jt={__name:"serviceView",setup(l){const y=re(),_=M("SRVH_DOCNO"),c=M(""),h=M([]),f=M([{name:"SRVH_DOCNO",label:"SPK No",field:"SRVH_DOCNO",sortable:!0,align:"left"},{name:"MCUS_CUSNM",label:"Cust",field:"MCUS_CUSNM",sortable:!0,align:"left"},{name:"STAT",label:"Status",field:o=>m(o),sortable:!0,align:"left"},{name:"created_at",label:"Created Date",field:"created_at",sortable:!0,align:"left",format:o=>ve.formatDate(new Date(o),"DD MMM YYYY")}]),n=M(!1),S=M(null);fe(()=>{w(),S.value=setInterval(()=>{w()},1e4)});const w=async()=>{n.value=!0,await Y.post("servicesAdmins/search",{searchBy:_.value,searchValue:c.value}).then(o=>{n.value=!1,h.value=o.data.data}).catch(o=>{n.value=!1})},U=()=>{y.dialog({component:Le}).onOk(async o=>{w()})},p=o=>{const g={SRVH_DOCNO:o.SRVH_DOCNO,SRVH_ISSDT:ve.formatDate(o.SRVH_ISSDT,"YYYY-MM-DD"),SRVH_CUSCD:o.MCUS_CUSCD};let t=[];o.detail.map(s=>{t.push({id:s.id,TSRVD_ITMCD:s.TSRVD_ITMCD,TSRVD_LINE:s.TSRVD_LINE,TSRVD_QTY:s.TSRVD_QTY,TSRVD_CUSTRMK:s.TSRVD_CUSTRMK,TSRVD_REMARK:s.TSRVD_REMARK,TSRVD_FLGSTS:s.TSRVD_FLGSTS,listFixDet:s.list_fix_det})}),y.dialog({component:Tl,componentProps:{header:g,detail:t,mode:o.detail.filter(s=>s.TSRVD_FLGSTS===1).length===o.detail.length?"approvecust":"view"}}).onOk(async s=>{w()})},C=o=>{window.open("http://tribin.test/servicesAdmins/printInvoice/"+btoa(o),"_blank").focus()},O=o=>{const g={SRVH_DOCNO:o.SRVH_DOCNO,SRVH_ISSDT:ve.formatDate(o.SRVH_ISSDT,"YYYY-MM-DD"),SRVH_CUSCD:o.MCUS_CUSCD};let t=[];o.detail.map(s=>{t.push({TSRVD_ITMCD:s.TSRVD_ITMCD,TSRVD_LINE:s.TSRVD_LINE,TSRVD_QTY:s.TSRVD_QTY,TSRVD_CUSTRMK:s.TSRVD_CUSTRMK})}),y.dialog({component:Le,componentProps:{header:g,detail:t}}).onOk(async s=>{w()})},R=o=>{y.dialog({title:"Confirmation",message:"Do you want to proceed to service ?",cancel:!0,persistent:!0}).onOk(async()=>{n.value=!0,await Y.put(`servicesAdmin/${btoa(o.SRVH_DOCNO)}`,{TSRVD_FLGSTS:2}).then(g=>{n.value=!1}).catch(g=>{n.value=!1})})},e=o=>{y.dialog({title:"Confirmation",message:"Are you sure want to delete this order ?",cancel:!0,persistent:!0}).onOk(async()=>{n.value=!0,await Y.delete(`servicesAdmin/${btoa(o.SRVH_DOCNO)}`).then(g=>{n.value=!1}).catch(g=>{n.value=!1})})},m=o=>{const g=o.detail.filter(u=>u.TSRVD_FLGSTS==0),t=o.detail.filter(u=>u.TSRVD_FLGSTS==1),s=o.detail.filter(u=>u.TSRVD_FLGSTS==2),P=o.detail.filter(u=>u.TSRVD_FLGSTS==3),A=o.detail.filter(u=>u.TSRVD_FLGSTS==5);if(g.length==o.detail.length)return{color:"red",label:"No Price Added yet !",icon:"edit"};if(t.length>0&&t.length<o.detail.length)return{color:"warning",label:"Please Add item & price",icon:"payments"};if(A.length>0&&A.length==o.detail.length)return{color:"indigo",label:"Added Price Done, Waiting Manager Confirmation",icon:"price_check"};if(t.length>0&&t.length==o.detail.length)return{color:"green",label:"Manager has been approve, Waiting Cust. Confirmation",icon:"price_check"};if(s.length>0&&s.length>=o.detail.length)return{color:"cyan",label:"Cust. has been approved, continue to fix.",icon:"engineering"};if(P.length>0&&P.length===o.detail.length)return{color:"primary",label:"Fix has been done",icon:"fact_check"}};return(o,g)=>(q(),ee("div",kt,[T("div",Vt,[Rt,T("div",Ut,[a(N,{icon:"add",color:"blue",onClick:U},{default:i(()=>[a(B,null,{default:i(()=>[x("Create New Order")]),_:1})]),_:1})])]),a(Qe),T("div",It,[T("div",Ft,[a(gl,{title:"Created Order",rows:h.value,columns:f.value,"row-key":"name",loading:n.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":i(()=>[a(se,{outlined:"",modelValue:_.value,"onUpdate:modelValue":g[0]||(g[0]=t=>_.value=t),options:f.value,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),a(E,{borderless:"",dense:"",modelValue:c.value,"onUpdate:modelValue":[g[1]||(g[1]=t=>c.value=t),g[2]||(g[2]=t=>o.dataQuo())],placeholder:"Search",outlined:"",debounce:"1000"},{append:i(()=>[a(De,{name:"search"})]),_:1},8,["modelValue"])]),header:i(t=>[a(xe,{props:t},{default:i(()=>[(q(!0),ee(he,null,Ce(t.cols,s=>(q(),$($e,{key:s.name,props:t},{default:i(()=>[x(ne(s.label),1)]),_:2},1032,["props"]))),128)),a($e,{"auto-width":""},{default:i(()=>[x("Action")]),_:1})]),_:2},1032,["props"])]),body:i(t=>[a(xe,{props:t},{default:i(()=>[(q(!0),ee(he,null,Ce(t.cols,s=>(q(),$(Pe,{key:s.name,props:t},{default:i(()=>[s.name==="STAT"?(q(),$(pl,{key:0,clickable:"",color:s.value.color,"text-color":"white",icon:s.value.icon},{default:i(()=>[x(ne(s.value.label),1)]),_:2},1032,["color","icon"])):(q(),ee("span",Ot,ne(s.value),1))]),_:2},1032,["props"]))),128)),a(Pe,{"auto-width":""},{default:i(()=>[t.row.detail.filter(s=>s.TSRVD_FLGSTS>0).length===0?(q(),$(N,{key:0,flat:"",color:"orange",icon:"edit",onClick:s=>O(t.row),dense:""},{default:i(()=>[a(B,null,{default:i(()=>[x("Edit this Order")]),_:1})]),_:2},1032,["onClick"])):G("",!0),t.row.detail.filter(s=>s.TSRVD_FLGSTS>0).length===t.row.detail.length?(q(),$(N,{key:1,flat:"",color:"indigo",icon:"print",onClick:s=>C(t.row.SRVH_DOCNO),dense:""},{default:i(()=>[a(B,null,{default:i(()=>[x("Print this order")]),_:1})]),_:2},1032,["onClick"])):G("",!0),t.row.detail.filter(s=>s.TSRVD_FLGSTS>0).length===0?(q(),$(N,{key:2,flat:"",color:"red",icon:"delete",onClick:s=>e(t.row.SRVH_DOCNO),dense:""},{default:i(()=>[a(B,null,{default:i(()=>[x(ne(t.row.detail.filter(s=>s.TSRVD_FLGSTS>0).length>0?"Cannot delete processed order":"Delete this Order"),1)]),_:2},1024)]),_:2},1032,["onClick"])):G("",!0),t.row.detail.filter(s=>s.TSRVD_FLGSTS>0).length>0?(q(),$(N,{key:3,flat:"",color:"cyan",icon:"visibility",onClick:s=>p(t.row),dense:""},{default:i(()=>[a(B,null,{default:i(()=>[x("View this Order")]),_:1})]),_:2},1032,["onClick"])):G("",!0),t.row.detail.filter(s=>s.TSRVD_FLGSTS==1).length===t.row.detail.length?(q(),$(N,{key:4,flat:"",color:"indigo",icon:"check",onClick:s=>R(t.row),dense:""},{default:i(()=>[a(B,null,{default:i(()=>[x(ne(t.row.detail.filter(s=>s.TSRVD_FLGSTS>0).length!==t.row.detail.length?"Please wait until all item checked":"Proceed all item to service"),1)]),_:2},1024)]),_:2},1032,["onClick"])):G("",!0)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{jt as default};
