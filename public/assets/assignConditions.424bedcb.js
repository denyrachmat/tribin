import{h,c as Z,K as j,L as ee,t as f,o as E,C as w,D as N,E as a,F as e,M as K,O as R,J as s,P as Q,R as G,S as F,T as L,U as M,V as ae,I as u,Q as c,W as P,X as z,Y as $,Z as Y,$ as oe,a0 as te}from"./index.62a1d3ca.js";import{Q as O}from"./QTooltip.17e36025.js";import{Q as le}from"./QBtnGroup.9dce4c84.js";import{Q as V,a as k,b as A,c as U}from"./QSelect.bb4b1e86.js";import{Q as J}from"./QList.2c4b1ed6.js";import{u as x}from"./format.c0b2ab39.js";import{u as B}from"./use-dialog-plugin-component.23878201.js";import{api as q,api_web as S}from"./axios.3bd5f3f5.js";import{_ as ne}from"./assignConditionsView.983adc16.js";import"./QTable.85e496c5.js";const se=[h("g",{transform:"translate(20 50)"},[h("rect",{x:"-10",y:"-30",width:"20",height:"60",fill:"currentColor",opacity:"0.6"},[h("animateTransform",{attributeName:"transform",type:"scale",from:"2",to:"1",begin:"0s",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keySplines:"0.1 0.9 0.4 1",keyTimes:"0;1",values:"2;1"})])]),h("g",{transform:"translate(50 50)"},[h("rect",{x:"-10",y:"-30",width:"20",height:"60",fill:"currentColor",opacity:"0.8"},[h("animateTransform",{attributeName:"transform",type:"scale",from:"2",to:"1",begin:"0.1s",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keySplines:"0.1 0.9 0.4 1",keyTimes:"0;1",values:"2;1"})])]),h("g",{transform:"translate(80 50)"},[h("rect",{x:"-10",y:"-30",width:"20",height:"60",fill:"currentColor",opacity:"0.9"},[h("animateTransform",{attributeName:"transform",type:"scale",from:"2",to:"1",begin:"0.2s",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keySplines:"0.1 0.9 0.4 1",keyTimes:"0;1",values:"2;1"})])])];var W=Z({name:"QSpinnerFacebook",props:j,setup(I){const{cSize:g,classes:p}=ee(I);return()=>h("svg",{class:p.value,width:g.value,height:g.value,viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},se)}});const ie=s("div",{class:"text-h6"},"Position Assign",-1),re={class:"text-h5"},de={__name:"positionAssignCondition",props:{groups:String,listCond:Array},setup(I){const{dialogRef:g,onDialogHide:p,onDialogOK:v,onDialogCancel:y}=B(),_=x(),d=I,n=f([]);E(()=>{n.value=d.listCond,n.value=n.value.sort((t,r)=>t.MCONDITION_ORDER_NUMBER-r.MCONDITION_ORDER_NUMBER)});const D=t=>{i(n.value,t,t-1)},b=t=>{i(n.value,t,t+1)},i=(t,r,C)=>{let o=t[r];t[r]=t[C],t[C]=o},T=()=>{_.dialog({title:"Confirmation",message:"Do you want to save this group ?",cancel:!0,persistent:!0}).onOk(async()=>{_.loading.show({spinner:W,spinnerColor:"yellow",spinnerSize:140,backgroundColor:"purple",message:"Save your information, Hang on...",messageColor:"black"});const t=n.value.map(r=>r.id);await q.post("/master/conditions/assignGroup",{data:t,MCONDITION_RPT_STAT:d.groups}).then(async r=>{_.loading.hide(),v()}).catch(r=>{_.loading.hide()})})};return(t,r)=>(w(),N(Y,{ref_key:"dialogRef",ref:g,onHide:$(p),"transition-show":"slide-up","transition-hide":"slide-down","full-width":""},{default:a(()=>[e(K,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:a(()=>[e(R,null,{default:a(()=>[ie]),_:1}),e(R,{class:"q-pa-sm"},{default:a(()=>[s("span",re,Q(d.groups),1),e(J,{bordered:""},{default:a(()=>[(w(!0),G(F,null,L(n.value,(C,o)=>M((w(),N(V,{key:C.id,class:"q-my-sm",clickable:"",dense:""},{default:a(()=>[e(k,{avatar:""},{default:a(()=>[e(ae,{color:"primary","text-color":"white"},{default:a(()=>[u(Q(o+1),1)]),_:2},1024)]),_:2},1024),e(k,null,{default:a(()=>[e(A,null,{default:a(()=>[u(Q(C.MCONDITION_DESCRIPTION),1)]),_:2},1024)]),_:2},1024),e(k,{side:""},{default:a(()=>[e(c,{icon:"arrow_upward",color:"green",flat:"",disable:o===0,onClick:l=>D(o)},{default:a(()=>[e(O,null,{default:a(()=>[u("Promote Positions")]),_:1})]),_:2},1032,["disable","onClick"])]),_:2},1024),e(k,{side:""},{default:a(()=>[e(c,{icon:"arrow_downward",color:"green",flat:"",disable:o===n.value.length-1,onClick:l=>b(o)},{default:a(()=>[e(O,null,{default:a(()=>[u("Demote Positions")]),_:1})]),_:2},1032,["disable","onClick"])]),_:2},1024)]),_:2},1024)),[[P]])),128))]),_:1})]),_:1}),e(z,{align:"right"},{default:a(()=>[e(c,{label:"OK",color:"primary",onClick:r[0]||(r[0]=C=>T()),disable:t.loading,loading:t.loading},null,8,["disable","loading"]),e(c,{flat:"",label:"Cancel",color:"red",onClick:$(y),loading:t.loading},null,8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},ue=s("div",{class:"text-h6"},"Transfer data to another CG",-1),ce={class:"row"},pe={class:"col"},me={class:"row q-pt-md"},fe={class:"col"},ge={__name:"exportDataView",props:{table:String},setup(I){const{dialogRef:g,onDialogHide:p,onDialogOK:v,onDialogCancel:y}=B(),_=x(),d=I,n=f(""),D=f(""),b=f([]),i=f(!1);E(()=>{T(),t()});const T=async()=>{i.value=!0,await S.get("company").then(o=>{i.value=!1,b.value=o.data.data}).catch(o=>{i.value=!1})},t=async()=>{i.value=!0,await S.get("companies/nowCG").then(o=>{i.value=!1,n.value=o.data}).catch(o=>{i.value=!1})},r=()=>{_.dialog({title:"Confirmation",message:"Do you want to transfer all this data ? all data on destination CG will be deleted !!",cancel:!0,persistent:!0}).onOk(async()=>{C()})},C=async()=>{i.value=!0,await S.post("companies/nowCG",{frCG:n.value,toCG:D.value,table:d.table}).then(o=>{i.value=!1}).catch(o=>{i.value=!1})};return(o,l)=>(w(),N(Y,{ref_key:"dialogRef",ref:g,onHide:$(p),"transition-show":"slide-up","transition-hide":"slide-down","full-width":""},{default:a(()=>[e(K,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:a(()=>[e(R,null,{default:a(()=>[ue]),_:1}),e(R,{class:"q-pa-sm"},{default:a(()=>[s("div",ce,[s("div",pe,[e(U,{dense:"",filled:"",label:"From CG",modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=m=>n.value=m),options:b.value,"option-label":"name","option-value":"connection","emit-value":"","map-options":"",loading:i.value},null,8,["modelValue","options","loading"])])]),s("div",me,[s("div",fe,[e(U,{dense:"",filled:"",label:"To CG",modelValue:D.value,"onUpdate:modelValue":l[1]||(l[1]=m=>D.value=m),options:b.value,"option-label":"name","option-value":"connection","emit-value":"","map-options":"",loading:i.value},null,8,["modelValue","options","loading"])])])]),_:1}),e(z,{align:"right"},{default:a(()=>[e(c,{label:"OK",color:"primary",onClick:l[2]||(l[2]=m=>r())}),e(c,{flat:"",label:"Cancel",color:"red",onClick:$(y)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}};const ve={class:"q-pa-md"},_e=s("div",{class:"row"},[s("div",{class:"col"},[s("div",{class:"text-h6"},"Assign Condition Group")])],-1),Ce={class:"row q-pt-md"},he={class:"col"},we={class:"row"},be={class:"col"},ke={class:"col text-right"},ye={class:"row q-pt-md"},De={class:"col",style:{"max-height":"80vh",overflow:"auto"}},Pe={__name:"assignConditions",setup(I){f([{name:"id",align:"left",label:"ID",field:"id",sortable:!0},{name:"MCONDITION_DESCRIPTION",align:"left",label:"Description",field:"MCONDITION_DESCRIPTION",sortable:!0}]);const g=f([]);f({sortBy:"desc",descending:!1,rowsPerPage:0});const p=f([]),v=f(""),y=f("new"),_=f(!1),d=x();B(),E(()=>{b()});const n=()=>{p.value=[],v.value="",y.value="new"},D=()=>{d.dialog({title:"Confirmation",message:"Are you sure want to delete this group ?",cancel:!0,persistent:!0}).onOk(async()=>{d.loading.show({spinner:W,spinnerColor:"yellow",spinnerSize:140,backgroundColor:"purple",message:"Save your information, Hang on...",messageColor:"black"}),await q.delete(`/master/conditions/deleteDataGroup/${btoa(v.value)}`).then(o=>{d.loading.hide(),n()})})},b=async()=>{_.value=!0,await q.get("/master/conditions/getdata").then(o=>{console.log(o),_.value=!1,g.value=o.data}).catch(o=>{_.value=!1})},i=()=>{d.dialog({component:ne}).onOk(async o=>{v.value=o.MCONDITION_RPT_STAT,p.value=o.group.map(l=>l.id),y.value="edit"})},T=()=>{d.dialog({component:de,componentProps:{groups:v.value,listCond:g.value.filter(o=>p.value.includes(o.id))}}).onOk(async o=>{n()})},t=()=>{d.dialog({title:"Add Conditions",message:"Input conditions",prompt:{model:"",isValid:o=>o.length>2,type:"text"},cancel:!0,persistent:!0}).onOk(async o=>{await S.post("condition",{MCONDITION_DESCRIPTION:o,MCONDITION_ORDER_NUMBER:null}).then(async l=>{n(),await b()})})},r=o=>{d.dialog({title:"Confirmation",message:"Are you sure want to delete this data ?",cancel:!0,persistent:!0}).onOk(async()=>{await S.delete(`condition/${btoa(o)}`).then(async l=>{n(),await b()})})},C=()=>{d.dialog({component:ge,componentProps:{dataTransfer:[]}}).onOk(async o=>{})};return(o,l)=>(w(),G("div",ve,[_e,s("div",Ce,[s("div",he,[s("div",we,[s("div",be,[e(oe,{label:"Group Name",outlined:"",dense:"",modelValue:v.value,"onUpdate:modelValue":l[0]||(l[0]=m=>v.value=m),disable:y.value==="edit"},{after:a(()=>[e(c,{dense:"",icon:"search",color:"blue",flat:"",onClick:i})]),_:1},8,["modelValue","disable"])]),s("div",ke,[e(le,{outline:""},{default:a(()=>[e(c,{outline:"",color:"blue",icon:"description",onClick:n},{default:a(()=>[e(O,null,{default:a(()=>[u("New")]),_:1})]),_:1}),e(c,{outline:"",color:"blue",icon:"save",onClick:T,disable:!v.value||p.value.length===0},{default:a(()=>[e(O,null,{default:a(()=>[u("Save Conditions")]),_:1})]),_:1},8,["disable"]),e(c,{outline:"",color:"blue",icon:"add",onClick:l[1]||(l[1]=m=>t())},{default:a(()=>[e(O,null,{default:a(()=>[u("Add more conditions")]),_:1})]),_:1}),e(c,{outline:"",color:"orange",icon:"send",onClick:l[2]||(l[2]=m=>C())},{default:a(()=>[e(O,null,{default:a(()=>[u("Transfer Data from This CG to Another CG")]),_:1})]),_:1}),e(c,{outline:"",color:"red",icon:"delete",onClick:D,disable:!v.value},{default:a(()=>[e(O,null,{default:a(()=>[u("Delete")]),_:1})]),_:1},8,["disable"])]),_:1})])]),s("div",ye,[s("div",De,[e(J,{bordered:""},{default:a(()=>[g.value.length===0?M((w(),N(V,{key:0,class:"q-my-sm",clickable:"",tag:"label"},{default:a(()=>[_.value?(w(),N(k,{key:0},{default:a(()=>[u(" Data is loading, please wait. ")]),_:1})):(w(),N(k,{key:1},{default:a(()=>[u(" No Data Available ! ")]),_:1}))]),_:1})),[[P]]):(w(!0),G(F,{key:1},L(g.value,(m,X)=>M((w(),N(V,{key:X,class:"q-my-sm",clickable:"",tag:"label"},{default:a(()=>[e(k,{side:"",top:""},{default:a(()=>[e(te,{modelValue:p.value,"onUpdate:modelValue":l[3]||(l[3]=H=>p.value=H),val:m.id},null,8,["modelValue","val"])]),_:2},1024),e(k,null,{default:a(()=>[e(A,null,{default:a(()=>[u(Q(m.MCONDITION_DESCRIPTION),1)]),_:2},1024),e(A,{caption:"",lines:"1"},{default:a(()=>[u("Description")]),_:1})]),_:2},1024),e(k,{side:""},{default:a(()=>[e(c,{icon:"delete",color:"red",outline:"",onClick:H=>r(m.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)),[[P]])),128))]),_:1})])])])])]))}};export{Pe as default};
