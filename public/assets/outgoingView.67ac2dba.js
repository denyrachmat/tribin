import{Q as K}from"./QTooltip.18094be9.js";import{s,o as X,B as u,C as h,D as l,E as e,L as F,M as R,I as a,Z as v,am as x,P as L,R as k,S as U,H as g,O as M,W,Q as b,X as I,Y as Z,T as Y,U as le,V as ae,aX as oe}from"./index.c50139b5.js";import{u as E,j as z,k as G,l as P,Q as te,a as j,b as T,c as N}from"./QTable.b19c5125.js";import{Q as $,a as A}from"./QTd.66a923e2.js";import{api_web as B}from"./axios.98e8b196.js";import{Q as se,a as ne,C as de}from"./ClosePopup.8573cfd3.js";import{u as J}from"./use-dialog-plugin-component.c94e0e3e.js";import"./use-cache.b0833c75.js";import"./date.28ee1eaa.js";const ie=a("div",{class:"text-h6"},"Sales Order Choose",-1),ue={class:"row"},re={class:"col"},ce={__name:"salesOrderChoose",setup(H){E();const w=s([]),_=s([{name:"TSLO_SLOCD",label:"Sales Ord Code",field:"TSLO_SLOCD",sortable:!0,align:"left"},{name:"MCUS_CUSNM",label:"Customer Name",field:"MCUS_CUSNM",sortable:!0,align:"left"},{name:"TSLO_PLAN_DLVDT",label:"DLV Plan Date",field:"TSLO_PLAN_DLVDT",sortable:!0,align:"left"}]),m=s(!1),r=s(""),p=s("");X(()=>{D()});const D=async()=>{m.value=!0,await B.post("delivery/outstanding-warehouse-api",{searchBy:r.value,searchValue:p.value}).then(d=>{m.value=!1,w.value=d.data.data}).catch(d=>{m.value=!1})},C=d=>{c(d)},{dialogRef:S,onDialogHide:f,onDialogOK:c,onDialogCancel:n}=J();return(d,V)=>(u(),h(Z,{ref_key:"dialogRef",ref:S,onHide:I(f),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:l(()=>[e(F,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:l(()=>[e(R,null,{default:l(()=>[ie]),_:1}),e(R,{class:"q-pa-sm"},{default:l(()=>[a("div",ue,[a("div",re,[e(z,{title:"Outgoing List",rows:w.value,columns:_.value,"row-key":"TDLVORD_DLVCD",loading:m.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":l(()=>[e(G,{outlined:"",modelValue:r.value,"onUpdate:modelValue":V[0]||(V[0]=i=>r.value=i),options:_.value,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),e(v,{borderless:"",dense:"",modelValue:p.value,"onUpdate:modelValue":[V[1]||(V[1]=i=>p.value=i),V[2]||(V[2]=i=>d.getOutgoingData())],placeholder:"Search",outlined:"",debounce:"1000"},{append:l(()=>[e(x,{name:"search"})]),_:1},8,["modelValue"])]),header:l(i=>[e($,{props:i},{default:l(()=>[(u(!0),L(k,null,U(i.cols,y=>(u(),h(P,{key:y.name,props:i},{default:l(()=>[g(M(y.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(i=>[e($,{props:i,onClick:y=>C(i.row)},{default:l(()=>[(u(!0),L(k,null,U(i.cols,y=>(u(),h(A,{key:y.name,props:i},{default:l(()=>[g(M(y.value),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props","onClick"])]),_:1},8,["rows","columns","loading"])])])]),_:1}),e(W,{align:"right"},{default:l(()=>[e(b,{flat:"",label:"Cancel",color:"red",onClick:I(n)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},me=a("div",{class:"text-h6"},"Create Outgoing Delivery",-1),pe={style:{border:"1px black solid","border-radius":"10px"}},_e=a("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[a("b",null,"Header")],-1),fe={class:"row"},ve={class:"col"},ge={class:"col q-pl-md"},De={class:"row items-center justify-end"},Ce={class:"row q-pt-md"},Ve={class:"col"},be={class:"col q-pl-md"},he={class:"row q-pt-md"},Se={class:"col"},ye={style:{border:"1px black solid","border-radius":"10px",height:"35vh",overflow:"auto"}},Oe=a("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[a("b",null,"List Of Items")],-1),we={__name:"outgoingCreate",setup(H){const w=E(),_=s(!1),m=s(""),r=s(""),p=s(""),D=s(""),C=s(""),S=s([]),f=()=>{},c=()=>{w.dialog({component:ce}).onOk(async O=>{n(O.TSLO_SLOCD)})},n=async O=>{_.value=!0,await B.get(`delivery/outstanding-warehouse/${btoa(O)}`).then(o=>{_.value=!1,S.value=o.data.data}).catch(o=>{_.value=!1})},d=O=>{console.log(S[O])},{dialogRef:V,onDialogHide:i,onDialogOK:y,onDialogCancel:ee}=J();return(O,o)=>(u(),h(Z,{ref_key:"dialogRef",ref:V,onHide:I(i),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:l(()=>[e(F,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:l(()=>[e(R,null,{default:l(()=>[me]),_:1}),e(R,{class:"q-pa-sm"},{default:l(()=>[a("fieldset",pe,[_e,a("div",fe,[a("div",ve,[e(v,{label:"Code",readonly:"",dense:"",filled:"",modelValue:m.value,"onUpdate:modelValue":o[0]||(o[0]=t=>m.value=t)},null,8,["modelValue"])]),a("div",ge,[e(v,{filled:"",modelValue:r.value,"onUpdate:modelValue":o[2]||(o[2]=t=>r.value=t),dense:""},{append:l(()=>[e(x,{name:"event",class:"cursor-pointer"},{default:l(()=>[e(se,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(ne,{modelValue:r.value,"onUpdate:modelValue":o[1]||(o[1]=t=>r.value=t),mask:"YYYY-MM-DD"},{default:l(()=>[a("div",De,[Y(e(b,{label:"Close",color:"primary",flat:""},null,512),[[de]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),a("div",Ce,[a("div",Ve,[e(v,{modelValue:p.value,"onUpdate:modelValue":o[3]||(o[3]=t=>p.value=t),label:"Sales Order",dense:"",readonly:""},{append:l(()=>[e(b,{round:"",dense:"",flat:"",icon:"search",onClick:c})]),_:1},8,["modelValue"])]),a("div",be,[e(v,{modelValue:D.value,"onUpdate:modelValue":o[4]||(o[4]=t=>D.value=t),label:"Customer",dense:"",readonly:""},null,8,["modelValue"])])]),a("div",he,[a("div",Se,[e(v,{modelValue:C.value,"onUpdate:modelValue":o[5]||(o[5]=t=>C.value=t),label:"Remarks",dense:""},null,8,["modelValue"])])])]),a("fieldset",ye,[Oe,e(te,{bordered:"",dense:""},{default:l(()=>[S.value.length>0?(u(!0),L(k,{key:0},U(O.listSavedItems,(t,q)=>(u(),h(j,{key:q,class:"q-my-sm",dense:""},{default:l(()=>[e(T,{avatar:""},{default:l(()=>[e(le,{"text-color":"blue"},{default:l(()=>[g(M(q+1),1)]),_:2},1024)]),_:2},1024),e(T,null,{default:l(()=>[e(N,null,{default:l(()=>[e(v,{dense:"",label:"Item Code",filled:"",modelValue:t.TSLODETA_ITMCD,"onUpdate:modelValue":Q=>t.TSLODETA_ITMCD=Q},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(T,null,{default:l(()=>[e(N,null,{default:l(()=>[e(v,{dense:"",label:"Item Name",filled:"",modelValue:t.MITM_ITMNM,"onUpdate:modelValue":Q=>t.MITM_ITMNM=Q},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(T,{side:""},{default:l(()=>[e(b,{icon:"delete",color:"red",flat:"",onClick:Q=>d(q)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)):Y((u(),h(j,{key:1,class:"q-my-sm",clickable:""},{default:l(()=>[e(T,null,{default:l(()=>[e(N,null,{default:l(()=>[g(" Choose sales order first to access item list ")]),_:1})]),_:1})]),_:1})),[[ae]])]),_:1})])]),_:1}),e(W,{align:"right"},{default:l(()=>[e(b,{label:"OK",color:"primary",onClick:o[6]||(o[6]=t=>f())}),e(b,{flat:"",label:"Cancel",color:"red",onClick:I(ee)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},Le={class:"q-pa-md"},Te={class:"row q-pb-md"},ke=a("div",{class:"col"},[a("span",{class:"text-h4"},"Outgoing")],-1),Ue={class:"col text-right"},Me={class:"row q-pt-md"},Qe={class:"col"},Be={__name:"outgoingView",setup(H){const w=E(),_=s([]),m=s([{name:"TDLVORD_DLVCD",label:"Delivery ID",field:"TDLVORD_DLVCD",sortable:!0,align:"left"},{name:"MCUS_CUSNM",label:"Customer Name",field:"MCUS_CUSNM",sortable:!0,align:"left"},{name:"TDLVORD_ISSUDT",label:"Issue Date",field:"TDLVORD_ISSUDT",sortable:!0,align:"left"},{name:"TDLVORD_REMARK",label:"Remark",field:"TDLVORD_REMARK",sortable:!0,align:"left"}]),r=s(!1),p=s(""),D=s("");X(()=>{C()});const C=async()=>{r.value=!0,await B.post("delivery/searchAPI",{searchBy:p.value,searchValue:D.value}).then(f=>{r.value=!1,_.value=f.data.data}).catch(f=>{r.value=!1})},S=()=>{w.dialog({component:we}).onOk(async f=>{C()})};return(f,c)=>(u(),L("div",Le,[a("div",Te,[ke,a("div",Ue,[e(b,{icon:"add",color:"blue",onClick:S},{default:l(()=>[e(K,null,{default:l(()=>[g("Create New Delivery")]),_:1})]),_:1})])]),e(oe),a("div",Me,[a("div",Qe,[e(z,{title:"Outgoing List",rows:_.value,columns:m.value,"row-key":"TDLVORD_DLVCD",loading:r.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":l(()=>[e(G,{outlined:"",modelValue:p.value,"onUpdate:modelValue":c[0]||(c[0]=n=>p.value=n),options:m.value,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),e(v,{borderless:"",dense:"",modelValue:D.value,"onUpdate:modelValue":[c[1]||(c[1]=n=>D.value=n),c[2]||(c[2]=n=>C())],placeholder:"Search",outlined:"",debounce:"1000"},{append:l(()=>[e(x,{name:"search"})]),_:1},8,["modelValue"])]),header:l(n=>[e($,{props:n},{default:l(()=>[(u(!0),L(k,null,U(n.cols,d=>(u(),h(P,{key:d.name,props:n},{default:l(()=>[g(M(d.label),1)]),_:2},1032,["props"]))),128)),e(P,{"auto-width":""},{default:l(()=>[g("Action")]),_:1})]),_:2},1032,["props"])]),body:l(n=>[e($,{props:n},{default:l(()=>[(u(!0),L(k,null,U(n.cols,d=>(u(),h(A,{key:d.name,props:n},{default:l(()=>[g(M(d.value),1)]),_:2},1032,["props"]))),128)),e(A,{"auto-width":""},{default:l(()=>[e(b,{flat:"",color:"orange",icon:"edit",onClick:c[3]||(c[3]=d=>f.onEdit()),dense:""},{default:l(()=>[e(K,null,{default:l(()=>[g("Edit Data")]),_:1})]),_:1})]),_:1})]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{Be as default};
