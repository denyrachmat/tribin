import{Q as b}from"./QTooltip.1c201fd4.js";import{s as m,B as _,C as D,D as l,E as e,J as $,K as h,I as a,P as S,aa as U,aW as q,Q as p,L as I,M as w,O as x,o as Y,R as g,S as B,H as c,aU as k,aV as Q,aX as O}from"./index.745fb840.js";import{u as M,b as N,a as K,c as E,m as y}from"./use-dialog-plugin-component.d37d9569.js";import{Q as H,a as R}from"./date.ae020f18.js";import{api_web as j}from"./axios.071474da.js";import{Q as A,a as F,C as L}from"./ClosePopup.df70dad6.js";const J=a("div",{class:"text-h6"},"Create Order",-1),W={style:{border:"1px black solid","border-radius":"10px"}},X=a("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[a("b",null,"Header")],-1),z={class:"row"},G={class:"col"},Z={class:"col q-pl-md"},ee={class:"row items-center justify-end"},le={class:"row"},ae={class:"col"},oe=a("fieldset",{style:{border:"1px black solid","border-radius":"10px",height:"35vh",overflow:"auto"}},[a("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[a("b",null,"Detail Items")])],-1),te={__name:"serviceCreateOrder",setup(P){const{dialogRef:V,onDialogHide:f,onDialogOK:v,onDialogCancel:C}=M();N();const s=m({SRVH_DOCNO:"",SRVH_ISSDT:"",SRVH_CUSCD:""});return(d,o)=>(_(),D(x,{ref_key:"dialogRef",ref:V,onHide:w(f),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:l(()=>[e($,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:l(()=>[e(h,null,{default:l(()=>[J]),_:1}),e(h,{class:"q-pa-sm"},{default:l(()=>[a("fieldset",W,[X,a("div",z,[a("div",G,[e(S,{label:"SPK No",readonly:"",dense:"",modelValue:s.value.SRVH_DOCNO,"onUpdate:modelValue":o[0]||(o[0]=n=>s.value.SRVH_DOCNO=n),filled:""},null,8,["modelValue"])]),a("div",Z,[e(S,{filled:"",modelValue:s.value.SRVH_ISSDT,"onUpdate:modelValue":o[2]||(o[2]=n=>s.value.SRVH_ISSDT=n),dense:"",label:"Issue Date",loading:d.loading,onClick:o[3]||(o[3]=n=>d.quotationIssueDate.qDateProxy.show()),mask:"####-##-##","fill-mask":"",hint:"Mask: YYYY-MM-DD"},{append:l(()=>[e(U,{name:"event",class:"cursor-pointer"},{default:l(()=>[e(A,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(F,{modelValue:s.value.SRVH_ISSDT,"onUpdate:modelValue":o[1]||(o[1]=n=>s.value.SRVH_ISSDT=n),mask:"YYYY-MM-DD"},{default:l(()=>[a("div",ee,[q(e(p,{label:"Close",color:"primary",flat:""},null,512),[[L]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","loading"])])]),a("div",le,[a("div",ae,[e(S,{label:"Customer Choose",dense:"",modelValue:s.value.SRVH_CUSCD,"onUpdate:modelValue":o[4]||(o[4]=n=>s.value.SRVH_CUSCD=n),filled:""},null,8,["modelValue"])])])]),oe]),_:1}),e(I,{align:"right"},{default:l(()=>[e(p,{label:"OK",color:"primary",onClick:o[5]||(o[5]=n=>d.onSubmitData()),disable:d.stateSubmit},null,8,["disable"]),e(p,{flat:"",label:"Cancel",color:"red",onClick:w(C)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}};const se={class:"q-pa-md"},ne={class:"row q-pb-md"},de=a("div",{class:"col"},[a("span",{class:"text-h4"},"Receive Order ")],-1),ie={class:"col text-right"},re={class:"row q-pt-md"},ue={class:"col"},Ce={__name:"serviceView",setup(P){const V=N(),f=m("SRVH_DOCNO"),v=m(""),C=m([]),s=m([{name:"SRVH_DOCNO",label:"SPK No",field:"SRVH_DOCNO",sortable:!0,align:"left"},{name:"SRVH_CUSCD",label:"Cust",field:"SRVH_CUSCD",sortable:!0,align:"left"},{name:"created_at",label:"Created Date",field:"created_at",sortable:!0,align:"left"}]),d=m(!1);Y(()=>{o()});const o=async()=>{d.value=!0,await j.post("service/search",{searchBy:f.value,searchValue:v.value}).then(i=>{d.value=!1,C.value=i.data.data}).catch(i=>{d.value=!1})},n=()=>{V.dialog({component:te}).onOk(async i=>{o()})},T=i=>{window.open("https://joss.jatpowerindo.co.id/PDF/quotation/"+btoa(i),"_blank").focus()};return(i,u)=>(_(),g("div",se,[a("div",ne,[de,a("div",ie,[e(p,{icon:"add",color:"blue",onClick:n},{default:l(()=>[e(b,null,{default:l(()=>[c("Create New Order")]),_:1})]),_:1})])]),e(B),a("div",re,[a("div",ue,[e(K,{title:"Created Order",rows:C.value,columns:s.value,"row-key":"name",loading:d.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":l(()=>[e(E,{outlined:"",modelValue:f.value,"onUpdate:modelValue":u[0]||(u[0]=t=>f.value=t),options:s.value,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),e(S,{borderless:"",dense:"",modelValue:v.value,"onUpdate:modelValue":[u[1]||(u[1]=t=>v.value=t),u[2]||(u[2]=t=>i.dataQuo())],placeholder:"Search",outlined:"",debounce:"1000"},{append:l(()=>[e(U,{name:"search"})]),_:1},8,["modelValue"])]),header:l(t=>[e(H,{props:t},{default:l(()=>[(_(!0),g(k,null,Q(t.cols,r=>(_(),D(y,{key:r.name,props:t},{default:l(()=>[c(O(r.label),1)]),_:2},1032,["props"]))),128)),e(y,{"auto-width":""},{default:l(()=>[c("Action")]),_:1})]),_:2},1032,["props"])]),body:l(t=>[e(H,{props:t},{default:l(()=>[(_(!0),g(k,null,Q(t.cols,r=>(_(),D(R,{key:r.name,props:t},{default:l(()=>[c(O(r.value),1)]),_:2},1032,["props"]))),128)),e(R,{"auto-width":""},{default:l(()=>[e(p,{flat:"",color:"orange",icon:"edit",onClick:r=>i.onClickEdit(t.row.TQUO_QUOCD),dense:""},{default:l(()=>[e(b,null,{default:l(()=>[c("Edit this quotation")]),_:1})]),_:2},1032,["onClick"]),e(p,{flat:"",color:"indigo",icon:"print",onClick:r=>T(t.row.TQUO_QUOCD),dense:""},{default:l(()=>[e(b,null,{default:l(()=>[c("Print this order")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{Ce as default};
