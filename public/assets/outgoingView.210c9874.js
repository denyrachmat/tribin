import{Q as x}from"./QTooltip.5d1753b3.js";import{h as b,c as F,J as ne,K as de,ah as re,a1 as ue,aj as ie,a5 as ce,a as j,aa as me,g as _e,bh as fe,s as n,o as z,B as C,C as w,D as l,E as e,L as J,M as N,I as a,Z as y,am as K,P as M,R as I,S as $,H as V,O as Q,W,Q as T,X as q,Y as Z,T as G,U as ve,V as pe,aX as De}from"./index.866cbb13.js";import{u as Y,j as ee,k as le,l as E,Q as Ce,a as X,b as k,c as R}from"./QTable.733c6a4a.js";import{Q as P,a as B}from"./QTd.9258acb8.js";import{api_web as A}from"./axios.ac399989.js";import{Q as ge,a as Se,C as Ve}from"./ClosePopup.1a38bf05.js";import{u as ae}from"./use-dialog-plugin-component.90dec5da.js";import"./use-cache.b0833c75.js";import"./date.40c7b529.js";const be=[b("g",{transform:"translate(-20,-20)"},[b("path",{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"},[b("animateTransform",{attributeName:"transform",type:"rotate",from:"90 50 50",to:"0 50 50",dur:"1s",repeatCount:"indefinite"})])]),b("g",{transform:"translate(20,20) rotate(15 50 50)"},[b("path",{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"},[b("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"90 50 50",dur:"1s",repeatCount:"indefinite"})])])];var he=F({name:"QSpinnerGears",props:ne,setup(m){const{cSize:f,classes:s}=de(m);return()=>b("svg",{class:s.value,width:f.value,height:f.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},be)}}),Le=F({name:"QInnerLoading",props:{...re,...ue,showing:Boolean,color:String,size:{type:[String,Number],default:42},label:String,labelClass:String,labelStyle:[String,Array,Object]},setup(m,{slots:f}){const s=_e(),d=ie(m,s.proxy.$q),{transitionProps:u,transitionStyle:S}=ce(m),p=j(()=>"q-inner-loading absolute-full column flex-center"+(d.value===!0?" q-inner-loading--dark":"")),D=j(()=>"q-inner-loading__label"+(m.labelClass!==void 0?` ${m.labelClass}`:""));function h(){const i=[b(fe,{size:m.size,color:m.color})];return m.label!==void 0&&i.push(b("div",{class:D.value,style:m.labelStyle},[m.label])),i}function L(){return m.showing===!0?b("div",{class:p.value,style:S.value},f.default!==void 0?f.default():h()):null}return()=>b(me,u.value,L)}});const ye=a("div",{class:"text-h6"},"Sales Order Choose",-1),Te={class:"row"},Oe={class:"col"},we={__name:"salesOrderChoose",setup(m){Y();const f=n([]),s=n([{name:"TSLO_SLOCD",label:"Sales Ord Code",field:"TSLO_SLOCD",sortable:!0,align:"left"},{name:"MCUS_CUSNM",label:"Customer Name",field:"MCUS_CUSNM",sortable:!0,align:"left"},{name:"TSLO_PLAN_DLVDT",label:"DLV Plan Date",field:"TSLO_PLAN_DLVDT",sortable:!0,align:"left"}]),d=n(!1),u=n(""),S=n("");z(()=>{p()});const p=async()=>{d.value=!0,await A.post("delivery/outstanding-warehouse-api",{searchBy:u.value,searchValue:S.value}).then(t=>{d.value=!1,f.value=t.data.data}).catch(t=>{d.value=!1})},D=t=>{i(t)},{dialogRef:h,onDialogHide:L,onDialogOK:i,onDialogCancel:r}=ae();return(t,_)=>(C(),w(Z,{ref_key:"dialogRef",ref:h,onHide:q(L),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:l(()=>[e(J,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:l(()=>[e(N,null,{default:l(()=>[ye]),_:1}),e(N,{class:"q-pa-sm"},{default:l(()=>[a("div",Te,[a("div",Oe,[e(ee,{title:"Outgoing List",rows:f.value,columns:s.value,"row-key":"TDLVORD_DLVCD",loading:d.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":l(()=>[e(le,{outlined:"",modelValue:u.value,"onUpdate:modelValue":_[0]||(_[0]=v=>u.value=v),options:s.value,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),e(y,{borderless:"",dense:"",modelValue:S.value,"onUpdate:modelValue":[_[1]||(_[1]=v=>S.value=v),_[2]||(_[2]=v=>t.getOutgoingData())],placeholder:"Search",outlined:"",debounce:"1000"},{append:l(()=>[e(K,{name:"search"})]),_:1},8,["modelValue"])]),header:l(v=>[e(P,{props:v},{default:l(()=>[(C(!0),M(I,null,$(v.cols,O=>(C(),w(E,{key:O.name,props:v},{default:l(()=>[V(Q(O.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(v=>[e(P,{props:v,onClick:O=>D(v.row)},{default:l(()=>[(C(!0),M(I,null,$(v.cols,O=>(C(),w(B,{key:O.name,props:v},{default:l(()=>[V(Q(O.value),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props","onClick"])]),_:1},8,["rows","columns","loading"])])])]),_:1}),e(W,{align:"right"},{default:l(()=>[e(T,{flat:"",label:"Cancel",color:"red",onClick:q(r)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},ke=a("div",{class:"text-h6"},"Create Outgoing Delivery",-1),Ue={style:{border:"1px black solid","border-radius":"10px"}},Re=a("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[a("b",null,"Header")],-1),Me={class:"row"},Qe={class:"col"},Ie={class:"col q-pl-md"},$e={class:"row items-center justify-end"},Ae={class:"row q-pt-md"},Ne={class:"col"},qe={class:"col q-pl-md"},Pe={class:"row q-pt-md"},He={class:"col"},xe={style:{border:"1px black solid","border-radius":"10px",height:"35vh",overflow:"auto"}},Ee=a("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[a("b",null,"List Of Items")],-1),Be={__name:"outgoingCreate",props:{dataHeader:Array},setup(m){const f=Y(),s=m;z(()=>{Object.values(s.dataHeader).length>0&&(u.value=s.dataHeader.TDLVORD_DLVCD,S.value=s.dataHeader.TDLVORD_CUSCD,p.value=s.dataHeader.TDLVORD_ISSUDT,D.value=s.dataHeader.TDLVORDDETA_SLOCD,h.value=s.dataHeader.MCUS_CUSCD,L.value=s.dataHeader.MCUS_CUSNM,i.value=s.dataHeader.TDLVORD_REMARK,r.value=s.dataHeader.listItems)});const d=n(!1),u=n(""),S=n(""),p=n(""),D=n(""),h=n(""),L=n(""),i=n(""),r=n([]),t=()=>{f.dialog({title:"Confirmation",message:"Are you sure wan to save this outgoing ?",cancel:!0,persistent:!0}).onOk(async()=>{d.value=!0,await A.post("delivery",{TDLVORD_DLVCD:u.value,TDLVORD_CUSCD:S.value,TDLVORD_ISSUDT:p.value,TDLVORDDETA_SLOCD:D.value,MCUS_CUSCD:h.value,TDLVORD_REMARK:i.value,SO_DET:r.value}).then(g=>{d.value=!1,r.value=g.data.data}).catch(g=>{d.value=!1})})},_=()=>{f.dialog({component:we}).onOk(async g=>{D.value=g.TSLO_SLOCD,L.value=g.MCUS_CUSNM,h.value=g.MCUS_CUSCD,v(g.TSLO_SLOCD)})},v=async g=>{d.value=!0,await A.get(`delivery/outstanding-warehouse/${btoa(g)}`).then(c=>{d.value=!1,r.value=c.data.data}).catch(c=>{d.value=!1})},O=g=>{f.dialog({title:"Confirmation",message:`Do you want to delete this lines no ${g+1} ?`,cancel:!0,persistent:!0}).onOk(async()=>{r.value.splice(g,1)})},{dialogRef:te,onDialogHide:oe,onDialogOK:Fe,onDialogCancel:se}=ae();return(g,c)=>(C(),w(Z,{ref_key:"dialogRef",ref:te,onHide:q(oe),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:l(()=>[e(J,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:l(()=>[e(N,null,{default:l(()=>[ke]),_:1}),e(N,{class:"q-pa-sm"},{default:l(()=>[a("fieldset",Ue,[Re,e(Le,{showing:d.value,dark:""},{default:l(()=>[e(he,{size:"50px",color:"primary"})]),_:1},8,["showing"]),a("div",Me,[a("div",Qe,[e(y,{label:"Code",readonly:"",dense:"",filled:"",modelValue:u.value,"onUpdate:modelValue":c[0]||(c[0]=o=>u.value=o)},null,8,["modelValue"])]),a("div",Ie,[e(y,{filled:"",modelValue:p.value,"onUpdate:modelValue":c[2]||(c[2]=o=>p.value=o),dense:""},{append:l(()=>[e(K,{name:"event",class:"cursor-pointer"},{default:l(()=>[e(ge,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Se,{modelValue:p.value,"onUpdate:modelValue":c[1]||(c[1]=o=>p.value=o),mask:"YYYY-MM-DD"},{default:l(()=>[a("div",$e,[G(e(T,{label:"Close",color:"primary",flat:""},null,512),[[Ve]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),a("div",Ae,[a("div",Ne,[e(y,{modelValue:D.value,"onUpdate:modelValue":c[3]||(c[3]=o=>D.value=o),label:"Sales Order",dense:"",readonly:""},{append:l(()=>[e(T,{round:"",dense:"",flat:"",icon:"search",onClick:_})]),_:1},8,["modelValue"])]),a("div",qe,[e(y,{modelValue:L.value,"onUpdate:modelValue":c[4]||(c[4]=o=>L.value=o),label:"Customer",dense:"",readonly:""},null,8,["modelValue"])])]),a("div",Pe,[a("div",He,[e(y,{modelValue:i.value,"onUpdate:modelValue":c[5]||(c[5]=o=>i.value=o),label:"Remarks",dense:""},null,8,["modelValue"])])])]),a("fieldset",xe,[Ee,e(Ce,{bordered:"",dense:""},{default:l(()=>[r.value.length>0?(C(!0),M(I,{key:0},$(r.value,(o,H)=>(C(),w(X,{key:H,class:"q-my-sm",dense:"",loading:d.value},{default:l(()=>[e(k,{avatar:""},{default:l(()=>[e(ve,{"text-color":"blue"},{default:l(()=>[V(Q(H+1),1)]),_:2},1024)]),_:2},1024),e(k,null,{default:l(()=>[e(R,null,{default:l(()=>[e(y,{dense:"",label:"Item Code",filled:"",modelValue:o.TSLODETA_ITMCD,"onUpdate:modelValue":U=>o.TSLODETA_ITMCD=U,readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(k,null,{default:l(()=>[e(R,null,{default:l(()=>[e(y,{dense:"",label:"Item Name",filled:"",modelValue:o.MITM_ITMNM,"onUpdate:modelValue":U=>o.MITM_ITMNM=U,readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(k,null,{default:l(()=>[e(R,null,{default:l(()=>[e(y,{dense:"",label:"Qty",filled:"",modelValue:o.BALQT,"onUpdate:modelValue":U=>o.BALQT=U},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(k,null,{default:l(()=>[e(R,null,{default:l(()=>[V(" Rp. "+Q(o.TSLODETA_PRC.toLocaleString()),1)]),_:2},1024),e(R,{caption:""},{default:l(()=>[V(" Price ")]),_:1})]),_:2},1024),e(k,{side:""},{default:l(()=>[e(T,{icon:"delete",color:"red",flat:"",onClick:U=>O(H)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["loading"]))),128)):G((C(),w(X,{key:1,class:"q-my-sm",clickable:""},{default:l(()=>[e(k,null,{default:l(()=>[e(R,null,{default:l(()=>[V(" Choose sales order first to access item list ")]),_:1})]),_:1})]),_:1})),[[pe]])]),_:1})])]),_:1}),e(W,{align:"right"},{default:l(()=>[e(T,{label:"OK",color:"primary",onClick:c[6]||(c[6]=o=>t())}),e(T,{flat:"",label:"Cancel",color:"red",onClick:q(se)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},ze={class:"q-pa-md"},Ke={class:"row q-pb-md"},Ye=a("div",{class:"col"},[a("span",{class:"text-h4"},"Outgoing")],-1),je={class:"col text-right"},Ge={class:"row q-pt-md"},Xe={class:"col"},nl={__name:"outgoingView",setup(m){const f=Y(),s=n([]),d=n([{name:"TDLVORD_DLVCD",label:"Delivery ID",field:"TDLVORD_DLVCD",sortable:!0,align:"left"},{name:"MCUS_CUSNM",label:"Customer Name",field:"MCUS_CUSNM",sortable:!0,align:"left"},{name:"TDLVORD_ISSUDT",label:"Issue Date",field:"TDLVORD_ISSUDT",sortable:!0,align:"left"},{name:"TDLVORD_REMARK",label:"Remark",field:"TDLVORD_REMARK",sortable:!0,align:"left"}]),u=n(!1),S=n(""),p=n("");z(()=>{D()});const D=async()=>{u.value=!0,await A.post("delivery/searchAPI",{searchBy:S.value,searchValue:p.value}).then(i=>{u.value=!1,s.value=i.data.data}).catch(i=>{u.value=!1})},h=(i=[])=>{f.dialog({component:Be,componentProps:{dataHeader:i}}).onOk(async r=>{D()})},L=i=>{f.dialog({title:"Confirmation",message:"Are you sure want to delete this data ?",cancel:!0,persistent:!0}).onOk(async()=>{u.value=!0,await A.delete(`delivery/${btoa(i)}`).then(r=>{u.value=!1,D()})})};return(i,r)=>(C(),M("div",ze,[a("div",Ke,[Ye,a("div",je,[e(T,{icon:"add",color:"blue",onClick:h},{default:l(()=>[e(x,null,{default:l(()=>[V("Create New Delivery")]),_:1})]),_:1})])]),e(De),a("div",Ge,[a("div",Xe,[e(ee,{title:"Outgoing List",rows:s.value,columns:d.value,"row-key":"TDLVORD_DLVCD",loading:u.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":l(()=>[e(le,{outlined:"",modelValue:S.value,"onUpdate:modelValue":r[0]||(r[0]=t=>S.value=t),options:d.value,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),e(y,{borderless:"",dense:"",modelValue:p.value,"onUpdate:modelValue":[r[1]||(r[1]=t=>p.value=t),r[2]||(r[2]=t=>D())],placeholder:"Search",outlined:"",debounce:"1000"},{append:l(()=>[e(K,{name:"search"})]),_:1},8,["modelValue"])]),header:l(t=>[e(P,{props:t},{default:l(()=>[(C(!0),M(I,null,$(t.cols,_=>(C(),w(E,{key:_.name,props:t},{default:l(()=>[V(Q(_.label),1)]),_:2},1032,["props"]))),128)),e(E,{"auto-width":""},{default:l(()=>[V("Action")]),_:1})]),_:2},1032,["props"])]),body:l(t=>[e(P,{props:t},{default:l(()=>[(C(!0),M(I,null,$(t.cols,_=>(C(),w(B,{key:_.name,props:t},{default:l(()=>[V(Q(_.value),1)]),_:2},1032,["props"]))),128)),e(B,{"auto-width":""},{default:l(()=>[e(T,{flat:"",color:"orange",icon:"edit",onClick:_=>h(t.row),dense:""},{default:l(()=>[e(x,null,{default:l(()=>[V("Edit Data")]),_:1})]),_:2},1032,["onClick"]),e(T,{flat:"",color:"red",icon:"delete",onClick:_=>L(t.row.TDLVORD_DLVCD),dense:""},{default:l(()=>[e(x,null,{default:l(()=>[V("Edit Data")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{nl as default};
