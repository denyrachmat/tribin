import{Q as S}from"./QTooltip.db9aaee0.js";import{s as u,B as c,C as g,D as a,E as l,L as E,M as U,I as t,Z as T,am as b,T as V,Q as f,X as x,Y as B,o as H,P as Q,aX as F,H as r,R as w,S as h,O}from"./index.09a394d4.js";import{a as R,u as j,l as Y,k as X,m as k}from"./QTable.87dd6cd7.js";import{Q as y,a as P}from"./QTd.e681e555.js";import{api_web as I}from"./axios.c09c2ecf.js";import{Q as q,a as M,C as A}from"./ClosePopup.201c9504.js";import"./use-cache.b0833c75.js";import"./date.807d29fb.js";const K=t("div",{class:"text-h6"},"RO Maintenance",-1),Z={style:{border:"1px black solid","border-radius":"10px"}},z=t("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[t("b",null,"Header")],-1),G={class:"row"},J={class:"col"},W={class:"col q-pl-md"},ee={class:"row items-center justify-end"},le={class:"col q-pl-md"},ae={class:"row items-center justify-end"},oe={class:"row"},te={class:"col"},se={__name:"salesOrderCreate",setup(N){R();const s=u({TSLO_SLOCD:"",TSLO_ISSUDT:"",TSLO_PLAN_DLVDT:"",TSLO_QUOCD:""}),_=u([]),i=u(!1),v=(n,e,o,C)=>{e(async()=>{C==="quotation"&&await p()})},p=async()=>{i.value=!0,await I.post("quotation/search",{searchBy:filterCol.value,searchValue:filter.value}).then(n=>{i.value=!1,_.value=n.data.data}).catch(n=>{i.value=!1})},{dialogRef:m,onDialogHide:D,onDialogOK:L,onDialogCancel:d}=j();return(n,e)=>(c(),g(B,{ref_key:"dialogRef",ref:m,onHide:x(D),"transition-show":"slide-up","transition-hide":"slide-down","full-width":""},{default:a(()=>[l(E,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:a(()=>[l(U,null,{default:a(()=>[K]),_:1}),l(U,{class:"q-pa-sm"},{default:a(()=>[t("fieldset",Z,[z,t("div",G,[t("div",J,[l(T,{label:"RO Code",dense:"",filled:"",modelValue:s.value.TSLO_SLOCD,"onUpdate:modelValue":e[0]||(e[0]=o=>s.value.TSLO_SLOCD=o),disable:"",loading:i.value},null,8,["modelValue","loading"])]),t("div",W,[l(T,{filled:"",modelValue:s.value.TSLO_ISSUDT,"onUpdate:modelValue":e[2]||(e[2]=o=>s.value.TSLO_ISSUDT=o),dense:"",label:"Issue Date",loading:i.value,onClick:e[3]||(e[3]=o=>n.quotationIssueDate.qDateProxy.show()),mask:"####-##-##","fill-mask":"",hint:"Mask: YYYY-MM-DD"},{append:a(()=>[l(b,{name:"event",class:"cursor-pointer"},{default:a(()=>[l(q,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[l(M,{modelValue:s.value.TSLO_ISSUDT,"onUpdate:modelValue":e[1]||(e[1]=o=>s.value.TSLO_ISSUDT=o),mask:"YYYY-MM-DD"},{default:a(()=>[t("div",ee,[V(l(f,{label:"Close",color:"primary",flat:""},null,512),[[A]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","loading"])]),t("div",le,[l(T,{filled:"",modelValue:s.value.TSLO_PLAN_DLVDT,"onUpdate:modelValue":e[5]||(e[5]=o=>s.value.TSLO_PLAN_DLVDT=o),dense:"",label:"Delivery Date",loading:i.value,onClick:e[6]||(e[6]=o=>n.quotationIssueDate.qDateProxy.show()),mask:"####-##-##","fill-mask":"",hint:"Mask: YYYY-MM-DD"},{append:a(()=>[l(b,{name:"event",class:"cursor-pointer"},{default:a(()=>[l(q,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[l(M,{modelValue:s.value.TSLO_PLAN_DLVDT,"onUpdate:modelValue":e[4]||(e[4]=o=>s.value.TSLO_PLAN_DLVDT=o),mask:"YYYY-MM-DD"},{default:a(()=>[t("div",ae,[V(l(f,{label:"Close",color:"primary",flat:""},null,512),[[A]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","loading"])])]),t("div",oe,[t("div",te,[l(Y,{dense:"",filled:"",label:"Sales Quotation Code",modelValue:s.value.TSLO_QUOCD,"onUpdate:modelValue":e[7]||(e[7]=o=>s.value.TSLO_QUOCD=o),"use-input":"","input-debounce":"500",options:_.value,onFilter:e[8]||(e[8]=(o,C,$)=>v(o,C,$,"quotation")),behavior:"dialog","option-label":"DESCSEL","option-value":"TQUO_QUOCD","emit-value":"","map-options":"",loading:i.value},null,8,["modelValue","options","loading"])])])])]),_:1})]),_:1})]),_:1},8,["onHide"]))}};const ne={class:"q-pa-md"},ie={class:"row q-pb-md"},de=t("div",{class:"col"},[t("span",{class:"text-h4"},"Sales Order / Receive Order")],-1),ue={class:"col text-right"},re={class:"row q-pt-md"},_e={class:"col"},Te={__name:"salesOrderView",setup(N){const s=R(),_=u("TQUO_QUOCD"),i=u(""),v=u([]),p=u([{name:"TSLO_SLOCD",label:"RO. Code",field:"TSLO_SLOCD",sortable:!0,align:"left"},{name:"MCUS_CUSNM",label:"Customer Name",field:"MCUS_CUSNM",sortable:!0,align:"left"},{name:"TSLO_ADDRESS_NAME",label:"Customer Addr.",field:"TSLO_ADDRESS_NAME",sortable:!0,align:"left"},{name:"TSLO_CUSCD",label:"Customer Code",field:"TSLO_CUSCD",sortable:!0,align:"left"},{name:"TSLO_ISSUDT",label:"Issue Date",field:"TSLO_ISSUDT",sortable:!0,align:"left"},{name:"TSLO_QUOCD",label:"Quot. Code",field:"TSLO_QUOCD",sortable:!0,align:"left"}]),m=u(!1);H(()=>{D()});const D=async()=>{m.value=!0,await I.post("receive-order/searchAPI",{searchBy:_.value,searchValue:i.value}).then(d=>{m.value=!1,v.value=d.data.data}).catch(d=>{m.value=!1})},L=()=>{s.dialog({component:se}).onOk(async d=>{D()})};return(d,n)=>(c(),Q("div",ne,[t("div",ie,[de,t("div",ue,[l(f,{icon:"add",color:"blue",onClick:L},{default:a(()=>[l(S,null,{default:a(()=>[r("Create New RO")]),_:1})]),_:1})])]),l(F),t("div",re,[t("div",_e,[l(X,{title:"Created RO",rows:v.value,columns:p.value,"row-key":"name",loading:m.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":a(()=>[l(Y,{outlined:"",modelValue:_.value,"onUpdate:modelValue":n[0]||(n[0]=e=>_.value=e),options:p.value,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),l(T,{borderless:"",dense:"",modelValue:i.value,"onUpdate:modelValue":[n[1]||(n[1]=e=>i.value=e),n[2]||(n[2]=e=>d.dataQuo())],placeholder:"Search",outlined:"",debounce:"1000"},{append:a(()=>[l(b,{name:"search"})]),_:1},8,["modelValue"])]),header:a(e=>[l(y,{props:e},{default:a(()=>[l(k,{"auto-width":""},{default:a(()=>[r("Action")]),_:1}),(c(!0),Q(w,null,h(e.cols,o=>(c(),g(k,{key:o.name,props:e},{default:a(()=>[r(O(o.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(e=>[l(y,{props:e},{default:a(()=>[l(P,{"auto-width":""},{default:a(()=>[l(f,{flat:"",color:e.row.TQUO_APPRVDT!==null?"grey":"orange",icon:"edit",onClick:o=>d.onClickEdit(e.row.TQUO_QUOCD),dense:"",disable:e.row.TQUO_APPRVDT!==null},{default:a(()=>[l(S,null,{default:a(()=>[r(O(e.row.TQUO_APPRVDT?"Quotation already approved, cannot edit !":"Edit this quotation"),1)]),_:2},1024)]),_:2},1032,["color","onClick","disable"]),l(f,{flat:"",color:e.row.TQUO_APPRVDT!==null?"grey":"red",icon:"delete",onClick:o=>d.onClickDelete(e.row.TQUO_QUOCD),dense:"",disable:e.row.TQUO_APPRVDT!==null},{default:a(()=>[l(S,null,{default:a(()=>[r(O(e.row.TQUO_APPRVDT?"Quotation already approved, cannot delete !":"Delete this quotation"),1)]),_:2},1024)]),_:2},1032,["color","onClick","disable"]),l(f,{flat:"",color:"indigo",icon:"print",onClick:o=>d.onClickPrint(e.row.TQUO_QUOCD),dense:""},{default:a(()=>[l(S,null,{default:a(()=>[r("Print this quotation")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024),(c(!0),Q(w,null,h(e.cols,o=>(c(),g(P,{key:o.name,props:e},{default:a(()=>[r(O(o.value),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{Te as default};
