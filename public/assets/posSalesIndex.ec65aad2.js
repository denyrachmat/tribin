import{h as d,c as K,K as ae,L as se,s as le,t as h,a as $,w as C,ax as oe,ay as ie,j as ne,o as X,H as re,d as ce,m as ue,bn as N,G as z,q as B,bo as D,k as de,bp as F,aJ as fe,g as ve,C as w,R,J as t,F as a,E as s,P as M,aI as me,Q as U,S as J,T as W,U as he,D as V,V as _e,I as p,av as H,O as ge,M as pe,W as be}from"./index.756756a7.js";import{a as S,b as Q,Q as O}from"./QItemLabel.0027ac52.js";import{Q as G}from"./QList.27f9e46a.js";import{u as ye}from"./use-quasar.7c82ea8f.js";import{api_web as we}from"./axios.21f0d8ea.js";const Se=[d("circle",{cx:"15",cy:"15",r:"15"},[d("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),d("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]),d("circle",{cx:"60",cy:"15",r:"9","fill-opacity":".3"},[d("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),d("animate",{attributeName:"fill-opacity",from:".5",to:".5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})]),d("circle",{cx:"105",cy:"15",r:"15"},[d("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),d("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})])];var xe=K({name:"QSpinnerDots",props:ae,setup(o){const{cSize:_,classes:y}=se(o);return()=>d("svg",{class:y.value,fill:"currentColor",width:_.value,height:_.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg"},Se)}});const{passive:b}=ue;var Ie=K({name:"QInfiniteScroll",props:{offset:{type:Number,default:500},debounce:{type:[String,Number],default:100},scrollTarget:le,initialIndex:{type:Number,default:0},disable:Boolean,reverse:Boolean},emits:["load"],setup(o,{slots:_,emit:y}){const n=h(!1),i=h(!0),m=h(null),x=h(null);let g=o.initialIndex,e,r;const L=$(()=>"q-infinite-scroll__loading"+(n.value===!0?"":" invisible"));function c(){if(o.disable===!0||n.value===!0||i.value===!1)return;const l=N(e),f=B(e),T=F(e);o.reverse===!1?Math.round(f+T+o.offset)>=Math.round(l)&&u():Math.round(f)<=o.offset&&u()}function u(){if(o.disable===!0||n.value===!0||i.value===!1)return;g++,n.value=!0;const l=N(e);y("load",g,f=>{i.value===!0&&(n.value=!1,z(()=>{if(o.reverse===!0){const T=N(e),ee=B(e),te=T-l;D(e,ee+te)}f===!0?q():m.value&&m.value.closest("body")&&r()}))})}function v(){g=0}function I(){i.value===!1&&(i.value=!0,e.addEventListener("scroll",r,b)),c()}function q(){i.value===!0&&(i.value=!1,n.value=!1,e.removeEventListener("scroll",r,b),r!==void 0&&r.cancel!==void 0&&r.cancel())}function k(){if(e&&i.value===!0&&e.removeEventListener("scroll",r,b),e=de(m.value,o.scrollTarget),i.value===!0){if(e.addEventListener("scroll",r,b),o.reverse===!0){const l=N(e),f=F(e);D(e,l-f)}c()}}function Y(l){g=l}function j(l){l=parseInt(l,10);const f=r;r=l<=0?c:fe(c,isNaN(l)===!0?100:l),e&&i.value===!0&&(f!==void 0&&e.removeEventListener("scroll",f,b),e.addEventListener("scroll",r,b))}function P(l){if(A.value===!0){if(x.value===null){l!==!0&&z(()=>{P(!0)});return}const f=`${n.value===!0?"un":""}pauseAnimations`;Array.from(x.value.getElementsByTagName("svg")).forEach(T=>{T[f]()})}}const A=$(()=>o.disable!==!0&&i.value===!0);C([n,A],()=>{P()}),C(()=>o.disable,l=>{l===!0?q():I()}),C(()=>o.reverse,()=>{n.value===!1&&i.value===!0&&c()}),C(()=>o.scrollTarget,k),C(()=>o.debounce,j);let E=!1;oe(()=>{E!==!1&&e&&D(e,E)}),ie(()=>{E=e?B(e):!1}),ne(()=>{i.value===!0&&e.removeEventListener("scroll",r,b)}),X(()=>{j(o.debounce),k(),n.value===!1&&P()});const Z=ve();return Object.assign(Z.proxy,{poll:()=>{r!==void 0&&r()},trigger:u,stop:q,reset:v,resume:I,setIndex:Y,updateScrollTarget:k}),()=>{const l=re(_.default,[]);return A.value===!0&&l[o.reverse===!1?"push":"unshift"](d("div",{ref:x,class:L.value},ce(_.loading))),d("div",{class:"q-infinite-scroll",ref:m},l)}}});const Te={class:"q-pa-md"},Ce=t("div",{class:"row q-pb-md"},[t("div",{class:"col"},[t("span",{class:"text-h4"},"POS")]),t("div",{class:"col text-right"})],-1),Me={class:"row bg-grey q-pa-md full-width",style:{height:"86vh"}},qe={class:"col-4 q-pa-xs"},Ne={class:"row bg-white"},Qe={class:"col",style:{height:"50vh",overflow:"auto"}},Le={class:"row q-pt-xs",style:{height:"30vh"}},ke={class:"col bg-white vertical-middle"},Pe={class:"row"},Ae={class:"col q-pa-sm",style:{height:"20vh"}},Ee={class:"text-h6 text-bold"},Be={class:"row",style:{height:"10vh"}},De={class:"col-sm-6 col-12 q-pa-sm"},Re={class:"col-sm-6 col-12 q-pa-sm"},Ve={class:"col q-pa-xs"},He={class:"row bg-white",style:{height:"80vh",overflow:"auto"}},Oe={class:"col"},$e={class:"q-gutter-sm q-pa-sm"},je={class:"text-center"},ze={class:"row items-center"},Fe={class:"col text-bold ellipsis"},Ue={class:"row justify-center q-my-md"},Ye={__name:"posSalesIndex",setup(o){const _=ye(),y=h([]),n=h([]),i=h(!1),m=h(0);X(()=>{g("")});const x=$(()=>n.value.length>0?n.value.reduce((c,u)=>c+u.LATEST_PRC):0),g=async c=>{i.value=!0,m.value=m.value+1,await we.post("item/searchAPIStockAndPriceOnly",{searchValue:c,page:m.value}).then(u=>{i.value=!1,y.value=u.data.data.data}).catch(()=>{i.value=!1})},e=c=>{n.value.push(c)},r=async(c,u)=>{await g(""),u()},L=c=>{_.dialog({title:"Confirmation",message:"Are you sure want to delete this line ??",cancel:!0,persistent:!0}).onOk(async()=>{n.value.splice(c,1)})};return(c,u)=>(w(),R("div",Te,[Ce,t("div",Me,[t("div",qe,[t("div",Ne,[t("div",Qe,[a(G,{bordered:"",loading:i.value},{default:s(()=>[n.value.length>0?(w(!0),R(J,{key:0},W(n.value,v=>he((w(),V(O,{key:v.id,class:"q-my-sm"},{default:s(()=>[a(S,{avatar:""},{default:s(()=>[a(_e,{color:"primary","text-color":"white",icon:"category"})]),_:1}),a(S,null,{default:s(()=>[a(Q,null,{default:s(()=>[p(M(v.MITM_ITMNM),1)]),_:2},1024),a(Q,{caption:"",lines:"1"},{default:s(()=>[p(M(v.LATEST_PRC),1)]),_:2},1024)]),_:2},1024),a(S,{side:""},{default:s(()=>[a(H,{name:"delete",color:"red",onClick:u[0]||(u[0]=I=>L(c.idx))})]),_:1})]),_:2},1024)),[[be]])),128)):(w(),V(O,{key:1},{default:s(()=>[a(S,null,{default:s(()=>[p(" No item selected!! ")]),_:1})]),_:1}))]),_:1},8,["loading"])])]),t("div",Le,[t("div",ke,[t("div",Pe,[t("div",Ae,[t("div",Ee,"Total : Rp. "+M(x.value),1)])]),a(me),t("div",Be,[t("div",De,[a(U,{color:"primary",class:"full-width"},{default:s(()=>[p(" Submit ")]),_:1})]),t("div",Re,[a(U,{color:"red",class:"full-width"},{default:s(()=>[p(" Cancel ")]),_:1})])])])])]),t("div",Ve,[t("div",He,[t("div",Oe,[a(Ie,{onLoad:r,offset:500,debounce:2e3},{loading:s(()=>[t("div",Ue,[a(xe,{color:"primary",size:"40px"})])]),default:s(()=>[t("div",$e,[(w(!0),R(J,null,W(y.value,(v,I)=>(w(),V(pe,{flat:"",bordered:"",key:`sm-${I}`,style:{width:"15em"}},{default:s(()=>[t("div",je,[a(H,{name:"category",size:"8em"})]),a(ge,null,{default:s(()=>[t("div",ze,[t("div",Fe,M(v.MITM_ITMNM),1)])]),_:2},1024),a(G,null,{default:s(()=>[a(O,{clickable:"",onClick:q=>e(v)},{default:s(()=>[a(S,{avatar:""},{default:s(()=>[a(H,{color:"primary",name:"add"})]),_:1}),a(S,null,{default:s(()=>[a(Q,null,{default:s(()=>[p("Add Item")]),_:1}),a(Q,{caption:""},{default:s(()=>[p("Rp. "+M(v.LATEST_PRC),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))])]),_:1})])])])])]))}};export{Ye as default};
