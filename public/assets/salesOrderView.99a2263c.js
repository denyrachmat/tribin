import{Q as T}from"./QTooltip.ab3b0f6e.js";import{s as r,B as f,C as U,D as l,E as e,L as B,M as w,I as t,Z as Q,am as V,T as h,Q as v,X as H,Y as F,o as j,P as L,aX as X,H as c,R as k,S as y,O as C}from"./index.8764ff72.js";import{a as I,u as K,l as N,k as Z,m as P}from"./QTable.51a7c395.js";import{Q as q,a as M}from"./QTd.864b25a3.js";import{api_web as $}from"./axios.8f8fe0d7.js";import{Q as A,a as R,C as Y}from"./ClosePopup.7cb94313.js";import"./use-cache.b0833c75.js";import"./date.87e6e8fd.js";const z=t("div",{class:"text-h6"},"RO Maintenance",-1),G={style:{border:"1px black solid","border-radius":"10px"}},J=t("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[t("b",null,"Header")],-1),W={class:"row"},ee={class:"col"},le={class:"col q-pl-md"},ae={class:"row items-center justify-end"},oe={class:"col q-pl-md"},te={class:"row items-center justify-end"},se={class:"row"},ne={class:"col"},ie={__name:"salesOrderCreate",setup(E){I();const i=r({TSLO_SLOCD:"",TSLO_ISSUDT:"",TSLO_PLAN_DLVDT:"",TSLO_QUOCD:""}),p=r(""),D=r(""),S=r([]),d=r(!1),m=(n,o,s,b)=>{o(async()=>{b==="quotation"&&await O()})},O=async()=>{d.value=!0,await $.post("quotation/search",{searchBy:p.value,searchValue:D.value}).then(n=>{d.value=!1,S.value=n.data.data}).catch(n=>{d.value=!1})},{dialogRef:g,onDialogHide:u,onDialogOK:_,onDialogCancel:a}=K();return(n,o)=>(f(),U(F,{ref_key:"dialogRef",ref:g,onHide:H(u),"transition-show":"slide-up","transition-hide":"slide-down","full-width":""},{default:l(()=>[e(B,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:l(()=>[e(w,null,{default:l(()=>[z]),_:1}),e(w,{class:"q-pa-sm"},{default:l(()=>[t("fieldset",G,[J,t("div",W,[t("div",ee,[e(Q,{label:"RO Code",dense:"",filled:"",modelValue:i.value.TSLO_SLOCD,"onUpdate:modelValue":o[0]||(o[0]=s=>i.value.TSLO_SLOCD=s),disable:"",loading:d.value},null,8,["modelValue","loading"])]),t("div",le,[e(Q,{filled:"",modelValue:i.value.TSLO_ISSUDT,"onUpdate:modelValue":o[2]||(o[2]=s=>i.value.TSLO_ISSUDT=s),dense:"",label:"Issue Date",loading:d.value,onClick:o[3]||(o[3]=s=>n.quotationIssueDate.qDateProxy.show()),mask:"####-##-##","fill-mask":"",hint:"Mask: YYYY-MM-DD"},{append:l(()=>[e(V,{name:"event",class:"cursor-pointer"},{default:l(()=>[e(A,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(R,{modelValue:i.value.TSLO_ISSUDT,"onUpdate:modelValue":o[1]||(o[1]=s=>i.value.TSLO_ISSUDT=s),mask:"YYYY-MM-DD"},{default:l(()=>[t("div",ae,[h(e(v,{label:"Close",color:"primary",flat:""},null,512),[[Y]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","loading"])]),t("div",oe,[e(Q,{filled:"",modelValue:i.value.TSLO_PLAN_DLVDT,"onUpdate:modelValue":o[5]||(o[5]=s=>i.value.TSLO_PLAN_DLVDT=s),dense:"",label:"Delivery Date",loading:d.value,onClick:o[6]||(o[6]=s=>n.quotationIssueDate.qDateProxy.show()),mask:"####-##-##","fill-mask":"",hint:"Mask: YYYY-MM-DD"},{append:l(()=>[e(V,{name:"event",class:"cursor-pointer"},{default:l(()=>[e(A,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(R,{modelValue:i.value.TSLO_PLAN_DLVDT,"onUpdate:modelValue":o[4]||(o[4]=s=>i.value.TSLO_PLAN_DLVDT=s),mask:"YYYY-MM-DD"},{default:l(()=>[t("div",te,[h(e(v,{label:"Close",color:"primary",flat:""},null,512),[[Y]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","loading"])])]),t("div",se,[t("div",ne,[e(N,{dense:"",filled:"",label:"Sales Quotation Code",modelValue:i.value.TSLO_QUOCD,"onUpdate:modelValue":o[7]||(o[7]=s=>i.value.TSLO_QUOCD=s),"use-input":"","input-debounce":"500",options:S.value,onFilter:o[8]||(o[8]=(s,b,x)=>m(s,b,x,"quotation")),behavior:"dialog","option-label":"DESCSEL","option-value":"TQUO_QUOCD","emit-value":"","map-options":"",loading:d.value},null,8,["modelValue","options","loading"])])])])]),_:1})]),_:1})]),_:1},8,["onHide"]))}};const de={class:"q-pa-md"},ue={class:"row q-pb-md"},re=t("div",{class:"col"},[t("span",{class:"text-h4"},"Sales Order / Receive Order")],-1),_e={class:"col text-right"},ce={class:"row q-pt-md"},me={class:"col"},Qe={__name:"salesOrderView",setup(E){const i=I(),p=r("TQUO_QUOCD"),D=r(""),S=r([]),d=r([{name:"TSLO_SLOCD",label:"RO. Code",field:"TSLO_SLOCD",sortable:!0,align:"left"},{name:"MCUS_CUSNM",label:"Customer Name",field:"MCUS_CUSNM",sortable:!0,align:"left"},{name:"TSLO_ADDRESS_NAME",label:"Customer Addr.",field:"TSLO_ADDRESS_NAME",sortable:!0,align:"left"},{name:"TSLO_CUSCD",label:"Customer Code",field:"TSLO_CUSCD",sortable:!0,align:"left"},{name:"TSLO_ISSUDT",label:"Issue Date",field:"TSLO_ISSUDT",sortable:!0,align:"left"},{name:"TSLO_QUOCD",label:"Quot. Code",field:"TSLO_QUOCD",sortable:!0,align:"left"}]),m=r(!1);j(()=>{O()});const O=async()=>{m.value=!0,await $.post("receive-order/searchAPI",{searchBy:p.value,searchValue:D.value}).then(u=>{m.value=!1,S.value=u.data.data}).catch(u=>{m.value=!1})},g=()=>{i.dialog({component:ie}).onOk(async u=>{O()})};return(u,_)=>(f(),L("div",de,[t("div",ue,[re,t("div",_e,[e(v,{icon:"add",color:"blue",onClick:g},{default:l(()=>[e(T,null,{default:l(()=>[c("Create New RO")]),_:1})]),_:1})])]),e(X),t("div",ce,[t("div",me,[e(Z,{title:"Created RO",rows:S.value,columns:d.value,"row-key":"name",loading:m.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":l(()=>[e(N,{outlined:"",modelValue:p.value,"onUpdate:modelValue":_[0]||(_[0]=a=>p.value=a),options:d.value,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),e(Q,{borderless:"",dense:"",modelValue:D.value,"onUpdate:modelValue":[_[1]||(_[1]=a=>D.value=a),_[2]||(_[2]=a=>u.dataQuo())],placeholder:"Search",outlined:"",debounce:"1000"},{append:l(()=>[e(V,{name:"search"})]),_:1},8,["modelValue"])]),header:l(a=>[e(q,{props:a},{default:l(()=>[e(P,{"auto-width":""},{default:l(()=>[c("Action")]),_:1}),(f(!0),L(k,null,y(a.cols,n=>(f(),U(P,{key:n.name,props:a},{default:l(()=>[c(C(n.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(a=>[e(q,{props:a},{default:l(()=>[e(M,{"auto-width":""},{default:l(()=>[e(v,{flat:"",color:a.row.TQUO_APPRVDT!==null?"grey":"orange",icon:"edit",onClick:n=>u.onClickEdit(a.row.TQUO_QUOCD),dense:"",disable:a.row.TQUO_APPRVDT!==null},{default:l(()=>[e(T,null,{default:l(()=>[c(C(a.row.TQUO_APPRVDT?"Quotation already approved, cannot edit !":"Edit this quotation"),1)]),_:2},1024)]),_:2},1032,["color","onClick","disable"]),e(v,{flat:"",color:a.row.TQUO_APPRVDT!==null?"grey":"red",icon:"delete",onClick:n=>u.onClickDelete(a.row.TQUO_QUOCD),dense:"",disable:a.row.TQUO_APPRVDT!==null},{default:l(()=>[e(T,null,{default:l(()=>[c(C(a.row.TQUO_APPRVDT?"Quotation already approved, cannot delete !":"Delete this quotation"),1)]),_:2},1024)]),_:2},1032,["color","onClick","disable"]),e(v,{flat:"",color:"indigo",icon:"print",onClick:n=>u.onClickPrint(a.row.TQUO_QUOCD),dense:""},{default:l(()=>[e(T,null,{default:l(()=>[c("Print this quotation")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024),(f(!0),L(k,null,y(a.cols,n=>(f(),U(M,{key:n.name,props:a},{default:l(()=>[c(C(n.value),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{Qe as default};
