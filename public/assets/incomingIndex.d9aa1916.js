import{Q as w}from"./QTooltip.0fc1dfad.js";import{t as r,C as c,D as g,E as l,F as e,M as A,O as R,J as o,$ as v,an as q,U as I,Q as b,R as h,S as Q,T as U,V as B,I as u,P as D,W as H,Z as Y,o as E,aY as F}from"./index.b6a3a0bb.js";import{a as N,l as O,Q as j,b as k,c as p,d as f,k as z,m as M}from"./QTable.c7f31353.js";import{Q as P,a as $}from"./QTd.a3d5aae5.js";import{api_web as L}from"./axios.bb88cb70.js";import{Q as G,a as J}from"./QInnerLoading.52d23f6b.js";import{Q as W,a as Z,C as K}from"./ClosePopup.41e50ba5.js";import"./use-render-cache.3aae9b27.js";import"./date.96002b16.js";const X=o("div",{class:"text-h6"},"Create Incoming",-1),ee={style:{border:"1px black solid","border-radius":"10px"}},le=o("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[o("b",null,"Header")],-1),ae={class:"row q-col-gutter-sm"},te={class:"col-12 col-sm-6"},oe={class:"col-12 col-sm-6"},se={class:"row items-center justify-end"},ne={class:"row q-col-gutter-sm"},de={class:"col-12 col-sm-6"},ie={style:{border:"1px black solid","border-radius":"10px",height:"35vh",overflow:"auto"}},ue=o("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[o("b",null,"List Of Items")],-1),re={__name:"incomingCreate",props:{dataHeader:Array},setup(x){const S=N(),d=r({TRCV_RCVCD:"",TRCV_SUPCD:"",TRCV_ISSUDT:""}),V=r([]),i=r(!1),_=r([]),C=(s,t,a,n)=>{t(async()=>{n==="cust"&&y(s),n==="item"&&await getItem(s)})},y=async(s,t="MSUP_SUPNM")=>{i.value=!0,await L.post("supplier/searchAPI",{searchValue:s,searchCol:t}).then(a=>{i.value=!1,_.value=a.data.data}).catch(()=>{i.value=!1})},T=s=>{S.dialog({title:"Confirmation",message:`Do you want to delete this lines no ${s+1} ?`,cancel:!0,persistent:!0}).onOk(async()=>{V.value.splice(s,1)})};return(s,t)=>(c(),g(Y,{ref:"dialogRef",onHide:s.onDialogHide,"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:l(()=>[e(A,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:l(()=>[e(R,null,{default:l(()=>[X]),_:1}),e(R,{class:"q-pa-sm"},{default:l(()=>[o("fieldset",ee,[le,e(G,{showing:i.value,dark:""},{default:l(()=>[e(J,{size:"50px",color:"primary"})]),_:1},8,["showing"]),o("div",ae,[o("div",te,[e(v,{label:"Code",readonly:"",dense:"",filled:"",modelValue:d.value.TRCV_RCVCD,"onUpdate:modelValue":t[0]||(t[0]=a=>d.value.TRCV_RCVCD=a)},null,8,["modelValue"])]),o("div",oe,[e(v,{filled:"",modelValue:d.value.TRCV_ISSUDT,"onUpdate:modelValue":t[2]||(t[2]=a=>d.value.TRCV_ISSUDT=a),dense:"",label:"Receive Date"},{append:l(()=>[e(q,{name:"event",class:"cursor-pointer"},{default:l(()=>[e(W,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Z,{modelValue:d.value.TRCV_ISSUDT,"onUpdate:modelValue":t[1]||(t[1]=a=>d.value.TRCV_ISSUDT=a),mask:"YYYY-MM-DD"},{default:l(()=>[o("div",se,[I(e(b,{label:"Close",color:"primary",flat:""},null,512),[[K]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),o("div",ne,[o("div",de,[e(O,{dense:"",filled:"",label:"Supplier Name",modelValue:d.value.TRCV_SUPCD,"onUpdate:modelValue":t[3]||(t[3]=a=>d.value.TRCV_SUPCD=a),"use-input":"","input-debounce":"500",options:_.value,onFilter:t[4]||(t[4]=(a,n,m)=>C(a,n,m,"cust")),behavior:"dialog","option-label":"MSUP_SUPNM","option-value":"MSUP_SUPCD","emit-value":"","map-options":"",loading:i.value,disable:d.value.TRCV_RCVCD!==""},null,8,["modelValue","options","loading","disable"])])])]),o("fieldset",ie,[ue,e(j,{bordered:"",dense:""},{default:l(()=>[V.value.length>0?(c(!0),h(Q,{key:0},U(V.value,(a,n)=>(c(),g(k,{key:n,class:"q-my-sm",dense:"",loading:i.value},{default:l(()=>[e(p,{avatar:""},{default:l(()=>[e(B,{"text-color":"blue"},{default:l(()=>[u(D(n+1),1)]),_:2},1024)]),_:2},1024),e(p,null,{default:l(()=>[e(f,null,{default:l(()=>[e(v,{dense:"",label:"Item Code",filled:"",modelValue:a.item_code,"onUpdate:modelValue":m=>a.item_code=m,readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(p,null,{default:l(()=>[e(f,null,{default:l(()=>[e(v,{dense:"",label:"Item Name",filled:"",modelValue:a.MITM_ITMNM,"onUpdate:modelValue":m=>a.MITM_ITMNM=m,readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(p,null,{default:l(()=>[e(f,null,{default:l(()=>[e(v,{dense:"",label:"Qty",filled:"",modelValue:a.quantity,"onUpdate:modelValue":m=>a.quantity=m},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(p,null,{default:l(()=>[e(f,null,{default:l(()=>[u(" Rp. "+D(a.unit_price.toLocaleString()),1)]),_:2},1024),e(f,{caption:""},{default:l(()=>[u(" Price ")]),_:1})]),_:2},1024),e(p,{side:""},{default:l(()=>[e(b,{icon:"delete",color:"red",flat:"",onClick:m=>T(n)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["loading"]))),128)):I((c(),g(k,{key:1,class:"q-my-sm",clickable:""},{default:l(()=>[e(p,null,{default:l(()=>[e(f,null,{default:l(()=>[u(" Choose sales order first to access item list ")]),_:1})]),_:1})]),_:1})),[[H]])]),_:1})])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},ce={class:"q-pa-md"},me={class:"row q-pb-md"},pe=o("div",{class:"col"},[o("span",{class:"text-h4"},"Incoming")],-1),_e={class:"col text-right"},fe={class:"row q-pt-md"},ve={class:"col"},we={__name:"incomingIndex",setup(x){const S=N(),d=r([]),V=r([{name:"TRCV_RCVCD",label:"Receive ID",field:"TRCV_RCVCD",sortable:!0,align:"left"},{name:"MSUP_SUPNM",label:"Supplier Name",field:"MSUP_SUPNM",sortable:!0,align:"left"},{name:"TOT_RCV",label:"Total Qty",field:"TOT_RCV",sortable:!0,align:"left"},{name:"TOT_AMT",label:"Total Amount",field:"TOT_AMT",sortable:!0,align:"left"}]),i=r(!1),_=r(""),C=r("");E(()=>{y()});const y=async()=>{i.value=!0,await L.post("receive/searchAPI",{searchBy:_.value,searchValue:C.value}).then(s=>{i.value=!1,d.value=s.data.data}).catch(s=>{i.value=!1})},T=(s=[])=>{S.dialog({component:re,componentProps:{dataHeader:s}}).onOk(async t=>{getOutgoingData()})};return(s,t)=>(c(),h("div",ce,[o("div",me,[pe,o("div",_e,[e(b,{icon:"add",color:"blue",onClick:t[0]||(t[0]=a=>T())},{default:l(()=>[e(w,null,{default:l(()=>[u("Create New Delivery")]),_:1})]),_:1})])]),e(F),o("div",fe,[o("div",ve,[e(z,{title:"Outgoing List",rows:d.value,columns:V.value,"row-key":"TDLVORD_DLVCD",loading:i.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":l(()=>[e(O,{outlined:"",modelValue:_.value,"onUpdate:modelValue":t[1]||(t[1]=a=>_.value=a),options:s.columns,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),e(v,{borderless:"",dense:"",modelValue:C.value,"onUpdate:modelValue":[t[2]||(t[2]=a=>C.value=a),t[3]||(t[3]=a=>s.getOutgoingData())],placeholder:"Search",outlined:"",debounce:"1000"},{append:l(()=>[e(q,{name:"search"})]),_:1},8,["modelValue"])]),header:l(a=>[e(P,{props:a},{default:l(()=>[(c(!0),h(Q,null,U(a.cols,n=>(c(),g(M,{key:n.name,props:a},{default:l(()=>[u(D(n.label),1)]),_:2},1032,["props"]))),128)),e(M,{"auto-width":""},{default:l(()=>[u("Action")]),_:1})]),_:2},1032,["props"])]),body:l(a=>[e(P,{props:a},{default:l(()=>[(c(!0),h(Q,null,U(a.cols,n=>(c(),g($,{key:n.name,props:a},{default:l(()=>[u(D(n.value),1)]),_:2},1032,["props"]))),128)),e($,{"auto-width":""},{default:l(()=>[e(b,{flat:"",color:"orange",icon:"edit",onClick:n=>T(a.row),dense:""},{default:l(()=>[e(w,null,{default:l(()=>[u("Edit Data")]),_:1})]),_:2},1032,["onClick"]),e(b,{flat:"",color:"red",icon:"delete",onClick:n=>s.onDelete(a.row.TDLVORD_DLVCD),dense:""},{default:l(()=>[e(w,null,{default:l(()=>[u("Edit Data")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{we as default};
