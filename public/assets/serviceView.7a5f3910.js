import{Q as D}from"./QTooltip.0534c937.js";import{s as m,B as _,C as g,D as a,E as e,J as $,K as w,I as t,P as S,aa as U,aW as q,Q as p,L as I,M as h,O as Y,o as B,R as b,S as M,H as c,aU as k,aV as Q,aX as O}from"./index.e9346d13.js";import{u as x,b as N,a as K,c as E,m as H}from"./use-dialog-plugin-component.675e370d.js";import{Q as R,a as y}from"./date.406343e1.js";import{api_web as j}from"./axios.c333538f.js";import{Q as A,a as F,C as L}from"./ClosePopup.c4bbd75f.js";const J=t("div",{class:"text-h6"},"Create Order",-1),W={class:"row"},X={class:"col"},z={class:"col q-pl-md"},G={class:"row items-center justify-end"},Z={class:"row"},ee={class:"col"},ae={__name:"serviceCreateOrder",setup(P){const{dialogRef:V,onDialogHide:f,onDialogOK:v,onDialogCancel:C}=x();N();const s=m({SRVH_DOCNO:"",SRVH_ISSDT:"",SRVH_CUSCD:""});return(i,l)=>(_(),g(Y,{ref_key:"dialogRef",ref:V,onHide:h(f),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:a(()=>[e($,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:a(()=>[e(w,null,{default:a(()=>[J]),_:1}),e(w,{class:"q-pa-sm"},{default:a(()=>[t("div",W,[t("div",X,[e(S,{label:"SPK No",readonly:"",dense:"",modelValue:s.value.SRVH_DOCNO,"onUpdate:modelValue":l[0]||(l[0]=n=>s.value.SRVH_DOCNO=n),filled:""},null,8,["modelValue"])]),t("div",z,[e(S,{filled:"",modelValue:s.value.SRVH_ISSDT,"onUpdate:modelValue":l[2]||(l[2]=n=>s.value.SRVH_ISSDT=n),dense:"",label:"Issue Date",loading:i.loading,onClick:l[3]||(l[3]=n=>i.quotationIssueDate.qDateProxy.show()),mask:"####-##-##","fill-mask":"",hint:"Mask: YYYY-MM-DD"},{append:a(()=>[e(U,{name:"event",class:"cursor-pointer"},{default:a(()=>[e(A,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(F,{modelValue:s.value.SRVH_ISSDT,"onUpdate:modelValue":l[1]||(l[1]=n=>s.value.SRVH_ISSDT=n),mask:"YYYY-MM-DD"},{default:a(()=>[t("div",G,[q(e(p,{label:"Close",color:"primary",flat:""},null,512),[[L]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","loading"])])]),t("div",Z,[t("div",ee,[e(S,{label:"Customer Choose",dense:"",modelValue:s.value.SRVH_CUSCD,"onUpdate:modelValue":l[4]||(l[4]=n=>s.value.SRVH_CUSCD=n),filled:""},null,8,["modelValue"])])])]),_:1}),e(I,{align:"right"},{default:a(()=>[e(p,{label:"OK",color:"primary",onClick:l[5]||(l[5]=n=>i.onSubmitData()),disable:i.stateSubmit},null,8,["disable"]),e(p,{flat:"",label:"Cancel",color:"red",onClick:h(C)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}};const le={class:"q-pa-md"},oe={class:"row q-pb-md"},te=t("div",{class:"col"},[t("span",{class:"text-h4"},"Receive Order ")],-1),se={class:"col text-right"},ne={class:"row q-pt-md"},ie={class:"col"},pe={__name:"serviceView",setup(P){const V=N(),f=m("SRVH_DOCNO"),v=m(""),C=m([]),s=m([{name:"SRVH_DOCNO",label:"SPK No",field:"SRVH_DOCNO",sortable:!0,align:"left"},{name:"SRVH_CUSCD",label:"Cust",field:"SRVH_CUSCD",sortable:!0,align:"left"},{name:"created_at",label:"Created Date",field:"created_at",sortable:!0,align:"left"}]),i=m(!1);B(()=>{l()});const l=async()=>{i.value=!0,await j.post("service/search",{searchBy:f.value,searchValue:v.value}).then(d=>{i.value=!1,C.value=d.data.data}).catch(d=>{i.value=!1})},n=()=>{V.dialog({component:ae}).onOk(async d=>{l()})},T=d=>{window.open("https://joss.jatpowerindo.co.id/PDF/quotation/"+btoa(d),"_blank").focus()};return(d,u)=>(_(),b("div",le,[t("div",oe,[te,t("div",se,[e(p,{icon:"add",color:"blue",onClick:n},{default:a(()=>[e(D,null,{default:a(()=>[c("Create New Order")]),_:1})]),_:1})])]),e(M),t("div",ne,[t("div",ie,[e(K,{title:"Created Order",rows:C.value,columns:s.value,"row-key":"name",loading:i.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":a(()=>[e(E,{outlined:"",modelValue:f.value,"onUpdate:modelValue":u[0]||(u[0]=o=>f.value=o),options:s.value,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),e(S,{borderless:"",dense:"",modelValue:v.value,"onUpdate:modelValue":[u[1]||(u[1]=o=>v.value=o),u[2]||(u[2]=o=>d.dataQuo())],placeholder:"Search",outlined:"",debounce:"1000"},{append:a(()=>[e(U,{name:"search"})]),_:1},8,["modelValue"])]),header:a(o=>[e(R,{props:o},{default:a(()=>[(_(!0),b(k,null,Q(o.cols,r=>(_(),g(H,{key:r.name,props:o},{default:a(()=>[c(O(r.label),1)]),_:2},1032,["props"]))),128)),e(H,{"auto-width":""},{default:a(()=>[c("Action")]),_:1})]),_:2},1032,["props"])]),body:a(o=>[e(R,{props:o},{default:a(()=>[(_(!0),b(k,null,Q(o.cols,r=>(_(),g(y,{key:r.name,props:o},{default:a(()=>[c(O(r.value),1)]),_:2},1032,["props"]))),128)),e(y,{"auto-width":""},{default:a(()=>[e(p,{flat:"",color:"orange",icon:"edit",onClick:r=>d.onClickEdit(o.row.TQUO_QUOCD),dense:""},{default:a(()=>[e(D,null,{default:a(()=>[c("Edit this quotation")]),_:1})]),_:2},1032,["onClick"]),e(p,{flat:"",color:"indigo",icon:"print",onClick:r=>T(o.row.TQUO_QUOCD),dense:""},{default:a(()=>[e(D,null,{default:a(()=>[c("Print this order")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{pe as default};
