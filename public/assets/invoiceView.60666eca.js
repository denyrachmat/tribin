import{u as T,j as L,k as U,l as w}from"./QTable.cbb1b244.js";import{s as i,o as B,B as r,P as p,I as _,E as o,D as a,Z as R,am as N,R as h,S as b,C as g,H as d,O as C,Q as V}from"./index.611c1b3f.js";import{Q as D,a as Q}from"./QTd.f1b8ce6f.js";import{Q as k}from"./QTooltip.77c9a0d6.js";import{api_web as m}from"./axios.14685db1.js";const O={class:"q-pa-md"},M={class:"row"},P={class:"col"},q={__name:"invoiceView",setup(W){T();const f=i([]),v=i([{name:"TDLVORD_DLVCD",label:"DO Number",field:"TDLVORD_DLVCD",sortable:!0,align:"left"},{name:"MCUS_CUSNM",label:"Customer",field:"MCUS_CUSNM",sortable:!0,align:"left"}]),l=i(!1),u=i(""),c=i("");B(()=>{y()});const y=async()=>{l.value=!0,await m.post("invoices/search",{searchBy:u.value,searchValue:c.value}).then(n=>{l.value=!1,f.value=n.data.data}).catch(n=>{l.value=!1})},I=async n=>{l.value=!0,await m.post("invoices/printInvoice",n).then(t=>{l.value=!1,window.open("").document.write("<iframe width='100%' height='100%' src='data:application/pdf;base64, "+encodeURI(t.data)+"'></iframe>")}).catch(t=>{l.value=!1})},S=async n=>{l.value=!0,await m.get(`invoices/printKwitans/${btoa(n)}`).then(t=>{l.value=!1,window.open("").document.write("<iframe width='100%' height='100%' src='data:application/pdf;base64, "+encodeURI(t.data)+"'></iframe>")}).catch(t=>{l.value=!1})};return(n,t)=>(r(),p("div",O,[_("div",M,[_("div",P,[o(L,{title:"Invoice List",rows:f.value,columns:v.value,"row-key":"name",loading:l.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":a(()=>[o(U,{outlined:"",modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e),options:v.value,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),o(R,{borderless:"",dense:"",modelValue:c.value,"onUpdate:modelValue":[t[1]||(t[1]=e=>c.value=e),t[2]||(t[2]=e=>n.dataOutstanding())],placeholder:"Search",outlined:"",debounce:"1000"},{append:a(()=>[o(N,{name:"search"})]),_:1},8,["modelValue"])]),header:a(e=>[o(D,{props:e},{default:a(()=>[(r(!0),p(h,null,b(e.cols,s=>(r(),g(w,{key:s.name,props:e},{default:a(()=>[d(C(s.label),1)]),_:2},1032,["props"]))),128)),o(w,{"auto-width":""},{default:a(()=>[d("Action")]),_:1})]),_:2},1032,["props"])]),body:a(e=>[o(D,{props:e},{default:a(()=>[(r(!0),p(h,null,b(e.cols,s=>(r(),g(Q,{key:s.name,props:e},{default:a(()=>[d(C(s.value),1)]),_:2},1032,["props"]))),128)),o(Q,{"auto-width":""},{default:a(()=>[o(V,{flat:"",color:"green",icon:"print",dense:"",onClick:s=>I(e.row)},{default:a(()=>[o(k,null,{default:a(()=>[d("Print Invoice")]),_:1})]),_:2},1032,["onClick"]),o(V,{flat:"",color:"indigo",icon:"print",dense:"",onClick:s=>S(e.row.TDLVORD_DLVCD)},{default:a(()=>[o(k,null,{default:a(()=>[d("Print Receipt")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{q as default};
