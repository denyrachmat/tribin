import{s as _,o as x,B as v,C,D as e,E as a,L as k,M as f,T as O,H as l,V as M,P as T,R as U,S as q,bc as y,U as L,O as n,Q as H,X as $,Y as A,I as s,Z as B,am as F,aX as E}from"./index.800c105a.js";import{a as I,u as K,Q as Y,b as Q,c as u,d as c,k as X}from"./QTable.2c053f5b.js";import{api_web as P}from"./axios.11bebd28.js";import{Q as z}from"./QTooltip.4c31bbee.js";import{_ as G}from"./serviceOprItemAdd.3110b428.js";const Z=s("div",{class:"text-h6"},"View List Price",-1),j={__name:"serviceApprovalDetView",props:{idHeader:String},setup(D){const S=I(),{dialogRef:g,onDialogHide:m,onDialogOK:p,onDialogCancel:w}=K(),b=D,t=_([]),d=_(!1);x(()=>{o()});const o=async()=>{d.value=!0,await P.get(`servicesAdmins/viewUnapproveMgrDet/${btoa(b.idHeader)}`).then(i=>{d.value=!1,t.value=i.data}).catch(i=>{d.value=!1})},V=i=>{let h=0;return i.map(r=>{h+=r.TSRVF_QTY*r.TSRVF_PRC}),h},N=i=>{i.listFixDet=i.list_fix_det,S.dialog({component:G,componentProps:{mode:"view",dataItem:i}}).onOk(async h=>{})};return(i,h)=>(v(),C(A,{ref_key:"dialogRef",ref:g,onHide:$(m),"transition-show":"slide-up","transition-hide":"slide-down","full-width":""},{default:e(()=>[a(k,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:e(()=>[a(f,null,{default:e(()=>[Z]),_:1}),a(f,{class:"q-pa-sm"},{default:e(()=>[a(Y,{bordered:"",loading:d.value},{default:e(()=>[t.value.length===0?O((v(),C(Q,{key:0,class:"q-my-sm",clickable:""},{default:e(()=>[a(u,null,{default:e(()=>[l(" No items added ")]),_:1})]),_:1})),[[M]]):(v(!0),T(U,{key:1},q(t.value,(r,R)=>(v(),C(Q,{key:R,class:y("q-my-sm")},{default:e(()=>[a(u,{avatar:""},{default:e(()=>[a(L,{color:r.TSRVD_FLGSTS===0?"red":"primary","text-color":"white"},{default:e(()=>[l(n(R+1),1)]),_:2},1032,["color"])]),_:2},1024),a(u,null,{default:e(()=>[a(c,null,{default:e(()=>[l(n(r.TSRVD_ITMCD),1)]),_:2},1024),a(c,{caption:""},{default:e(()=>[l(" Item ")]),_:1})]),_:2},1024),a(u,null,{default:e(()=>[a(c,null,{default:e(()=>[l(n(r.TSRVD_QTY),1)]),_:2},1024),a(c,{caption:""},{default:e(()=>[l(" Qty ")]),_:1})]),_:2},1024),a(u,null,{default:e(()=>[a(c,null,{default:e(()=>[l(n(r.TSRVD_REMARK),1)]),_:2},1024),a(c,{caption:""},{default:e(()=>[l(" Remarks ")]),_:1})]),_:2},1024),a(u,null,{default:e(()=>[a(c,null,{default:e(()=>[l("Rp. "+n(V(r.list_fix_det).toLocaleString()),1)]),_:2},1024),a(c,{caption:""},{default:e(()=>[l(" Total Fix Price ")]),_:1})]),_:2},1024),a(u,{side:""},{default:e(()=>[a(H,{icon:"visibility",flat:"",color:"primary",onClick:de=>N(r)},{default:e(()=>[a(z,null,{default:e(()=>[l("View list fix items")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},J={class:"q-pa-md"},W={class:"row"},ee={class:"col"},ae={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},te={class:"text-h5 text-bold"},le={class:"text-h6 text-bold"},se={class:"text-subtitle2"},oe={class:"text-h6 text-bold"},ne=s("div",{class:"text-subtitle2"},"Resolved Items",-1),ie={class:"row"},re={class:"col"},pe={__name:"serviceApproval",setup(D){const S=I();_([{name:"SRVH_DOCNO",label:"SPK No",field:"SRVH_DOCNO",sortable:!0,align:"left"},{name:"MCUS_CUSNM",label:"Customer Name",field:"MCUS_CUSNM",sortable:!0,align:"left"},{name:"resolve",label:"Resolved Line",sortable:!0,align:"left",field:t=>t.resolve.length},{name:"unresolve",label:"Unresolved Line",sortable:!0,align:"left",field:t=>t.unresolve.length},{name:"SRVH_ISSDT",label:"Submited Date",field:"SRVH_ISSDT",sortable:!0,align:"left"}]);const g=_([]),m=_(""),p=_(!1);_(null),x(()=>{w()});const w=async()=>{p.value=!0,await P.get("servicesAdmins/listUnapproveMgr").then(t=>{p.value=!1,g.value=t.data}).catch(t=>{p.value=!1})},b=t=>{S.dialog({component:j,componentProps:{idHeader:t}}).onOk(async d=>{w()})};return(t,d)=>(v(),T("div",J,[s("div",W,[s("div",ee,[a(X,{grid:"",flat:"",bordered:"","card-container-class":t.cardContainerClass,title:"Approve Service Pricing",rows:g.value,columns:t.columns,"row-key":"name",filter:m.value,"hide-header":"",pagination:{rowsPerPage:50},"rows-per-page-options":t.rowsPerPageOptions,loading:p.value},{"top-right":e(()=>[a(B,{borderless:"",dense:"",debounce:"300",modelValue:m.value,"onUpdate:modelValue":d[0]||(d[0]=o=>m.value=o),placeholder:"Search"},{append:e(()=>[a(F,{name:"search"})]),_:1},8,["modelValue"])]),item:e(o=>[s("div",ae,[a(k,{flat:"",bordered:""},{default:e(()=>[a(f,{class:y("text-center bg-green text-white")},{default:e(()=>[s("div",te,n(o.row.SRVH_DOCNO),1)]),_:2},1024),a(E),a(f,null,{default:e(()=>[s("div",le,n(o.row.MCUS_CUSNM),1),s("div",se,n(o.row.SRVH_ISSDT),1)]),_:2},1024),a(f,null,{default:e(()=>[s("div",oe,n(o.row.resolve.length)+" of "+n(o.row.detail.length),1),ne]),_:2},1024),a(f,null,{default:e(()=>[s("div",ie,[s("div",re,[a(H,{color:"primary",label:"View Data",onClick:V=>b(o.row.SRVH_DOCNO)},null,8,["onClick"])])])]),_:2},1024)]),_:2},1024)])]),_:1},8,["card-container-class","rows","columns","filter","rows-per-page-options","loading"])])])]))}};export{pe as default};
