import{h as f,c as K,K as ae,L as se,s as le,t as _,a as O,w as C,ax as oe,ay as ie,j as ne,o as X,H as re,d as ce,m as ue,bn as Q,G as j,q as D,bo as R,k as de,bp as z,aJ as fe,g as ve,C as S,R as q,J as a,F as t,E as s,P as N,aI as me,Q as F,S as U,T as J,U as he,D as W,V as _e,I as b,av as V,M as ge,O as pe,W as be}from"./index.86d107a2.js";import{a as I,b as L,Q as H}from"./QItemLabel.2d2c0619.js";import{Q as G}from"./QList.1349df42.js";import{u as ye}from"./use-quasar.4d94120d.js";import{api_web as we}from"./axios.255eaf2a.js";const xe=[f("circle",{cx:"15",cy:"15",r:"15"},[f("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),f("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]),f("circle",{cx:"60",cy:"15",r:"9","fill-opacity":".3"},[f("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),f("animate",{attributeName:"fill-opacity",from:".5",to:".5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})]),f("circle",{cx:"105",cy:"15",r:"15"},[f("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),f("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})])];var Se=K({name:"QSpinnerDots",props:ae,setup(o){const{cSize:g,classes:w}=se(o);return()=>f("svg",{class:w.value,fill:"currentColor",width:g.value,height:g.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg"},xe)}});const{passive:y}=ue;var Ie=K({name:"QInfiniteScroll",props:{offset:{type:Number,default:500},debounce:{type:[String,Number],default:100},scrollTarget:le,initialIndex:{type:Number,default:0},disable:Boolean,reverse:Boolean},emits:["load"],setup(o,{slots:g,emit:w}){const i=_(!1),n=_(!0),m=_(null),T=_(null);let p=o.initialIndex,e,r;const k=O(()=>"q-infinite-scroll__loading"+(i.value===!0?"":" invisible"));function c(){if(o.disable===!0||i.value===!0||n.value===!1)return;const l=Q(e),v=D(e),M=z(e);o.reverse===!1?Math.round(v+M+o.offset)>=Math.round(l)&&u():Math.round(v)<=o.offset&&u()}function u(){if(o.disable===!0||i.value===!0||n.value===!1)return;p++,i.value=!0;const l=Q(e);w("load",p,v=>{n.value===!0&&(i.value=!1,j(()=>{if(o.reverse===!0){const M=Q(e),ee=D(e),te=M-l;R(e,ee+te)}v===!0?x():m.value&&m.value.closest("body")&&r()}))})}function d(){p=0}function h(){n.value===!1&&(n.value=!0,e.addEventListener("scroll",r,y)),c()}function x(){n.value===!0&&(n.value=!1,i.value=!1,e.removeEventListener("scroll",r,y),r!==void 0&&r.cancel!==void 0&&r.cancel())}function P(){if(e&&n.value===!0&&e.removeEventListener("scroll",r,y),e=de(m.value,o.scrollTarget),n.value===!0){if(e.addEventListener("scroll",r,y),o.reverse===!0){const l=Q(e),v=z(e);R(e,l-v)}c()}}function Y(l){p=l}function $(l){l=parseInt(l,10);const v=r;r=l<=0?c:fe(c,isNaN(l)===!0?100:l),e&&n.value===!0&&(v!==void 0&&e.removeEventListener("scroll",v,y),e.addEventListener("scroll",r,y))}function A(l){if(E.value===!0){if(T.value===null){l!==!0&&j(()=>{A(!0)});return}const v=`${i.value===!0?"un":""}pauseAnimations`;Array.from(T.value.getElementsByTagName("svg")).forEach(M=>{M[v]()})}}const E=O(()=>o.disable!==!0&&n.value===!0);C([i,E],()=>{A()}),C(()=>o.disable,l=>{l===!0?x():h()}),C(()=>o.reverse,()=>{i.value===!1&&n.value===!0&&c()}),C(()=>o.scrollTarget,P),C(()=>o.debounce,$);let B=!1;oe(()=>{B!==!1&&e&&R(e,B)}),ie(()=>{B=e?D(e):!1}),ne(()=>{n.value===!0&&e.removeEventListener("scroll",r,y)}),X(()=>{$(o.debounce),P(),i.value===!1&&A()});const Z=ve();return Object.assign(Z.proxy,{poll:()=>{r!==void 0&&r()},trigger:u,stop:x,reset:d,resume:h,setIndex:Y,updateScrollTarget:P}),()=>{const l=re(g.default,[]);return E.value===!0&&l[o.reverse===!1?"push":"unshift"](f("div",{ref:T,class:k.value},ce(g.loading))),f("div",{class:"q-infinite-scroll",ref:m},l)}}});const Te={class:"q-pa-md"},Me=a("div",{class:"row q-pb-md"},[a("div",{class:"col"},[a("span",{class:"text-h4"},"POS")]),a("div",{class:"col text-right"})],-1),Ce={class:"row bg-grey q-pa-md full-width",style:{height:"86vh"}},Ne={class:"col-4 q-pa-xs"},Qe={class:"row bg-white"},qe={class:"col",style:{height:"50vh",overflow:"auto"}},Le={class:"row q-pt-xs",style:{height:"30vh"}},ke={class:"col bg-white vertical-middle"},Pe={class:"row"},Ae={class:"col q-pa-sm",style:{height:"20vh"}},Ee={class:"text-h6 text-bold"},Be={class:"row",style:{height:"10vh"}},De={class:"col-sm-6 col-12 q-pa-sm"},Re={class:"col-sm-6 col-12 q-pa-sm"},Ve={class:"col q-pa-xs"},He={class:"row bg-white",style:{height:"80vh",overflow:"auto"}},Oe={class:"col"},$e={class:"row q-col-gutter-sm"},je={class:"text-center"},ze={class:"row items-center"},Fe={class:"col text-bold ellipsis"},Ue={class:"row justify-center q-my-md"},Ye={__name:"posSalesIndex",setup(o){const g=ye(),w=_([]),i=_([]),n=_(!1),m=_(0);X(()=>{p("")});const T=O(()=>i.value.length>0?i.value.reduce((c,u)=>c+u.LATEST_PRC,0):0),p=async c=>{n.value=!0,m.value=m.value+1,await we.post("item/searchAPIStockAndPriceOnly",{searchValue:c,page:m.value}).then(u=>{n.value=!1,u.data.data.data.map(d=>{let h=i.value.findIndex(x=>x.MITM_ITMCD===d.MITM_ITMCD);console.log(h),h===-1&&w.value.push(d)})}).catch(()=>{n.value=!1})},e=c=>{i.value.push(c)},r=async(c,u)=>{await p(""),u()},k=c=>{g.dialog({title:"Confirmation",message:"Are you sure want to delete this line ??",cancel:!0,persistent:!0}).onOk(async()=>{i.value.splice(c,1)})};return(c,u)=>(S(),q("div",Te,[Me,a("div",Ce,[a("div",Ne,[a("div",Qe,[a("div",qe,[t(G,{bordered:"",loading:n.value},{default:s(()=>[i.value.length>0?(S(!0),q(U,{key:0},J(i.value,d=>he((S(),W(H,{key:d.id,class:"q-my-sm"},{default:s(()=>[t(I,{avatar:""},{default:s(()=>[t(_e,{color:"primary","text-color":"white",icon:"category"})]),_:1}),t(I,null,{default:s(()=>[t(L,null,{default:s(()=>[b(N(d.MITM_ITMNM),1)]),_:2},1024),t(L,{caption:"",lines:"1"},{default:s(()=>[b(N(d.LATEST_PRC),1)]),_:2},1024)]),_:2},1024),t(I,{side:""},{default:s(()=>[t(V,{name:"delete",color:"red",onClick:u[0]||(u[0]=h=>k(c.idx))})]),_:1})]),_:2},1024)),[[be]])),128)):(S(),W(H,{key:1},{default:s(()=>[t(I,null,{default:s(()=>[b(" No item selected!! ")]),_:1})]),_:1}))]),_:1},8,["loading"])])]),a("div",Le,[a("div",ke,[a("div",Pe,[a("div",Ae,[a("div",Ee,"Total : Rp. "+N(T.value),1)])]),t(me),a("div",Be,[a("div",De,[t(F,{color:"primary",class:"full-width"},{default:s(()=>[b(" Submit ")]),_:1})]),a("div",Re,[t(F,{color:"red",class:"full-width"},{default:s(()=>[b(" Cancel ")]),_:1})])])])])]),a("div",Ve,[a("div",He,[a("div",Oe,[t(Ie,{onLoad:r,offset:300,debounce:2e3},{loading:s(()=>[a("div",Ue,[t(Se,{color:"primary",size:"40px"})])]),default:s(()=>[a("div",$e,[(S(!0),q(U,null,J(w.value,(d,h)=>(S(),q("div",{class:"col-6",key:`sm-${h}`},[t(ge,{flat:"",bordered:""},{default:s(()=>[a("div",je,[t(V,{name:"category",size:"8em"})]),t(pe,null,{default:s(()=>[a("div",ze,[a("div",Fe,N(d.MITM_ITMNM),1)])]),_:2},1024),t(G,null,{default:s(()=>[t(H,{clickable:"",onClick:x=>e(d)},{default:s(()=>[t(I,{avatar:""},{default:s(()=>[t(V,{color:"primary",name:"add"})]),_:1}),t(I,null,{default:s(()=>[t(L,null,{default:s(()=>[b("Add Item")]),_:1}),t(L,{caption:""},{default:s(()=>[b("Rp. "+N(d.LATEST_PRC),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]))),128))])]),_:1})])])])])]))}};export{Ye as default};
