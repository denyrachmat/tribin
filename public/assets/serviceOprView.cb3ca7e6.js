import{s as d,o as R,B as p,C as g,D as e,E as a,J as V,K as c,I as s,aX as r,R as b,aU as Q,aV as H,aW as U,aZ as x,H as i,Q as w,ap as N,M,O as y,P as k,aa as Y,S as P}from"./index.a2fc8dac.js";import{u as L,b as T,Q as q,j as B,k as h,l as D,a as K}from"./use-dialog-plugin-component.bf222ac4.js";import{d as O}from"./date.6c0e9408.js";import{api_web as A}from"./axios.8ef9b29c.js";import{Q as E}from"./QTooltip.3da66cd2.js";const $={class:"text-h6"},F={__name:"serviceOprUpdateOrder",props:{header:Array,detail:Array},setup(C){const{dialogRef:v,onDialogHide:S,onDialogOK:u,onDialogCancel:_}=L();T();const n=C,m=d({SRVH_DOCNO:"",SRVH_ISSDT:O.formatDate(Date.now(),"YYYY-MM-DD"),SRVH_CUSCD:""}),t=d([]);return R(async()=>{n.header&&(m.value=n.header,t.value=n.detail)}),(f,l)=>(p(),g(y,{ref_key:"dialogRef",ref:v,onHide:M(S),"transition-show":"slide-up","transition-hide":"slide-down","full-width":""},{default:e(()=>[a(V,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:e(()=>[a(c,null,{default:e(()=>[s("div",$,"Update Order "+r(m.value.SRVH_DOCNO),1)]),_:1}),a(c,{class:"q-pa-sm"},{default:e(()=>[a(q,{bordered:""},{default:e(()=>[(p(!0),b(Q,null,H(t.value,(o,I)=>U((p(),g(B,{key:I,class:"q-my-sm",clickable:""},{default:e(()=>[a(h,{avatar:""},{default:e(()=>[a(x,{color:"primary","text-color":"white"},{default:e(()=>[i(r(o.TSRVD_LINE),1)]),_:2},1024)]),_:2},1024),a(h,null,{default:e(()=>[a(D,null,{default:e(()=>[i(r(o.TSRVD_ITMCD),1)]),_:2},1024),a(D,{caption:"",lines:"1"},{default:e(()=>[i("Item")]),_:1})]),_:2},1024),a(h,null,{default:e(()=>[a(D,null,{default:e(()=>[i(r(o.TSRVD_CUSTRMK),1)]),_:2},1024),a(D,{caption:"",lines:"1"},{default:e(()=>[i("Customer Remarks")]),_:1})]),_:2},1024),a(h,{side:""},{default:e(()=>[a(w,{icon:"construction",color:"green",flat:""},{default:e(()=>[a(E,null,{default:e(()=>[i("Update Fix Data")]),_:1})]),_:1})]),_:1})]),_:2},1024)),[[N]])),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}},j={class:"q-pa-md"},J={class:"row"},W={class:"col"},X={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},Z={class:"text-h5 text-bold"},z={class:"text-h6 text-bold"},G={class:"text-subtitle2"},ee={class:"text-h6 text-bold"},ae=s("div",{class:"text-subtitle2"},"Resolved Items",-1),te={class:"row"},le={class:"col"},se=s("div",{class:"col text-right"},null,-1),ce={__name:"serviceOprView",setup(C){const v=T();d([{name:"SRVH_DOCNO",label:"SPK No",field:"SRVH_DOCNO",sortable:!0,align:"left"},{name:"MCUS_CUSNM",label:"Customer Name",field:"MCUS_CUSNM",sortable:!0,align:"left"},{name:"resolve",label:"Resolved Line",sortable:!0,align:"left",field:t=>t.resolve.length},{name:"unresolve",label:"Unresolved Line",sortable:!0,align:"left",field:t=>t.unresolve.length},{name:"SRVH_ISSDT",label:"Submited Date",field:"SRVH_ISSDT",sortable:!0,align:"left"}]);const S=d([]),u=d(""),_=d(!1);R(()=>{n()});const n=async()=>{_.value=!0,await A.post("servicesAdmin/search",{searchBy:"",searchValue:u.value}).then(t=>{_.value=!1,S.value=t.data.data}).catch(t=>{_.value=!1})},m=t=>{const f={SRVH_DOCNO:t.SRVH_DOCNO,SRVH_ISSDT:O.formatDate(t.SRVH_ISSDT,"YYYY-MM-DD"),SRVH_CUSCD:t.MCUS_CUSCD};let l=[];t.detail.map(o=>{l.push({TSRVD_ITMCD:o.TSRVD_ITMCD,TSRVD_LINE:o.TSRVD_LINE,TSRVD_QTY:o.TSRVD_QTY,TSRVD_CUSTRMK:o.TSRVD_CUSTRMK})}),v.dialog({component:F,componentProps:{header:f,detail:l}}).onOk(async o=>{n()})};return(t,f)=>(p(),b("div",j,[s("div",J,[s("div",W,[a(K,{grid:"",flat:"",bordered:"","card-container-class":t.cardContainerClass,title:"Outstanding Order",rows:S.value,columns:t.columns,"row-key":"name",filter:u.value,"hide-header":"",pagination:{rowsPerPage:50},"rows-per-page-options":t.rowsPerPageOptions,loading:_.value},{"top-right":e(()=>[a(k,{borderless:"",dense:"",debounce:"300",modelValue:u.value,"onUpdate:modelValue":f[0]||(f[0]=l=>u.value=l),placeholder:"Search"},{append:e(()=>[a(Y,{name:"search"})]),_:1},8,["modelValue"])]),item:e(l=>[s("div",X,[a(V,{flat:"",bordered:""},{default:e(()=>[a(c,{class:"text-center bg-secondary text-white"},{default:e(()=>[s("div",Z,r(l.row.SRVH_DOCNO),1)]),_:2},1024),a(P),a(c,null,{default:e(()=>[s("div",z,r(l.row.MCUS_CUSNM),1),s("div",G,r(l.row.SRVH_ISSDT),1)]),_:2},1024),a(c,null,{default:e(()=>[s("div",ee,r(l.row.resolve.length)+" of "+r(l.row.unresolve.length),1),ae]),_:2},1024),a(c,null,{default:e(()=>[s("div",te,[s("div",le,[a(w,{label:"Resolve",color:"primary",outline:"",onClick:o=>m(l.row)},null,8,["onClick"])]),se])]),_:2},1024)]),_:2},1024)])]),_:1},8,["card-container-class","rows","columns","filter","rows-per-page-options","loading"])])])]))}};export{ce as default};
