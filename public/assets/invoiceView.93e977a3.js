import{u as O,j as R,k as $,l as _}from"./QTable.0e25abcb.js";import{s as r,o as B,B as d,P as v,I as g,E as t,D as a,Z as N,am as P,R as b,S as C,C as D,H as s,O as k,Q as u}from"./index.3a74f6bf.js";import{Q as V,a as y}from"./QTd.dacce2a8.js";import{Q as c}from"./QTooltip.15c6fa1b.js";import{api_web as p}from"./axios.af33d894.js";const W={class:"q-pa-md"},J={class:"row"},M={class:"col"},K={__name:"invoiceView",setup(x){const S=O(),w=r([]),h=r([{name:"TDLVORD_DLVCD",label:"DO Number",field:"TDLVORD_DLVCD",sortable:!0,align:"left"},{name:"MCUS_CUSNM",label:"Customer",field:"MCUS_CUSNM",sortable:!0,align:"left"}]),l=r(!1),f=r(""),m=r("");B(()=>{Q()});const Q=async()=>{l.value=!0,await p.post("invoices/search",{searchBy:f.value,searchValue:m.value}).then(o=>{l.value=!1,w.value=o.data.data}).catch(o=>{l.value=!1})},I=async o=>{l.value=!0,await p.post("invoices/printInvoice",o).then(n=>{l.value=!1,window.open("").document.write("<iframe width='100%' height='100%' src='data:application/pdf;base64, "+encodeURI(n.data)+"'></iframe>")}).catch(n=>{l.value=!1})},L=async o=>{l.value=!0,await p.get(`invoices/printKwitansi/${btoa(o)}`).then(n=>{l.value=!1,window.open("").document.write("<iframe width='100%' height='100%' src='data:application/pdf;base64, "+encodeURI(n.data)+"'></iframe>")}).catch(n=>{l.value=!1})},T=async o=>{S.dialog({title:"Options",message:"Choose type surat jalan",options:{type:"radio",model:"general",items:[{label:"General",value:"general"},{label:"Forklift",value:"forklift"},{label:"Genset",value:"genset"}]},cancel:!0,persistent:!0}).onOk(async n=>{l.value=!0,await p.get(`invoices/printSJ/${btoa(o)}`).then(e=>{l.value=!1,window.open("").document.write("<iframe width='100%' height='100%' src='data:application/pdf;base64, "+encodeURI(e.data)+"'></iframe>")}).catch(e=>{l.value=!1})})},U=o=>{};return(o,n)=>(d(),v("div",W,[g("div",J,[g("div",M,[t(R,{title:"Invoice List",rows:w.value,columns:h.value,"row-key":"name",loading:l.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":a(()=>[t($,{outlined:"",modelValue:f.value,"onUpdate:modelValue":n[0]||(n[0]=e=>f.value=e),options:h.value,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),t(N,{borderless:"",dense:"",modelValue:m.value,"onUpdate:modelValue":[n[1]||(n[1]=e=>m.value=e),n[2]||(n[2]=e=>o.dataOutstanding())],placeholder:"Search",outlined:"",debounce:"1000"},{append:a(()=>[t(P,{name:"search"})]),_:1},8,["modelValue"])]),header:a(e=>[t(V,{props:e},{default:a(()=>[(d(!0),v(b,null,C(e.cols,i=>(d(),D(_,{key:i.name,props:e},{default:a(()=>[s(k(i.label),1)]),_:2},1032,["props"]))),128)),t(_,{"auto-width":""},{default:a(()=>[s("Action")]),_:1})]),_:2},1032,["props"])]),body:a(e=>[t(V,{props:e},{default:a(()=>[(d(!0),v(b,null,C(e.cols,i=>(d(),D(y,{key:i.name,props:e},{default:a(()=>[s(k(i.value),1)]),_:2},1032,["props"]))),128)),t(y,{"auto-width":""},{default:a(()=>[t(u,{flat:"",color:"red",icon:"list",dense:"",onClick:i=>U(e.row)},{default:a(()=>[t(c,null,{default:a(()=>[s("Update Surat Jalan")]),_:1})]),_:2},1032,["onClick"]),t(u,{flat:"",color:"green",icon:"print",dense:"",onClick:i=>I(e.row)},{default:a(()=>[t(c,null,{default:a(()=>[s("Print Invoice")]),_:1})]),_:2},1032,["onClick"]),t(u,{flat:"",color:"indigo",icon:"print",dense:"",onClick:i=>L(e.row.TDLVORD_DLVCD)},{default:a(()=>[t(c,null,{default:a(()=>[s("Print Receipt")]),_:1})]),_:2},1032,["onClick"]),t(u,{flat:"",color:"orange",icon:"print",dense:"",onClick:i=>T(e.row.TDLVORD_DLVCD)},{default:a(()=>[t(c,null,{default:a(()=>[s("Print Surat Jalan")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{K as default};
