import{h as i,c as D,K as P,L as V,t as f,o as O,a as R,C as n,R as d,J as e,F as t,E as s,P as u,aI as B,Q as w,$,S as M,T,U as E,D as k,V as z,I as c,av as b,O as K,M as j,W as F}from"./index.cdd9f89c.js";import{a as m,b as g,Q as I}from"./QItemLabel.82ad6263.js";import{Q}from"./QList.be038065.js";import{u as U}from"./use-quasar.206b9776.js";import{api_web as H}from"./axios.307c0a54.js";const J=[i("circle",{cx:"15",cy:"15",r:"15"},[i("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),i("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]),i("circle",{cx:"60",cy:"15",r:"9","fill-opacity":".3"},[i("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),i("animate",{attributeName:"fill-opacity",from:".5",to:".5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})]),i("circle",{cx:"105",cy:"15",r:"15"},[i("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),i("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})])];var W=D({name:"QSpinnerDots",props:P,setup(C){const{cSize:_,classes:h}=V(C);return()=>i("svg",{class:h.value,fill:"currentColor",width:_.value,height:_.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg"},J)}});const G={class:"q-pa-md"},X=e("div",{class:"row q-pb-md"},[e("div",{class:"col"},[e("span",{class:"text-h4"},"POS")]),e("div",{class:"col text-right"})],-1),Y={class:"row bg-grey q-pa-md full-width",style:{height:"86vh"}},Z={class:"col-4 q-pa-xs"},ee={class:"row bg-white"},te={class:"col",style:{height:"50vh",overflow:"auto"}},se={class:"row q-pt-xs",style:{height:"30vh"}},ae={class:"col bg-white vertical-middle"},le={class:"row"},oe={class:"col q-pa-sm",style:{height:"20vh"}},ie={class:"text-h6 text-bold"},ne={class:"row",style:{height:"10vh"}},ce={class:"col-sm-6 col-12 q-pa-sm"},re={class:"col-sm-6 col-12 q-pa-sm"},de={class:"col q-pa-xs q-gutter-sm"},ue={class:"row bg-white",style:{height:"10vh",overflow:"auto"}},me={class:"col"},_e={class:"row bg-white",style:{height:"70vh",overflow:"auto"}},ve={class:"col"},pe={class:"row q-col-gutter-sm"},he={class:"text-center"},fe={class:"row items-center"},ge={class:"col text-bold ellipsis"},ye=e("br",null,null,-1),we={key:0,class:"row justify-center q-my-md"},be={key:1,class:"row justify-center q-my-md"},Te={__name:"posSalesIndex",setup(C){const _=U(),h=f([]),r=f([]),v=f(!1),y=f(0);O(()=>{S("")});const q=R(()=>r.value.length>0?r.value.reduce((o,a)=>o+a.LATEST_PRC,0):0),S=async o=>{v.value=!0,y.value=y.value+1,await H.post("item/searchAPIStockAndPriceOnly",{searchValue:o,page:y.value}).then(a=>{v.value=!1,a.data.data.data.map(l=>{let p=r.value.findIndex(x=>x.MITM_ITMCD===l.MITM_ITMCD);console.log(p),p===-1&&h.value.push(l)})}).catch(()=>{v.value=!1})},N=o=>{_.dialog({dark:!0,title:"Prompt",message:"How many qty?",prompt:{model:"",type:"number",isValid:a=>a.STOCK>0},cancel:!0,persistent:!0}).onOk(a=>{r.value.push({...o,sellQty:a})}).onCancel(()=>{}).onDismiss(()=>{})},L=async(o,a)=>{await S(""),a()},A=o=>{_.dialog({title:"Confirmation",message:"Are you sure want to delete this line ??",cancel:!0,persistent:!0}).onOk(async()=>{r.value.splice(o,1)})};return(o,a)=>(n(),d("div",G,[X,e("div",Y,[e("div",Z,[e("div",ee,[e("div",te,[t(Q,{bordered:"",loading:v.value},{default:s(()=>[r.value.length>0?(n(!0),d(M,{key:0},T(r.value,l=>E((n(),k(I,{key:l.id,class:"q-my-sm"},{default:s(()=>[t(m,{avatar:""},{default:s(()=>[t(z,{color:"primary","text-color":"white",icon:"category"})]),_:1}),t(m,null,{default:s(()=>[t(g,null,{default:s(()=>[c(u(l.MITM_ITMNM),1)]),_:2},1024),t(g,{caption:"",lines:"1"},{default:s(()=>[c(u(l.LATEST_PRC),1)]),_:2},1024)]),_:2},1024),t(m,{side:""},{default:s(()=>[t(b,{name:"delete",color:"red",onClick:a[0]||(a[0]=p=>A(o.idx))})]),_:1})]),_:2},1024)),[[F]])),128)):(n(),k(I,{key:1},{default:s(()=>[t(m,null,{default:s(()=>[c(" No item selected!! ")]),_:1})]),_:1}))]),_:1},8,["loading"])])]),e("div",se,[e("div",ae,[e("div",le,[e("div",oe,[e("div",ie,"Total : Rp. "+u(q.value),1)])]),t(B),e("div",ne,[e("div",ce,[t(w,{color:"primary",class:"full-width"},{default:s(()=>[c(" Submit ")]),_:1})]),e("div",re,[t(w,{color:"red",class:"full-width"},{default:s(()=>[c(" Cancel ")]),_:1})])])])])]),e("div",de,[e("div",ue,[e("div",me,[t($,{filled:"",modelValue:o.searchItem,"onUpdate:modelValue":[a[1]||(a[1]=l=>o.searchItem=l),a[2]||(a[2]=l=>o.onInputSearch())],label:"Search Item",dense:""},null,8,["modelValue"])])]),e("div",_e,[e("div",ve,[e("div",pe,[(n(!0),d(M,null,T(h.value,(l,p)=>(n(),d("div",{class:"col-6",key:`sm-${p}`},[t(j,{flat:"",bordered:""},{default:s(()=>[e("div",he,[t(b,{name:"category",size:"8em"})]),t(K,null,{default:s(()=>[e("div",fe,[e("div",ge,u(l.MITM_ITMNM),1)])]),_:2},1024),t(Q,null,{default:s(()=>[t(I,{clickable:"",onClick:x=>N(l)},{default:s(()=>[t(m,{avatar:""},{default:s(()=>[t(b,{color:"primary",name:"add"})]),_:1}),t(m,null,{default:s(()=>[t(g,null,{default:s(()=>[c("Add Item")]),_:1}),t(g,{caption:"",lines:"2"},{default:s(()=>[c(" Rp. "+u(l.LATEST_PRC.toLocalString()),1),ye,c(" Stock = ("+u(l.STOCK.toLocalString())+") ",1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]))),128))]),v.value?(n(),d("div",we,[t(W,{color:"primary",size:"40px"})])):(n(),d("div",be,[t(w,{color:"primary",label:"Load more",onClick:L})]))])])])])]))}};export{Te as default};
