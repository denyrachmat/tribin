import{t as T,o as q,C as s,D as i,E as d,F as u,M as B,O as A,J as o,$ as p,aZ as M,Q as c,I as F,P,X as h,Y as V,Z as x}from"./index.446223d4.js";import{Q as f}from"./QSelect.c0e948b6.js";import{Q as K}from"./QTooltip.c9b1d0b7.js";import{api_web as g}from"./axios.538f5a85.js";import{u as R}from"./use-quasar.1685767b.js";import{u as L}from"./use-dialog-plugin-component.fcf85626.js";const $=o("div",{class:"text-h6"},"Create Item Master",-1),H={class:"row"},Y={class:"col"},Z={class:"col q-pl-md"},j={class:"row q-pt-md"},J={class:"col"},X={class:"col q-pl-md"},z={class:"row q-pt-md"},G={class:"col"},W={class:"col q-pl-md"},ee={class:"row q-pt-md"},le={class:"col"},ae={class:"col"},ue={__name:"itemCreate",props:{ItemCat:String,ItemType:String,isAutoCD:Boolean,listOpenField:Array,dataForUpdate:Object},setup(y){const{dialogRef:b,onDialogHide:U,onDialogOK:k,onDialogCancel:N}=L(),w=R(),a=T({MITM_ITMCD:"",MITM_ITMNM:"",MITM_STKUOM:"",MITM_ITMTYPE:1,MITM_BRAND:"",MITM_MODEL:"",MITM_SPEC:"",MITM_ITMCAT:"",MITM_COACD:"",MITM_ITMCAT:""}),m=T(!1),v=T(!1),O=T([]),C=T([]),S=T([]),r=y;q(()=>{E(),a.value.MITM_ITMCAT=r.ItemCat,a.value.MITM_ITMTYPE=r.ItemType,r.dataForUpdate&&(a.value=r.dataForUpdate)});const D=(t,e,l,_)=>{e(async()=>{await g.post("item/getListCoasAPI",{search:t}).then(I=>{C.value=I.data})})},Q=()=>{w.dialog({title:"Confirmation",message:"Do you want to save this item ?",cancel:!0,persistent:!0}).onOk(async()=>{await g.post("item",a.value).then(t=>{k(t.data.data)})})},E=async()=>{m.value=!0,await g.get("item/formAPI").then(t=>{m.value=!1,O.value=t.data.uoms,C.value=t.data.coas}).catch(()=>{m.value=!1})},n=t=>r.listOpenField.length===0||r.listOpenField.includes(t);return(t,e)=>(s(),i(x,{ref_key:"dialogRef",ref:b,onHide:V(U),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:d(()=>[u(B,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:d(()=>[u(A,null,{default:d(()=>[$]),_:1}),u(A,{class:"q-pa-sm"},{default:d(()=>[o("div",H,[o("div",Y,[n("MITM_ITMCD")?(s(),i(p,{key:0,label:"Item Code",dense:"",modelValue:a.value.MITM_ITMCD,"onUpdate:modelValue":e[0]||(e[0]=l=>a.value.MITM_ITMCD=l),filled:"",readonly:r.isAutoCD},null,8,["modelValue","readonly"])):M("",!0)]),o("div",Z,[n("MITM_ITMNM")?(s(),i(p,{key:0,label:"Item Name",dense:"",modelValue:a.value.MITM_ITMNM,"onUpdate:modelValue":e[1]||(e[1]=l=>a.value.MITM_ITMNM=l),filled:""},null,8,["modelValue"])):M("",!0)])]),o("div",j,[o("div",J,[n("MITM_STKUOM")?(s(),i(f,{key:0,dense:"",filled:"",label:"UOM",modelValue:a.value.MITM_STKUOM,"onUpdate:modelValue":e[2]||(e[2]=l=>a.value.MITM_STKUOM=l),options:O.value,behavior:"dialog","option-label":"MUOM_UOMNM","option-value":"MUOM_UOMCD","emit-value":"","map-options":"",loading:m.value},null,8,["modelValue","options","loading"])):M("",!0)]),o("div",X,[n("MITM_BRAND")?(s(),i(p,{key:0,label:"Item Brand",dense:"",modelValue:a.value.MITM_BRAND,"onUpdate:modelValue":e[3]||(e[3]=l=>a.value.MITM_BRAND=l),filled:""},null,8,["modelValue"])):M("",!0)])]),o("div",z,[o("div",G,[n("MITM_MODEL")?(s(),i(p,{key:0,label:"Item Model",dense:"",modelValue:a.value.MITM_MODEL,"onUpdate:modelValue":e[4]||(e[4]=l=>a.value.MITM_MODEL=l),filled:""},null,8,["modelValue"])):M("",!0)]),o("div",W,[n("MITM_SPEC")?(s(),i(p,{key:0,label:"Item Specification",dense:"",modelValue:a.value.MITM_SPEC,"onUpdate:modelValue":e[5]||(e[5]=l=>a.value.MITM_SPEC=l),filled:""},null,8,["modelValue"])):M("",!0)])]),o("div",ee,[o("div",le,[n("MITM_COACD")?(s(),i(f,{key:0,dense:"",filled:"",label:"COA",modelValue:a.value.MITM_COACD,"onUpdate:modelValue":e[6]||(e[6]=l=>a.value.MITM_COACD=l),options:C.value,"use-input":"",behavior:"dialog","option-label":"MCOA_COANM","option-value":"MCOA_COACD",onFilter:e[7]||(e[7]=(l,_,I)=>D(l,_,I)),"emit-value":"","map-options":"",loading:m.value},null,8,["modelValue","options","loading"])):M("",!0)]),o("div",ae,[n("MITM_ITMCAT")?(s(),i(f,{key:0,dense:"",filled:"",label:"Category",modelValue:a.value.MITM_ITMCAT,"onUpdate:modelValue":e[9]||(e[9]=l=>a.value.MITM_ITMCAT=l),options:S.value,"use-input":"",behavior:"dialog","option-label":"MITM_ITMCAT","option-value":"MITM_ITMCAT",onFilter:e[10]||(e[10]=(l,_,I)=>D(l,_,I)),"emit-value":"","map-options":"",loading:m.value},{append:d(()=>[u(c,{round:"",dense:"",flat:"",icon:v.value?"list":"add",onClick:e[8]||(e[8]=l=>v.value=!v.value)},{default:d(()=>[u(K,null,{default:d(()=>[F(P(v.value?"Choose existing category":"Insert new category"),1)]),_:1})]),_:1},8,["icon"])]),_:1},8,["modelValue","options","loading"])):M("",!0)])])]),_:1}),u(h,{align:"right"},{default:d(()=>[u(c,{label:"OK",color:"primary",onClick:e[11]||(e[11]=l=>Q())}),u(c,{flat:"",label:"Cancel",color:"red",onClick:V(N)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}};export{ue as _};
