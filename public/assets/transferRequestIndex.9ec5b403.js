import{t as u,o as V,C as i,R as p,F as t,aM as k,J as r,E as a,$ as A,at as D,S as O,T as Q,D as T,I as d,P as c,Q as b}from"./index.707453a4.js";import{e as q}from"./QSelect.eddf875a.js";import{a as B,b as L}from"./QTable.c6bd114a.js";import{Q as g,a as h}from"./QTd.2e34dfb2.js";import{Q as w}from"./QTooltip.6a99e8cc.js";import{api_web as P}from"./axios.23c59c6f.js";import{u as N}from"./format.79167a98.js";const I={class:"q-pa-md"},S=r("div",{class:"row q-pb-md"},[r("div",{class:"col"},[r("span",{class:"text-h4"},"Transfer Request")]),r("div",{class:"col text-right"})],-1),Y={class:"row q-pt-md"},$={class:"col"},H={__name:"transferRequestIndex",setup(x){const v=N(),_=u([]),C=u([{name:"TLOCREQ_DOCNO",label:"Doc Np",field:"TLOCREQ_DOCNO",sortable:!0,align:"left"},{name:"TLOCREQ_FRLOC",label:"From Location",field:"TLOCREQ_FRLOC",sortable:!0,align:"left"},{name:"TLOCREQ_TOLOC",label:"To Location",field:"TLOCREQ_TOLOC",sortable:!0,align:"left"},{name:"TLOCREQ_ISREP",label:"Is Replacement ?",field:"TLOCREQ_ISREP",sortable:!0,format:l=>`${l==1?"Yes":"No"}`,align:"left"}]),o=u(!1),m=u(""),f=u("");V(()=>{R()});const R=async()=>{o.value=!0,await P.post("inventory/transferRequest/searchAPI",{searchBy:m.value,searchValue:f.value}).then(l=>{o.value=!1,_.value=l.data.data}).catch(l=>{o.value=!1})},E=l=>{v.dialog({title:"Confirmation",message:"Are you sure want to approve this transfer ?",cancel:!0,persistent:!0}).onOk(async()=>{o.value=!0,await P.get(`inventory/transferRequest/approve/${btoa(l)}`).then(s=>{o.value=!1,R()}).catch(s=>{o.value=!1})})},y=l=>{v.dialog({title:"Confirmation",message:"Are you sure want to print this transfer ?",cancel:!0,persistent:!0}).onOk(async()=>{o.value=!0})};return(l,s)=>(i(),p("div",I,[S,t(k),r("div",Y,[r("div",$,[t(B,{title:"Transfer Request List",rows:_.value,columns:C.value,"row-key":"TDLVORD_DLVCD",loading:o.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":a(()=>[t(q,{outlined:"",modelValue:m.value,"onUpdate:modelValue":s[0]||(s[0]=e=>m.value=e),options:C.value,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),t(A,{borderless:"",dense:"",modelValue:f.value,"onUpdate:modelValue":[s[1]||(s[1]=e=>f.value=e),s[2]||(s[2]=e=>l.getOutgoingData())],placeholder:"Search",outlined:"",debounce:"1000"},{append:a(()=>[t(D,{name:"search"})]),_:1},8,["modelValue"])]),header:a(e=>[t(g,{props:e},{default:a(()=>[(i(!0),p(O,null,Q(e.cols,n=>(i(),T(L,{key:n.name,props:e},{default:a(()=>[d(c(n.label),1)]),_:2},1032,["props"]))),128)),t(L,{"auto-width":""},{default:a(()=>[d("Action")]),_:1})]),_:2},1032,["props"])]),body:a(e=>[t(g,{props:e},{default:a(()=>[(i(!0),p(O,null,Q(e.cols,n=>(i(),T(h,{key:n.name,props:e},{default:a(()=>[d(c(n.value),1)]),_:2},1032,["props"]))),128)),t(h,{"auto-width":""},{default:a(()=>[t(b,{flat:"",color:e.row.TLOCREQ_APPRVBY!==null?"grey":"indigo",icon:"check",onClick:n=>E(e.row.TLOCREQ_DOCNO),dense:"",disable:e.row.TLOCREQ_APPRVBY!==null},{default:a(()=>[t(w,null,{default:a(()=>[d(c(e.row.TLOCREQ_APPRVBY!==null?"Request has been approved":"Approve Data"),1)]),_:2},1024)]),_:2},1032,["color","onClick","disable"]),t(b,{flat:"",color:e.row.TLOCREQ_APPRVBY!==null?"cyan":"grey",icon:"print",onClick:n=>y(e.row.TLOCREQ_DOCNO),dense:"",disable:e.row.TLOCREQ_APPRVBY===null},{default:a(()=>[t(w,null,{default:a(()=>[d(c(e.row.TLOCREQ_APPRVBY===null?"Please Aprove first":"Print handover request"),1)]),_:2},1024)]),_:2},1032,["color","onClick","disable"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{H as default};
