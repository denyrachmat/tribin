import{h as i,c as R,K as V,L as O,t as f,o as $,a as B,C as r,R as m,J as t,F as e,E as s,P as c,aI as E,Q as w,$ as z,S as Q,T as k,U as F,D as M,V as j,I as d,av as b,O as K,M as U,W as H}from"./index.7158fb3d.js";import{a as p,b as g,Q as C}from"./QItemLabel.ce29b894.js";import{Q as T}from"./QList.5e3495e2.js";import{Q as J}from"./QBadge.7d092dfe.js";import{u as W}from"./use-quasar.2eaf7c50.js";import{api_web as G}from"./axios.6e12031c.js";const X=[i("circle",{cx:"15",cy:"15",r:"15"},[i("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),i("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]),i("circle",{cx:"60",cy:"15",r:"9","fill-opacity":".3"},[i("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),i("animate",{attributeName:"fill-opacity",from:".5",to:".5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})]),i("circle",{cx:"105",cy:"15",r:"15"},[i("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),i("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})])];var Y=R({name:"QSpinnerDots",props:V,setup(S){const{cSize:u,classes:h}=O(S);return()=>i("svg",{class:h.value,fill:"currentColor",width:u.value,height:u.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg"},X)}});const Z={class:"q-pa-md"},ee=t("div",{class:"row q-pb-md"},[t("div",{class:"col"},[t("span",{class:"text-h4"},"POS")]),t("div",{class:"col text-right"})],-1),te={class:"row bg-grey q-pa-md full-width",style:{height:"86vh"}},ae={class:"col-4 q-pa-xs"},se={class:"row bg-white"},oe={class:"col",style:{height:"50vh",overflow:"auto"}},le={class:"row q-pt-xs",style:{height:"30vh"}},ie={class:"col bg-white vertical-middle"},ne={class:"row"},re={class:"col q-pa-sm",style:{height:"20vh"}},ce={class:"text-h6 text-bold"},de={class:"row",style:{height:"10vh"}},ue={class:"col-sm-6 col-12 q-pa-sm"},me={class:"col-sm-6 col-12 q-pa-sm"},pe={class:"col q-pa-xs q-gutter-sm"},ve={class:"row bg-white",style:{height:"10vh",overflow:"auto"}},_e={class:"col"},he={class:"row bg-white",style:{height:"70vh",overflow:"auto"}},fe={class:"col"},ge={class:"row q-col-gutter-sm"},ye={class:"text-center"},we={class:"row items-center"},be={class:"col text-bold ellipsis"},Ce={key:0,class:"row justify-center q-my-md"},Se={key:1,class:"row justify-center q-my-md"},qe={__name:"posSalesIndex",setup(S){const u=W(),h=f([]),n=f([]),v=f(!1),y=f(0);$(()=>{I("")});const q=B(()=>n.value.length>0?n.value.reduce((l,a)=>l+(parseFloat(a.LATEST_PRC)+parseInt(a.sellQty)),0):0),I=async l=>{v.value=!0,y.value=y.value+1,await G.post("item/searchAPIStockAndPriceOnly",{searchValue:l,page:y.value}).then(a=>{v.value=!1,a.data.data.data.map(o=>{let _=n.value.findIndex(x=>x.MITM_ITMCD===o.MITM_ITMCD);console.log(_),_===-1&&h.value.push(o)})}).catch(()=>{v.value=!1})},L=l=>{u.dialog({dark:!0,title:"Prompt",message:"How many qty?",prompt:{model:0,type:"number",isValid:a=>a>0},cancel:!0,persistent:!0}).onOk(a=>{n.value.push({...l,sellQty:a})}).onCancel(()=>{}).onDismiss(()=>{})},A=async(l,a)=>{await I(""),a()},N=l=>{u.dialog({title:"Confirmation",message:"Are you sure want to delete this line ??",cancel:!0,persistent:!0}).onOk(async()=>{n.value.splice(l,1)})},P=()=>{u.dialog({title:"Confirmation",message:"Are you sure want to cancel sales ??",cancel:!0,persistent:!0}).onOk(async()=>{n.value=[]})},D=()=>{u.dialog({title:"Confirmation",message:"Are you sure want to process this sales ??",cancel:!0,persistent:!0}).onOk(async()=>{n.value=[]})};return(l,a)=>(r(),m("div",Z,[ee,t("div",te,[t("div",ae,[t("div",se,[t("div",oe,[e(T,{bordered:"",loading:v.value},{default:s(()=>[n.value.length>0?(r(!0),m(Q,{key:0},k(n.value,o=>F((r(),M(C,{key:o.id,class:"q-my-sm"},{default:s(()=>[e(p,{avatar:""},{default:s(()=>[e(j,{color:"primary","text-color":"white",icon:"category"})]),_:1}),e(p,null,{default:s(()=>[e(g,null,{default:s(()=>[d(c(o.MITM_ITMNM),1)]),_:2},1024),e(g,{lines:"1"},{default:s(()=>[d(" Rp "+c(o.LATEST_PRC.toLocaleString())+" x "+c(o.sellQty.toLocaleString())+" = ",1),t("b",null,c((o.LATEST_PRC*o.sellQty).toLocaleString()),1)]),_:2},1024)]),_:2},1024),e(p,{side:""},{default:s(()=>[e(b,{name:"delete",color:"red",onClick:a[0]||(a[0]=_=>N(l.idx))})]),_:1})]),_:2},1024)),[[H]])),128)):(r(),M(C,{key:1},{default:s(()=>[e(p,null,{default:s(()=>[d(" No item selected!! ")]),_:1})]),_:1}))]),_:1},8,["loading"])])]),t("div",le,[t("div",ie,[t("div",ne,[t("div",re,[t("div",ce,"Total : Rp. "+c(q.value.toLocaleString()),1)])]),e(E),t("div",de,[t("div",ue,[e(w,{color:"primary",class:"full-width",onClick:a[1]||(a[1]=o=>D())},{default:s(()=>[d(" Submit ")]),_:1})]),t("div",me,[e(w,{color:"red",class:"full-width",onClick:a[2]||(a[2]=o=>P())},{default:s(()=>[d(" Cancel ")]),_:1})])])])])]),t("div",pe,[t("div",ve,[t("div",_e,[e(z,{filled:"",modelValue:l.searchItem,"onUpdate:modelValue":[a[3]||(a[3]=o=>l.searchItem=o),a[4]||(a[4]=o=>l.onInputSearch())],label:"Search Item",dense:""},null,8,["modelValue"])])]),t("div",he,[t("div",fe,[t("div",ge,[(r(!0),m(Q,null,k(h.value,(o,_)=>(r(),m("div",{class:"col-6 q-pa-sm",key:`sm-${_}`},[e(U,{flat:"",bordered:""},{default:s(()=>[e(J,{color:"orange",floating:""},{default:s(()=>[d(c(parseInt(o.STOCK).toLocaleString()),1)]),_:2},1024),t("div",ye,[e(b,{name:"category",size:"8em"})]),e(K,null,{default:s(()=>[t("div",we,[t("div",be,c(o.MITM_ITMNM),1)])]),_:2},1024),e(T,null,{default:s(()=>[e(C,{clickable:"",onClick:x=>L(o)},{default:s(()=>[e(p,{avatar:""},{default:s(()=>[e(b,{color:"primary",name:"add"})]),_:1}),e(p,null,{default:s(()=>[e(g,null,{default:s(()=>[d("Add Item")]),_:1}),e(g,{caption:"",lines:"2"},{default:s(()=>[d(" Rp. "+c(parseInt(o.LATEST_PRC).toLocaleString()),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]))),128))]),v.value?(r(),m("div",Ce,[e(Y,{color:"primary",size:"40px"})])):(r(),m("div",Se,[e(w,{color:"primary",label:"Load more",onClick:A})]))])])])])]))}};export{qe as default};
