import{Q as R}from"./QTooltip.9acecf3c.js";import{t as c,C as p,D as T,E as l,F as e,M as H,O as k,J as s,$ as C,an as L,U as M,Q as b,R as y,S as U,T as I,V as F,I as r,P as S,W as Y,Z as E,o as j,aY as z}from"./index.5fd656d5.js";import{a as O,l as x,Q as G,b as P,c as v,d as g,k as J,m as q}from"./QTable.f16d9d5b.js";import{Q as $,a as N}from"./QTd.ec9c8e7d.js";import{api_web as A}from"./axios.1cf62296.js";import{Q as W,a as Z}from"./QInnerLoading.eeb58d20.js";import{Q as K,a as X,C as ee}from"./ClosePopup.08883718.js";import{Q as le}from"./QBtnToggle.7ea42c3c.js";import"./use-render-cache.3aae9b27.js";import"./date.9e4c3883.js";import"./QBtnGroup.bf510b19.js";const ae=s("div",{class:"text-h6"},"Create Incoming",-1),oe={style:{border:"1px black solid","border-radius":"10px"}},te=s("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[s("b",null,"Header")],-1),se={class:"row q-col-gutter-sm"},ne={class:"col-12 col-sm-6"},de={class:"col-12 col-sm-6"},ie={class:"row items-center justify-end"},ue={class:"row q-col-gutter-sm"},re={class:"col-12 col-sm-6"},ce={class:"row q-px-md"},me={class:"col"},pe={class:"col-1 text-right"},_e={style:{border:"1px black solid","border-radius":"10px",height:"35vh",overflow:"auto"}},fe=s("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[s("b",null,"List Of Items")],-1),ve={__name:"incomingCreate",props:{dataHeader:Array},setup(B){const w=O(),n=c({TRCV_RCVCD:"",TRCV_SUPCD:"",TRCV_ISSUDT:""}),h=c(1),m=c([]),d=c(!1),V=c([]),Q=(a,o,t,_)=>{o(async()=>{_==="cust"&&D(a),_==="item"&&await getItem(a)})},D=async(a,o="MSUP_SUPNM")=>{d.value=!0,await A.post("supplier/searchAPI",{searchValue:a,searchCol:o}).then(t=>{d.value=!1,V.value=t.data.data}).catch(()=>{d.value=!1})},u=a=>{w.dialog({title:"Confirmation",message:`Do you want to delete this lines no ${a+1} ?`,cancel:!0,persistent:!0}).onOk(async()=>{m.value.splice(a,1)})},i=()=>{m.value.push({item_code:"",MITM_ITMNM:"",quantity:"",unit_price:""})};return(a,o)=>(p(),T(E,{ref:"dialogRef",onHide:a.onDialogHide,"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:l(()=>[e(H,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:l(()=>[e(k,null,{default:l(()=>[ae]),_:1}),e(k,{class:"q-pa-sm"},{default:l(()=>[s("fieldset",oe,[te,e(W,{showing:d.value,dark:""},{default:l(()=>[e(Z,{size:"50px",color:"primary"})]),_:1},8,["showing"]),s("div",se,[s("div",ne,[e(C,{label:"Code",readonly:"",dense:"",filled:"",modelValue:n.value.TRCV_RCVCD,"onUpdate:modelValue":o[0]||(o[0]=t=>n.value.TRCV_RCVCD=t)},null,8,["modelValue"])]),s("div",de,[e(C,{filled:"",modelValue:n.value.TRCV_ISSUDT,"onUpdate:modelValue":o[2]||(o[2]=t=>n.value.TRCV_ISSUDT=t),dense:"",label:"Receive Date"},{append:l(()=>[e(L,{name:"event",class:"cursor-pointer"},{default:l(()=>[e(K,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(X,{modelValue:n.value.TRCV_ISSUDT,"onUpdate:modelValue":o[1]||(o[1]=t=>n.value.TRCV_ISSUDT=t),mask:"YYYY-MM-DD"},{default:l(()=>[s("div",ie,[M(e(b,{label:"Close",color:"primary",flat:""},null,512),[[ee]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),s("div",ue,[s("div",re,[e(x,{dense:"",filled:"",label:"Supplier Name",modelValue:n.value.TRCV_SUPCD,"onUpdate:modelValue":o[3]||(o[3]=t=>n.value.TRCV_SUPCD=t),"use-input":"","input-debounce":"500",options:V.value,onFilter:o[4]||(o[4]=(t,_,f)=>Q(t,_,f,"cust")),behavior:"dialog","option-label":"MSUP_SUPNM","option-value":"MSUP_SUPCD","emit-value":"","map-options":"",loading:d.value,disable:n.value.TRCV_RCVCD!==""},null,8,["modelValue","options","loading","disable"])])])]),s("div",ce,[s("div",me,[e(le,{modelValue:h.value,"onUpdate:modelValue":o[5]||(o[5]=t=>h.value=t),spread:"","no-caps":"","toggle-color":"purple",color:"white","text-color":"black",options:[{label:"From PO",value:1},{label:"Return",value:2}],disable:n.value.TRCV_RCVCD!==""},null,8,["modelValue","disable"])]),s("div",pe,[e(b,{flat:"",icon:"add",color:"blue",label:"Add Lines",onClick:i,loading:d.value},null,8,["loading"])])]),s("fieldset",_e,[fe,e(G,{bordered:"",dense:""},{default:l(()=>[m.value.length>0?(p(!0),y(U,{key:0},I(m.value,(t,_)=>(p(),T(P,{key:_,class:"q-my-sm",dense:"",loading:d.value},{default:l(()=>[e(v,{avatar:""},{default:l(()=>[e(F,{"text-color":"blue"},{default:l(()=>[r(S(_+1),1)]),_:2},1024)]),_:2},1024),e(v,null,{default:l(()=>[e(g,null,{default:l(()=>[e(C,{dense:"",label:"Item Code",filled:"",modelValue:t.item_code,"onUpdate:modelValue":f=>t.item_code=f,readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(v,null,{default:l(()=>[e(g,null,{default:l(()=>[e(C,{dense:"",label:"Item Name",filled:"",modelValue:t.MITM_ITMNM,"onUpdate:modelValue":f=>t.MITM_ITMNM=f,readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(v,null,{default:l(()=>[e(g,null,{default:l(()=>[e(C,{dense:"",label:"Qty",filled:"",modelValue:t.quantity,"onUpdate:modelValue":f=>t.quantity=f},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(v,null,{default:l(()=>[e(g,null,{default:l(()=>[r(" Rp. "+S(t.unit_price.toLocaleString()),1)]),_:2},1024),e(g,{caption:""},{default:l(()=>[r(" Price ")]),_:1})]),_:2},1024),e(v,{side:""},{default:l(()=>[e(b,{icon:"delete",color:"red",flat:"",onClick:f=>u(_)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["loading"]))),128)):M((p(),T(P,{key:1,class:"q-my-sm",clickable:""},{default:l(()=>[e(v,null,{default:l(()=>[e(g,null,{default:l(()=>[r(" Choose sales order first to access item list ")]),_:1})]),_:1})]),_:1})),[[Y]])]),_:1})])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},Ve={class:"q-pa-md"},ge={class:"row q-pb-md"},Ce=s("div",{class:"col"},[s("span",{class:"text-h4"},"Incoming")],-1),be={class:"col text-right"},Te={class:"row q-pt-md"},he={class:"col"},qe={__name:"incomingIndex",setup(B){const w=O(),n=c([]),h=c([{name:"TRCV_RCVCD",label:"Receive ID",field:"TRCV_RCVCD",sortable:!0,align:"left"},{name:"MSUP_SUPNM",label:"Supplier Name",field:"MSUP_SUPNM",sortable:!0,align:"left"},{name:"TOT_RCV",label:"Total Qty",field:"TOT_RCV",sortable:!0,align:"left"},{name:"TOT_AMT",label:"Total Amount",field:"TOT_AMT",sortable:!0,align:"left"}]),m=c(!1),d=c(""),V=c("");j(()=>{Q()});const Q=async()=>{m.value=!0,await A.post("receive/searchAPI",{searchBy:d.value,searchValue:V.value}).then(u=>{m.value=!1,n.value=u.data.data}).catch(u=>{m.value=!1})},D=(u=[])=>{w.dialog({component:ve,componentProps:{dataHeader:u}}).onOk(async i=>{getOutgoingData()})};return(u,i)=>(p(),y("div",Ve,[s("div",ge,[Ce,s("div",be,[e(b,{icon:"add",color:"blue",onClick:i[0]||(i[0]=a=>D())},{default:l(()=>[e(R,null,{default:l(()=>[r("Create New Delivery")]),_:1})]),_:1})])]),e(z),s("div",Te,[s("div",he,[e(J,{title:"Outgoing List",rows:n.value,columns:h.value,"row-key":"TDLVORD_DLVCD",loading:m.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":l(()=>[e(x,{outlined:"",modelValue:d.value,"onUpdate:modelValue":i[1]||(i[1]=a=>d.value=a),options:u.columns,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),e(C,{borderless:"",dense:"",modelValue:V.value,"onUpdate:modelValue":[i[2]||(i[2]=a=>V.value=a),i[3]||(i[3]=a=>u.getOutgoingData())],placeholder:"Search",outlined:"",debounce:"1000"},{append:l(()=>[e(L,{name:"search"})]),_:1},8,["modelValue"])]),header:l(a=>[e($,{props:a},{default:l(()=>[(p(!0),y(U,null,I(a.cols,o=>(p(),T(q,{key:o.name,props:a},{default:l(()=>[r(S(o.label),1)]),_:2},1032,["props"]))),128)),e(q,{"auto-width":""},{default:l(()=>[r("Action")]),_:1})]),_:2},1032,["props"])]),body:l(a=>[e($,{props:a},{default:l(()=>[(p(!0),y(U,null,I(a.cols,o=>(p(),T(N,{key:o.name,props:a},{default:l(()=>[r(S(o.value),1)]),_:2},1032,["props"]))),128)),e(N,{"auto-width":""},{default:l(()=>[e(b,{flat:"",color:"orange",icon:"edit",onClick:o=>D(a.row),dense:""},{default:l(()=>[e(R,null,{default:l(()=>[r("Edit Data")]),_:1})]),_:2},1032,["onClick"]),e(b,{flat:"",color:"red",icon:"delete",onClick:o=>u.onDelete(a.row.TDLVORD_DLVCD),dense:""},{default:l(()=>[e(R,null,{default:l(()=>[r("Edit Data")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{qe as default};
