import{s as p,B as S,C as I,D as a,E as e,J as w,K as f,I as o,Q as T,R as O,aU as U,aV as k,aW as H,aZ as x,H as u,aX as r,P as Q,ap as N,M as P,O as q,o as A,aa as j,S as J}from"./index.08f9ff5f.js";import{u as F,b as M,Q as $,j as Y,k as _,l as R,c as W,a as X}from"./use-dialog-plugin-component.235aac0f.js";import{d as L}from"./date.7f8a536c.js";import{api_web as B}from"./axios.083a13a6.js";import{Q as y}from"./QTooltip.98e87435.js";const Z={class:"row"},z=o("div",{class:"col"},[o("div",{class:"text-h6"},"Update Used Item")],-1),G={class:"col text-right"},ee={__name:"serviceOprItemAdd",props:{dataItem:Array},setup(b){const{dialogRef:V,onDialogHide:h,onDialogOK:v,onDialogCancel:g}=F();M();const D=b,i=p([]),l=()=>{i.value.push({TSRVD_ID:D.dataItem.id,TSRVF_ITMCD:"",TSRVF_PRC:0})},c=(t,n,d,C)=>{n(async()=>{C==="item"&&await s(t)})},s=async t=>{loading.value=!0,await B.post("item/searchAPI",{searchValue:t}).then(n=>{loading.value=!1,i.value=n.data.data}).catch(()=>{loading.value=!1})};return(t,n)=>(S(),I(q,{ref_key:"dialogRef",ref:V,onHide:P(h),"transition-show":"slide-up","transition-hide":"slide-down","full-width":""},{default:a(()=>[e(w,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:a(()=>[e(f,null,{default:a(()=>[o("div",Z,[z,o("div",G,[e(T,{icon:"add",outline:"",color:"blue",onClick:l})])])]),_:1}),e(f,{class:"q-pa-sm",style:{"max-height":"50vh"}},{default:a(()=>[e($,{bordered:""},{default:a(()=>[(S(!0),O(U,null,k(i.value,(d,C)=>H((S(),I(Y,{key:C,class:"q-my-sm",clickable:""},{default:a(()=>[e(_,{avatar:""},{default:a(()=>[e(x,{color:"primary","text-color":"white"},{default:a(()=>[u(r(C+1),1)]),_:2},1024)]),_:2},1024),e(_,null,{default:a(()=>[e(R,null,{default:a(()=>[e(W,{dense:"",filled:"",label:"Item Name",modelValue:d.TSRVF_ITMCD,"onUpdate:modelValue":m=>d.TSRVF_ITMCD=m,"use-input":"","input-debounce":"500",options:i.value,onFilter:n[0]||(n[0]=(m,K,E)=>c(m,K,E,"item")),behavior:"dialog","option-label":"MITM_ITMCD","option-value":"MITM_ITMNM","emit-value":"","map-options":"",loading:t.loading},null,8,["modelValue","onUpdate:modelValue","options","loading"])]),_:2},1024)]),_:2},1024),e(_,null,{default:a(()=>[e(Q,{label:"Price",modelValue:d.TSRVF_PRC,"onUpdate:modelValue":m=>d.TSRVF_PRC=m,filled:"",dense:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)),[[N]])),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}},ae={class:"text-h6"},le={__name:"serviceOprUpdateOrder",props:{header:Array,detail:Array},setup(b){const{dialogRef:V,onDialogHide:h,onDialogOK:v,onDialogCancel:g}=F(),D=M(),i=b,l=p({SRVH_DOCNO:"",SRVH_ISSDT:L.formatDate(Date.now(),"YYYY-MM-DD"),SRVH_CUSCD:""}),c=p([]);A(async()=>{i.header&&(l.value=i.header,c.value=i.detail)});const s=t=>{D.dialog({component:ee,componentProps:{dataItem:t}}).onOk(async n=>{console.log(n)})};return(t,n)=>(S(),I(q,{ref_key:"dialogRef",ref:V,onHide:P(h),"transition-show":"slide-up","transition-hide":"slide-down","full-width":""},{default:a(()=>[e(w,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:a(()=>[e(f,null,{default:a(()=>[o("div",ae,"Update Order "+r(l.value.SRVH_DOCNO),1)]),_:1}),e(f,{class:"q-pa-sm"},{default:a(()=>[e($,{bordered:""},{default:a(()=>[(S(!0),O(U,null,k(c.value,(d,C)=>H((S(),I(Y,{key:C,class:"q-my-sm",clickable:""},{default:a(()=>[e(_,{avatar:""},{default:a(()=>[e(x,{color:"primary","text-color":"white"},{default:a(()=>[u(r(d.TSRVD_LINE),1)]),_:2},1024)]),_:2},1024),e(_,null,{default:a(()=>[e(R,null,{default:a(()=>[u(r(d.TSRVD_ITMCD),1)]),_:2},1024),e(R,{caption:"",lines:"1"},{default:a(()=>[u("Item")]),_:1})]),_:2},1024),e(_,null,{default:a(()=>[e(R,null,{default:a(()=>[u(r(d.TSRVD_CUSTRMK),1)]),_:2},1024),e(R,{caption:"",lines:"1"},{default:a(()=>[u("Customer Remarks")]),_:1})]),_:2},1024),e(_,{side:""},{default:a(()=>[e(T,{icon:"construction",color:"green",flat:"",onClick:m=>s(d)},{default:a(()=>[e(y,null,{default:a(()=>[u("Update Fix Data")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024),e(_,{side:""},{default:a(()=>[e(T,{icon:"visibility",color:"cyan",flat:"",onClick:n[0]||(n[0]=m=>t.viewAddedItem()),disable:!d.listFixDet},{default:a(()=>[e(y,null,{default:a(()=>[u("View Added Item")]),_:1})]),_:2},1032,["disable"])]),_:2},1024)]),_:2},1024)),[[N]])),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}},te={class:"q-pa-md"},oe={class:"row"},se={class:"col"},ne={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},de={class:"text-h5 text-bold"},ie={class:"text-h6 text-bold"},re={class:"text-subtitle2"},ce={class:"text-h6 text-bold"},ue=o("div",{class:"text-subtitle2"},"Resolved Items",-1),_e={class:"row"},fe={class:"col"},me=o("div",{class:"col text-right"},null,-1),De={__name:"serviceOprView",setup(b){const V=M();p([{name:"SRVH_DOCNO",label:"SPK No",field:"SRVH_DOCNO",sortable:!0,align:"left"},{name:"MCUS_CUSNM",label:"Customer Name",field:"MCUS_CUSNM",sortable:!0,align:"left"},{name:"resolve",label:"Resolved Line",sortable:!0,align:"left",field:l=>l.resolve.length},{name:"unresolve",label:"Unresolved Line",sortable:!0,align:"left",field:l=>l.unresolve.length},{name:"SRVH_ISSDT",label:"Submited Date",field:"SRVH_ISSDT",sortable:!0,align:"left"}]);const h=p([]),v=p(""),g=p(!1);A(()=>{D()});const D=async()=>{g.value=!0,await B.post("servicesOPR/search",{searchBy:"",searchValue:v.value}).then(l=>{g.value=!1,h.value=l.data.data}).catch(l=>{g.value=!1})},i=l=>{const c={SRVH_DOCNO:l.SRVH_DOCNO,SRVH_ISSDT:L.formatDate(l.SRVH_ISSDT,"YYYY-MM-DD"),SRVH_CUSCD:l.MCUS_CUSCD};let s=[];l.detail.map(t=>{s.push({TSRVD_ITMCD:t.TSRVD_ITMCD,TSRVD_LINE:t.TSRVD_LINE,TSRVD_QTY:t.TSRVD_QTY,TSRVD_CUSTRMK:t.TSRVD_CUSTRMK})}),V.dialog({component:le,componentProps:{header:c,detail:s}}).onOk(async t=>{D()})};return(l,c)=>(S(),O("div",te,[o("div",oe,[o("div",se,[e(X,{grid:"",flat:"",bordered:"","card-container-class":l.cardContainerClass,title:"Outstanding Order",rows:h.value,columns:l.columns,"row-key":"name",filter:v.value,"hide-header":"",pagination:{rowsPerPage:50},"rows-per-page-options":l.rowsPerPageOptions,loading:g.value},{"top-right":a(()=>[e(Q,{borderless:"",dense:"",debounce:"300",modelValue:v.value,"onUpdate:modelValue":c[0]||(c[0]=s=>v.value=s),placeholder:"Search"},{append:a(()=>[e(j,{name:"search"})]),_:1},8,["modelValue"])]),item:a(s=>[o("div",ne,[e(w,{flat:"",bordered:""},{default:a(()=>[e(f,{class:"text-center bg-secondary text-white"},{default:a(()=>[o("div",de,r(s.row.SRVH_DOCNO),1)]),_:2},1024),e(J),e(f,null,{default:a(()=>[o("div",ie,r(s.row.MCUS_CUSNM),1),o("div",re,r(s.row.SRVH_ISSDT),1)]),_:2},1024),e(f,null,{default:a(()=>[o("div",ce,r(s.row.resolve.length)+" of "+r(s.row.unresolve.length),1),ue]),_:2},1024),e(f,null,{default:a(()=>[o("div",_e,[o("div",fe,[e(T,{label:"Resolve",color:"primary",outline:"",onClick:t=>i(s.row)},null,8,["onClick"])]),me])]),_:2},1024)]),_:2},1024)])]),_:1},8,["card-container-class","rows","columns","filter","rows-per-page-options","loading"])])])]))}};export{De as default};
