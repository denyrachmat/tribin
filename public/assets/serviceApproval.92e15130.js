import{s as d,o as V,B as S,C as R,D as e,E as a,L as Q,M as u,P as x,R as P,S as k,bc as T,U as M,H as n,O as o,X as N,Y as O,I as l,Z as y,am as U,aX as L,Q as q}from"./index.63b30fb0.js";import{a as H,u as A,Q as B,b as F,c as v,d as i,k as $}from"./QTable.1ea29b15.js";import{api_web as I}from"./axios.458f769f.js";const E=l("div",{class:"text-h6"},"View List Price",-1),K={__name:"serviceApprovalDetView",props:{idHeader:String},setup(C){H();const{dialogRef:h,onDialogHide:m,onDialogOK:p,onDialogCancel:_}=A(),g=C,w=d([]),t=d(!1);V(()=>{f()});const f=async()=>{t.value=!0,await I.get(`servicesAdmins/viewUnapproveMgrDet/${btoa(g.idHeader)}`).then(c=>{t.value=!1,rows.value=c.data}).catch(c=>{t.value=!1})},s=c=>{let b=0;return c.map(r=>{b+=r.TSRVF_QTY*r.TSRVF_PRC}),b};return(c,b)=>(S(),R(O,{ref_key:"dialogRef",ref:h,onHide:N(m),"transition-show":"slide-up","transition-hide":"slide-down","full-width":""},{default:e(()=>[a(Q,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:e(()=>[a(u,null,{default:e(()=>[E]),_:1}),a(u,{class:"q-pa-sm"},{default:e(()=>[a(B,{bordered:"",loading:t.value},{default:e(()=>[(S(!0),x(P,null,k(w.value,(r,D)=>(S(),R(F,{key:D,class:T("q-my-sm")},{default:e(()=>[a(v,{avatar:""},{default:e(()=>[a(M,{color:r.TSRVD_FLGSTS===0?"red":"primary","text-color":"white"},{default:e(()=>[n(o(D+1),1)]),_:2},1032,["color"])]),_:2},1024),a(v,null,{default:e(()=>[a(i,null,{default:e(()=>[n(o(r.TSRVD_ITMCD),1)]),_:2},1024),a(i,{caption:""},{default:e(()=>[n(" Item ")]),_:1})]),_:2},1024),a(v,null,{default:e(()=>[a(i,null,{default:e(()=>[n(o(r.TSRVD_QTY),1)]),_:2},1024),a(i,{caption:""},{default:e(()=>[n(" Qty ")]),_:1})]),_:2},1024),a(v,null,{default:e(()=>[a(i,null,{default:e(()=>[n(o(r.TSRVD_REMARK),1)]),_:2},1024),a(i,{caption:""},{default:e(()=>[n(" Remarks ")]),_:1})]),_:2},1024),a(v,null,{default:e(()=>[a(i,null,{default:e(()=>[n("Rp. "+o(s(r.list_fix_det).toLocaleString()),1)]),_:2},1024),a(i,{caption:""},{default:e(()=>[n(" Total Fix Price ")]),_:1})]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},Y={class:"q-pa-md"},X={class:"row"},z={class:"col"},G={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},Z={class:"text-h5 text-bold"},j={class:"text-h6 text-bold"},J={class:"text-subtitle2"},W={class:"text-h6 text-bold"},ee=l("div",{class:"text-subtitle2"},"Resolved Items",-1),ae={class:"row"},te={class:"col"},ne={__name:"serviceApproval",setup(C){const h=H();d([{name:"SRVH_DOCNO",label:"SPK No",field:"SRVH_DOCNO",sortable:!0,align:"left"},{name:"MCUS_CUSNM",label:"Customer Name",field:"MCUS_CUSNM",sortable:!0,align:"left"},{name:"resolve",label:"Resolved Line",sortable:!0,align:"left",field:t=>t.resolve.length},{name:"unresolve",label:"Unresolved Line",sortable:!0,align:"left",field:t=>t.unresolve.length},{name:"SRVH_ISSDT",label:"Submited Date",field:"SRVH_ISSDT",sortable:!0,align:"left"}]);const m=d([]),p=d(""),_=d(!1);d(null),V(()=>{g()});const g=async()=>{_.value=!0,await I.get("servicesAdmins/listUnapproveMgr").then(t=>{_.value=!1,m.value=t.data}).catch(t=>{_.value=!1})},w=t=>{h.dialog({component:K,componentProps:{idHeader:t}}).onOk(async f=>{g()})};return(t,f)=>(S(),x("div",Y,[l("div",X,[l("div",z,[a($,{grid:"",flat:"",bordered:"","card-container-class":t.cardContainerClass,title:"Approve Service Pricing",rows:m.value,columns:t.columns,"row-key":"name",filter:p.value,"hide-header":"",pagination:{rowsPerPage:50},"rows-per-page-options":t.rowsPerPageOptions,loading:_.value},{"top-right":e(()=>[a(y,{borderless:"",dense:"",debounce:"300",modelValue:p.value,"onUpdate:modelValue":f[0]||(f[0]=s=>p.value=s),placeholder:"Search"},{append:e(()=>[a(U,{name:"search"})]),_:1},8,["modelValue"])]),item:e(s=>[l("div",G,[a(Q,{flat:"",bordered:""},{default:e(()=>[a(u,{class:T("text-center bg-green text-white")},{default:e(()=>[l("div",Z,o(s.row.SRVH_DOCNO),1)]),_:2},1024),a(L),a(u,null,{default:e(()=>[l("div",j,o(s.row.MCUS_CUSNM),1),l("div",J,o(s.row.SRVH_ISSDT),1)]),_:2},1024),a(u,null,{default:e(()=>[l("div",W,o(s.row.resolve.length)+" of "+o(s.row.detail.length),1),ee]),_:2},1024),a(u,null,{default:e(()=>[l("div",ae,[l("div",te,[a(q,{color:"primary",label:"View Data",onClick:c=>w(s.row.SRVH_DOCNO)},null,8,["onClick"])])])]),_:2},1024)]),_:2},1024)])]),_:1},8,["card-container-class","rows","columns","filter","rows-per-page-options","loading"])])])]))}};export{ne as default};
