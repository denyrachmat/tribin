import{Q as D}from"./QTooltip.f87f01d8.js";import{s as m,B as p,C as g,D as a,E as e,J as T,K as w,I as t,P as S,aa as U,aW as $,Q as _,L as I,M as h,O as Y,o as B,R as b,S as M,H as c,aU as k,aV as Q,aX as O}from"./index.a154b17e.js";import{u as K,b as q,a as E,c as j,m as y}from"./use-dialog-plugin-component.c864c275.js";import{Q as H,a as R}from"./date.b97e7e4d.js";import{api_web as x}from"./axios.67c4f0c3.js";import{Q as A,a as F,C as L}from"./ClosePopup.f822dc7e.js";const J=t("div",{class:"text-h6"},"Create Order",-1),W={class:"row"},X={class:"col"},z={class:"col q-pl-md"},G={class:"row items-center justify-end"},Z={class:"row q-pt-md"},ee={class:"col"},ae={__name:"serviceCreateOrder",setup(N){const{dialogRef:V,onDialogHide:f,onDialogOK:v,onDialogCancel:C}=K();q();const i=m({SRVH_DOCNO:"",SRVH_ISSDT:"",SRVH_CUSCD:""});return(s,l)=>(p(),g(Y,{ref_key:"dialogRef",ref:V,onHide:h(f),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:a(()=>[e(T,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:a(()=>[e(w,null,{default:a(()=>[J]),_:1}),e(w,{class:"q-pa-sm"},{default:a(()=>[t("div",W,[t("div",X,[e(S,{label:"SPK No",readonly:"",dense:"",modelValue:i.value.SRVH_DOCNO,"onUpdate:modelValue":l[0]||(l[0]=n=>i.value.SRVH_DOCNO=n),filled:""},null,8,["modelValue"])]),t("div",z,[e(S,{filled:"",modelValue:i.value.SRVH_ISSDT,"onUpdate:modelValue":l[2]||(l[2]=n=>i.value.SRVH_ISSDT=n),dense:"",label:"Issue Date",loading:s.loading,onClick:l[3]||(l[3]=n=>s.quotationIssueDate.qDateProxy.show()),mask:"####-##-##","fill-mask":"",hint:"Mask: YYYY-MM-DD"},{append:a(()=>[e(U,{name:"event",class:"cursor-pointer"},{default:a(()=>[e(A,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(F,{modelValue:s.SRVH_ISSDT,"onUpdate:modelValue":l[1]||(l[1]=n=>s.SRVH_ISSDT=n),mask:"YYYY-MM-DD"},{default:a(()=>[t("div",G,[$(e(_,{label:"Close",color:"primary",flat:""},null,512),[[L]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","loading"])])]),t("div",Z,[t("div",ee,[e(S,{label:"Customer Choose",readonly:"",dense:"",modelValue:i.value.SRVH_CUSCD,"onUpdate:modelValue":l[4]||(l[4]=n=>i.value.SRVH_CUSCD=n),filled:""},null,8,["modelValue"])])])]),_:1}),e(I,{align:"right"},{default:a(()=>[e(_,{label:"OK",color:"primary",onClick:l[5]||(l[5]=n=>s.onSubmitData()),disable:s.stateSubmit},null,8,["disable"]),e(_,{flat:"",label:"Cancel",color:"red",onClick:h(C)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}};const le={class:"q-pa-md"},oe={class:"row q-pb-md"},te=t("div",{class:"col"},[t("span",{class:"text-h4"},"Receive Order ")],-1),se={class:"col text-right"},ne={class:"row q-pt-md"},ie={class:"col"},_e={__name:"serviceView",setup(N){const V=q(),f=m("SRVH_DOCNO"),v=m(""),C=m([]),i=m([{name:"SRVH_DOCNO",label:"SPK No",field:"SRVH_DOCNO",sortable:!0,align:"left"},{name:"SRVH_CUSCD",label:"Cust",field:"SRVH_CUSCD",sortable:!0,align:"left"},{name:"created_at",label:"Created Date",field:"created_at",sortable:!0,align:"left"}]),s=m(!1);B(()=>{l()});const l=async()=>{s.value=!0,await x.post("service/search",{searchBy:f.value,searchValue:v.value}).then(d=>{s.value=!1,C.value=d.data.data}).catch(d=>{s.value=!1})},n=()=>{V.dialog({component:ae}).onOk(async d=>{l()})},P=d=>{window.open("https://joss.jatpowerindo.co.id/PDF/quotation/"+btoa(d),"_blank").focus()};return(d,u)=>(p(),b("div",le,[t("div",oe,[te,t("div",se,[e(_,{icon:"add",color:"blue",onClick:n},{default:a(()=>[e(D,null,{default:a(()=>[c("Create New Order")]),_:1})]),_:1})])]),e(M),t("div",ne,[t("div",ie,[e(E,{title:"Created Order",rows:C.value,columns:i.value,"row-key":"name",loading:s.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":a(()=>[e(j,{outlined:"",modelValue:f.value,"onUpdate:modelValue":u[0]||(u[0]=o=>f.value=o),options:i.value,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),e(S,{borderless:"",dense:"",modelValue:v.value,"onUpdate:modelValue":[u[1]||(u[1]=o=>v.value=o),u[2]||(u[2]=o=>d.dataQuo())],placeholder:"Search",outlined:"",debounce:"1000"},{append:a(()=>[e(U,{name:"search"})]),_:1},8,["modelValue"])]),header:a(o=>[e(H,{props:o},{default:a(()=>[(p(!0),b(k,null,Q(o.cols,r=>(p(),g(y,{key:r.name,props:o},{default:a(()=>[c(O(r.label),1)]),_:2},1032,["props"]))),128)),e(y,{"auto-width":""},{default:a(()=>[c("Action")]),_:1})]),_:2},1032,["props"])]),body:a(o=>[e(H,{props:o},{default:a(()=>[(p(!0),b(k,null,Q(o.cols,r=>(p(),g(R,{key:r.name,props:o},{default:a(()=>[c(O(r.value),1)]),_:2},1032,["props"]))),128)),e(R,{"auto-width":""},{default:a(()=>[e(_,{flat:"",color:"orange",icon:"edit",onClick:r=>d.onClickEdit(o.row.TQUO_QUOCD),dense:""},{default:a(()=>[e(D,null,{default:a(()=>[c("Edit this quotation")]),_:1})]),_:2},1032,["onClick"]),e(_,{flat:"",color:"indigo",icon:"print",onClick:r=>P(o.row.TQUO_QUOCD),dense:""},{default:a(()=>[e(D,null,{default:a(()=>[c("Print this order")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{_e as default};
