import{h as i,c as P,K as D,L as V,t as f,o as R,a as B,C as n,R as u,J as t,F as e,E as a,P as r,aI as E,Q as w,$ as O,S as Q,T as M,U as $,D as T,V as z,I as c,av as b,O as j,M as F,W as K}from"./index.6c56462a.js";import{a as m,b as g,Q as S}from"./QItemLabel.8acd7586.js";import{Q as k}from"./QList.c728639e.js";import{Q as U}from"./QBadge.7f38fb0b.js";import{u as H}from"./use-quasar.fdac568a.js";import{api_web as J}from"./axios.0dfb91b3.js";const W=[i("circle",{cx:"15",cy:"15",r:"15"},[i("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),i("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]),i("circle",{cx:"60",cy:"15",r:"9","fill-opacity":".3"},[i("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),i("animate",{attributeName:"fill-opacity",from:".5",to:".5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})]),i("circle",{cx:"105",cy:"15",r:"15"},[i("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),i("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})])];var G=P({name:"QSpinnerDots",props:D,setup(C){const{cSize:_,classes:h}=V(C);return()=>i("svg",{class:h.value,fill:"currentColor",width:_.value,height:_.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg"},W)}});const X={class:"q-pa-md"},Y=t("div",{class:"row q-pb-md"},[t("div",{class:"col"},[t("span",{class:"text-h4"},"POS")]),t("div",{class:"col text-right"})],-1),Z={class:"row bg-grey q-pa-md full-width",style:{height:"86vh"}},ee={class:"col-4 q-pa-xs"},te={class:"row bg-white"},ae={class:"col",style:{height:"50vh",overflow:"auto"}},se={class:"row q-pt-xs",style:{height:"30vh"}},oe={class:"col bg-white vertical-middle"},le={class:"row"},ie={class:"col q-pa-sm",style:{height:"20vh"}},ne={class:"text-h6 text-bold"},re={class:"row",style:{height:"10vh"}},ce={class:"col-sm-6 col-12 q-pa-sm"},de={class:"col-sm-6 col-12 q-pa-sm"},ue={class:"col q-pa-xs q-gutter-sm"},me={class:"row bg-white",style:{height:"10vh",overflow:"auto"}},_e={class:"col"},ve={class:"row bg-white",style:{height:"70vh",overflow:"auto"}},pe={class:"col"},he={class:"row q-col-gutter-sm"},fe={class:"text-center"},ge={class:"row items-center"},ye={class:"col text-bold ellipsis"},we={key:0,class:"row justify-center q-my-md"},be={key:1,class:"row justify-center q-my-md"},Te={__name:"posSalesIndex",setup(C){const _=H(),h=f([]),d=f([]),v=f(!1),y=f(0);R(()=>{I("")});const q=B(()=>d.value.length>0?d.value.reduce((l,s)=>l+(s.LATEST_PRC+s.sellQty),0):0),I=async l=>{v.value=!0,y.value=y.value+1,await J.post("item/searchAPIStockAndPriceOnly",{searchValue:l,page:y.value}).then(s=>{v.value=!1,s.data.data.data.map(o=>{let p=d.value.findIndex(x=>x.MITM_ITMCD===o.MITM_ITMCD);console.log(p),p===-1&&h.value.push(o)})}).catch(()=>{v.value=!1})},L=l=>{_.dialog({dark:!0,title:"Prompt",message:"How many qty?",prompt:{model:0,type:"number",isValid:s=>s>0},cancel:!0,persistent:!0}).onOk(s=>{d.value.push({...l,sellQty:s})}).onCancel(()=>{}).onDismiss(()=>{})},N=async(l,s)=>{await I(""),s()},A=l=>{_.dialog({title:"Confirmation",message:"Are you sure want to delete this line ??",cancel:!0,persistent:!0}).onOk(async()=>{d.value.splice(l,1)})};return(l,s)=>(n(),u("div",X,[Y,t("div",Z,[t("div",ee,[t("div",te,[t("div",ae,[e(k,{bordered:"",loading:v.value},{default:a(()=>[d.value.length>0?(n(!0),u(Q,{key:0},M(d.value,o=>$((n(),T(S,{key:o.id,class:"q-my-sm"},{default:a(()=>[e(m,{avatar:""},{default:a(()=>[e(z,{color:"primary","text-color":"white",icon:"category"})]),_:1}),e(m,null,{default:a(()=>[e(g,null,{default:a(()=>[c(r(o.MITM_ITMNM),1)]),_:2},1024),e(g,{lines:"1"},{default:a(()=>[c(r(o.LATEST_PRC.toLocaleString())+" x "+r(o.sellQty.toLocaleString())+" = "+r((o.LATEST_PRC*o.sellQty).toLocaleString()),1)]),_:2},1024)]),_:2},1024),e(m,{side:""},{default:a(()=>[e(b,{name:"delete",color:"red",onClick:s[0]||(s[0]=p=>A(l.idx))})]),_:1})]),_:2},1024)),[[K]])),128)):(n(),T(S,{key:1},{default:a(()=>[e(m,null,{default:a(()=>[c(" No item selected!! ")]),_:1})]),_:1}))]),_:1},8,["loading"])])]),t("div",se,[t("div",oe,[t("div",le,[t("div",ie,[t("div",ne,"Total : Rp. "+r(q.value.toLocaleString()),1)])]),e(E),t("div",re,[t("div",ce,[e(w,{color:"primary",class:"full-width"},{default:a(()=>[c(" Submit ")]),_:1})]),t("div",de,[e(w,{color:"red",class:"full-width"},{default:a(()=>[c(" Cancel ")]),_:1})])])])])]),t("div",ue,[t("div",me,[t("div",_e,[e(O,{filled:"",modelValue:l.searchItem,"onUpdate:modelValue":[s[1]||(s[1]=o=>l.searchItem=o),s[2]||(s[2]=o=>l.onInputSearch())],label:"Search Item",dense:""},null,8,["modelValue"])])]),t("div",ve,[t("div",pe,[t("div",he,[(n(!0),u(Q,null,M(h.value,(o,p)=>(n(),u("div",{class:"col-6 q-pa-sm",key:`sm-${p}`},[e(F,{flat:"",bordered:""},{default:a(()=>[e(U,{color:"orange",floating:""},{default:a(()=>[c(r(parseInt(o.STOCK).toLocaleString()),1)]),_:2},1024),t("div",fe,[e(b,{name:"category",size:"8em"})]),e(j,null,{default:a(()=>[t("div",ge,[t("div",ye,r(o.MITM_ITMNM),1)])]),_:2},1024),e(k,null,{default:a(()=>[e(S,{clickable:"",onClick:x=>L(o)},{default:a(()=>[e(m,{avatar:""},{default:a(()=>[e(b,{color:"primary",name:"add"})]),_:1}),e(m,null,{default:a(()=>[e(g,null,{default:a(()=>[c("Add Item")]),_:1}),e(g,{caption:"",lines:"2"},{default:a(()=>[c(" Rp. "+r(parseInt(o.LATEST_PRC).toLocaleString()),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]))),128))]),v.value?(n(),u("div",we,[e(G,{color:"primary",size:"40px"})])):(n(),u("div",be,[e(w,{color:"primary",label:"Load more",onClick:N})]))])])])])]))}};export{Te as default};
