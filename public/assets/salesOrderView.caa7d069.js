import{Q as U}from"./QTooltip.9a98a21a.js";import{s as r,B as f,C as Q,D as l,E as e,L as G,M as I,I as t,Z as g,am as P,T as y,Q as S,O as u,P as V,R as k,S as A,U as X,H as i,V as K,X as Z,Y as z,o as J,aX as W}from"./index.936871bf.js";import{a as x,u as ee,l as B,Q as le,b as E,c as T,d as O,k as ae,m as R}from"./QTable.61126661.js";import{Q as M,a as q}from"./QTd.b4edf0de.js";import{api_web as F,api as te}from"./axios.27a982ce.js";import{Q as N,a as Y,C as $}from"./ClosePopup.24d2a723.js";import"./use-cache.b0833c75.js";import"./date.4fca65b6.js";const oe=t("div",{class:"text-h6"},"RO Maintenance",-1),se={style:{border:"1px black solid","border-radius":"10px"}},ne=t("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[t("b",null,"Header")],-1),de={class:"row"},ie={class:"col"},ue={class:"col q-pl-md"},re={class:"row items-center justify-end"},_e={class:"col q-pl-md"},ce={class:"row items-center justify-end"},me={class:"row"},fe={class:"col"},ve={class:"col q-pl-md"},Te={style:{border:"1px black solid","border-radius":"10px",height:"35vh",overflow:"auto"}},De=t("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[t("b",null,"Detail Items")],-1),Oe={class:"row q-pb-md"},Se={class:"col"},pe={class:"text-h6"},Ce={class:"col text-right"},Le={class:"row"},be={class:"col"},ge={__name:"salesOrderCreate",setup(H){x();const n=r({TSLO_SLOCD:"",TSLO_ISSUDT:"",TSLO_PLAN_DLVDT:"",TSLO_QUOCD:"",TSLO_POCD:""});r(""),r("");const D=r([]),d=r(!1),L=r(1),b=r([]),p=(m,a,o,C)=>{a(async()=>{C==="quotation"&&await h(m)})},h=async(m="")=>{d.value=!0,await F.post("quotation/search",{searchBy:"MCUS_CUSNM",searchValue:m}).then(a=>{d.value=!1,D.value=a.data.data}).catch(a=>{d.value=!1})},w=()=>L.value===1?"Rental":L.value===2?"Sales":"Service",_=async m=>{console.log(m),d.value=!0,await te.get(`transaction/quotation/view/${btoa(m)}`).then(a=>{d.value=!1,D.value=a.data.data}).catch(a=>{d.value=!1})},v=()=>{b.value.push({TSLODETA_ITMCD:"",TSLODETA_ITMQT:"",TSLODETA_USAGE:"",TSLODETA_PRC:0,TSLODETA_PERIOD_FR:"",TSLODETA_PERIOD_TO:""})},{dialogRef:s,onDialogHide:c,onDialogOK:Pe,onDialogCancel:ke}=ee();return(m,a)=>(f(),Q(z,{ref_key:"dialogRef",ref:s,onHide:Z(c),"transition-show":"slide-up","transition-hide":"slide-down","full-width":""},{default:l(()=>[e(G,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:l(()=>[e(I,null,{default:l(()=>[oe]),_:1}),e(I,{class:"q-pa-sm"},{default:l(()=>[t("fieldset",se,[ne,t("div",de,[t("div",ie,[e(g,{label:"RO Code",dense:"",filled:"",modelValue:n.value.TSLO_SLOCD,"onUpdate:modelValue":a[0]||(a[0]=o=>n.value.TSLO_SLOCD=o),disable:"",loading:d.value},null,8,["modelValue","loading"])]),t("div",ue,[e(g,{filled:"",modelValue:n.value.TSLO_ISSUDT,"onUpdate:modelValue":a[2]||(a[2]=o=>n.value.TSLO_ISSUDT=o),dense:"",label:"Issue Date",loading:d.value,onClick:a[3]||(a[3]=o=>m.quotationIssueDate.qDateProxy.show()),mask:"####-##-##","fill-mask":"",hint:"Mask: YYYY-MM-DD"},{append:l(()=>[e(P,{name:"event",class:"cursor-pointer"},{default:l(()=>[e(N,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Y,{modelValue:n.value.TSLO_ISSUDT,"onUpdate:modelValue":a[1]||(a[1]=o=>n.value.TSLO_ISSUDT=o),mask:"YYYY-MM-DD"},{default:l(()=>[t("div",re,[y(e(S,{label:"Close",color:"primary",flat:""},null,512),[[$]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","loading"])]),t("div",_e,[e(g,{filled:"",modelValue:n.value.TSLO_PLAN_DLVDT,"onUpdate:modelValue":a[5]||(a[5]=o=>n.value.TSLO_PLAN_DLVDT=o),dense:"",label:"Delivery Date",loading:d.value,onClick:a[6]||(a[6]=o=>m.quotationIssueDate.qDateProxy.show()),mask:"####-##-##","fill-mask":"",hint:"Mask: YYYY-MM-DD"},{append:l(()=>[e(P,{name:"event",class:"cursor-pointer"},{default:l(()=>[e(N,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(Y,{modelValue:n.value.TSLO_PLAN_DLVDT,"onUpdate:modelValue":a[4]||(a[4]=o=>n.value.TSLO_PLAN_DLVDT=o),mask:"YYYY-MM-DD"},{default:l(()=>[t("div",ce,[y(e(S,{label:"Close",color:"primary",flat:""},null,512),[[$]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","loading"])])]),t("div",me,[t("div",fe,[e(B,{dense:"",filled:"",label:"Sales Quotation Code",modelValue:n.value.TSLO_QUOCD,"onUpdate:modelValue":[a[7]||(a[7]=o=>n.value.TSLO_QUOCD=o),_],"use-input":"","input-debounce":"500",options:D.value,onFilter:a[8]||(a[8]=(o,C,j)=>p(o,C,j,"quotation")),behavior:"dialog","option-label":"DESCSEL","option-value":"TQUO_QUOCD","emit-value":"","map-options":"",loading:d.value},null,8,["modelValue","options","loading"])]),t("div",ve,[e(g,{label:"PO Number",dense:"",filled:"",modelValue:n.value.TSLO_POCD,"onUpdate:modelValue":a[9]||(a[9]=o=>n.value.TSLO_POCD=o),loading:d.value},null,8,["modelValue","loading"])])])]),t("fieldset",Te,[De,t("div",Oe,[t("div",Se,[t("span",pe,u(w()),1)]),t("div",Ce,[e(S,{flat:"",icon:"add",color:"blue",label:"Add Lines",onClick:v,loading:d.value},null,8,["loading"])])]),t("div",Le,[t("div",be,[e(le,{bordered:"",dense:""},{default:l(()=>[m.listSavedItems.length>0?(f(!0),V(k,{key:0},A(b.value,(o,C)=>(f(),Q(E,{key:C,class:"q-my-sm",dense:""},{default:l(()=>[e(T,{avatar:""},{default:l(()=>[e(X,{"text-color":"blue"},{default:l(()=>[i(u(C+1),1)]),_:2},1024)]),_:2},1024),e(T,null,{default:l(()=>[e(O,null,{default:l(()=>[i(u(o.TSLODETA_ITMCD),1)]),_:2},1024)]),_:2},1024),e(T,null,{default:l(()=>[e(O,null,{default:l(()=>[i(u(o.TSLODETA_ITMQT),1)]),_:2},1024)]),_:2},1024),e(T,null,{default:l(()=>[e(O,null,{default:l(()=>[i(u(o.TSLODETA_USAGE),1)]),_:2},1024)]),_:2},1024),e(T,null,{default:l(()=>[e(O,null,{default:l(()=>[i(u(o.TSLODETA_PRC),1)]),_:2},1024)]),_:2},1024),e(T,null,{default:l(()=>[e(O,null,{default:l(()=>[i(u(o.TSLODETA_PERIOD_FR),1)]),_:2},1024)]),_:2},1024),e(T,null,{default:l(()=>[e(O,null,{default:l(()=>[i(u(o.TSLODETA_PERIOD_TO),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)):y((f(),Q(E,{key:1,class:"q-my-sm",clickable:""},{default:l(()=>[e(T,null,{default:l(()=>[e(O,null,{default:l(()=>[i(" No Items Added ")]),_:1})]),_:1})]),_:1})),[[K]])]),_:1})])])])]),_:1})]),_:1})]),_:1},8,["onHide"]))}};const Qe={class:"q-pa-md"},he={class:"row q-pb-md"},Ue=t("div",{class:"col"},[t("span",{class:"text-h4"},"Sales Order / Receive Order")],-1),Ve={class:"col text-right"},we={class:"row q-pt-md"},ye={class:"col"},$e={__name:"salesOrderView",setup(H){const n=x(),D=r("TQUO_QUOCD"),d=r(""),L=r([]),b=r([{name:"TSLO_SLOCD",label:"RO. Code",field:"TSLO_SLOCD",sortable:!0,align:"left"},{name:"MCUS_CUSNM",label:"Customer Name",field:"MCUS_CUSNM",sortable:!0,align:"left"},{name:"TSLO_ADDRESS_NAME",label:"Customer Addr.",field:"TSLO_ADDRESS_NAME",sortable:!0,align:"left"},{name:"TSLO_CUSCD",label:"Customer Code",field:"TSLO_CUSCD",sortable:!0,align:"left"},{name:"TSLO_ISSUDT",label:"Issue Date",field:"TSLO_ISSUDT",sortable:!0,align:"left"},{name:"TSLO_QUOCD",label:"Quot. Code",field:"TSLO_QUOCD",sortable:!0,align:"left"}]),p=r(!1);J(()=>{h()});const h=async()=>{p.value=!0,await F.post("receive-order/searchAPI",{searchBy:D.value,searchValue:d.value}).then(_=>{p.value=!1,L.value=_.data.data}).catch(_=>{p.value=!1})},w=()=>{n.dialog({component:ge}).onOk(async _=>{h()})};return(_,v)=>(f(),V("div",Qe,[t("div",he,[Ue,t("div",Ve,[e(S,{icon:"add",color:"blue",onClick:w},{default:l(()=>[e(U,null,{default:l(()=>[i("Create New RO")]),_:1})]),_:1})])]),e(W),t("div",we,[t("div",ye,[e(ae,{title:"Created RO",rows:L.value,columns:b.value,"row-key":"name",loading:p.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":l(()=>[e(B,{outlined:"",modelValue:D.value,"onUpdate:modelValue":v[0]||(v[0]=s=>D.value=s),options:b.value,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),e(g,{borderless:"",dense:"",modelValue:d.value,"onUpdate:modelValue":[v[1]||(v[1]=s=>d.value=s),v[2]||(v[2]=s=>_.dataQuo())],placeholder:"Search",outlined:"",debounce:"1000"},{append:l(()=>[e(P,{name:"search"})]),_:1},8,["modelValue"])]),header:l(s=>[e(M,{props:s},{default:l(()=>[e(R,{"auto-width":""},{default:l(()=>[i("Action")]),_:1}),(f(!0),V(k,null,A(s.cols,c=>(f(),Q(R,{key:c.name,props:s},{default:l(()=>[i(u(c.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(s=>[e(M,{props:s},{default:l(()=>[e(q,{"auto-width":""},{default:l(()=>[e(S,{flat:"",color:s.row.TQUO_APPRVDT!==null?"grey":"orange",icon:"edit",onClick:c=>_.onClickEdit(s.row.TQUO_QUOCD),dense:"",disable:s.row.TQUO_APPRVDT!==null},{default:l(()=>[e(U,null,{default:l(()=>[i(u(s.row.TQUO_APPRVDT?"Quotation already approved, cannot edit !":"Edit this quotation"),1)]),_:2},1024)]),_:2},1032,["color","onClick","disable"]),e(S,{flat:"",color:s.row.TQUO_APPRVDT!==null?"grey":"red",icon:"delete",onClick:c=>_.onClickDelete(s.row.TQUO_QUOCD),dense:"",disable:s.row.TQUO_APPRVDT!==null},{default:l(()=>[e(U,null,{default:l(()=>[i(u(s.row.TQUO_APPRVDT?"Quotation already approved, cannot delete !":"Delete this quotation"),1)]),_:2},1024)]),_:2},1032,["color","onClick","disable"]),e(S,{flat:"",color:"indigo",icon:"print",onClick:c=>_.onClickPrint(s.row.TQUO_QUOCD),dense:""},{default:l(()=>[e(U,null,{default:l(()=>[i("Print this quotation")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024),(f(!0),V(k,null,A(s.cols,c=>(f(),Q(q,{key:c.name,props:s},{default:l(()=>[i(u(c.value),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{$e as default};
