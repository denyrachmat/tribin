import{s as d,B as s,C as g,D as e,E as a,J as P,K as _,P as q,aa as D,I as l,b1 as u,S as N,L as B,Q,M as w,O as x,o as O,R as c,a_ as m,a$ as C,b4 as R,H as T}from"./index.78a1c255.js";import{u as V,a as S,b as $,o as E}from"./use-dialog-plugin-component.b520ded7.js";import{Q as k,a as I}from"./QTd.2dfbde78.js";import{api_web as M}from"./axios.b9d07d69.js";const L=l("div",{class:"text-h6"},"Approval List",-1),H={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},K={__name:"viewListApproval",props:{listApprv:Array},setup(y){const b=y,h=d([{name:"APP_CD",label:"Doc Code",field:"APP_CD"},{name:"APP_CUSNM",label:"Customer",field:"APP_CUSNM"},{name:"APP_SBJCT",label:"Subject",field:"APP_SBJCT"},{name:"APP_ATTN",label:"Attn",field:"APP_ATTN"},{name:"CREATED_AT",label:"Created Date",field:"CREATED_AT"}]);d([]);const{dialogRef:v,onDialogHide:f,onDialogOK:p,onDialogCancel:A}=V();return(i,n)=>(s(),g(x,{ref_key:"dialogRef",ref:v,onHide:w(f),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:e(()=>[a(P,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:e(()=>[a(_,null,{default:e(()=>[L]),_:1}),a(_,{class:"q-pa-sm"},{default:e(()=>[a(S,{grid:"",flat:"",bordered:"","card-container-class":i.cardContainerClass,title:"Treats",rows:b.listApprv,columns:h.value,"row-key":"name",filter:i.filter,"hide-header":"",pagination:{rowsPerPage:50},"rows-per-page-options":i.rowsPerPageOptions},{"top-right":e(()=>[a(q,{borderless:"",dense:"",debounce:"300",modelValue:i.filter,"onUpdate:modelValue":n[0]||(n[0]=r=>i.filter=r),placeholder:"Search"},{append:e(()=>[a(D,{name:"search"})]),_:1},8,["modelValue"])]),item:e(r=>[l("div",H,[a(P,{flat:"",bordered:""},{default:e(()=>[a(_,{class:"text-center bg-secondary"},{default:e(()=>[l("strong",null,u(r.row.APP_CUSNM),1)]),_:2},1024),a(N),a(_,null,{default:e(()=>[l("strong",null,u(r.row.APP_CD),1)]),_:2},1024)]),_:2},1024)])]),_:1},8,["card-container-class","rows","columns","filter","rows-per-page-options"])]),_:1}),a(B,{align:"right"},{default:e(()=>[a(Q,{label:"OK",color:"primary",onClick:n[1]||(n[1]=r=>w(p)()),disable:i.stateSubmit},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},U={class:"q-pa-md bg-grey-5 window-height"},J={class:"row"},z={class:"row"},j={class:"col"},F={class:"text-h3 text-cyan"},G={class:"text-subtitle2 text-cyan"},W={class:"col text-right"},X={class:"row q-pa-sm"},Y={class:"col"},Z={key:1},se={__name:"dashboardView",setup(y){const b=$(),h=d([{total:900,title:"Total Sales",icon:"shopping_cart",color:"cyan"},{total:900,title:"Total Purchase",icon:"shopping_bag",color:"cyan"},{total:900,title:"Total Profit",icon:"payments",color:"cyan"},{total:15,title:"Total Customer",icon:"group",color:"cyan"},{total:15,title:"Total Customer",icon:"group",color:"cyan"},{total:15,title:"Total Customer",icon:"group",color:"cyan"},{total:15,title:"Total Customer",icon:"group",color:"cyan"},{total:15,title:"Total Customer",icon:"group",color:"cyan"}]),v=d([{name:"name",label:"Business",field:"name",sortable:!0,align:"left"},{name:"quot",label:"Quotation",field:"quot_count",sortable:!0,align:"center"},{name:"pr",label:"Purchase Request",field:"pr_count",sortable:!0,align:"center"},{name:"po",label:"Purchase Order",field:"po_count",sortable:!0,align:"center"},{name:"spk",label:"SPK",field:"spk_count",sortable:!0,align:"center"}]),f=d([]),p=d(!1);O(()=>{A()});const A=async()=>{p.value=!0,await M.get("/approval/notificationsAPI/top-user").then(n=>{p.value=!1,f.value=n.data}).catch(n=>{p.value=!1})},i=n=>{b.dialog({component:K,componentProps:{listApprv:n}}).onOk(async r=>{quotationGroupConditions.value=r.MCONDITION_RPT_STAT,quotationConditions.value=r.group})};return(n,r)=>(s(),c("div",U,[l("div",J,[(s(!0),c(m,null,C(h.value,(o,t)=>(s(),c("div",{class:R("col-3 q-pa-sm"),key:t},[a(P,null,{default:e(()=>[a(_,null,{default:e(()=>[l("div",z,[l("div",j,[l("div",F,u(o.total),1),l("div",G,u(o.title),1)]),l("div",W,[a(D,{name:o.icon,size:"4.4em",color:o.color},null,8,["name","color"])])])]),_:2},1024)]),_:2},1024)]))),128))]),l("div",X,[l("div",Y,[a(S,{flat:"",bordered:"",title:"Approval List",rows:f.value,columns:v.value,"row-key":"name"},{header:e(o=>[a(k,{props:o},{default:e(()=>[(s(!0),c(m,null,C(o.cols,t=>(s(),g(E,{key:t.name,props:o},{default:e(()=>[T(u(t.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:e(o=>[a(k,{props:o},{default:e(()=>[(s(!0),c(m,null,C(o.cols,t=>(s(),g(I,{key:t.name,props:o},{default:e(()=>[t.name==="quot"||t.name==="pr"||t.name==="po"||t.name==="spk"?(s(),c(m,{key:0},[t.value>0?(s(),g(Q,{key:0,flat:"",color:"blue",onClick:ee=>i(o.row[t.name.split("_")[0]])},{default:e(()=>[l("b",null,u(t.value),1)]),_:2},1032,["onClick"])):(s(),c("span",Z,u(t.value),1))],64)):(s(),c(m,{key:1},[T(u(t.value),1)],64))]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),_:1},8,["rows","columns"])])])]))}};export{se as default};
