import{s as r,o as D,B as p,C as R,D as o,E as a,J as g,K as i,M as w,O as V,I as s,R as b,P as O,aa as T,aX as u,S as H,Q as I}from"./index.29d4a8c4.js";import{u as U,b as v,a as x}from"./use-dialog-plugin-component.a495d3c9.js";import{d as C}from"./date.18e61531.js";import{api_web as N}from"./axios.78453b39.js";const M=s("div",{class:"text-h6"},"Update Order",-1),Q={__name:"serviceOprUpdateOrder",props:{header:Array,detail:Array},setup(f){const{dialogRef:m,onDialogHide:S,onDialogOK:d,onDialogCancel:c}=U();v();const l=f,h=r({SRVH_DOCNO:"",SRVH_ISSDT:C.formatDate(Date.now(),"YYYY-MM-DD"),SRVH_CUSCD:""}),e=r([]);return D(async()=>{l.header&&(await getCustomer(),await getItem(),h.value=l.header,e.value=l.detail)}),(_,t)=>(p(),R(V,{ref_key:"dialogRef",ref:m,onHide:w(S),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:o(()=>[a(g,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:o(()=>[a(i,null,{default:o(()=>[M]),_:1}),a(i,{class:"q-pa-sm"})]),_:1})]),_:1},8,["onHide"]))}},y={class:"q-pa-md"},Y={class:"row"},k={class:"col"},P={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},B={class:"text-h5 text-bold"},q={class:"text-h6 text-bold"},K={class:"text-subtitle2"},A={class:"text-h6 text-bold"},E=s("div",{class:"text-subtitle2"},"Resolved Items",-1),L={class:"row"},$={class:"col"},J=s("div",{class:"col text-right"},null,-1),G={__name:"serviceOprView",setup(f){const m=v();r([{name:"SRVH_DOCNO",label:"SPK No",field:"SRVH_DOCNO",sortable:!0,align:"left"},{name:"MCUS_CUSNM",label:"Customer Name",field:"MCUS_CUSNM",sortable:!0,align:"left"},{name:"resolve",label:"Resolved Line",sortable:!0,align:"left",field:e=>e.resolve.length},{name:"unresolve",label:"Unresolved Line",sortable:!0,align:"left",field:e=>e.unresolve.length},{name:"SRVH_ISSDT",label:"Submited Date",field:"SRVH_ISSDT",sortable:!0,align:"left"}]);const S=r([]),d=r(""),c=r(!1);D(()=>{l()});const l=async()=>{c.value=!0,await N.post("servicesAdmin/search",{searchBy:"",searchValue:d.value}).then(e=>{c.value=!1,S.value=e.data.data}).catch(e=>{c.value=!1})},h=e=>{const _={SRVH_DOCNO:e.SRVH_DOCNO,SRVH_ISSDT:C.formatDate(e.SRVH_ISSDT,"YYYY-MM-DD"),SRVH_CUSCD:e.MCUS_CUSCD};let t=[];e.detail.map(n=>{t.push({TSRVD_ITMCD:n.TSRVD_ITMCD,TSRVD_LINE:n.TSRVD_LINE,TSRVD_QTY:n.TSRVD_QTY,TSRVD_CUSTRMK:n.TSRVD_CUSTRMK})}),m.dialog({component:Q,componentProps:{header:_,detail:t}}).onOk(async n=>{l()})};return(e,_)=>(p(),b("div",y,[s("div",Y,[s("div",k,[a(x,{grid:"",flat:"",bordered:"","card-container-class":e.cardContainerClass,title:"Outstanding Order",rows:S.value,columns:e.columns,"row-key":"name",filter:d.value,"hide-header":"",pagination:{rowsPerPage:50},"rows-per-page-options":e.rowsPerPageOptions,loading:c.value},{"top-right":o(()=>[a(O,{borderless:"",dense:"",debounce:"300",modelValue:d.value,"onUpdate:modelValue":_[0]||(_[0]=t=>d.value=t),placeholder:"Search"},{append:o(()=>[a(T,{name:"search"})]),_:1},8,["modelValue"])]),item:o(t=>[s("div",P,[a(g,{flat:"",bordered:""},{default:o(()=>[a(i,{class:"text-center bg-secondary text-white"},{default:o(()=>[s("div",B,u(t.row.SRVH_DOCNO),1)]),_:2},1024),a(H),a(i,null,{default:o(()=>[s("div",q,u(t.row.MCUS_CUSNM),1),s("div",K,u(t.row.SRVH_ISSDT),1)]),_:2},1024),a(i,null,{default:o(()=>[s("div",A,u(t.row.resolve.length)+" of "+u(t.row.unresolve.length),1),E]),_:2},1024),a(i,null,{default:o(()=>[s("div",L,[s("div",$,[a(I,{label:"Resolve",color:"primary",outline:"",onClick:n=>h(t.row)},null,8,["onClick"])]),J])]),_:2},1024)]),_:2},1024)])]),_:1},8,["card-container-class","rows","columns","filter","rows-per-page-options","loading"])])])]))}};export{G as default};
