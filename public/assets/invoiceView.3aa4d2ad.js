import{i as ft,n as Q,a as Fe,u as mt,k as ht,l as pt,m as Le}from"./QTable.6ac0016b.js";import{b1 as _t,ag as F,n as gt,b8 as Dt,a9 as ne,b9 as _e,ae as xe,aO as ge,aA as re,a8 as De,ab as yt,c as Ct,ah as bt,aH as wt,aj as Tt,b0 as kt,s as O,a as V,w as Je,d as Vt,h as b,g as St,aZ as qt,F as Mt,be as Et,aa as At,T as R,Q as A,o as Re,B as $,C as we,D as s,E as i,L as Ot,M as ye,I as E,bl as Lt,H as Y,O as Te,aX as xt,Z as ke,am as K,X as Pe,Y as Jt,P as Ce,R as Ye,S as He}from"./index.eaeb84a9.js";import{Q as Qe,a as $e}from"./QTd.64e1a780.js";import{Q as j}from"./QTooltip.ad4d43c4.js";import{api_web as oe}from"./axios.07cd3488.js";import{Q as Pt}from"./QBadge.f667cc6a.js";import{u as Yt,b as Ht,c as Qt,g as $t,Q as ue,a as Be,C as ie}from"./ClosePopup.36d973bb.js";import{g as Ie,s as Ne}from"./touch.3df10340.js";import{_ as se,f as Bt}from"./date.c25ba00a.js";import{_ as It}from"./assignConditionsView.7f528099.js";import{_ as Nt}from"./viewAssignedCond.804a8504.js";import"./use-cache.b0833c75.js";function be(a,c,g){const T=re(a);let e,n=T.left-c.event.x,d=T.top-c.event.y,y=Math.abs(n),C=Math.abs(d);const m=c.direction;m.horizontal===!0&&m.vertical!==!0?e=n<0?"left":"right":m.horizontal!==!0&&m.vertical===!0?e=d<0?"up":"down":m.up===!0&&d<0?(e="up",y>C&&(m.left===!0&&n<0?e="left":m.right===!0&&n>0&&(e="right"))):m.down===!0&&d>0?(e="down",y>C&&(m.left===!0&&n<0?e="left":m.right===!0&&n>0&&(e="right"))):m.left===!0&&n<0?(e="left",y<C&&(m.up===!0&&d<0?e="up":m.down===!0&&d>0&&(e="down"))):m.right===!0&&n>0&&(e="right",y<C&&(m.up===!0&&d<0?e="up":m.down===!0&&d>0&&(e="down")));let x=!1;if(e===void 0&&g===!1){if(c.event.isFirst===!0||c.event.lastDir===void 0)return{};e=c.event.lastDir,x=!0,e==="left"||e==="right"?(T.left-=n,y=0,n=0):(T.top-=d,C=0,d=0)}return{synthetic:x,payload:{evt:a,touch:c.event.mouse!==!0,mouse:c.event.mouse===!0,position:T,direction:e,isFirst:c.event.isFirst,isFinal:g===!0,duration:Date.now()-c.event.time,distance:{x:y,y:C},offset:{x:n,y:d},delta:{x:T.left-c.event.lastX,y:T.top-c.event.lastY}}}}let Ut=0;var Ft=_t({name:"touch-pan",beforeMount(a,{value:c,modifiers:g}){if(g.mouse!==!0&&F.has.touch!==!0)return;function T(n,d){g.mouse===!0&&d===!0?yt(n):(g.stop===!0&&ge(n),g.prevent===!0&&xe(n))}const e={uid:"qvtp_"+Ut++,handler:c,modifiers:g,direction:Ie(g),noop:gt,mouseStart(n){Ne(n,e)&&Dt(n)&&(ne(e,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),e.start(n,!0))},touchStart(n){if(Ne(n,e)){const d=n.target;ne(e,"temp",[[d,"touchmove","move","notPassiveCapture"],[d,"touchcancel","end","passiveCapture"],[d,"touchend","end","passiveCapture"]]),e.start(n)}},start(n,d){if(F.is.firefox===!0&&_e(a,!0),e.lastEvt=n,d===!0||g.stop===!0){if(e.direction.all!==!0&&(d!==!0||e.modifiers.mouseAllDir!==!0&&e.modifiers.mousealldir!==!0)){const m=n.type.indexOf("mouse")>-1?new MouseEvent(n.type,n):new TouchEvent(n.type,n);n.defaultPrevented===!0&&xe(m),n.cancelBubble===!0&&ge(m),Object.assign(m,{qKeyEvent:n.qKeyEvent,qClickOutside:n.qClickOutside,qAnchorHandled:n.qAnchorHandled,qClonedBy:n.qClonedBy===void 0?[e.uid]:n.qClonedBy.concat(e.uid)}),e.initialEvent={target:n.target,event:m}}ge(n)}const{left:y,top:C}=re(n);e.event={x:y,y:C,time:Date.now(),mouse:d===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:y,lastY:C}},move(n){if(e.event===void 0)return;const d=re(n),y=d.left-e.event.x,C=d.top-e.event.y;if(y===0&&C===0)return;e.lastEvt=n;const m=e.event.mouse===!0,x=()=>{T(n,m);let p;g.preserveCursor!==!0&&g.preservecursor!==!0&&(p=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),m===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),ft(),e.styleCleanup=r=>{if(e.styleCleanup=void 0,p!==void 0&&(document.documentElement.style.cursor=p),document.body.classList.remove("non-selectable"),m===!0){const v=()=>{document.body.classList.remove("no-pointer-events--children")};r!==void 0?setTimeout(()=>{v(),r()},50):v()}else r!==void 0&&r()}};if(e.event.detected===!0){e.event.isFirst!==!0&&T(n,e.event.mouse);const{payload:p,synthetic:r}=be(n,e,!1);p!==void 0&&(e.handler(p)===!1?e.end(n):(e.styleCleanup===void 0&&e.event.isFirst===!0&&x(),e.event.lastX=p.position.left,e.event.lastY=p.position.top,e.event.lastDir=r===!0?void 0:p.direction,e.event.isFirst=!1));return}if(e.direction.all===!0||m===!0&&(e.modifiers.mouseAllDir===!0||e.modifiers.mousealldir===!0)){x(),e.event.detected=!0,e.move(n);return}const M=Math.abs(y),D=Math.abs(C);M!==D&&(e.direction.horizontal===!0&&M>D||e.direction.vertical===!0&&M<D||e.direction.up===!0&&M<D&&C<0||e.direction.down===!0&&M<D&&C>0||e.direction.left===!0&&M>D&&y<0||e.direction.right===!0&&M>D&&y>0?(e.event.detected=!0,e.move(n)):e.end(n,!0))},end(n,d){if(e.event!==void 0){if(De(e,"temp"),F.is.firefox===!0&&_e(a,!1),d===!0)e.styleCleanup!==void 0&&e.styleCleanup(),e.event.detected!==!0&&e.initialEvent!==void 0&&e.initialEvent.target.dispatchEvent(e.initialEvent.event);else if(e.event.detected===!0){e.event.isFirst===!0&&e.handler(be(n===void 0?e.lastEvt:n,e).payload);const{payload:y}=be(n===void 0?e.lastEvt:n,e,!0),C=()=>{e.handler(y)};e.styleCleanup!==void 0?e.styleCleanup(C):C()}e.event=void 0,e.initialEvent=void 0,e.lastEvt=void 0}}};if(a.__qtouchpan=e,g.mouse===!0){const n=g.mouseCapture===!0||g.mousecapture===!0?"Capture":"";ne(e,"main",[[a,"mousedown","mouseStart",`passive${n}`]])}F.has.touch===!0&&ne(e,"main",[[a,"touchstart","touchStart",`passive${g.capture===!0?"Capture":""}`],[a,"touchmove","noop","notPassiveCapture"]])},updated(a,c){const g=a.__qtouchpan;g!==void 0&&(c.oldValue!==c.value&&(typeof value!="function"&&g.end(),g.handler=c.value),g.direction=Ie(c.modifiers))},beforeUnmount(a){const c=a.__qtouchpan;c!==void 0&&(c.event!==void 0&&c.end(),De(c,"main"),De(c,"temp"),F.is.firefox===!0&&_e(a,!1),c.styleCleanup!==void 0&&c.styleCleanup(),delete a.__qtouchpan)}});function Rt(a,c){if(a.hour!==null){if(a.minute===null)return"minute";if(c===!0&&a.second===null)return"second"}return"hour"}function Kt(){const a=new Date;return{hour:a.getHours(),minute:a.getMinutes(),second:a.getSeconds(),millisecond:a.getMilliseconds()}}var Ue=Ct({name:"QTime",props:{...bt,...wt,...Yt,mask:{default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:a=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(a)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:Ht,setup(a,{slots:c,emit:g}){const T=St(),{$q:e}=T.proxy,n=Tt(a,e),{tabindex:d,headerClass:y,getLocale:C,getCurrentDate:m}=Qt(a,e),x=kt(a),M=qt(x);let D,p;const r=O(null),v=V(()=>ze()),k=V(()=>C()),Ve=V(()=>Ze()),X=se(a.modelValue,v.value,k.value,a.calendar,Ve.value),_=O(Rt(X)),o=O(X),S=O(X.hour===null||X.hour<12),Ke=V(()=>`q-time q-time--${a.landscape===!0?"landscape":"portrait"}`+(n.value===!0?" q-time--dark q-dark":"")+(a.disable===!0?" disabled":a.readonly===!0?" q-time--readonly":"")+(a.bordered===!0?" q-time--bordered":"")+(a.square===!0?" q-time--square no-border-radius":"")+(a.flat===!0?" q-time--flat no-shadow":"")),de=V(()=>{const t=o.value;return{hour:t.hour===null?"--":L.value===!0?Q(t.hour):String(S.value===!0?t.hour===0?12:t.hour:t.hour>12?t.hour-12:t.hour),minute:t.minute===null?"--":Q(t.minute),second:t.second===null?"--":Q(t.second)}}),L=V(()=>a.format24h!==null?a.format24h:e.lang.date.format24h),je=V(()=>{const t=_.value==="hour",l=t===!0?12:60,u=o.value[_.value];let w=`rotate(${Math.round(u*(360/l))-180}deg) translateX(-50%)`;return t===!0&&L.value===!0&&o.value.hour>=12&&(w+=" scale(.7)"),{transform:w}}),Se=V(()=>o.value.hour!==null),Xe=V(()=>Se.value===!0&&o.value.minute!==null),B=V(()=>a.hourOptions!==void 0?t=>a.hourOptions.includes(t):a.options!==void 0?t=>a.options(t,null,null):null),W=V(()=>a.minuteOptions!==void 0?t=>a.minuteOptions.includes(t):a.options!==void 0?t=>a.options(o.value.hour,t,null):null),G=V(()=>a.secondOptions!==void 0?t=>a.secondOptions.includes(t):a.options!==void 0?t=>a.options(o.value.hour,o.value.minute,t):null),P=V(()=>{if(B.value===null)return null;const t=Z(0,11,B.value),l=Z(12,11,B.value);return{am:t,pm:l,values:t.values.concat(l.values)}}),I=V(()=>W.value!==null?Z(0,59,W.value):null),N=V(()=>G.value!==null?Z(0,59,G.value):null),z=V(()=>{switch(_.value){case"hour":return P.value;case"minute":return I.value;case"second":return N.value}}),We=V(()=>{let t,l,u=0,h=1;const w=z.value!==null?z.value.values:void 0;_.value==="hour"?L.value===!0?(t=0,l=23):(t=0,l=11,S.value===!1&&(u=12)):(t=0,l=55,h=5);const J=[];for(let f=t,q=t;f<=l;f+=h,q++){const H=f+u,ct=w!==void 0&&w.includes(H)===!1,vt=_.value==="hour"&&f===0?L.value===!0?"00":"12":f;J.push({val:H,index:q,disable:ct,label:vt})}return J}),Ge=V(()=>[[Ft,et,void 0,{stop:!0,prevent:!0,mouse:!0}]]);Je(()=>a.modelValue,t=>{const l=se(t,v.value,k.value,a.calendar,Ve.value);(l.dateHash!==o.value.dateHash||l.timeHash!==o.value.timeHash)&&(o.value=l,l.hour===null?_.value="hour":S.value=l.hour<12)}),Je([v,k],()=>{Mt(()=>{pe()})});function qe(){const t={...m(),...Kt()};pe(t),Object.assign(o.value,t),_.value="hour"}function Z(t,l,u){const h=Array.apply(null,{length:l+1}).map((w,J)=>{const f=J+t;return{index:f,val:u(f)===!0}}).filter(w=>w.val===!0).map(w=>w.index);return{min:h[0],max:h[h.length-1],values:h,threshold:l+1}}function Me(t,l,u){const h=Math.abs(t-l);return Math.min(h,u-h)}function ce(t,{min:l,max:u,values:h,threshold:w}){if(t===l)return l;if(t<l||t>u)return Me(t,l,w)<=Me(t,u,w)?l:u;const J=h.findIndex(H=>t<=H),f=h[J-1],q=h[J];return t-f<=q-t?f:q}function ze(){return a.calendar!=="persian"&&a.mask!==null?a.mask:`HH:mm${a.withSeconds===!0?":ss":""}`}function Ze(){if(typeof a.defaultDate!="string"){const t=m(!0);return t.dateHash=$t(t),t}return se(a.defaultDate,"YYYY/MM/DD",void 0,a.calendar)}function ve(){return Et(T)===!0||z.value!==null&&(z.value.values.length===0||_.value==="hour"&&L.value!==!0&&P.value[S.value===!0?"am":"pm"].values.length===0)}function fe(){const t=r.value,{top:l,left:u,width:h}=t.getBoundingClientRect(),w=h/2;return{top:l+w,left:u+w,dist:w*.7}}function et(t){if(ve()!==!0){if(t.isFirst===!0){D=fe(),p=ee(t.evt,D);return}p=ee(t.evt,D,p),t.isFinal===!0&&(D=!1,p=null,Ee())}}function Ee(){_.value==="hour"?_.value="minute":a.withSeconds&&_.value==="minute"&&(_.value="second")}function ee(t,l,u){const h=re(t),w=Math.abs(h.top-l.top),J=Math.sqrt(Math.pow(Math.abs(h.top-l.top),2)+Math.pow(Math.abs(h.left-l.left),2));let f,q=Math.asin(w/J)*(180/Math.PI);if(h.top<l.top?q=l.left<h.left?90-q:270+q:q=l.left<h.left?q+90:270-q,_.value==="hour"){if(f=q/30,P.value!==null){const H=L.value!==!0?S.value===!0:P.value.am.values.length!==0&&P.value.pm.values.length!==0?J>=l.dist:P.value.am.values.length!==0;f=ce(f+(H===!0?0:12),P.value[H===!0?"am":"pm"])}else f=Math.round(f),L.value===!0?J<l.dist?f<12&&(f+=12):f===12&&(f=0):S.value===!0&&f===12?f=0:S.value===!1&&f!==12&&(f+=12);L.value===!0&&(S.value=f<12)}else f=Math.round(q/6)%60,_.value==="minute"&&I.value!==null?f=ce(f,I.value):_.value==="second"&&N.value!==null&&(f=ce(f,N.value));return u!==f&&st[_.value](f),f}const me={hour(){_.value="hour"},minute(){_.value="minute"},second(){_.value="second"}};function tt(t){t.keyCode===13&&Ae()}function lt(t){t.keyCode===13&&Oe()}function at(t){ve()!==!0&&(e.platform.is.desktop!==!0&&ee(t,fe()),Ee())}function nt(t){ve()!==!0&&ee(t,fe())}function ot(t){if(t.keyCode===13)_.value="hour";else if([37,39].includes(t.keyCode)){const l=t.keyCode===37?-1:1;if(P.value!==null){const u=L.value===!0?P.value.values:P.value[S.value===!0?"am":"pm"].values;if(u.length===0)return;if(o.value.hour===null)te(u[0]);else{const h=(u.length+u.indexOf(o.value.hour)+l)%u.length;te(u[h])}}else{const u=L.value===!0?24:12,h=L.value!==!0&&S.value===!1?12:0,w=o.value.hour===null?-l:o.value.hour;te(h+(24+w+l)%u)}}}function ut(t){if(t.keyCode===13)_.value="minute";else if([37,39].includes(t.keyCode)){const l=t.keyCode===37?-1:1;if(I.value!==null){const u=I.value.values;if(u.length===0)return;if(o.value.minute===null)le(u[0]);else{const h=(u.length+u.indexOf(o.value.minute)+l)%u.length;le(u[h])}}else{const u=o.value.minute===null?-l:o.value.minute;le((60+u+l)%60)}}}function it(t){if(t.keyCode===13)_.value="second";else if([37,39].includes(t.keyCode)){const l=t.keyCode===37?-1:1;if(N.value!==null){const u=N.value.values;if(u.length===0)return;if(o.value.seconds===null)ae(u[0]);else{const h=(u.length+u.indexOf(o.value.second)+l)%u.length;ae(u[h])}}else{const u=o.value.second===null?-l:o.value.second;ae((60+u+l)%60)}}}function te(t){o.value.hour!==t&&(o.value.hour=t,U())}function le(t){o.value.minute!==t&&(o.value.minute=t,U())}function ae(t){o.value.second!==t&&(o.value.second=t,U())}const st={hour:te,minute:le,second:ae};function Ae(){S.value===!1&&(S.value=!0,o.value.hour!==null&&(o.value.hour-=12,U()))}function Oe(){S.value===!0&&(S.value=!1,o.value.hour!==null&&(o.value.hour+=12,U()))}function he(t){const l=a.modelValue;_.value!==t&&l!==void 0&&l!==null&&l!==""&&typeof l!="string"&&(_.value=t)}function U(){if(B.value!==null&&B.value(o.value.hour)!==!0){o.value=se(),he("hour");return}if(W.value!==null&&W.value(o.value.minute)!==!0){o.value.minute=null,o.value.second=null,he("minute");return}if(a.withSeconds===!0&&G.value!==null&&G.value(o.value.second)!==!0){o.value.second=null,he("second");return}o.value.hour===null||o.value.minute===null||a.withSeconds===!0&&o.value.second===null||pe()}function pe(t){const l=Object.assign({...o.value},t),u=a.calendar==="persian"?Q(l.hour)+":"+Q(l.minute)+(a.withSeconds===!0?":"+Q(l.second):""):Bt(new Date(l.year,l.month===null?null:l.month-1,l.day,l.hour,l.minute,l.second,l.millisecond),v.value,k.value,l.year,l.timezoneOffset);l.changed=u!==a.modelValue,g("update:modelValue",u,l)}function rt(){const t=[b("div",{class:"q-time__link "+(_.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:d.value,onClick:me.hour,onKeyup:ot},de.value.hour),b("div",":"),b("div",Se.value===!0?{class:"q-time__link "+(_.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:d.value,onKeyup:ut,onClick:me.minute}:{class:"q-time__link"},de.value.minute)];a.withSeconds===!0&&t.push(b("div",":"),b("div",Xe.value===!0?{class:"q-time__link "+(_.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:d.value,onKeyup:it,onClick:me.second}:{class:"q-time__link"},de.value.second));const l=[b("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},t)];return L.value===!1&&l.push(b("div",{class:"q-time__header-ampm column items-between no-wrap"},[b("div",{class:"q-time__link "+(S.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:d.value,onClick:Ae,onKeyup:tt},"AM"),b("div",{class:"q-time__link "+(S.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:d.value,onClick:Oe,onKeyup:lt},"PM")])),b("div",{class:"q-time__header flex flex-center no-wrap "+y.value},l)}function dt(){const t=o.value[_.value];return b("div",{class:"q-time__content col relative-position"},[b(At,{name:"q-transition--scale"},()=>b("div",{key:"clock"+_.value,class:"q-time__container-parent absolute-full"},[b("div",{ref:r,class:"q-time__container-child fit overflow-hidden"},[R(b("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:at,onMousedown:nt},[b("div",{class:"q-time__clock-circle fit"},[b("div",{class:"q-time__clock-pointer"+(o.value[_.value]===null?" hidden":a.color!==void 0?` text-${a.color}`:""),style:je.value}),We.value.map(l=>b("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${l.index}`+(l.val===t?" q-time__clock-position--active "+y.value:l.disable===!0?" q-time__clock-position--disable":"")},[b("span",l.label)]))])]),Ge.value)])])),a.nowBtn===!0?b(A,{class:"q-time__now-button absolute",icon:e.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:a.color,textColor:a.textColor,tabindex:d.value,onClick:qe}):null])}return T.proxy.setNow=qe,()=>{const t=[dt()],l=Vt(c.default);return l!==void 0&&t.push(b("div",{class:"q-time__actions"},l)),a.name!==void 0&&a.disable!==!0&&M(t,"push"),b("div",{class:Ke.value,tabindex:-1},[rt(),b("div",{class:"q-time__main col overflow-auto"},t)])}}});const jt=E("div",{class:"text-h6"},"Update Surat Jalan",-1),Xt={class:"row q-pb-md"},Wt={class:"col"},Gt={class:"col text-right"},zt={class:"row q-pt-md"},Zt={class:"col"},el={class:"row items-center justify-end"},tl={class:"row items-center justify-end"},ll={class:"col q-pl-md"},al={class:"row items-center justify-end"},nl={class:"row items-center justify-end"},ol={__name:"updateSJ",props:{dataSJDB:Array},setup(a){const c=Fe(),g=a;Re(()=>{g.dataSJDB&&(e.value=g.dataSJDB)});const T=O([{label:"General",value:"general"},{label:"Forklift",value:"forklift"},{label:"Genset",value:"genset"}]),e=O({TDLVSJDETA_DLVCD:"",TDLVSJDETA_TYPE:"",TDLVSJDETA_CONDGRP:"",TDLVSJDETA_STARTDT:"",TDLVSJDETA_ENDDT:"",condition:[]});O([]);const n=O(!1),d=()=>Object.values(e.value).filter(r=>!r).length>0,y=()=>{c.dialog({component:It}).onOk(async r=>{e.value.TDLVSJDETA_CONDGRP=r.MCONDITION_RPT_STAT,e.value.condition=r.group})},C=()=>{c.dialog({component:Nt,componentProps:{listCond:e.value.condition}}).onOk(async r=>{})},m=()=>{c.dialog({title:"Confirmation",message:"Do you want to save all this data ?",cancel:!0,persistent:!0}).onOk(async()=>{D(e.value)})},{dialogRef:x,onDialogHide:M,onDialogOK:D,onDialogCancel:p}=mt();return(r,v)=>($(),we(Jt,{ref_key:"dialogRef",ref:x,onHide:Pe(M),"transition-show":"slide-up","transition-hide":"slide-down","full-width":""},{default:s(()=>[i(Ot,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:s(()=>[i(ye,null,{default:s(()=>[jt]),_:1}),i(ye,{class:"q-pa-sm"},{default:s(()=>[E("div",Xt,[E("div",Wt,[i(Lt,{options:T.value,type:"radio",modelValue:e.value.TDLVSJDETA_TYPE,"onUpdate:modelValue":v[0]||(v[0]=k=>e.value.TDLVSJDETA_TYPE=k)},null,8,["options","modelValue"])]),E("div",Gt,[i(A,{color:"blue",label:"Assign Conditions",onClick:y,loading:n.value},null,8,["loading"]),i(A,{icon:"visibility",color:"indigo",flat:"",onClick:C,loading:n.value},{default:s(()=>[i(j,null,{default:s(()=>[Y("View Conditions")]),_:1}),i(Pt,{color:"red",floating:""},{default:s(()=>[Y(Te(e.value.condition.length),1)]),_:1})]),_:1},8,["loading"])])]),i(xt),E("div",zt,[E("div",Zt,[i(ke,{filled:"",modelValue:e.value.TDLVSJDETA_STARTDT,"onUpdate:modelValue":v[3]||(v[3]=k=>e.value.TDLVSJDETA_STARTDT=k),label:"Jam Masuk"},{prepend:s(()=>[i(K,{name:"event",class:"cursor-pointer"},{default:s(()=>[i(ue,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:s(()=>[i(Be,{modelValue:e.value.TDLVSJDETA_STARTDT,"onUpdate:modelValue":v[1]||(v[1]=k=>e.value.TDLVSJDETA_STARTDT=k),mask:"YYYY-MM-DD HH:mm"},{default:s(()=>[E("div",el,[R(i(A,{label:"Close",color:"primary",flat:""},null,512),[[ie]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),append:s(()=>[i(K,{name:"access_time",class:"cursor-pointer"},{default:s(()=>[i(ue,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:s(()=>[i(Ue,{modelValue:e.value.TDLVSJDETA_STARTDT,"onUpdate:modelValue":v[2]||(v[2]=k=>e.value.TDLVSJDETA_STARTDT=k),mask:"YYYY-MM-DD HH:mm",format24h:""},{default:s(()=>[E("div",tl,[R(i(A,{label:"Close",color:"primary",flat:""},null,512),[[ie]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),E("div",ll,[i(ke,{filled:"",modelValue:e.value.TDLVSJDETA_ENDDT,"onUpdate:modelValue":v[6]||(v[6]=k=>e.value.TDLVSJDETA_ENDDT=k),label:"Jam Keluar"},{prepend:s(()=>[i(K,{name:"event",class:"cursor-pointer"},{default:s(()=>[i(ue,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:s(()=>[i(Be,{modelValue:e.value.TDLVSJDETA_ENDDT,"onUpdate:modelValue":v[4]||(v[4]=k=>e.value.TDLVSJDETA_ENDDT=k),mask:"YYYY-MM-DD HH:mm"},{default:s(()=>[E("div",al,[R(i(A,{label:"Close",color:"primary",flat:""},null,512),[[ie]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),append:s(()=>[i(K,{name:"access_time",class:"cursor-pointer"},{default:s(()=>[i(ue,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:s(()=>[i(Ue,{modelValue:e.value.TDLVSJDETA_ENDDT,"onUpdate:modelValue":v[5]||(v[5]=k=>e.value.TDLVSJDETA_ENDDT=k),mask:"YYYY-MM-DD HH:mm",format24h:""},{default:s(()=>[E("div",nl,[R(i(A,{label:"Close",color:"primary",flat:""},null,512),[[ie]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])])]),_:1}),i(ye,{class:"q-pa-sm"},{default:s(()=>[i(A,{label:"OK",color:"primary",onClick:v[7]||(v[7]=k=>m()),disable:d}),i(A,{flat:"",label:"Cancel",color:"red",onClick:Pe(p)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},ul={class:"q-pa-md"},il={class:"row"},sl={class:"col"},Cl={__name:"invoiceView",setup(a){const c=Fe(),g=O([]),T=O([{name:"TDLVORD_DLVCD",label:"DO Number",field:"TDLVORD_DLVCD",sortable:!0,align:"left"},{name:"MCUS_CUSNM",label:"Customer",field:"MCUS_CUSNM",sortable:!0,align:"left"}]),e=O(!1),n=O(""),d=O("");Re(()=>{y()});const y=async()=>{e.value=!0,await oe.post("invoices/search",{searchBy:n.value,searchValue:d.value}).then(D=>{e.value=!1,g.value=D.data.data}).catch(D=>{e.value=!1})},C=async D=>{e.value=!0,await oe.post("invoices/printInvoice",D).then(p=>{e.value=!1,window.open("").document.write("<iframe width='100%' height='100%' src='data:application/pdf;base64, "+encodeURI(p.data)+"'></iframe>")}).catch(p=>{e.value=!1})},m=async D=>{e.value=!0,await oe.get(`invoices/printKwitansi/${btoa(D)}`).then(p=>{e.value=!1,window.open("").document.write("<iframe width='100%' height='100%' src='data:application/pdf;base64, "+encodeURI(p.data)+"'></iframe>")}).catch(p=>{e.value=!1})},x=async D=>{c.dialog({title:"Options",message:"Choose type surat jalan",options:{type:"radio",model:"general",items:[{label:"General",value:"general"},{label:"Forklift",value:"forklift"},{label:"Genset",value:"genset"}]},cancel:!0,persistent:!0}).onOk(async p=>{e.value=!0,await oe.get(`invoices/printSJ/${btoa(D)}`).then(r=>{e.value=!1,window.open("").document.write("<iframe width='100%' height='100%' src='data:application/pdf;base64, "+encodeURI(r.data)+"'></iframe>")}).catch(r=>{e.value=!1})})},M=D=>{c.dialog({component:ol}).onOk(async p=>{y()})};return(D,p)=>($(),Ce("div",ul,[E("div",il,[E("div",sl,[i(ht,{title:"Invoice List",rows:g.value,columns:T.value,"row-key":"name",loading:e.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":s(()=>[i(pt,{outlined:"",modelValue:n.value,"onUpdate:modelValue":p[0]||(p[0]=r=>n.value=r),options:T.value,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),i(ke,{borderless:"",dense:"",modelValue:d.value,"onUpdate:modelValue":[p[1]||(p[1]=r=>d.value=r),p[2]||(p[2]=r=>D.dataOutstanding())],placeholder:"Search",outlined:"",debounce:"1000"},{append:s(()=>[i(K,{name:"search"})]),_:1},8,["modelValue"])]),header:s(r=>[i(Qe,{props:r},{default:s(()=>[($(!0),Ce(Ye,null,He(r.cols,v=>($(),we(Le,{key:v.name,props:r},{default:s(()=>[Y(Te(v.label),1)]),_:2},1032,["props"]))),128)),i(Le,{"auto-width":""},{default:s(()=>[Y("Action")]),_:1})]),_:2},1032,["props"])]),body:s(r=>[i(Qe,{props:r},{default:s(()=>[($(!0),Ce(Ye,null,He(r.cols,v=>($(),we($e,{key:v.name,props:r},{default:s(()=>[Y(Te(v.value),1)]),_:2},1032,["props"]))),128)),i($e,{"auto-width":""},{default:s(()=>[i(A,{flat:"",color:"red",icon:"list",dense:"",onClick:v=>M(r.row.dlvsj)},{default:s(()=>[i(j,null,{default:s(()=>[Y("Update Surat Jalan")]),_:1})]),_:2},1032,["onClick"]),i(A,{flat:"",color:"green",icon:"print",dense:"",onClick:v=>C(r.row)},{default:s(()=>[i(j,null,{default:s(()=>[Y("Print Invoice")]),_:1})]),_:2},1032,["onClick"]),i(A,{flat:"",color:"indigo",icon:"print",dense:"",onClick:v=>m(r.row.TDLVORD_DLVCD)},{default:s(()=>[i(j,null,{default:s(()=>[Y("Print Receipt")]),_:1})]),_:2},1032,["onClick"]),i(A,{flat:"",color:r.row.dlvsj?"orange":"grey",icon:"print",dense:"",onClick:v=>x(r.row.TDLVORD_DLVCD),disable:!r.row.dlvsj},{default:s(()=>[i(j,null,{default:s(()=>[Y("Print Surat Jalan")]),_:1})]),_:2},1032,["color","onClick","disable"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{Cl as default};
