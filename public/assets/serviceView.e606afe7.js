import{Q}from"./QTooltip.f0b7d653.js";import{t as k,o as ue,C as O,D as x,E as n,F as a,M as _e,O as J,J as C,$ as B,X as ge,Q as N,Y as te,Z as pe,a as F,c as De,a5 as Oe,u as Ze,h as R,ab as Je,d as et,be as Ce,w as He,bf as me,g as Se,aw as tt,ax as lt,az as at,aP as Be,ac as Qe,ah as ot,ai as nt,ak as it,p as st,bg as rt,j as ut,bh as dt,aX as ct,aW as vt,an as we,aV as mt,aY as Ye,I as P,U as qe,a0 as ft,R as ee,a_ as X,S as be,T as ye,V as _t,P as ne,W as gt}from"./index.755ef7a3.js";import{u as se,a as de,l as re,x as pt,y as $e,z as St,Q as ht,b as Ne,c as Z,d as xe,k as Ct,m as Pe,A as bt}from"./QTable.0bff1583.js";import{Q as Ae,a as Le}from"./QTd.675de2bb.js";import{d as fe}from"./date.f1db2f92.js";import{api_web as K}from"./axios.9ff7156d.js";import{Q as yt,a as Tt,C as Dt}from"./ClosePopup.cbe2faaf.js";import{_ as wt}from"./serviceOprUpdateOrder.5b91e08f.js";import"./use-render-cache.3aae9b27.js";import"./QBtnGroup.956f639c.js";import"./QBadge.5effcc9d.js";import"./serviceOprItemAdd.b96fe1ad.js";const Mt=C("div",{class:"text-h6"},"Create Item Master",-1),kt={class:"row"},Vt={class:"col"},Rt={class:"col q-pl-md"},It={class:"row q-pt-md"},Ut={class:"col"},Ft={class:"col q-pl-md"},Ot={class:"row q-pt-md"},qt={class:"col"},$t={class:"col q-pl-md"},Nt={class:"row q-pt-md"},xt={class:"col"},Pt={__name:"itemCreate",props:{ItemCat:String,ItemType:String},setup(e){const{dialogRef:w,onDialogHide:m,onDialogOK:d,onDialogCancel:S}=se(),y=de(),i=k({MITM_ITMCD:"",MITM_ITMNM:"",MITM_STKUOM:"",MITM_ITMTYPE:1,MITM_BRAND:"",MITM_MODEL:"",MITM_SPEC:"",MITM_ITMCAT:"",MITM_COACD:"",MITM_ITMCAT:""}),T=k(!1),I=k([]),U=k([]),g=e;ue(()=>{b(),i.value.MITM_ITMCAT=g.ItemCat,i.value.MITM_ITMTYPE=g.ItemType});const h=(t,c,o,f)=>{c(async()=>{await K.post("item/getListCoasAPI",{search:t}).then(l=>{U.value=l.data})})},M=()=>{y.dialog({title:"Confirmation",message:"Do you want to save this item ?",cancel:!0,persistent:!0}).onOk(async()=>{await K.post("item",i.value).then(t=>{d(t.data.data.value)})})},b=async()=>{T.value=!0,await K.get("item/formAPI").then(t=>{T.value=!1,I.value=t.data.uoms,U.value=t.data.coas}).catch(()=>{T.value=!1})};return(t,c)=>(O(),x(pe,{ref_key:"dialogRef",ref:w,onHide:te(m),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:n(()=>[a(_e,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:n(()=>[a(J,null,{default:n(()=>[Mt]),_:1}),a(J,{class:"q-pa-sm"},{default:n(()=>[C("div",kt,[C("div",Vt,[a(B,{label:"Item Code",dense:"",modelValue:i.value.MITM_ITMCD,"onUpdate:modelValue":c[0]||(c[0]=o=>i.value.MITM_ITMCD=o),filled:""},null,8,["modelValue"])]),C("div",Rt,[a(B,{label:"Item Name",dense:"",modelValue:i.value.MITM_ITMNM,"onUpdate:modelValue":c[1]||(c[1]=o=>i.value.MITM_ITMNM=o),filled:""},null,8,["modelValue"])])]),C("div",It,[C("div",Ut,[a(re,{dense:"",filled:"",label:"UOM",modelValue:i.value.MITM_STKUOM,"onUpdate:modelValue":c[2]||(c[2]=o=>i.value.MITM_STKUOM=o),options:I.value,behavior:"dialog","option-label":"MUOM_UOMNM","option-value":"MUOM_UOMCD","emit-value":"","map-options":"",loading:T.value},null,8,["modelValue","options","loading"])]),C("div",Ft,[a(B,{label:"Item Brand",dense:"",modelValue:i.value.MITM_BRAND,"onUpdate:modelValue":c[3]||(c[3]=o=>i.value.MITM_BRAND=o),filled:""},null,8,["modelValue"])])]),C("div",Ot,[C("div",qt,[a(B,{label:"Item Model",dense:"",modelValue:i.value.MITM_MODEL,"onUpdate:modelValue":c[4]||(c[4]=o=>i.value.MITM_MODEL=o),filled:""},null,8,["modelValue"])]),C("div",$t,[a(B,{label:"Item Specification",dense:"",modelValue:i.value.MITM_SPEC,"onUpdate:modelValue":c[5]||(c[5]=o=>i.value.MITM_SPEC=o),filled:""},null,8,["modelValue"])])]),C("div",Nt,[C("div",xt,[a(re,{dense:"",filled:"",label:"COA",modelValue:i.value.MITM_COACD,"onUpdate:modelValue":c[6]||(c[6]=o=>i.value.MITM_COACD=o),options:U.value,"use-input":"",behavior:"dialog","option-label":"MCOA_COANM","option-value":"MCOA_COACD",onFilter:c[7]||(c[7]=(o,f,l)=>h(o,f,l)),"emit-value":"","map-options":"",loading:T.value},null,8,["modelValue","options","loading"])])])]),_:1}),a(ge,{align:"right"},{default:n(()=>[a(N,{label:"OK",color:"primary",onClick:c[8]||(c[8]=o=>M())}),a(N,{flat:"",label:"Cancel",color:"red",onClick:te(S)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},At=C("div",{class:"text-h6"},"Create New Customer Data",-1),Lt={class:"row q-pb-md"},zt={class:"col"},Et={class:"row q-pb-md"},Ht={class:"col"},Bt={class:"col q-pl-md"},Qt={class:"row"},Yt={class:"col"},jt={__name:"customerView",setup(e){const{dialogRef:w,onDialogHide:m,onDialogOK:d,onDialogCancel:S}=se(),y=de(),i=k({MCUS_CUSCD:"",MCUS_CUSNM:"",MCUS_CURCD:"IDR",MCUS_TAXREG:"-",MCUS_ADDR1:"",MCUS_TELNO:"",MCUS_PIC_NAME:"-",MCUS_PIC_TELNO:"-",MCUS_TYPE:1,MCUS_GROUP:"SERVICE",MCUS_EMAIL:""}),T=k(!1),I=()=>{y.dialog({title:"Confirmation",message:"Do you want to save this customer ?",cancel:!0,persistent:!0}).onOk(async()=>{T.value=!0,await K.post("customer",i.value).then(U=>{T.value=!1,d(U.data)}).catch(U=>{T.value=!1})})};return(U,g)=>(O(),x(pe,{ref_key:"dialogRef",ref:w,onHide:te(m),"transition-show":"slide-up","transition-hide":"slide-down","full-width":""},{default:n(()=>[a(_e,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:n(()=>[a(J,null,{default:n(()=>[At]),_:1}),a(J,{class:"q-pa-sm"},{default:n(()=>[C("div",Lt,[C("div",zt,[a(B,{label:"Customer Name",dense:"",modelValue:i.value.MCUS_CUSNM,"onUpdate:modelValue":g[0]||(g[0]=h=>i.value.MCUS_CUSNM=h),filled:""},null,8,["modelValue"])])]),C("div",Et,[C("div",Ht,[a(B,{label:"Customer Email",dense:"",modelValue:i.value.MCUS_EMAIL,"onUpdate:modelValue":g[1]||(g[1]=h=>i.value.MCUS_EMAIL=h),filled:""},null,8,["modelValue"])]),C("div",Bt,[a(B,{label:"Customer Phone",dense:"",modelValue:i.value.MCUS_TELNO,"onUpdate:modelValue":g[2]||(g[2]=h=>i.value.MCUS_TELNO=h),filled:"",mask:"####-####-####"},null,8,["modelValue"])])]),C("div",Qt,[C("div",Yt,[a(B,{label:"Customer Address",dense:"",modelValue:i.value.MCUS_ADDR1,"onUpdate:modelValue":g[3]||(g[3]=h=>i.value.MCUS_ADDR1=h),filled:"",type:"textarea"},null,8,["modelValue"])])])]),_:1}),a(ge,{align:"right"},{default:n(()=>[a(N,{label:"OK",color:"primary",onClick:g[4]||(g[4]=h=>I()),loading:T.value},null,8,["loading"]),a(N,{flat:"",label:"Cancel",color:"red",onClick:te(S),loading:T.value},null,8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},Kt={ratio:[String,Number]};function Gt(e,w){return F(()=>{const m=Number(e.ratio||(w!==void 0?w.value:void 0));return isNaN(m)!==!0&&m>0?{paddingBottom:`${100/m}%`}:null})}const Wt=1.7778;var Xt=De({name:"QImg",props:{...Kt,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:Wt},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:w,emit:m}){const d=k(e.initialRatio),S=Gt(e,d),y=Se(),{registerTimeout:i,removeTimeout:T}=Oe(),{registerTimeout:I,removeTimeout:U}=Oe(),g=F(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),h=F(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),M=[k(null),k(g.value)],b=k(0),t=k(!1),c=k(!1),o=F(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),f=F(()=>({width:e.width,height:e.height})),l=F(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),s=F(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function z(){if(U(),e.loadingShowDelay===0){t.value=!0;return}I(()=>{t.value=!0},e.loadingShowDelay)}function A(){U(),t.value=!1}function D({target:u}){me(y)===!1&&(T(),d.value=u.naturalHeight===0?.5:u.naturalWidth/u.naturalHeight,p(u,1))}function p(u,L){L===1e3||me(y)===!0||(u.complete===!0?_(u):i(()=>{p(u,L+1)},50))}function _(u){me(y)!==!0&&(b.value=b.value^1,M[b.value].value=null,A(),u.getAttribute("__qerror")!=="true"&&(c.value=!1),m("load",u.currentSrc||u.src))}function v(u){T(),A(),c.value=!0,M[b.value].value=h.value,M[b.value^1].value=g.value,m("error",u)}function V(u){const L=M[u].value,Y={key:"img_"+u,class:l.value,style:s.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...L};return b.value===u?Object.assign(Y,{class:Y.class+"current",onLoad:D,onError:v}):Y.class+="loaded",R("div",{class:"q-img__container absolute-full",key:"img"+u},R("img",Y))}function $(){return t.value===!1?R("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},et(w[c.value===!0?"error":"default"])):R("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},w.loading!==void 0?w.loading():e.noSpinner===!0?void 0:[R(Ce,{color:e.spinnerColor,size:e.spinnerSize})])}{let u=function(){He(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,L=>{T(),c.value=!1,L===null?(A(),M[b.value^1].value=g.value):z(),M[b.value].value=L},{immediate:!0})};Ze.value===!0?ue(u):u()}return()=>{const u=[];return S.value!==null&&u.push(R("div",{key:"filler",style:S.value})),M[0].value!==null&&u.push(V(0)),M[1].value!==null&&u.push(V(1)),u.push(R(Je,{name:"q-transition--fade"},$)),R("div",{key:"main",class:o.value,style:f.value,role:"img","aria-label":e.alt},u)}}});const Zt={...tt,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},Te=50,je=2*Te,Ke=je*Math.PI,Jt=Math.round(Ke*1e3)/1e3;var el=De({name:"QCircularProgress",props:{...Zt,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(e,{slots:w}){const{proxy:{$q:m}}=Se(),d=lt(e),S=F(()=>{const b=(m.lang.rtl===!0?-1:1)*e.angle;return{transform:e.reverse!==(m.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-b}deg)`:`rotate3d(0, 0, 1, ${b-90}deg)`}}),y=F(()=>e.instantFeedback!==!0&&e.indeterminate!==!0?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:""),i=F(()=>je/(1-e.thickness/2)),T=F(()=>`${i.value/2} ${i.value/2} ${i.value} ${i.value}`),I=F(()=>pt(e.value,e.min,e.max)),U=F(()=>e.max-e.min),g=F(()=>e.thickness/2*i.value),h=F(()=>{const b=(e.max-I.value)/U.value,t=e.rounded===!0&&I.value<e.max&&b<.25?g.value/2*(1-b/.25):0;return Ke*b+t});function M({thickness:b,offset:t,color:c,cls:o,rounded:f}){return R("circle",{class:"q-circular-progress__"+o+(c!==void 0?` text-${c}`:""),style:y.value,fill:"transparent",stroke:"currentColor","stroke-width":b,"stroke-dasharray":Jt,"stroke-dashoffset":t,"stroke-linecap":f,cx:i.value,cy:i.value,r:Te})}return()=>{const b=[];e.centerColor!==void 0&&e.centerColor!=="transparent"&&b.push(R("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:Te-g.value/2,cx:i.value,cy:i.value})),e.trackColor!==void 0&&e.trackColor!=="transparent"&&b.push(M({cls:"track",thickness:g.value,offset:0,color:e.trackColor})),b.push(M({cls:"circle",thickness:g.value,offset:h.value,color:e.color,rounded:e.rounded===!0?"round":void 0}));const t=[R("svg",{class:"q-circular-progress__svg",style:S.value,viewBox:T.value,"aria-hidden":"true"},b)];return e.showValue===!0&&t.push(R("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},w.default!==void 0?w.default():[R("div",I.value)])),R("div",{class:`q-circular-progress q-circular-progress--${e.indeterminate===!0?"in":""}determinate`,style:d.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.indeterminate===!0?void 0:I.value},at(w.internal,t))}}});function oe(e,w,m,d){const S=[];return e.forEach(y=>{d(y)===!0?S.push(y):w.push({failedPropValidation:m,file:y})}),S}function ve(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),Qe(e)}const tl={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},ll=["rejected"];function al({editable:e,dnd:w,getFileInput:m,addFilesToQueue:d}){const{props:S,emit:y,proxy:i}=Se(),T=k(null),I=F(()=>S.accept!==void 0?S.accept.split(",").map(l=>(l=l.trim(),l==="*"?"*/":(l.endsWith("/*")&&(l=l.slice(0,l.length-1)),l.toUpperCase()))):null),U=F(()=>parseInt(S.maxFiles,10)),g=F(()=>parseInt(S.maxTotalSize,10));function h(l){if(e.value)if(l!==Object(l)&&(l={target:null}),l.target!==null&&l.target.matches('input[type="file"]')===!0)l.clientX===0&&l.clientY===0&&Be(l);else{const s=m();s&&s!==l.target&&s.click(l)}}function M(l){e.value&&l&&d(null,l)}function b(l,s,z,A){let D=Array.from(s||l.target.files);const p=[],_=()=>{p.length!==0&&y("rejected",p)};if(S.accept!==void 0&&I.value.indexOf("*/")===-1&&(D=oe(D,p,"accept",v=>I.value.some(V=>v.type.toUpperCase().startsWith(V)||v.name.toUpperCase().endsWith(V))),D.length===0))return _();if(S.maxFileSize!==void 0){const v=parseInt(S.maxFileSize,10);if(D=oe(D,p,"max-file-size",V=>V.size<=v),D.length===0)return _()}if(S.multiple!==!0&&D.length!==0&&(D=[D[0]]),D.forEach(v=>{v.__key=v.webkitRelativePath+v.lastModified+v.name+v.size}),A===!0){const v=z.map(V=>V.__key);D=oe(D,p,"duplicate",V=>v.includes(V.__key)===!1)}if(D.length===0)return _();if(S.maxTotalSize!==void 0){let v=A===!0?z.reduce((V,$)=>V+$.size,0):0;if(D=oe(D,p,"max-total-size",V=>(v+=V.size,v<=g.value)),D.length===0)return _()}if(typeof S.filter=="function"){const v=S.filter(D);D=oe(D,p,"filter",V=>v.includes(V))}if(S.maxFiles!==void 0){let v=A===!0?z.length:0;if(D=oe(D,p,"max-files",()=>(v++,v<=U.value)),D.length===0)return _()}if(_(),D.length!==0)return D}function t(l){ve(l),w.value!==!0&&(w.value=!0)}function c(l){Qe(l),(l.relatedTarget!==null||ot.is.safari!==!0?l.relatedTarget!==T.value:document.elementsFromPoint(l.clientX,l.clientY).includes(T.value)===!1)===!0&&(w.value=!1)}function o(l){ve(l);const s=l.dataTransfer.files;s.length!==0&&d(null,s),w.value=!1}function f(l){if(w.value===!0)return R("div",{ref:T,class:`q-${l}__dnd absolute-full`,onDragenter:ve,onDragover:ve,onDragleave:c,onDrop:o})}return Object.assign(i,{pickFiles:h,addFiles:M}),{pickFiles:h,addFiles:M,onDragover:t,onDragleave:c,processFiles:b,getDndNode:f,maxFilesNumber:U,maxTotalSizeNumber:g}}function ze(e){return(e*100).toFixed(2)+"%"}const ol={...nt,...tl,label:String,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,noThumbnails:Boolean,autoUpload:Boolean,hideUploadBtn:Boolean,disable:Boolean,readonly:Boolean},Ge=[...ll,"start","finish","added","removed"];function nl(e,w){const m=Se(),{props:d,slots:S,emit:y,proxy:i}=m,{$q:T}=i,I=it(d,T);function U(r,q,E){if(r.__status=q,q==="idle"){r.__uploaded=0,r.__progress=0,r.__sizeLabel=$e(r.size),r.__progressLabel="0.00%";return}if(q==="failed"){i.$forceUpdate();return}r.__uploaded=q==="uploaded"?r.size:E,r.__progress=q==="uploaded"?1:Math.min(.9999,r.__uploaded/r.size),r.__progressLabel=ze(r.__progress),i.$forceUpdate()}const g=F(()=>d.disable!==!0&&d.readonly!==!0),h=k(!1),M=k(null),b=k(null),t={files:k([]),queuedFiles:k([]),uploadedFiles:k([]),uploadedSize:k(0),updateFileStatus:U,isAlive:()=>me(m)===!1},{pickFiles:c,addFiles:o,onDragover:f,onDragleave:l,processFiles:s,getDndNode:z,maxFilesNumber:A,maxTotalSizeNumber:D}=al({editable:g,dnd:h,getFileInput:Ve,addFilesToQueue:Re});Object.assign(t,e({props:d,slots:S,emit:y,helpers:t,exposeApi:r=>{Object.assign(t,r)}})),t.isBusy===void 0&&(t.isBusy=k(!1));const p=k(0),_=F(()=>p.value===0?0:t.uploadedSize.value/p.value),v=F(()=>ze(_.value)),V=F(()=>$e(p.value)),$=F(()=>g.value===!0&&t.isUploading.value!==!0&&(d.multiple===!0||t.queuedFiles.value.length===0)&&(d.maxFiles===void 0||t.files.value.length<A.value)&&(d.maxTotalSize===void 0||p.value<D.value)),u=F(()=>g.value===!0&&t.isBusy.value!==!0&&t.isUploading.value!==!0&&t.queuedFiles.value.length!==0);st(rt,Ue);const L=F(()=>"q-uploader column no-wrap"+(I.value===!0?" q-uploader--dark q-dark":"")+(d.bordered===!0?" q-uploader--bordered":"")+(d.square===!0?" q-uploader--square no-border-radius":"")+(d.flat===!0?" q-uploader--flat no-shadow":"")+(d.disable===!0?" disabled q-uploader--disable":"")+(h.value===!0?" q-uploader--dnd":"")),Y=F(()=>"q-uploader__header"+(d.color!==void 0?` bg-${d.color}`:"")+(d.textColor!==void 0?` text-${d.textColor}`:""));He(t.isUploading,(r,q)=>{q===!1&&r===!0?y("start"):q===!0&&r===!1&&y("finish")});function le(){d.disable===!1&&(t.abort(),t.uploadedSize.value=0,p.value=0,ke(),t.files.value=[],t.queuedFiles.value=[],t.uploadedFiles.value=[])}function j(){d.disable===!1&&Me(["uploaded"],()=>{t.uploadedFiles.value=[]})}function ce(){Me(["idle","failed"],({size:r})=>{p.value-=r,t.queuedFiles.value=[]})}function Me(r,q){if(d.disable===!0)return;const E={files:[],size:0},G=t.files.value.filter(H=>r.indexOf(H.__status)===-1?!0:(E.size+=H.size,E.files.push(H),H.__img!==void 0&&window.URL.revokeObjectURL(H.__img.src),!1));E.files.length!==0&&(t.files.value=G,q(E),y("removed",E.files))}function he(r){d.disable||(r.__status==="uploaded"?t.uploadedFiles.value=t.uploadedFiles.value.filter(q=>q.__key!==r.__key):r.__status==="uploading"?r.__abort():p.value-=r.size,t.files.value=t.files.value.filter(q=>q.__key!==r.__key?!0:(q.__img!==void 0&&window.URL.revokeObjectURL(q.__img.src),!1)),t.queuedFiles.value=t.queuedFiles.value.filter(q=>q.__key!==r.__key),y("removed",[r]))}function ke(){t.files.value.forEach(r=>{r.__img!==void 0&&window.URL.revokeObjectURL(r.__img.src)})}function Ve(){return b.value||M.value.getElementsByClassName("q-uploader__input")[0]}function Re(r,q){const E=s(r,q,t.files.value,!0),G=Ve();G!=null&&(G.value=""),E!==void 0&&(E.forEach(H=>{if(t.updateFileStatus(H,"idle"),p.value+=H.size,d.noThumbnails!==!0&&H.type.toUpperCase().startsWith("IMAGE")){const Fe=new Image;Fe.src=window.URL.createObjectURL(H),H.__img=Fe}}),t.files.value=t.files.value.concat(E),t.queuedFiles.value=t.queuedFiles.value.concat(E),y("added",E),d.autoUpload===!0&&t.upload())}function Ie(){u.value===!0&&t.upload()}function ie(r,q,E){if(r===!0){const G={type:"a",key:q,icon:T.iconSet.uploader[q],flat:!0,dense:!0};let H;return q==="add"?(G.onClick=c,H=Ue):G.onClick=E,R(N,G,H)}}function Ue(){return R("input",{ref:b,class:"q-uploader__input overflow-hidden absolute-full",tabindex:-1,type:"file",title:"",accept:d.accept,multiple:d.multiple===!0?"multiple":void 0,capture:d.capture,onMousedown:Be,onClick:c,onChange:Re})}function We(){return S.header!==void 0?S.header(ae):[R("div",{class:"q-uploader__header-content column"},[R("div",{class:"flex flex-center no-wrap q-gutter-xs"},[ie(t.queuedFiles.value.length!==0,"removeQueue",ce),ie(t.uploadedFiles.value.length!==0,"removeUploaded",j),t.isUploading.value===!0?R(Ce,{class:"q-uploader__spinner"}):null,R("div",{class:"col column justify-center"},[d.label!==void 0?R("div",{class:"q-uploader__title"},[d.label]):null,R("div",{class:"q-uploader__subtitle"},[V.value+" / "+v.value])]),ie($.value,"add"),ie(d.hideUploadBtn===!1&&u.value===!0,"upload",t.upload),ie(t.isUploading.value,"clear",t.abort)])])]}function Xe(){return S.list!==void 0?S.list(ae):t.files.value.map(r=>R("div",{key:r.__key,class:"q-uploader__file relative-position"+(d.noThumbnails!==!0&&r.__img!==void 0?" q-uploader__file--img":"")+(r.__status==="failed"?" q-uploader__file--failed":r.__status==="uploaded"?" q-uploader__file--uploaded":""),style:d.noThumbnails!==!0&&r.__img!==void 0?{backgroundImage:'url("'+r.__img.src+'")'}:null},[R("div",{class:"q-uploader__file-header row flex-center no-wrap"},[r.__status==="failed"?R(we,{class:"q-uploader__file-status",name:T.iconSet.type.negative,color:"negative"}):null,R("div",{class:"q-uploader__file-header-content col"},[R("div",{class:"q-uploader__title"},[r.name]),R("div",{class:"q-uploader__subtitle row items-center no-wrap"},[r.__sizeLabel+" / "+r.__progressLabel])]),r.__status==="uploading"?R(el,{value:r.__progress,min:0,max:1,indeterminate:r.__progress===0}):R(N,{round:!0,dense:!0,flat:!0,icon:T.iconSet.uploader[r.__status==="uploaded"?"done":"clear"],onClick:()=>{he(r)}})])]))}ut(()=>{t.isUploading.value===!0&&t.abort(),t.files.value.length!==0&&ke()});const ae={};for(const r in t)dt(t[r])===!0?ct(ae,r,()=>t[r].value):ae[r]=t[r];return Object.assign(ae,{upload:Ie,reset:le,removeUploadedFiles:j,removeQueuedFiles:ce,removeFile:he,pickFiles:c,addFiles:o}),vt(ae,{canAddFiles:()=>$.value,canUpload:()=>u.value,uploadSizeLabel:()=>V.value,uploadProgressLabel:()=>v.value}),w({...t,upload:Ie,reset:le,removeUploadedFiles:j,removeQueuedFiles:ce,removeFile:he,pickFiles:c,addFiles:o,canAddFiles:$,canUpload:u,uploadSizeLabel:V,uploadProgressLabel:v}),()=>{const r=[R("div",{class:Y.value},We()),R("div",{class:"q-uploader__list scroll"},Xe()),z("uploader")];t.isBusy.value===!0&&r.push(R("div",{class:"q-uploader__overlay absolute-full flex flex-center"},[R(Ce)]));const q={ref:M,class:L.value};return $.value===!0&&Object.assign(q,{onDragover:f,onDragleave:l}),R("div",q,r)}}const il=St(Ge);var sl=({name:e,props:w,emits:m,injectPlugin:d})=>De({name:e,props:{...ol,...w},emits:mt(m)===!0?{...il,...m}:[...Ge,...m],setup(S,{expose:y}){return nl(d,y)}});function W(e){return typeof e=="function"?e:()=>e}const rl="QUploader",ul={url:[Function,String],method:{type:[Function,String],default:"POST"},fieldName:{type:[Function,String],default:()=>e=>e.name},headers:[Function,Array],formFields:[Function,Array],withCredentials:[Function,Boolean],sendRaw:[Function,Boolean],batch:[Function,Boolean],factory:Function},dl=["factoryFailed","uploaded","failed","uploading"];function cl({props:e,emit:w,helpers:m}){const d=k([]),S=k([]),y=k(0),i=F(()=>({url:W(e.url),method:W(e.method),headers:W(e.headers),formFields:W(e.formFields),fieldName:W(e.fieldName),withCredentials:W(e.withCredentials),sendRaw:W(e.sendRaw),batch:W(e.batch)})),T=F(()=>y.value>0),I=F(()=>S.value.length!==0);let U;function g(){d.value.forEach(t=>{t.abort()}),S.value.length!==0&&(U=!0)}function h(){const t=m.queuedFiles.value.slice(0);m.queuedFiles.value=[],i.value.batch(t)?M(t):t.forEach(c=>{M([c])})}function M(t){if(y.value++,typeof e.factory!="function"){b(t,{});return}const c=e.factory(t);if(!c)w("factoryFailed",new Error("QUploader: factory() does not return properly"),t),y.value--;else if(typeof c.catch=="function"&&typeof c.then=="function"){S.value.push(c);const o=f=>{m.isAlive()===!0&&(S.value=S.value.filter(l=>l!==c),S.value.length===0&&(U=!1),m.queuedFiles.value=m.queuedFiles.value.concat(t),t.forEach(l=>{m.updateFileStatus(l,"failed")}),w("factoryFailed",f,t),y.value--)};c.then(f=>{U===!0?o(new Error("Aborted")):m.isAlive()===!0&&(S.value=S.value.filter(l=>l!==c),b(t,f))}).catch(o)}else b(t,c||{})}function b(t,c){const o=new FormData,f=new XMLHttpRequest,l=(u,L)=>c[u]!==void 0?W(c[u])(L):i.value[u](L),s=l("url",t);if(!s){console.error("q-uploader: invalid or no URL specified"),y.value--;return}const z=l("formFields",t);z!==void 0&&z.forEach(u=>{o.append(u.name,u.value)});let A=0,D=0,p=0,_=0,v;f.upload.addEventListener("progress",u=>{if(v===!0)return;const L=Math.min(_,u.loaded);m.uploadedSize.value+=L-p,p=L;let Y=p-D;for(let le=A;Y>0&&le<t.length;le++){const j=t[le];if(Y>j.size)Y-=j.size,A++,D+=j.size,m.updateFileStatus(j,"uploading",j.size);else{m.updateFileStatus(j,"uploading",Y);return}}},!1),f.onreadystatechange=()=>{f.readyState<4||(f.status&&f.status<400?(m.uploadedFiles.value=m.uploadedFiles.value.concat(t),t.forEach(u=>{m.updateFileStatus(u,"uploaded")}),w("uploaded",{files:t,xhr:f})):(v=!0,m.uploadedSize.value-=p,m.queuedFiles.value=m.queuedFiles.value.concat(t),t.forEach(u=>{m.updateFileStatus(u,"failed")}),w("failed",{files:t,xhr:f})),y.value--,d.value=d.value.filter(u=>u!==f))},f.open(l("method",t),s),l("withCredentials",t)===!0&&(f.withCredentials=!0);const V=l("headers",t);V!==void 0&&V.forEach(u=>{f.setRequestHeader(u.name,u.value)});const $=l("sendRaw",t);t.forEach(u=>{m.updateFileStatus(u,"uploading",0),$!==!0&&o.append(l("fieldName",u),u,u.name),u.xhr=f,u.__abort=()=>{f.abort()},_+=u.size}),w("uploading",{files:t,xhr:f}),d.value.push(f),$===!0?f.send(new Blob(t)):f.send(o)}return{isUploading:T,isBusy:I,abort:g,upload:h}}var vl={name:rl,props:ul,emits:dl,injectPlugin:cl},ml=sl(vl);const fl={class:"bg-white"},_l={class:"row",style:{"min-height":"50vh","max-width":"80vh"}},gl={class:"col"},pl=C("div",{class:"text-h6"},"Preview Photo",-1),Sl={__name:"uploadPhoto",props:{photo:String},emits:[...se.emits],setup(e){const w=de(),m=k(""),d=e;ue(()=>{d.photo!==""&&(m.value=d.photo)});const S=()=>{w.dialog({title:"Confirmation",message:"Do you want to remove this photo ?",cancel:!0,persistent:!0}).onOk(async()=>{U("")})},y=async h=>{const M=await i(h[0]);M&&(console.log(M),U(M))};function i(h){var M=new FileReader;return h&&M.readAsDataURL(h),new Promise((b,t)=>{M.onload=function(c){b(c.target.result)}})}const{dialogRef:T,onDialogHide:I,onDialogOK:U,onDialogCancel:g}=se();return(h,M)=>(O(),x(pe,{ref_key:"dialogRef",ref:T,onHide:te(I)},{default:n(()=>[C("div",fl,[C("div",_l,[C("div",gl,[m.value?(O(),x(_e,{key:0},{default:n(()=>[a(J,null,{default:n(()=>[pl]),_:1}),a(Ye),a(J,null,{default:n(()=>[a(Xt,{src:m.value,style:{width:"80vh"}},null,8,["src"])]),_:1}),a(ge,{vertical:""},{default:n(()=>[a(N,{flat:"",onClick:M[0]||(M[0]=b=>S())},{default:n(()=>[P("Change Photo")]),_:1})]),_:1})]),_:1})):(O(),x(ml,{key:1,class:"full-height",url:b=>y(b),label:"Upload Photo",color:"amber","text-color":"black",accept:"image/*",style:{"min-width":"500px"},"max-files":1,"auto-upload":"","send-raw":""},null,8,["url"]))])])])]),_:1},8,["onHide"]))}},hl=C("div",{class:"text-h6"},"Create Order",-1),Cl={style:{border:"1px black solid","border-radius":"10px"}},bl=C("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[C("b",null,"Header")],-1),yl={class:"row"},Tl={class:"col"},Dl={class:"col q-pl-md"},wl={class:"row items-center justify-end"},Ml={class:"row"},kl={class:"col"},Vl={class:"row q-py-md"},Rl={class:"col"},Il=C("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[C("b",null,"Detail Items")],-1),Ul={key:0,class:"row q-pb-sm"},Fl={class:"col text-right"},Ee={__name:"serviceCreateOrder",props:{header:Array,detail:Array,mode:String},setup(e){const{dialogRef:w,onDialogHide:m,onDialogOK:d,onDialogCancel:S}=se(),y=de(),i=e;ue(async()=>{i.header&&(await c(),await o(),T.value=i.header,g.value=i.detail)});const T=k({SRVH_DOCNO:"",SRVH_ISSDT:fe.formatDate(Date.now(),"YYYY-MM-DD"),SRVH_CUSCD:""}),I=k([]),U=k([]),g=k([]),h=k(!1),M=k(0),b=k(0),t=(p,_,v,V)=>{_(async()=>{V==="cust"&&await c(p),V==="item"&&await o(p)})},c=async p=>{h.value=!0,await K.post("customer/searchAPI",{searchValue:p}).then(_=>{h.value=!1,U.value=_.data.data}).catch(()=>{h.value=!1})},o=async p=>{h.value=!0,await K.post("item/searchAPI",{searchValue:p}).then(_=>{h.value=!1,I.value=_.data.data}).catch(()=>{h.value=!1})},f=()=>{g.value.push({TSRVD_ITMCD:"",TSRVD_LINE:g.value.length+1,TSRVD_QTY:1,TSRVD_CUSTRMK:"",TSRVD_PHOTO:""})},l=p=>{y.dialog({title:"Confirmation",message:`Do you want to delete this lines no ${p+1} ?`,cancel:!0,persistent:!0}).onOk(async()=>{g.value.splice(p,1)}).catch(_=>{y.notify({color:"red",message:"Something's wrong."})})},s=p=>{y.dialog({component:Pt,componentProps:{ItemCat:"SERVICE_ITEM",ItemType:3}}).onOk(async _=>{await o(""),g.value[p].TSRVD_ITMCD=_.MITM_ITMNM})},z=()=>{y.dialog({title:"Confirmation",message:"Do you want to submit this data ?",cancel:!0,persistent:!0}).onOk(async()=>{h.value=!0,await K.post("servicesAdmin",{header:T.value,detail:g.value}).then(p=>{h.value=!1,d()})})},A=()=>{y.dialog({component:jt}).onOk(async p=>{console.log(p),await c(""),g.value[idx].SRVH_CUSCD=p.MCUS_CUSCD})},D=p=>{y.dialog({component:Sl,componentProps:{photo:g.value[p].TSRVD_PHOTO}}).onOk(async _=>{console.log(_),_?g.value[p].TSRVD_PHOTO=_:g.value[p].TSRVD_PHOTO="",b.value=b.value+1,console.log(g.value[p])})};return(p,_)=>(O(),x(pe,{ref_key:"dialogRef",ref:w,onHide:te(m),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:n(()=>[a(_e,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:n(()=>[a(J,null,{default:n(()=>[hl]),_:1}),a(J,{class:"q-pa-sm"},{default:n(()=>[C("fieldset",Cl,[bl,C("div",yl,[C("div",Tl,[a(B,{label:"SPK No",readonly:"",dense:"",modelValue:T.value.SRVH_DOCNO,"onUpdate:modelValue":_[0]||(_[0]=v=>T.value.SRVH_DOCNO=v),filled:""},null,8,["modelValue"])]),C("div",Dl,[a(B,{filled:"",modelValue:T.value.SRVH_ISSDT,"onUpdate:modelValue":_[2]||(_[2]=v=>T.value.SRVH_ISSDT=v),dense:"",label:"Issue Date",loading:h.value,onClick:_[3]||(_[3]=v=>p.quotationIssueDate.qDateProxy.show()),mask:"####-##-##","fill-mask":"",hint:"Mask: YYYY-MM-DD",readonly:i.mode==="view"},{append:n(()=>[a(we,{name:"event",class:"cursor-pointer",disable:i.mode==="view"},{default:n(()=>[a(yt,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:n(()=>[a(Tt,{modelValue:T.value.SRVH_ISSDT,"onUpdate:modelValue":_[1]||(_[1]=v=>T.value.SRVH_ISSDT=v),mask:"YYYY-MM-DD"},{default:n(()=>[C("div",wl,[qe(a(N,{label:"Close",color:"primary",flat:""},null,512),[[Dt]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["disable"])]),_:1},8,["modelValue","loading","readonly"])])]),C("div",Ml,[C("div",kl,[a(re,{dense:"",filled:"",label:"Customer Choose",modelValue:T.value.SRVH_CUSCD,"onUpdate:modelValue":_[5]||(_[5]=v=>T.value.SRVH_CUSCD=v),"use-input":"","input-debounce":"500",options:U.value,onFilter:_[6]||(_[6]=(v,V,$)=>t(v,V,$,"cust")),behavior:"dialog","option-label":"MCUS_CUSNM","option-value":"MCUS_CUSCD","emit-value":"","map-options":"",loading:h.value,readonly:i.mode==="view"},{after:n(()=>[a(N,{round:"",dense:"",flat:"",icon:"person_add",onClick:_[4]||(_[4]=v=>A()),color:"cyan"},{default:n(()=>[a(Q,null,{default:n(()=>[P("Add new customer")]),_:1})]),_:1})]),_:1},8,["modelValue","options","loading","readonly"])])])]),C("div",Vl,[C("div",Rl,[a(ft,{modelValue:M.value,"onUpdate:modelValue":_[7]||(_[7]=v=>M.value=v),label:"Internal Service ?",color:"teal","true-value":1,"false-value":0,disable:h.value},null,8,["modelValue","disable"])])]),(O(),ee("fieldset",{style:{border:"1px black solid","border-radius":"10px",height:"35vh",overflow:"auto"},key:b.value},[Il,i.mode!=="view"?(O(),ee("div",Ul,[C("div",Fl,[a(N,{flat:"",icon:"add",color:"blue",onClick:_[8]||(_[8]=v=>f())},{default:n(()=>[a(Q,null,{default:n(()=>[P("Add lines")]),_:1})]),_:1})])])):X("",!0),a(ht,{bordered:"",dense:""},{default:n(()=>[g.value.length>0?(O(!0),ee(be,{key:0},ye(g.value,(v,V)=>(O(),x(Ne,{key:V,class:"q-my-sm",dense:""},{default:n(()=>[a(Z,{avatar:""},{default:n(()=>[a(_t,{"text-color":"blue"},{default:n(()=>[P(ne(V+1),1)]),_:2},1024)]),_:2},1024),a(Z,null,{default:n(()=>[a(xe,null,{default:n(()=>[M.value==1?(O(),x(re,{key:0,dense:"",filled:"",label:"Item Name",modelValue:v.TSRVD_ITMCD,"onUpdate:modelValue":$=>v.TSRVD_ITMCD=$,"use-input":"","input-debounce":"500",options:I.value,onFilter:_[9]||(_[9]=($,u,L)=>t($,u,L,"item")),behavior:"dialog","option-label":"MITM_ITMNM","option-value":"MITM_ITMNM","emit-value":"","map-options":"",loading:h.value},null,8,["modelValue","onUpdate:modelValue","options","loading"])):(O(),x(N,{key:1,icon:"library_add",color:"indigo",outline:"",onClick:$=>s(V),dense:"",label:"Input Item"},{default:n(()=>[a(Q,null,{default:n(()=>[P("Add new item")]),_:1})]),_:2},1032,["onClick"]))]),_:2},1024)]),_:2},1024),a(Z,null,{default:n(()=>[a(B,{label:"Qty",filled:"",dense:"",modelValue:v.TSRVD_QTY,"onUpdate:modelValue":$=>v.TSRVD_QTY=$},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(Z,null,{default:n(()=>[a(B,{label:"Problem",filled:"",dense:"",modelValue:v.TSRVD_CUSTRMK,"onUpdate:modelValue":$=>v.TSRVD_CUSTRMK=$},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),i.mode!=="view"?(O(),x(Z,{key:0,side:""},{default:n(()=>[a(N,{icon:"delete",color:"red",flat:"",onClick:$=>l(V),dense:""},{default:n(()=>[a(Q,null,{default:n(()=>[P("Delete line")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)):X("",!0),i.mode!=="view"&&M.value==1?(O(),x(Z,{key:1,side:""},{default:n(()=>[a(N,{icon:"library_add",color:"indigo",flat:"",onClick:$=>s(V),dense:""},{default:n(()=>[a(Q,null,{default:n(()=>[P("Add new item")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)):X("",!0),i.mode!=="view"?(O(),x(Z,{key:2,side:""},{default:n(()=>[a(N,{icon:"photo",color:v.TSRVD_PHOTO!=""?"blue":"orange",flat:"",onClick:$=>D(V),dense:""},{default:n(()=>[a(Q,null,{default:n(()=>[P("Add photo")]),_:1})]),_:2},1032,["color","onClick"])]),_:2},1024)):X("",!0)]),_:2},1024))),128)):qe((O(),x(Ne,{key:1,class:"q-my-sm",clickable:""},{default:n(()=>[a(Z,null,{default:n(()=>[a(xe,null,{default:n(()=>[P(" No Items Added ")]),_:1})]),_:1})]),_:1})),[[gt]])]),_:1})]))]),_:1}),a(ge,{align:"right"},{default:n(()=>[a(N,{label:"OK",color:"primary",onClick:_[10]||(_[10]=v=>z()),disable:h.value,loading:h.value},null,8,["disable","loading"]),a(N,{flat:"",label:"Cancel",color:"red",onClick:te(S),loading:h.value},null,8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}};const Ol={class:"q-pa-md"},ql={class:"row q-pb-md"},$l=C("div",{class:"col"},[C("span",{class:"text-h4"},"Receive Order ")],-1),Nl={class:"col text-right"},xl={class:"row q-pt-md"},Pl={class:"col"},Al={key:1},Zl={__name:"serviceView",setup(e){const w=de(),m=k("SRVH_DOCNO"),d=k(""),S=k([]),y=k([{name:"SRVH_DOCNO",label:"SPK No",field:"SRVH_DOCNO",sortable:!0,align:"left"},{name:"MCUS_CUSNM",label:"Cust",field:"MCUS_CUSNM",sortable:!0,align:"left"},{name:"STAT",label:"Status",field:o=>c(o),sortable:!0,align:"left"},{name:"created_at",label:"Created Date",field:"created_at",sortable:!0,align:"left",format:o=>fe.formatDate(new Date(o),"DD MMM YYYY")}]),i=k(!1),T=k(null);ue(()=>{I(),T.value=setInterval(()=>{I()},1e4)});const I=async()=>{i.value=!0,await K.post("servicesAdmins/search",{searchBy:m.value,searchValue:d.value}).then(o=>{i.value=!1,S.value=o.data.data}).catch(o=>{i.value=!1})},U=()=>{w.dialog({component:Ee}).onOk(async o=>{I()})},g=o=>{const f={SRVH_DOCNO:o.SRVH_DOCNO,SRVH_ISSDT:fe.formatDate(o.SRVH_ISSDT,"YYYY-MM-DD"),SRVH_CUSCD:o.MCUS_CUSCD};let l=[];o.detail.map(s=>{l.push({id:s.id,TSRVD_ITMCD:s.TSRVD_ITMCD,TSRVD_LINE:s.TSRVD_LINE,TSRVD_QTY:s.TSRVD_QTY,TSRVD_CUSTRMK:s.TSRVD_CUSTRMK,TSRVD_REMARK:s.TSRVD_REMARK,TSRVD_FLGSTS:s.TSRVD_FLGSTS,listFixDet:s.list_fix_det})}),w.dialog({component:wt,componentProps:{header:f,detail:l,mode:o.detail.filter(s=>s.TSRVD_FLGSTS===1).length===o.detail.length?"approvecust":"view"}}).onOk(async s=>{I()})},h=o=>{window.open("https://joss.jatpowerindo.co.id/servicesAdmins/printInvoice/"+btoa(o),"_blank").focus()},M=o=>{const f={SRVH_DOCNO:o.SRVH_DOCNO,SRVH_ISSDT:fe.formatDate(o.SRVH_ISSDT,"YYYY-MM-DD"),SRVH_CUSCD:o.MCUS_CUSCD};let l=[];o.detail.map(s=>{l.push({TSRVD_ITMCD:s.TSRVD_ITMCD,TSRVD_LINE:s.TSRVD_LINE,TSRVD_QTY:s.TSRVD_QTY,TSRVD_CUSTRMK:s.TSRVD_CUSTRMK})}),w.dialog({component:Ee,componentProps:{header:f,detail:l}}).onOk(async s=>{I()})},b=o=>{w.dialog({title:"Confirmation",message:"Do you want to proceed to service ?",cancel:!0,persistent:!0}).onOk(async()=>{i.value=!0,await K.put(`servicesAdmins/updateDetByIDHead/${btoa(o.id)}`,{TSRVD_FLGSTS:2}).then(f=>{i.value=!1}).catch(f=>{i.value=!1})})},t=o=>{w.dialog({title:"Confirmation",message:"Are you sure want to delete this order ?",cancel:!0,persistent:!0}).onOk(async()=>{i.value=!0,await K.delete(`servicesAdmin/${btoa(o.SRVH_DOCNO)}`).then(f=>{i.value=!1}).catch(f=>{i.value=!1})})},c=o=>{const f=o.detail.filter(D=>D.TSRVD_FLGSTS==0),l=o.detail.filter(D=>D.TSRVD_FLGSTS==1),s=o.detail.filter(D=>D.TSRVD_FLGSTS==2),z=o.detail.filter(D=>D.TSRVD_FLGSTS==3),A=o.detail.filter(D=>D.TSRVD_FLGSTS==5);if(f.length==o.detail.length)return{color:"red",label:"No Price Added yet !",icon:"edit"};if(l.length>0&&l.length<o.detail.length)return{color:"warning",label:"Please Add item & price",icon:"payments"};if(A.length>0&&A.length==o.detail.length)return{color:"indigo",label:"Added Price Done, Waiting Manager Confirmation",icon:"price_check"};if(l.length>0&&l.length==o.detail.length)return{color:"green",label:"Manager has been approve, Waiting Cust. Confirmation",icon:"price_check"};if(s.length>0&&s.length>=o.detail.length)return{color:"cyan",label:"Cust. has been approved, continue to fix.",icon:"engineering"};if(z.length>0&&z.length===o.detail.length)return{color:"primary",label:"Fix has been done",icon:"fact_check"}};return(o,f)=>(O(),ee("div",Ol,[C("div",ql,[$l,C("div",Nl,[a(N,{icon:"add",color:"blue",onClick:U},{default:n(()=>[a(Q,null,{default:n(()=>[P("Create New Order")]),_:1})]),_:1})])]),a(Ye),C("div",xl,[C("div",Pl,[a(Ct,{title:"Created Order",rows:S.value,columns:y.value,"row-key":"name",loading:i.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":n(()=>[a(re,{outlined:"",modelValue:m.value,"onUpdate:modelValue":f[0]||(f[0]=l=>m.value=l),options:y.value,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),a(B,{borderless:"",dense:"",modelValue:d.value,"onUpdate:modelValue":[f[1]||(f[1]=l=>d.value=l),f[2]||(f[2]=l=>o.dataQuo())],placeholder:"Search",outlined:"",debounce:"1000"},{append:n(()=>[a(we,{name:"search"})]),_:1},8,["modelValue"])]),header:n(l=>[a(Ae,{props:l},{default:n(()=>[(O(!0),ee(be,null,ye(l.cols,s=>(O(),x(Pe,{key:s.name,props:l},{default:n(()=>[P(ne(s.label),1)]),_:2},1032,["props"]))),128)),a(Pe,{"auto-width":""},{default:n(()=>[P("Action")]),_:1})]),_:2},1032,["props"])]),body:n(l=>[a(Ae,{props:l},{default:n(()=>[(O(!0),ee(be,null,ye(l.cols,s=>(O(),x(Le,{key:s.name,props:l},{default:n(()=>[s.name==="STAT"?(O(),x(bt,{key:0,clickable:"",color:s.value.color,"text-color":"white",icon:s.value.icon},{default:n(()=>[P(ne(s.value.label),1)]),_:2},1032,["color","icon"])):(O(),ee("span",Al,ne(s.value),1))]),_:2},1032,["props"]))),128)),a(Le,{"auto-width":""},{default:n(()=>[l.row.detail.filter(s=>s.TSRVD_FLGSTS>0).length===0?(O(),x(N,{key:0,flat:"",color:"orange",icon:"edit",onClick:s=>M(l.row),dense:""},{default:n(()=>[a(Q,null,{default:n(()=>[P("Edit this Order")]),_:1})]),_:2},1032,["onClick"])):X("",!0),l.row.detail.filter(s=>s.TSRVD_FLGSTS>0).length===l.row.detail.length?(O(),x(N,{key:1,flat:"",color:"indigo",icon:"print",onClick:s=>h(l.row.SRVH_DOCNO),dense:""},{default:n(()=>[a(Q,null,{default:n(()=>[P("Print this order")]),_:1})]),_:2},1032,["onClick"])):X("",!0),l.row.detail.filter(s=>s.TSRVD_FLGSTS>0).length===0?(O(),x(N,{key:2,flat:"",color:"red",icon:"delete",onClick:s=>t(l.row.SRVH_DOCNO),dense:""},{default:n(()=>[a(Q,null,{default:n(()=>[P(ne(l.row.detail.filter(s=>s.TSRVD_FLGSTS>0).length>0?"Cannot delete processed order":"Delete this Order"),1)]),_:2},1024)]),_:2},1032,["onClick"])):X("",!0),l.row.detail.filter(s=>s.TSRVD_FLGSTS>0).length>0?(O(),x(N,{key:3,flat:"",color:"cyan",icon:"visibility",onClick:s=>g(l.row),dense:""},{default:n(()=>[a(Q,null,{default:n(()=>[P("View this Order")]),_:1})]),_:2},1032,["onClick"])):X("",!0),l.row.detail.filter(s=>s.TSRVD_FLGSTS==1).length===l.row.detail.length?(O(),x(N,{key:4,flat:"",color:"indigo",icon:"check",onClick:s=>b(l.row),dense:""},{default:n(()=>[a(Q,null,{default:n(()=>[P(ne(l.row.detail.filter(s=>s.TSRVD_FLGSTS>0).length!==l.row.detail.length?"Please wait until all item checked":"Proceed all item to service"),1)]),_:2},1024)]),_:2},1032,["onClick"])):X("",!0)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{Zl as default};
