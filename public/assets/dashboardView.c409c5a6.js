import{s as _,o as x,B as s,C as h,D as e,E as t,J as D,K as m,R as p,aY as b,aZ as T,a_ as L,H as k,a$ as c,ap as H,b0 as V,L as N,Q as A,M as $,O as R,I as l,P as K,aa as O,S as U,b4 as J}from"./index.2a87eac4.js";import{u as E,b as q,Q as z,l as G,m as j,n as S,a as M,o as F}from"./use-dialog-plugin-component.d3f7d78f.js";import{d as Y,Q as I,b as Z}from"./date.c54f579d.js";import{api_web as B}from"./axios.bbd89e33.js";const W=l("div",{class:"text-h6"},"Review Item List",-1),X={__name:"viewListApprovalItem",props:{cd:String,typeCD:String},setup(P){const{dialogRef:C,onDialogHide:w,onDialogOK:y,onDialogCancel:f}=E();q();const i=P,g=_(!1),v=_([]);x(()=>{d()});const d=async()=>{await B.get(`${i.typeCD}/${btoa(i.cd)}`).then(u=>{g.value=!1,v.value=u.data}).catch(u=>{g.value=!1})};return(u,o)=>(s(),h(R,{ref_key:"dialogRef",ref:C,onHide:$(w),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:e(()=>[t(D,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:e(()=>[t(m,null,{default:e(()=>[W]),_:1}),t(m,{class:"q-pa-sm",style:{height:"70vh",overflow:"auto"}},{default:e(()=>[i.typeCD==="quotation"?(s(),h(z,{key:0,dark:"",bordered:"",separator:""},{default:e(()=>[(s(!0),p(b,null,T(v.value.dataItem,(a,r)=>L((s(),h(G,{clickable:"",key:r},{default:e(()=>[t(j,null,{default:e(()=>[t(S,null,{default:e(()=>[k(c(a.MITM_ITMNM),1)]),_:2},1024),t(S,{caption:""},{default:e(()=>[k("Item Name")]),_:1})]),_:2},1024)]),_:2},1024)),[[H]])),128))]),_:1})):V("",!0)]),_:1}),t(N,{align:"center"},{default:e(()=>[t(A,{label:"OK",color:"primary",onClick:o[0]||(o[0]=a=>$(y)()),disable:u.stateSubmit},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},ee=l("div",{class:"text-h6"},"Approval List",-1),te={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},ae={class:"text-h5 text-bold"},oe={class:"text-h6 text-bold"},le={class:"text-subtitle2"},se={class:"row"},ne={class:"col"},ie={class:"col text-right"},re={__name:"viewListApproval",props:{listApprv:Array,typeAPI:String},setup(P){const C=q(),w=P,y=_([{name:"APP_CD",label:"Doc Code",field:"APP_CD"},{name:"APP_CUSNM",label:"Customer",field:"APP_CUSNM"},{name:"APP_SBJCT",label:"Subject",field:"APP_SBJCT"},{name:"APP_ATTN",label:"Attn",field:"APP_ATTN"},{name:"CREATED_AT",label:"Created Date",field:"CREATED_AT"}]),f=_(""),i=(a,r="days")=>{const n=new Date,Q=new Date(a);return Y.getDateDiff(n,Q,r)},g=a=>{const r="";C.dialog({component:X,componentProps:{cd:a,typeCD:r}}).onOk(async n=>{quotationGroupConditions.value=n.MCONDITION_RPT_STAT,quotationConditions.value=n.group})},{dialogRef:v,onDialogHide:d,onDialogOK:u,onDialogCancel:o}=E();return(a,r)=>(s(),h(R,{ref_key:"dialogRef",ref:v,onHide:$(d),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:e(()=>[t(D,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:e(()=>[t(m,null,{default:e(()=>[ee]),_:1}),t(m,{class:"q-pa-sm",style:{height:"70vh",overflow:"auto"}},{default:e(()=>[t(M,{grid:"",flat:"",bordered:"","card-container-class":a.cardContainerClass,title:"Outstanding Approval",rows:w.listApprv,columns:y.value,"row-key":"name",filter:f.value,"hide-header":"",pagination:{rowsPerPage:50},"rows-per-page-options":a.rowsPerPageOptions},{"top-right":e(()=>[t(K,{borderless:"",dense:"",debounce:"300",modelValue:f.value,"onUpdate:modelValue":r[0]||(r[0]=n=>f.value=n),placeholder:"Search"},{append:e(()=>[t(O,{name:"search"})]),_:1},8,["modelValue"])]),item:e(n=>[l("div",te,[t(D,{flat:"",bordered:""},{default:e(()=>[t(m,{class:"text-center bg-secondary text-white"},{default:e(()=>[l("div",ae,c(n.row.APP_CUSNM),1)]),_:2},1024),t(U),t(m,null,{default:e(()=>[l("div",oe,c(n.row.APP_CD),1),l("div",le,c(n.row.APP_SBJCT),1)]),_:2},1024),t(m,null,{default:e(()=>[l("div",se,[l("div",ne,[t(A,{label:"Preview",color:"primary",outline:"",onClick:Q=>g(n.row.APP_CD)},null,8,["onClick"])]),l("div",ie,c(i(n.row.CREATED_AT)<30?`${i(n.row.CREATED_AT)} Days Ago`:`${i(n.row.CREATED_AT,"months")} Month ago`),1)])]),_:2},1024)]),_:2},1024)])]),_:1},8,["card-container-class","rows","columns","filter","rows-per-page-options"])]),_:1}),t(N,{align:"right"},{default:e(()=>[t(A,{label:"OK",color:"primary",onClick:r[1]||(r[1]=n=>$(u)()),disable:a.stateSubmit},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},ce={class:"q-pa-md bg-grey-5 window-height"},de={class:"row"},ue={class:"row"},pe={class:"col"},_e={class:"text-h3 text-cyan"},me={class:"text-subtitle2 text-cyan"},fe={class:"col text-right"},ge={class:"row q-pa-sm"},he={class:"col"},ve={key:1},Pe={__name:"dashboardView",setup(P){const C=q(),w=_([{total:900,title:"Total Sales",icon:"shopping_cart",color:"cyan"},{total:900,title:"Total Purchase",icon:"shopping_bag",color:"cyan"},{total:900,title:"Total Profit",icon:"payments",color:"cyan"},{total:15,title:"Total Customer",icon:"group",color:"cyan"},{total:15,title:"Total Customer",icon:"group",color:"cyan"},{total:15,title:"Total Customer",icon:"group",color:"cyan"},{total:15,title:"Total Customer",icon:"group",color:"cyan"},{total:15,title:"Total Customer",icon:"group",color:"cyan"}]),y=_([{name:"name",label:"Business",field:"name",sortable:!0,align:"left"},{name:"quot",label:"Quotation",field:"quot_count",sortable:!0,align:"center"},{name:"pr",label:"Purchase Request",field:"pr_count",sortable:!0,align:"center"},{name:"po",label:"Purchase Order",field:"po_count",sortable:!0,align:"center"}]),f=_([]),i=_(!1);_(null),x(async()=>{await g()});const g=async()=>{i.value=!0,await B.get("/approval/notificationsAPI/top-user").then(d=>{i.value=!1,f.value=d.data}).catch(d=>{i.value=!1})},v=(d,u)=>{C.dialog({component:re,componentProps:{listApprv:d,typeAPI:u}}).onOk(async o=>{quotationGroupConditions.value=o.MCONDITION_RPT_STAT,quotationConditions.value=o.group})};return(d,u)=>(s(),p("div",ce,[l("div",de,[(s(!0),p(b,null,T(w.value,(o,a)=>(s(),p("div",{class:J("col-3 q-pa-sm"),key:a},[t(D,null,{default:e(()=>[t(m,null,{default:e(()=>[l("div",ue,[l("div",pe,[l("div",_e,c(o.total),1),l("div",me,c(o.title),1)]),l("div",fe,[t(O,{name:o.icon,size:"4.4em",color:o.color},null,8,["name","color"])])])]),_:2},1024)]),_:2},1024)]))),128))]),l("div",ge,[l("div",he,[t(M,{flat:"",bordered:"",title:"Approval List",rows:f.value,columns:y.value,"row-key":"name",loading:i.value},{"top-right":e(()=>[t(A,{flat:"",icon:"refresh",color:"cyan",onClick:g})]),header:e(o=>[t(I,{props:o},{default:e(()=>[(s(!0),p(b,null,T(o.cols,a=>(s(),h(F,{key:a.name,props:o},{default:e(()=>[k(c(a.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:e(o=>[t(I,{props:o},{default:e(()=>[(s(!0),p(b,null,T(o.cols,a=>(s(),h(Z,{key:a.name,props:o},{default:e(()=>[a.name==="quot"||a.name==="pr"||a.name==="po"||a.name==="spk"?(s(),p(b,{key:0},[a.value>0?(s(),h(A,{key:0,flat:"",color:"blue",onClick:r=>v(o.row[a.name.split("_")[0]],a.name)},{default:e(()=>[l("b",null,c(a.value),1)]),_:2},1032,["onClick"])):(s(),p("span",ve,c(a.value),1))],64)):(s(),p(b,{key:1},[k(c(a.value),1)],64))]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{Pe as default};
