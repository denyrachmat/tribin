import{i as vt,n as H,a as Ue,u as ft,k as mt,l as ht,m as Oe}from"./QTable.97ad794c.js";import{b1 as pt,ag as U,n as _t,b8 as Dt,a9 as ne,b9 as _e,ae as Le,aO as De,aA as re,a8 as ge,ab as gt,c as yt,ah as wt,aH as Ct,aj as bt,b0 as Tt,s as q,a as k,w as xe,d as kt,h as w,g as Vt,aZ as St,F as qt,be as Mt,aa as Et,T as F,Q as L,o as Fe,B as Q,C as Ce,D as d,E as r,L as At,M as Je,I as M,bl as Ot,H as P,O as be,aX as Lt,Z as Te,am as R,X as xt,Y as Jt,P as ye,R as Pe,S as Ye}from"./index.ff98d04d.js";import{Q as He,a as Qe}from"./QTd.760b500a.js";import{Q as K}from"./QTooltip.70ef9bcd.js";import{api_web as oe}from"./axios.873920e9.js";import{Q as Pt}from"./QBadge.4d2468a7.js";import{u as Yt,b as Ht,c as Qt,g as $t,Q as ue,a as $e,C as ie}from"./ClosePopup.3b8bc05c.js";import{g as Be,s as Ie}from"./touch.3df10340.js";import{_ as se,f as Bt}from"./date.1c3dff7a.js";import{_ as It}from"./assignConditionsView.8576eef3.js";import{_ as Nt}from"./viewAssignedCond.c3e42cf5.js";import"./use-cache.b0833c75.js";function we(a,v,_){const b=re(a);let e,n=b.left-v.event.x,c=b.top-v.event.y,g=Math.abs(n),y=Math.abs(c);const m=v.direction;m.horizontal===!0&&m.vertical!==!0?e=n<0?"left":"right":m.horizontal!==!0&&m.vertical===!0?e=c<0?"up":"down":m.up===!0&&c<0?(e="up",g>y&&(m.left===!0&&n<0?e="left":m.right===!0&&n>0&&(e="right"))):m.down===!0&&c>0?(e="down",g>y&&(m.left===!0&&n<0?e="left":m.right===!0&&n>0&&(e="right"))):m.left===!0&&n<0?(e="left",g<y&&(m.up===!0&&c<0?e="up":m.down===!0&&c>0&&(e="down"))):m.right===!0&&n>0&&(e="right",g<y&&(m.up===!0&&c<0?e="up":m.down===!0&&c>0&&(e="down")));let x=!1;if(e===void 0&&_===!1){if(v.event.isFirst===!0||v.event.lastDir===void 0)return{};e=v.event.lastDir,x=!0,e==="left"||e==="right"?(b.left-=n,g=0,n=0):(b.top-=c,y=0,c=0)}return{synthetic:x,payload:{evt:a,touch:v.event.mouse!==!0,mouse:v.event.mouse===!0,position:b,direction:e,isFirst:v.event.isFirst,isFinal:_===!0,duration:Date.now()-v.event.time,distance:{x:g,y},offset:{x:n,y:c},delta:{x:b.left-v.event.lastX,y:b.top-v.event.lastY}}}}let Ut=0;var Ft=pt({name:"touch-pan",beforeMount(a,{value:v,modifiers:_}){if(_.mouse!==!0&&U.has.touch!==!0)return;function b(n,c){_.mouse===!0&&c===!0?gt(n):(_.stop===!0&&De(n),_.prevent===!0&&Le(n))}const e={uid:"qvtp_"+Ut++,handler:v,modifiers:_,direction:Be(_),noop:_t,mouseStart(n){Ie(n,e)&&Dt(n)&&(ne(e,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),e.start(n,!0))},touchStart(n){if(Ie(n,e)){const c=n.target;ne(e,"temp",[[c,"touchmove","move","notPassiveCapture"],[c,"touchcancel","end","passiveCapture"],[c,"touchend","end","passiveCapture"]]),e.start(n)}},start(n,c){if(U.is.firefox===!0&&_e(a,!0),e.lastEvt=n,c===!0||_.stop===!0){if(e.direction.all!==!0&&(c!==!0||e.modifiers.mouseAllDir!==!0&&e.modifiers.mousealldir!==!0)){const m=n.type.indexOf("mouse")>-1?new MouseEvent(n.type,n):new TouchEvent(n.type,n);n.defaultPrevented===!0&&Le(m),n.cancelBubble===!0&&De(m),Object.assign(m,{qKeyEvent:n.qKeyEvent,qClickOutside:n.qClickOutside,qAnchorHandled:n.qAnchorHandled,qClonedBy:n.qClonedBy===void 0?[e.uid]:n.qClonedBy.concat(e.uid)}),e.initialEvent={target:n.target,event:m}}De(n)}const{left:g,top:y}=re(n);e.event={x:g,y,time:Date.now(),mouse:c===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:g,lastY:y}},move(n){if(e.event===void 0)return;const c=re(n),g=c.left-e.event.x,y=c.top-e.event.y;if(g===0&&y===0)return;e.lastEvt=n;const m=e.event.mouse===!0,x=()=>{b(n,m);let s;_.preserveCursor!==!0&&_.preservecursor!==!0&&(s=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),m===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),vt(),e.styleCleanup=o=>{if(e.styleCleanup=void 0,s!==void 0&&(document.documentElement.style.cursor=s),document.body.classList.remove("non-selectable"),m===!0){const T=()=>{document.body.classList.remove("no-pointer-events--children")};o!==void 0?setTimeout(()=>{T(),o()},50):T()}else o!==void 0&&o()}};if(e.event.detected===!0){e.event.isFirst!==!0&&b(n,e.event.mouse);const{payload:s,synthetic:o}=we(n,e,!1);s!==void 0&&(e.handler(s)===!1?e.end(n):(e.styleCleanup===void 0&&e.event.isFirst===!0&&x(),e.event.lastX=s.position.left,e.event.lastY=s.position.top,e.event.lastDir=o===!0?void 0:s.direction,e.event.isFirst=!1));return}if(e.direction.all===!0||m===!0&&(e.modifiers.mouseAllDir===!0||e.modifiers.mousealldir===!0)){x(),e.event.detected=!0,e.move(n);return}const E=Math.abs(g),D=Math.abs(y);E!==D&&(e.direction.horizontal===!0&&E>D||e.direction.vertical===!0&&E<D||e.direction.up===!0&&E<D&&y<0||e.direction.down===!0&&E<D&&y>0||e.direction.left===!0&&E>D&&g<0||e.direction.right===!0&&E>D&&g>0?(e.event.detected=!0,e.move(n)):e.end(n,!0))},end(n,c){if(e.event!==void 0){if(ge(e,"temp"),U.is.firefox===!0&&_e(a,!1),c===!0)e.styleCleanup!==void 0&&e.styleCleanup(),e.event.detected!==!0&&e.initialEvent!==void 0&&e.initialEvent.target.dispatchEvent(e.initialEvent.event);else if(e.event.detected===!0){e.event.isFirst===!0&&e.handler(we(n===void 0?e.lastEvt:n,e).payload);const{payload:g}=we(n===void 0?e.lastEvt:n,e,!0),y=()=>{e.handler(g)};e.styleCleanup!==void 0?e.styleCleanup(y):y()}e.event=void 0,e.initialEvent=void 0,e.lastEvt=void 0}}};if(a.__qtouchpan=e,_.mouse===!0){const n=_.mouseCapture===!0||_.mousecapture===!0?"Capture":"";ne(e,"main",[[a,"mousedown","mouseStart",`passive${n}`]])}U.has.touch===!0&&ne(e,"main",[[a,"touchstart","touchStart",`passive${_.capture===!0?"Capture":""}`],[a,"touchmove","noop","notPassiveCapture"]])},updated(a,v){const _=a.__qtouchpan;_!==void 0&&(v.oldValue!==v.value&&(typeof value!="function"&&_.end(),_.handler=v.value),_.direction=Be(v.modifiers))},beforeUnmount(a){const v=a.__qtouchpan;v!==void 0&&(v.event!==void 0&&v.end(),ge(v,"main"),ge(v,"temp"),U.is.firefox===!0&&_e(a,!1),v.styleCleanup!==void 0&&v.styleCleanup(),delete a.__qtouchpan)}});function Rt(a,v){if(a.hour!==null){if(a.minute===null)return"minute";if(v===!0&&a.second===null)return"second"}return"hour"}function Kt(){const a=new Date;return{hour:a.getHours(),minute:a.getMinutes(),second:a.getSeconds(),millisecond:a.getMilliseconds()}}var Ne=yt({name:"QTime",props:{...wt,...Ct,...Yt,mask:{default:null},format24h:{type:Boolean,default:null},defaultDate:{type:String,validator:a=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(a)},options:Function,hourOptions:Array,minuteOptions:Array,secondOptions:Array,withSeconds:Boolean,nowBtn:Boolean},emits:Ht,setup(a,{slots:v,emit:_}){const b=Vt(),{$q:e}=b.proxy,n=bt(a,e),{tabindex:c,headerClass:g,getLocale:y,getCurrentDate:m}=Qt(a,e),x=Tt(a),E=St(x);let D,s;const o=q(null),T=k(()=>Ge()),j=k(()=>y()),ke=k(()=>ze()),X=se(a.modelValue,T.value,j.value,a.calendar,ke.value),p=q(Rt(X)),u=q(X),V=q(X.hour===null||X.hour<12),Re=k(()=>`q-time q-time--${a.landscape===!0?"landscape":"portrait"}`+(n.value===!0?" q-time--dark q-dark":"")+(a.disable===!0?" disabled":a.readonly===!0?" q-time--readonly":"")+(a.bordered===!0?" q-time--bordered":"")+(a.square===!0?" q-time--square no-border-radius":"")+(a.flat===!0?" q-time--flat no-shadow":"")),de=k(()=>{const t=u.value;return{hour:t.hour===null?"--":A.value===!0?H(t.hour):String(V.value===!0?t.hour===0?12:t.hour:t.hour>12?t.hour-12:t.hour),minute:t.minute===null?"--":H(t.minute),second:t.second===null?"--":H(t.second)}}),A=k(()=>a.format24h!==null?a.format24h:e.lang.date.format24h),Ke=k(()=>{const t=p.value==="hour",l=t===!0?12:60,i=u.value[p.value];let C=`rotate(${Math.round(i*(360/l))-180}deg) translateX(-50%)`;return t===!0&&A.value===!0&&u.value.hour>=12&&(C+=" scale(.7)"),{transform:C}}),Ve=k(()=>u.value.hour!==null),je=k(()=>Ve.value===!0&&u.value.minute!==null),$=k(()=>a.hourOptions!==void 0?t=>a.hourOptions.includes(t):a.options!==void 0?t=>a.options(t,null,null):null),W=k(()=>a.minuteOptions!==void 0?t=>a.minuteOptions.includes(t):a.options!==void 0?t=>a.options(u.value.hour,t,null):null),G=k(()=>a.secondOptions!==void 0?t=>a.secondOptions.includes(t):a.options!==void 0?t=>a.options(u.value.hour,u.value.minute,t):null),J=k(()=>{if($.value===null)return null;const t=Z(0,11,$.value),l=Z(12,11,$.value);return{am:t,pm:l,values:t.values.concat(l.values)}}),B=k(()=>W.value!==null?Z(0,59,W.value):null),I=k(()=>G.value!==null?Z(0,59,G.value):null),z=k(()=>{switch(p.value){case"hour":return J.value;case"minute":return B.value;case"second":return I.value}}),Xe=k(()=>{let t,l,i=0,h=1;const C=z.value!==null?z.value.values:void 0;p.value==="hour"?A.value===!0?(t=0,l=23):(t=0,l=11,V.value===!1&&(i=12)):(t=0,l=55,h=5);const O=[];for(let f=t,S=t;f<=l;f+=h,S++){const Y=f+i,dt=C!==void 0&&C.includes(Y)===!1,ct=p.value==="hour"&&f===0?A.value===!0?"00":"12":f;O.push({val:Y,index:S,disable:dt,label:ct})}return O}),We=k(()=>[[Ft,Ze,void 0,{stop:!0,prevent:!0,mouse:!0}]]);xe(()=>a.modelValue,t=>{const l=se(t,T.value,j.value,a.calendar,ke.value);(l.dateHash!==u.value.dateHash||l.timeHash!==u.value.timeHash)&&(u.value=l,l.hour===null?p.value="hour":V.value=l.hour<12)}),xe([T,j],()=>{qt(()=>{pe()})});function Se(){const t={...m(),...Kt()};pe(t),Object.assign(u.value,t),p.value="hour"}function Z(t,l,i){const h=Array.apply(null,{length:l+1}).map((C,O)=>{const f=O+t;return{index:f,val:i(f)===!0}}).filter(C=>C.val===!0).map(C=>C.index);return{min:h[0],max:h[h.length-1],values:h,threshold:l+1}}function qe(t,l,i){const h=Math.abs(t-l);return Math.min(h,i-h)}function ce(t,{min:l,max:i,values:h,threshold:C}){if(t===l)return l;if(t<l||t>i)return qe(t,l,C)<=qe(t,i,C)?l:i;const O=h.findIndex(Y=>t<=Y),f=h[O-1],S=h[O];return t-f<=S-t?f:S}function Ge(){return a.calendar!=="persian"&&a.mask!==null?a.mask:`HH:mm${a.withSeconds===!0?":ss":""}`}function ze(){if(typeof a.defaultDate!="string"){const t=m(!0);return t.dateHash=$t(t),t}return se(a.defaultDate,"YYYY/MM/DD",void 0,a.calendar)}function ve(){return Mt(b)===!0||z.value!==null&&(z.value.values.length===0||p.value==="hour"&&A.value!==!0&&J.value[V.value===!0?"am":"pm"].values.length===0)}function fe(){const t=o.value,{top:l,left:i,width:h}=t.getBoundingClientRect(),C=h/2;return{top:l+C,left:i+C,dist:C*.7}}function Ze(t){if(ve()!==!0){if(t.isFirst===!0){D=fe(),s=ee(t.evt,D);return}s=ee(t.evt,D,s),t.isFinal===!0&&(D=!1,s=null,Me())}}function Me(){p.value==="hour"?p.value="minute":a.withSeconds&&p.value==="minute"&&(p.value="second")}function ee(t,l,i){const h=re(t),C=Math.abs(h.top-l.top),O=Math.sqrt(Math.pow(Math.abs(h.top-l.top),2)+Math.pow(Math.abs(h.left-l.left),2));let f,S=Math.asin(C/O)*(180/Math.PI);if(h.top<l.top?S=l.left<h.left?90-S:270+S:S=l.left<h.left?S+90:270-S,p.value==="hour"){if(f=S/30,J.value!==null){const Y=A.value!==!0?V.value===!0:J.value.am.values.length!==0&&J.value.pm.values.length!==0?O>=l.dist:J.value.am.values.length!==0;f=ce(f+(Y===!0?0:12),J.value[Y===!0?"am":"pm"])}else f=Math.round(f),A.value===!0?O<l.dist?f<12&&(f+=12):f===12&&(f=0):V.value===!0&&f===12?f=0:V.value===!1&&f!==12&&(f+=12);A.value===!0&&(V.value=f<12)}else f=Math.round(S/6)%60,p.value==="minute"&&B.value!==null?f=ce(f,B.value):p.value==="second"&&I.value!==null&&(f=ce(f,I.value));return i!==f&&it[p.value](f),f}const me={hour(){p.value="hour"},minute(){p.value="minute"},second(){p.value="second"}};function et(t){t.keyCode===13&&Ee()}function tt(t){t.keyCode===13&&Ae()}function lt(t){ve()!==!0&&(e.platform.is.desktop!==!0&&ee(t,fe()),Me())}function at(t){ve()!==!0&&ee(t,fe())}function nt(t){if(t.keyCode===13)p.value="hour";else if([37,39].includes(t.keyCode)){const l=t.keyCode===37?-1:1;if(J.value!==null){const i=A.value===!0?J.value.values:J.value[V.value===!0?"am":"pm"].values;if(i.length===0)return;if(u.value.hour===null)te(i[0]);else{const h=(i.length+i.indexOf(u.value.hour)+l)%i.length;te(i[h])}}else{const i=A.value===!0?24:12,h=A.value!==!0&&V.value===!1?12:0,C=u.value.hour===null?-l:u.value.hour;te(h+(24+C+l)%i)}}}function ot(t){if(t.keyCode===13)p.value="minute";else if([37,39].includes(t.keyCode)){const l=t.keyCode===37?-1:1;if(B.value!==null){const i=B.value.values;if(i.length===0)return;if(u.value.minute===null)le(i[0]);else{const h=(i.length+i.indexOf(u.value.minute)+l)%i.length;le(i[h])}}else{const i=u.value.minute===null?-l:u.value.minute;le((60+i+l)%60)}}}function ut(t){if(t.keyCode===13)p.value="second";else if([37,39].includes(t.keyCode)){const l=t.keyCode===37?-1:1;if(I.value!==null){const i=I.value.values;if(i.length===0)return;if(u.value.seconds===null)ae(i[0]);else{const h=(i.length+i.indexOf(u.value.second)+l)%i.length;ae(i[h])}}else{const i=u.value.second===null?-l:u.value.second;ae((60+i+l)%60)}}}function te(t){u.value.hour!==t&&(u.value.hour=t,N())}function le(t){u.value.minute!==t&&(u.value.minute=t,N())}function ae(t){u.value.second!==t&&(u.value.second=t,N())}const it={hour:te,minute:le,second:ae};function Ee(){V.value===!1&&(V.value=!0,u.value.hour!==null&&(u.value.hour-=12,N()))}function Ae(){V.value===!0&&(V.value=!1,u.value.hour!==null&&(u.value.hour+=12,N()))}function he(t){const l=a.modelValue;p.value!==t&&l!==void 0&&l!==null&&l!==""&&typeof l!="string"&&(p.value=t)}function N(){if($.value!==null&&$.value(u.value.hour)!==!0){u.value=se(),he("hour");return}if(W.value!==null&&W.value(u.value.minute)!==!0){u.value.minute=null,u.value.second=null,he("minute");return}if(a.withSeconds===!0&&G.value!==null&&G.value(u.value.second)!==!0){u.value.second=null,he("second");return}u.value.hour===null||u.value.minute===null||a.withSeconds===!0&&u.value.second===null||pe()}function pe(t){const l=Object.assign({...u.value},t),i=a.calendar==="persian"?H(l.hour)+":"+H(l.minute)+(a.withSeconds===!0?":"+H(l.second):""):Bt(new Date(l.year,l.month===null?null:l.month-1,l.day,l.hour,l.minute,l.second,l.millisecond),T.value,j.value,l.year,l.timezoneOffset);l.changed=i!==a.modelValue,_("update:modelValue",i,l)}function st(){const t=[w("div",{class:"q-time__link "+(p.value==="hour"?"q-time__link--active":"cursor-pointer"),tabindex:c.value,onClick:me.hour,onKeyup:nt},de.value.hour),w("div",":"),w("div",Ve.value===!0?{class:"q-time__link "+(p.value==="minute"?"q-time__link--active":"cursor-pointer"),tabindex:c.value,onKeyup:ot,onClick:me.minute}:{class:"q-time__link"},de.value.minute)];a.withSeconds===!0&&t.push(w("div",":"),w("div",je.value===!0?{class:"q-time__link "+(p.value==="second"?"q-time__link--active":"cursor-pointer"),tabindex:c.value,onKeyup:ut,onClick:me.second}:{class:"q-time__link"},de.value.second));const l=[w("div",{class:"q-time__header-label row items-center no-wrap",dir:"ltr"},t)];return A.value===!1&&l.push(w("div",{class:"q-time__header-ampm column items-between no-wrap"},[w("div",{class:"q-time__link "+(V.value===!0?"q-time__link--active":"cursor-pointer"),tabindex:c.value,onClick:Ee,onKeyup:et},"AM"),w("div",{class:"q-time__link "+(V.value!==!0?"q-time__link--active":"cursor-pointer"),tabindex:c.value,onClick:Ae,onKeyup:tt},"PM")])),w("div",{class:"q-time__header flex flex-center no-wrap "+g.value},l)}function rt(){const t=u.value[p.value];return w("div",{class:"q-time__content col relative-position"},[w(Et,{name:"q-transition--scale"},()=>w("div",{key:"clock"+p.value,class:"q-time__container-parent absolute-full"},[w("div",{ref:o,class:"q-time__container-child fit overflow-hidden"},[F(w("div",{class:"q-time__clock cursor-pointer non-selectable",onClick:lt,onMousedown:at},[w("div",{class:"q-time__clock-circle fit"},[w("div",{class:"q-time__clock-pointer"+(u.value[p.value]===null?" hidden":a.color!==void 0?` text-${a.color}`:""),style:Ke.value}),Xe.value.map(l=>w("div",{class:`q-time__clock-position row flex-center q-time__clock-pos-${l.index}`+(l.val===t?" q-time__clock-position--active "+g.value:l.disable===!0?" q-time__clock-position--disable":"")},[w("span",l.label)]))])]),We.value)])])),a.nowBtn===!0?w(L,{class:"q-time__now-button absolute",icon:e.iconSet.datetime.now,unelevated:!0,size:"sm",round:!0,color:a.color,textColor:a.textColor,tabindex:c.value,onClick:Se}):null])}return b.proxy.setNow=Se,()=>{const t=[rt()],l=kt(v.default);return l!==void 0&&t.push(w("div",{class:"q-time__actions"},l)),a.name!==void 0&&a.disable!==!0&&E(t,"push"),w("div",{class:Re.value,tabindex:-1},[st(),w("div",{class:"q-time__main col overflow-auto"},t)])}}});const jt=M("div",{class:"text-h6"},"Update Surat Jalan",-1),Xt={class:"row q-pb-md"},Wt={class:"col"},Gt={class:"col text-right"},zt={class:"row q-pt-md"},Zt={class:"col"},el={class:"row items-center justify-end"},tl={class:"row items-center justify-end"},ll={class:"col q-pl-md"},al={class:"row items-center justify-end"},nl={class:"row items-center justify-end"},ol={__name:"updateSJ",props:{dataSJDB:Array},setup(a){const v=Ue(),_=a;Fe(()=>{_.dataSJDB&&(e.value=_.dataSJDB)});const b=q([{label:"General",value:"general"},{label:"Forklift",value:"forklift"},{label:"Genset",value:"genset"}]);q("");const e=q({TDLVSJDETA_DLVCD:"",TDLVSJDETA_TYPE:"",TDLVSJDETA_CONDGRP:"",TDLVSJDETA_STARTDT:"",TDLVSJDETA_ENDDT:"",condition:[]});q([]);const n=q(!1),c=()=>{v.dialog({component:It}).onOk(async D=>{e.value.TDLVSJDETA_CONDGRP=D.MCONDITION_RPT_STAT,e.value.condition=D.group})},g=()=>{v.dialog({component:Nt,componentProps:{listCond:e.value.condition}}).onOk(async D=>{})},{dialogRef:y,onDialogHide:m,onDialogOK:x,onDialogCancel:E}=ft();return(D,s)=>(Q(),Ce(Jt,{ref_key:"dialogRef",ref:y,onHide:xt(m),"transition-show":"slide-up","transition-hide":"slide-down","full-width":""},{default:d(()=>[r(At,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:d(()=>[r(Je,null,{default:d(()=>[jt]),_:1}),r(Je,{class:"q-pa-sm"},{default:d(()=>[M("div",Xt,[M("div",Wt,[r(Ot,{options:b.value,type:"radio",modelValue:e.value.TDLVSJDETA_TYPE,"onUpdate:modelValue":s[0]||(s[0]=o=>e.value.TDLVSJDETA_TYPE=o)},null,8,["options","modelValue"])]),M("div",Gt,[r(L,{color:"blue",label:"Assign Conditions",onClick:c,loading:n.value},null,8,["loading"]),r(L,{icon:"visibility",color:"indigo",flat:"",onClick:g,loading:n.value},{default:d(()=>[r(K,null,{default:d(()=>[P("View Conditions")]),_:1}),r(Pt,{color:"red",floating:""},{default:d(()=>[P(be(e.value.condition.length),1)]),_:1})]),_:1},8,["loading"])])]),r(Lt),M("div",zt,[M("div",Zt,[r(Te,{filled:"",modelValue:e.value.TDLVSJDETA_STARTDT,"onUpdate:modelValue":s[3]||(s[3]=o=>e.value.TDLVSJDETA_STARTDT=o)},{prepend:d(()=>[r(R,{name:"event",class:"cursor-pointer"},{default:d(()=>[r(ue,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:d(()=>[r($e,{modelValue:e.value.TDLVSJDETA_STARTDT,"onUpdate:modelValue":s[1]||(s[1]=o=>e.value.TDLVSJDETA_STARTDT=o),mask:"YYYY-MM-DD HH:mm"},{default:d(()=>[M("div",el,[F(r(L,{label:"Close",color:"primary",flat:""},null,512),[[ie]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),append:d(()=>[r(R,{name:"access_time",class:"cursor-pointer"},{default:d(()=>[r(ue,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:d(()=>[r(Ne,{modelValue:e.value.TDLVSJDETA_STARTDT,"onUpdate:modelValue":s[2]||(s[2]=o=>e.value.TDLVSJDETA_STARTDT=o),mask:"YYYY-MM-DD HH:mm",format24h:""},{default:d(()=>[M("div",tl,[F(r(L,{label:"Close",color:"primary",flat:""},null,512),[[ie]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),M("div",ll,[r(Te,{filled:"",modelValue:e.value.TDLVSJDETA_ENDDT,"onUpdate:modelValue":s[6]||(s[6]=o=>e.value.TDLVSJDETA_ENDDT=o)},{prepend:d(()=>[r(R,{name:"event",class:"cursor-pointer"},{default:d(()=>[r(ue,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:d(()=>[r($e,{modelValue:e.value.TDLVSJDETA_ENDDT,"onUpdate:modelValue":s[4]||(s[4]=o=>e.value.TDLVSJDETA_ENDDT=o),mask:"YYYY-MM-DD HH:mm"},{default:d(()=>[M("div",al,[F(r(L,{label:"Close",color:"primary",flat:""},null,512),[[ie]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),append:d(()=>[r(R,{name:"access_time",class:"cursor-pointer"},{default:d(()=>[r(ue,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:d(()=>[r(Ne,{modelValue:e.value.TDLVSJDETA_ENDDT,"onUpdate:modelValue":s[5]||(s[5]=o=>e.value.TDLVSJDETA_ENDDT=o),mask:"YYYY-MM-DD HH:mm",format24h:""},{default:d(()=>[M("div",nl,[F(r(L,{label:"Close",color:"primary",flat:""},null,512),[[ie]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},ul={class:"q-pa-md"},il={class:"row"},sl={class:"col"},wl={__name:"invoiceView",setup(a){const v=Ue(),_=q([]),b=q([{name:"TDLVORD_DLVCD",label:"DO Number",field:"TDLVORD_DLVCD",sortable:!0,align:"left"},{name:"MCUS_CUSNM",label:"Customer",field:"MCUS_CUSNM",sortable:!0,align:"left"}]),e=q(!1),n=q(""),c=q("");Fe(()=>{g()});const g=async()=>{e.value=!0,await oe.post("invoices/search",{searchBy:n.value,searchValue:c.value}).then(D=>{e.value=!1,_.value=D.data.data}).catch(D=>{e.value=!1})},y=async D=>{e.value=!0,await oe.post("invoices/printInvoice",D).then(s=>{e.value=!1,window.open("").document.write("<iframe width='100%' height='100%' src='data:application/pdf;base64, "+encodeURI(s.data)+"'></iframe>")}).catch(s=>{e.value=!1})},m=async D=>{e.value=!0,await oe.get(`invoices/printKwitansi/${btoa(D)}`).then(s=>{e.value=!1,window.open("").document.write("<iframe width='100%' height='100%' src='data:application/pdf;base64, "+encodeURI(s.data)+"'></iframe>")}).catch(s=>{e.value=!1})},x=async D=>{v.dialog({title:"Options",message:"Choose type surat jalan",options:{type:"radio",model:"general",items:[{label:"General",value:"general"},{label:"Forklift",value:"forklift"},{label:"Genset",value:"genset"}]},cancel:!0,persistent:!0}).onOk(async s=>{e.value=!0,await oe.get(`invoices/printSJ/${btoa(D)}`).then(o=>{e.value=!1,window.open("").document.write("<iframe width='100%' height='100%' src='data:application/pdf;base64, "+encodeURI(o.data)+"'></iframe>")}).catch(o=>{e.value=!1})})},E=D=>{v.dialog({component:ol}).onOk(async s=>{g()})};return(D,s)=>(Q(),ye("div",ul,[M("div",il,[M("div",sl,[r(mt,{title:"Invoice List",rows:_.value,columns:b.value,"row-key":"name",loading:e.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":d(()=>[r(ht,{outlined:"",modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=o=>n.value=o),options:b.value,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),r(Te,{borderless:"",dense:"",modelValue:c.value,"onUpdate:modelValue":[s[1]||(s[1]=o=>c.value=o),s[2]||(s[2]=o=>D.dataOutstanding())],placeholder:"Search",outlined:"",debounce:"1000"},{append:d(()=>[r(R,{name:"search"})]),_:1},8,["modelValue"])]),header:d(o=>[r(He,{props:o},{default:d(()=>[(Q(!0),ye(Pe,null,Ye(o.cols,T=>(Q(),Ce(Oe,{key:T.name,props:o},{default:d(()=>[P(be(T.label),1)]),_:2},1032,["props"]))),128)),r(Oe,{"auto-width":""},{default:d(()=>[P("Action")]),_:1})]),_:2},1032,["props"])]),body:d(o=>[r(He,{props:o},{default:d(()=>[(Q(!0),ye(Pe,null,Ye(o.cols,T=>(Q(),Ce(Qe,{key:T.name,props:o},{default:d(()=>[P(be(T.value),1)]),_:2},1032,["props"]))),128)),r(Qe,{"auto-width":""},{default:d(()=>[r(L,{flat:"",color:"red",icon:"list",dense:"",onClick:T=>E(o.row.dlvsj)},{default:d(()=>[r(K,null,{default:d(()=>[P("Update Surat Jalan")]),_:1})]),_:2},1032,["onClick"]),r(L,{flat:"",color:"green",icon:"print",dense:"",onClick:T=>y(o.row)},{default:d(()=>[r(K,null,{default:d(()=>[P("Print Invoice")]),_:1})]),_:2},1032,["onClick"]),r(L,{flat:"",color:"indigo",icon:"print",dense:"",onClick:T=>m(o.row.TDLVORD_DLVCD)},{default:d(()=>[r(K,null,{default:d(()=>[P("Print Receipt")]),_:1})]),_:2},1032,["onClick"]),r(L,{flat:"",color:o.row.dlvsj?"orange":"grey",icon:"print",dense:"",onClick:T=>x(o.row.TDLVORD_DLVCD),disable:!o.row.dlvsj},{default:d(()=>[r(K,null,{default:d(()=>[P("Print Surat Jalan")]),_:1})]),_:2},1032,["color","onClick","disable"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{wl as default};
