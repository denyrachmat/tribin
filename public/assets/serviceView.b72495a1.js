import{Q as g}from"./QTooltip.f8403dd6.js";import{s as r,B as f,C as S,D as l,E as e,J as Y,K as y,I as t,P as c,L as j,Q as _,M as U,O as F,aa as G,aW as P,H as p,R as O,aU as Q,aV as R,aZ as ee,aX as q,ap as le,o as ae,S as te}from"./index.0e8d8fdb.js";import{u as J,b as N,c as H,Q as oe,j as E,k,l as K,a as se,m as L}from"./use-dialog-plugin-component.f3213e6c.js";import{Q as B,a as x}from"./date.8108fba4.js";import{api_web as $}from"./axios.f307133b.js";import{Q as ne,a as de,C as ie}from"./ClosePopup.9103ef23.js";const ue=t("div",{class:"text-h6"},"Create Item Master",-1),re={class:"row"},me={class:"col"},ce={class:"col q-pl-md"},_e={class:"row q-pt-md"},pe={class:"col"},ve={class:"col q-pl-md"},fe={class:"row q-pt-md"},Me={class:"col"},Ce={class:"col q-pl-md"},Ve={class:"row q-pt-md"},Ie={class:"col"},De={__name:"itemCreate",setup(A){const{dialogRef:h,onDialogHide:C,onDialogOK:T,onDialogCancel:b}=J(),V=N(),o=r({MITM_ITMCD:"",MITM_ITMNM:"",MITM_STKUOM:"",MITM_ITMTYPE:1,MITM_BRAND:"",MITM_MODEL:"",MITM_SPEC:"",MITM_ITMCAT:"",MITM_COACD:""}),I=r(!1),v=r([]);r([]);const m=()=>{V.dialog({title:"Confirmation",message:"Do you want to save this item ?",cancel:!0,persistent:!0}).onOk(async()=>{await $.post("item",o.value).then(u=>{T(u.data.data.value)})})};return(u,s)=>(f(),S(F,{ref_key:"dialogRef",ref:h,onHide:U(C),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:l(()=>[e(Y,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:l(()=>[e(y,null,{default:l(()=>[ue]),_:1}),e(y,{class:"q-pa-sm"},{default:l(()=>[t("div",re,[t("div",me,[e(c,{label:"Item Code",dense:"",modelValue:o.value.MITM_ITMCD,"onUpdate:modelValue":s[0]||(s[0]=a=>o.value.MITM_ITMCD=a),filled:""},null,8,["modelValue"])]),t("div",ce,[e(c,{label:"Item Name",dense:"",modelValue:o.value.MITM_ITMNM,"onUpdate:modelValue":s[1]||(s[1]=a=>o.value.MITM_ITMNM=a),filled:""},null,8,["modelValue"])])]),t("div",_e,[t("div",pe,[e(c,{label:"UOM",dense:"",modelValue:o.value.MITM_STKUOM,"onUpdate:modelValue":s[2]||(s[2]=a=>o.value.MITM_STKUOM=a),filled:""},null,8,["modelValue"]),e(H,{dense:"",filled:"",label:"UOM",modelValue:o.value.MITM_STKUOM,"onUpdate:modelValue":s[3]||(s[3]=a=>o.value.MITM_STKUOM=a),options:v.value,behavior:"dialog","option-label":"MUSAGE_DESCALL","option-value":"id","emit-value":"","map-options":"",loading:I.value},null,8,["modelValue","options","loading"])]),t("div",ve,[e(c,{label:"Item Brand",dense:"",modelValue:o.value.MITM_BRAND,"onUpdate:modelValue":s[4]||(s[4]=a=>o.value.MITM_BRAND=a),filled:""},null,8,["modelValue"])])]),t("div",fe,[t("div",Me,[e(c,{label:"Item Model",dense:"",modelValue:o.value.MITM_MODEL,"onUpdate:modelValue":s[5]||(s[5]=a=>o.value.MITM_MODEL=a),filled:""},null,8,["modelValue"])]),t("div",Ce,[e(c,{label:"Item Specification",dense:"",modelValue:o.value.MITM_SPEC,"onUpdate:modelValue":s[6]||(s[6]=a=>o.value.MITM_SPEC=a),filled:""},null,8,["modelValue"])])]),t("div",Ve,[t("div",Ie,[e(c,{label:"COA",dense:"",modelValue:o.value.MITM_COACD,"onUpdate:modelValue":s[7]||(s[7]=a=>o.value.MITM_COACD=a),filled:""},null,8,["modelValue"])])])]),_:1}),e(j,{align:"right"},{default:l(()=>[e(_,{label:"OK",color:"primary",onClick:s[8]||(s[8]=a=>m())}),e(_,{flat:"",label:"Cancel",color:"red",onClick:U(b)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},Te=t("div",{class:"text-h6"},"Create Order",-1),be={style:{border:"1px black solid","border-radius":"10px"}},ge=t("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[t("b",null,"Header")],-1),Se={class:"row"},he={class:"col"},we={class:"col q-pl-md"},ke={class:"row items-center justify-end"},Oe={class:"row"},ye={class:"col"},Ue={style:{border:"1px black solid","border-radius":"10px",height:"35vh",overflow:"auto"}},$e=t("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[t("b",null,"Detail Items")],-1),Qe={class:"row q-pb-sm"},Re={class:"col text-right"},qe={__name:"serviceCreateOrder",setup(A){const{dialogRef:h,onDialogHide:C,onDialogOK:T,onDialogCancel:b}=J(),V=N(),o=r({SRVH_DOCNO:"",SRVH_ISSDT:"",SRVH_CUSCD:""}),I=r([]),v=r([]),m=r(!1),u=(d,n,i,D)=>{n(async()=>{D==="cust"&&await s(d),D==="item"&&await a(d)})},s=async d=>{m.value=!0,await $.post("customer/searchAPI",{searchValue:d}).then(n=>{m.value=!1,listCustomers.value=n.data.data}).catch(()=>{m.value=!1})},a=async d=>{m.value=!0,await $.post("item/searchAPI",{searchValue:d}).then(n=>{m.value=!1,I.value=n.data.data}).catch(()=>{m.value=!1})},M=()=>{v.value.push({TSRVD_ITMCD:"",TSRVD_LINE:v.value.length+1})},W=d=>{V.dialog({title:"Confirmation",message:`Do you want to delete this lines no ${d+1} ?`,cancel:!0,persistent:!0}).onOk(async()=>{v.value.splice(d,1)})},X=d=>{V.dialog({component:De}).onOk(async n=>{v.value[d].TSRVD_ITMCD=n.MITM_ITMNM})};return(d,n)=>(f(),S(F,{ref_key:"dialogRef",ref:h,onHide:U(C),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:l(()=>[e(Y,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:l(()=>[e(y,null,{default:l(()=>[Te]),_:1}),e(y,{class:"q-pa-sm"},{default:l(()=>[t("fieldset",be,[ge,t("div",Se,[t("div",he,[e(c,{label:"SPK No",readonly:"",dense:"",modelValue:o.value.SRVH_DOCNO,"onUpdate:modelValue":n[0]||(n[0]=i=>o.value.SRVH_DOCNO=i),filled:""},null,8,["modelValue"])]),t("div",we,[e(c,{filled:"",modelValue:o.value.SRVH_ISSDT,"onUpdate:modelValue":n[2]||(n[2]=i=>o.value.SRVH_ISSDT=i),dense:"",label:"Issue Date",loading:m.value,onClick:n[3]||(n[3]=i=>d.quotationIssueDate.qDateProxy.show()),mask:"####-##-##","fill-mask":"",hint:"Mask: YYYY-MM-DD"},{append:l(()=>[e(G,{name:"event",class:"cursor-pointer"},{default:l(()=>[e(ne,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(de,{modelValue:o.value.SRVH_ISSDT,"onUpdate:modelValue":n[1]||(n[1]=i=>o.value.SRVH_ISSDT=i),mask:"YYYY-MM-DD"},{default:l(()=>[t("div",ke,[P(e(_,{label:"Close",color:"primary",flat:""},null,512),[[ie]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","loading"])])]),t("div",Oe,[t("div",ye,[e(c,{label:"Customer Choose",dense:"",modelValue:o.value.SRVH_CUSCD,"onUpdate:modelValue":n[4]||(n[4]=i=>o.value.SRVH_CUSCD=i),filled:""},null,8,["modelValue"])])])]),t("fieldset",Ue,[$e,t("div",Qe,[t("div",Re,[e(_,{flat:"",icon:"add",color:"blue",onClick:n[5]||(n[5]=i=>M())},{default:l(()=>[e(g,null,{default:l(()=>[p("Add lines")]),_:1})]),_:1})])]),e(oe,{bordered:"",dense:""},{default:l(()=>[v.value.length>0?(f(!0),O(Q,{key:0},R(v.value,(i,D)=>(f(),S(E,{key:D,class:"q-my-sm",dense:""},{default:l(()=>[e(k,{avatar:""},{default:l(()=>[e(ee,{"text-color":"blue"},{default:l(()=>[p(q(D+1),1)]),_:2},1024)]),_:2},1024),e(k,null,{default:l(()=>[e(K,null,{default:l(()=>[e(H,{dense:"",filled:"",label:"Item Name",modelValue:i.TSRVD_ITMCD,"onUpdate:modelValue":w=>i.TSRVD_ITMCD=w,"use-input":"","input-debounce":"500",options:I.value,onFilter:n[6]||(n[6]=(w,Z,z)=>u(w,Z,z,"item")),behavior:"dialog","option-label":"MITM_ITMNM","option-value":"MITM_ITMNM","emit-value":"","map-options":"",loading:m.value},null,8,["modelValue","onUpdate:modelValue","options","loading"])]),_:2},1024)]),_:2},1024),e(k,{side:""},{default:l(()=>[e(_,{icon:"delete",color:"red",flat:"",onClick:w=>W(D)},{default:l(()=>[e(g,null,{default:l(()=>[p("Delete line")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024),e(k,{side:""},{default:l(()=>[e(_,{icon:"library_add",color:"indigo",flat:"",onClick:w=>X(D)},{default:l(()=>[e(g,null,{default:l(()=>[p("Add new item")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)):P((f(),S(E,{key:1,class:"q-my-sm",clickable:""},{default:l(()=>[e(k,null,{default:l(()=>[e(K,null,{default:l(()=>[p(" No Items Added ")]),_:1})]),_:1})]),_:1})),[[le]])]),_:1})])]),_:1}),e(j,{align:"right"},{default:l(()=>[e(_,{label:"OK",color:"primary",onClick:n[7]||(n[7]=i=>d.onSubmitData()),disable:d.stateSubmit},null,8,["disable"]),e(_,{flat:"",label:"Cancel",color:"red",onClick:U(b)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}};const Ne={class:"q-pa-md"},He={class:"row q-pb-md"},Ae=t("div",{class:"col"},[t("span",{class:"text-h4"},"Receive Order ")],-1),Pe={class:"col text-right"},Ee={class:"row q-pt-md"},Ke={class:"col"},Ge={__name:"serviceView",setup(A){const h=N(),C=r("SRVH_DOCNO"),T=r(""),b=r([]),V=r([{name:"SRVH_DOCNO",label:"SPK No",field:"SRVH_DOCNO",sortable:!0,align:"left"},{name:"SRVH_CUSCD",label:"Cust",field:"SRVH_CUSCD",sortable:!0,align:"left"},{name:"created_at",label:"Created Date",field:"created_at",sortable:!0,align:"left"}]),o=r(!1);ae(()=>{I()});const I=async()=>{o.value=!0,await $.post("service/search",{searchBy:C.value,searchValue:T.value}).then(u=>{o.value=!1,b.value=u.data.data}).catch(u=>{o.value=!1})},v=()=>{h.dialog({component:qe}).onOk(async u=>{I()})},m=u=>{window.open("https://joss.jatpowerindo.co.id/PDF/quotation/"+btoa(u),"_blank").focus()};return(u,s)=>(f(),O("div",Ne,[t("div",He,[Ae,t("div",Pe,[e(_,{icon:"add",color:"blue",onClick:v},{default:l(()=>[e(g,null,{default:l(()=>[p("Create New Order")]),_:1})]),_:1})])]),e(te),t("div",Ee,[t("div",Ke,[e(se,{title:"Created Order",rows:b.value,columns:V.value,"row-key":"name",loading:o.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":l(()=>[e(H,{outlined:"",modelValue:C.value,"onUpdate:modelValue":s[0]||(s[0]=a=>C.value=a),options:V.value,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),e(c,{borderless:"",dense:"",modelValue:T.value,"onUpdate:modelValue":[s[1]||(s[1]=a=>T.value=a),s[2]||(s[2]=a=>u.dataQuo())],placeholder:"Search",outlined:"",debounce:"1000"},{append:l(()=>[e(G,{name:"search"})]),_:1},8,["modelValue"])]),header:l(a=>[e(B,{props:a},{default:l(()=>[(f(!0),O(Q,null,R(a.cols,M=>(f(),S(L,{key:M.name,props:a},{default:l(()=>[p(q(M.label),1)]),_:2},1032,["props"]))),128)),e(L,{"auto-width":""},{default:l(()=>[p("Action")]),_:1})]),_:2},1032,["props"])]),body:l(a=>[e(B,{props:a},{default:l(()=>[(f(!0),O(Q,null,R(a.cols,M=>(f(),S(x,{key:M.name,props:a},{default:l(()=>[p(q(M.value),1)]),_:2},1032,["props"]))),128)),e(x,{"auto-width":""},{default:l(()=>[e(_,{flat:"",color:"orange",icon:"edit",onClick:M=>u.onClickEdit(a.row.TQUO_QUOCD),dense:""},{default:l(()=>[e(g,null,{default:l(()=>[p("Edit this quotation")]),_:1})]),_:2},1032,["onClick"]),e(_,{flat:"",color:"indigo",icon:"print",onClick:M=>m(a.row.TQUO_QUOCD),dense:""},{default:l(()=>[e(g,null,{default:l(()=>[p("Print this order")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{Ge as default};
