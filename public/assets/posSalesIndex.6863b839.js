import{h as d,c as X,K as ae,L as se,s as le,t as g,a as z,w as N,ax as ie,ay as oe,j as ne,o as Y,H as re,d as ce,m as ue,bn as q,G as J,q as D,bo as R,k as de,bp as W,aJ as fe,g as ve,C as _,R as Q,J as t,F as a,E as s,P as k,aI as me,Q as G,S as V,T as H,U as he,D as O,V as _e,I as w,av as $,O as ge,M as pe,W as be}from"./index.d5881cde.js";import{a as I,b as L,Q as j}from"./QItemLabel.de072563.js";import{Q as K}from"./QList.260d8060.js";import{u as ye}from"./use-quasar.564847c6.js";import{api_web as we}from"./axios.d4cd3524.js";const xe=[d("circle",{cx:"15",cy:"15",r:"15"},[d("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),d("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]),d("circle",{cx:"60",cy:"15",r:"9","fill-opacity":".3"},[d("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),d("animate",{attributeName:"fill-opacity",from:".5",to:".5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})]),d("circle",{cx:"105",cy:"15",r:"15"},[d("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),d("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})])];var Se=X({name:"QSpinnerDots",props:ae,setup(i){const{cSize:p,classes:b}=se(i);return()=>d("svg",{class:b.value,fill:"currentColor",width:p.value,height:p.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg"},xe)}});const{passive:x}=ue;var Ie=X({name:"QInfiniteScroll",props:{offset:{type:Number,default:500},debounce:{type:[String,Number],default:100},scrollTarget:le,initialIndex:{type:Number,default:0},disable:Boolean,reverse:Boolean},emits:["load"],setup(i,{slots:p,emit:b}){const n=g(!1),o=g(!0),h=g(null),T=g(null);let y=i.initialIndex,e,r;const P=z(()=>"q-infinite-scroll__loading"+(n.value===!0?"":" invisible"));function c(){if(i.disable===!0||n.value===!0||o.value===!1)return;const l=q(e),f=D(e),C=W(e);i.reverse===!1?Math.round(f+C+i.offset)>=Math.round(l)&&u():Math.round(f)<=i.offset&&u()}function u(){if(i.disable===!0||n.value===!0||o.value===!1)return;y++,n.value=!0;const l=q(e);b("load",y,f=>{o.value===!0&&(n.value=!1,J(()=>{if(i.reverse===!0){const C=q(e),ee=D(e),te=C-l;R(e,ee+te)}f===!0?m():h.value&&h.value.closest("body")&&r()}))})}function v(){y=0}function S(){o.value===!1&&(o.value=!0,e.addEventListener("scroll",r,x)),c()}function m(){o.value===!0&&(o.value=!1,n.value=!1,e.removeEventListener("scroll",r,x),r!==void 0&&r.cancel!==void 0&&r.cancel())}function M(){if(e&&o.value===!0&&e.removeEventListener("scroll",r,x),e=de(h.value,i.scrollTarget),o.value===!0){if(e.addEventListener("scroll",r,x),i.reverse===!0){const l=q(e),f=W(e);R(e,l-f)}c()}}function F(l){y=l}function U(l){l=parseInt(l,10);const f=r;r=l<=0?c:fe(c,isNaN(l)===!0?100:l),e&&o.value===!0&&(f!==void 0&&e.removeEventListener("scroll",f,x),e.addEventListener("scroll",r,x))}function A(l){if(E.value===!0){if(T.value===null){l!==!0&&J(()=>{A(!0)});return}const f=`${n.value===!0?"un":""}pauseAnimations`;Array.from(T.value.getElementsByTagName("svg")).forEach(C=>{C[f]()})}}const E=z(()=>i.disable!==!0&&o.value===!0);N([n,E],()=>{A()}),N(()=>i.disable,l=>{l===!0?m():S()}),N(()=>i.reverse,()=>{n.value===!1&&o.value===!0&&c()}),N(()=>i.scrollTarget,M),N(()=>i.debounce,U);let B=!1;ie(()=>{B!==!1&&e&&R(e,B)}),oe(()=>{B=e?D(e):!1}),ne(()=>{o.value===!0&&e.removeEventListener("scroll",r,x)}),Y(()=>{U(i.debounce),M(),n.value===!1&&A()});const Z=ve();return Object.assign(Z.proxy,{poll:()=>{r!==void 0&&r()},trigger:u,stop:m,reset:v,resume:S,setIndex:F,updateScrollTarget:M}),()=>{const l=re(p.default,[]);return E.value===!0&&l[i.reverse===!1?"push":"unshift"](d("div",{ref:T,class:P.value},ce(p.loading))),d("div",{class:"q-infinite-scroll",ref:h},l)}}});const Te={class:"q-pa-md"},Me=t("div",{class:"row q-pb-md"},[t("div",{class:"col"},[t("span",{class:"text-h4"},"POS")]),t("div",{class:"col text-right"})],-1),Ce={class:"row bg-grey q-pa-md full-width",style:{height:"86vh"}},Ne={class:"col-4 q-pa-xs"},Qe={class:"row bg-white"},ke={class:"col",style:{height:"50vh",overflow:"auto"}},qe={class:"row q-pt-xs",style:{height:"30vh"}},Le={class:"col bg-white vertical-middle"},Pe={class:"row"},Ae={class:"col q-pa-sm",style:{height:"20vh"}},Ee={class:"text-h6 text-bold"},Be={class:"row",style:{height:"10vh"}},De={class:"col-sm-6 col-12 q-pa-sm"},Re={class:"col-sm-6 col-12 q-pa-sm"},Ve={class:"col q-pa-xs"},He={class:"row bg-white",style:{height:"80vh",overflow:"auto"}},Oe={class:"col"},$e={class:"row q-col-gutter-sm"},je={class:"text-center"},ze={class:"row items-center"},Fe={class:"col text-bold ellipsis"},Ue={class:"row justify-center q-my-md"},Ye={__name:"posSalesIndex",setup(i){const p=ye(),b=g([]),n=g([]),o=g(!1),h=g(0);Y(()=>{y("")});const T=z(()=>n.value.length>0?n.value.reduce((c,u)=>c+u.LATEST_PRC,0):0),y=async c=>{o.value=!0,h.value=h.value+1,await we.post("item/searchAPIStockAndPriceOnly",{searchValue:c,page:h.value}).then(u=>{o.value=!1,u.data.data.data.map(v=>{u.data.data.data.findIndex(m=>m.MITM_ITMCD===v.MITM_ITMCD)===-1&&b.value.push(v)})}).catch(()=>{o.value=!1})},e=c=>{n.value.push(c)},r=async(c,u)=>{await y(""),u()},P=c=>{p.dialog({title:"Confirmation",message:"Are you sure want to delete this line ??",cancel:!0,persistent:!0}).onOk(async()=>{n.value.splice(c,1)})};return(c,u)=>(_(),Q("div",Te,[Me,t("div",Ce,[t("div",Ne,[t("div",Qe,[t("div",ke,[a(K,{bordered:"",loading:o.value},{default:s(()=>[n.value.length>0?(_(!0),Q(V,{key:0},H(n.value,v=>he((_(),O(j,{key:v.id,class:"q-my-sm"},{default:s(()=>[a(I,{avatar:""},{default:s(()=>[a(_e,{color:"primary","text-color":"white",icon:"category"})]),_:1}),a(I,null,{default:s(()=>[a(L,null,{default:s(()=>[w(k(v.MITM_ITMNM),1)]),_:2},1024),a(L,{caption:"",lines:"1"},{default:s(()=>[w(k(v.LATEST_PRC),1)]),_:2},1024)]),_:2},1024),a(I,{side:""},{default:s(()=>[a($,{name:"delete",color:"red",onClick:u[0]||(u[0]=S=>P(c.idx))})]),_:1})]),_:2},1024)),[[be]])),128)):(_(),O(j,{key:1},{default:s(()=>[a(I,null,{default:s(()=>[w(" No item selected!! ")]),_:1})]),_:1}))]),_:1},8,["loading"])])]),t("div",qe,[t("div",Le,[t("div",Pe,[t("div",Ae,[t("div",Ee,"Total : Rp. "+k(T.value),1)])]),a(me),t("div",Be,[t("div",De,[a(G,{color:"primary",class:"full-width"},{default:s(()=>[w(" Submit ")]),_:1})]),t("div",Re,[a(G,{color:"red",class:"full-width"},{default:s(()=>[w(" Cancel ")]),_:1})])])])])]),t("div",Ve,[t("div",He,[t("div",Oe,[a(Ie,{onLoad:r,offset:300,debounce:2e3},{loading:s(()=>[t("div",Ue,[a(Se,{color:"primary",size:"40px"})])]),default:s(()=>[t("div",$e,[(_(!0),Q(V,null,H(b.value,(v,S)=>(_(),Q("div",{class:"col-6",key:`sm-${S}`},[(_(!0),Q(V,null,H(b.value,(m,M)=>(_(),O(pe,{flat:"",bordered:"",key:`sm-${M}`,style:{width:"15em"}},{default:s(()=>[t("div",je,[a($,{name:"category",size:"8em"})]),a(ge,null,{default:s(()=>[t("div",ze,[t("div",Fe,k(m.MITM_ITMNM),1)])]),_:2},1024),a(K,null,{default:s(()=>[a(j,{clickable:"",onClick:F=>e(m)},{default:s(()=>[a(I,{avatar:""},{default:s(()=>[a($,{color:"primary",name:"add"})]),_:1}),a(I,null,{default:s(()=>[a(L,null,{default:s(()=>[w("Add Item")]),_:1}),a(L,{caption:""},{default:s(()=>[w("Rp. "+k(m.LATEST_PRC),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]))),128))])]),_:1})])])])])]))}};export{Ye as default};
