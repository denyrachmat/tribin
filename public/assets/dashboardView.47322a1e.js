import{s as c,B as s,C as h,D as t,E as a,J as P,K as p,P as $,aa as Q,I as l,a$ as n,S as q,Q as v,L as E,M as D,O as N,o as B,R as i,aY as g,aZ as A,b4 as R,H as k}from"./index.013c6ed9.js";import{u as O,a as S,b as I,o as M}from"./use-dialog-plugin-component.b34b2c44.js";import{d as V,Q as x,b as L}from"./date.c09ce8f4.js";import{api_web as U}from"./axios.f689205e.js";const H=l("div",{class:"text-h6"},"Approval List",-1),J={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},K={class:"text-h5 text-bold"},z={class:"text-h6 text-bold"},j={class:"text-subtitle2"},F={class:"row"},G={class:"col"},Y={class:"col text-right"},Z={__name:"viewListApproval",props:{listApprv:Array},setup(y){const b=y,C=c([{name:"APP_CD",label:"Doc Code",field:"APP_CD"},{name:"APP_CUSNM",label:"Customer",field:"APP_CUSNM"},{name:"APP_SBJCT",label:"Subject",field:"APP_SBJCT"},{name:"APP_ATTN",label:"Attn",field:"APP_ATTN"},{name:"CREATED_AT",label:"Created Date",field:"CREATED_AT"}]),m=c(""),d=(r,o="days")=>{const e=new Date,T=new Date(r);return V.getDateDiff(e,T,o)},{dialogRef:u,onDialogHide:f,onDialogOK:w,onDialogCancel:_}=O();return(r,o)=>(s(),h(N,{ref_key:"dialogRef",ref:u,onHide:D(f),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:t(()=>[a(P,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:t(()=>[a(p,null,{default:t(()=>[H]),_:1}),a(p,{class:"q-pa-sm",style:{height:"70vh",overflow:"auto"}},{default:t(()=>[a(S,{grid:"",flat:"",bordered:"","card-container-class":r.cardContainerClass,title:"Outstanding Approval",rows:b.listApprv,columns:C.value,"row-key":"name",filter:m.value,"hide-header":"",pagination:{rowsPerPage:50},"rows-per-page-options":r.rowsPerPageOptions},{"top-right":t(()=>[a($,{borderless:"",dense:"",debounce:"300",modelValue:m.value,"onUpdate:modelValue":o[0]||(o[0]=e=>m.value=e),placeholder:"Search"},{append:t(()=>[a(Q,{name:"search"})]),_:1},8,["modelValue"])]),item:t(e=>[l("div",J,[a(P,{flat:"",bordered:""},{default:t(()=>[a(p,{class:"text-center bg-secondary text-white"},{default:t(()=>[l("div",K,n(e.row.APP_CUSNM),1)]),_:2},1024),a(q),a(p,null,{default:t(()=>[l("div",z,n(e.row.APP_CD),1),l("div",j,n(e.row.APP_SBJCT),1)]),_:2},1024),a(p,null,{default:t(()=>[l("div",F,[l("div",G,[a(v,{label:"Preview",color:"primary",outline:""})]),l("div",Y,n(d(e.row.CREATED_AT)<30?`${d(e.row.CREATED_AT)} Days Ago`:`${d(e.row.CREATED_AT,"months")} Month ago`),1)])]),_:2},1024)]),_:2},1024)])]),_:1},8,["card-container-class","rows","columns","filter","rows-per-page-options"])]),_:1}),a(E,{align:"right"},{default:t(()=>[a(v,{label:"OK",color:"primary",onClick:o[1]||(o[1]=e=>D(w)()),disable:r.stateSubmit},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},W={class:"q-pa-md bg-grey-5 window-height"},X={class:"row"},ee={class:"row"},te={class:"col"},ae={class:"text-h3 text-cyan"},oe={class:"text-subtitle2 text-cyan"},le={class:"col text-right"},se={class:"row q-pa-sm"},ne={class:"col"},re={key:1},pe={__name:"dashboardView",setup(y){const b=I(),C=c([{total:900,title:"Total Sales",icon:"shopping_cart",color:"cyan"},{total:900,title:"Total Purchase",icon:"shopping_bag",color:"cyan"},{total:900,title:"Total Profit",icon:"payments",color:"cyan"},{total:15,title:"Total Customer",icon:"group",color:"cyan"},{total:15,title:"Total Customer",icon:"group",color:"cyan"},{total:15,title:"Total Customer",icon:"group",color:"cyan"},{total:15,title:"Total Customer",icon:"group",color:"cyan"},{total:15,title:"Total Customer",icon:"group",color:"cyan"}]),m=c([{name:"name",label:"Business",field:"name",sortable:!0,align:"left"},{name:"quot",label:"Quotation",field:"quot_count",sortable:!0,align:"center"},{name:"pr",label:"Purchase Request",field:"pr_count",sortable:!0,align:"center"},{name:"po",label:"Purchase Order",field:"po_count",sortable:!0,align:"center"},{name:"spk",label:"SPK",field:"spk_count",sortable:!0,align:"center"}]),d=c([]),u=c(!1);c(null),B(()=>{f(),setInterval(f(),2e3)});const f=async()=>{u.value=!0,await U.get("/approval/notificationsAPI/top-user").then(_=>{u.value=!1,d.value=_.data}).catch(_=>{u.value=!1})},w=_=>{b.dialog({component:Z,componentProps:{listApprv:_}}).onOk(async r=>{quotationGroupConditions.value=r.MCONDITION_RPT_STAT,quotationConditions.value=r.group})};return(_,r)=>(s(),i("div",W,[l("div",X,[(s(!0),i(g,null,A(C.value,(o,e)=>(s(),i("div",{class:R("col-3 q-pa-sm"),key:e},[a(P,null,{default:t(()=>[a(p,null,{default:t(()=>[l("div",ee,[l("div",te,[l("div",ae,n(o.total),1),l("div",oe,n(o.title),1)]),l("div",le,[a(Q,{name:o.icon,size:"4.4em",color:o.color},null,8,["name","color"])])])]),_:2},1024)]),_:2},1024)]))),128))]),l("div",se,[l("div",ne,[a(S,{flat:"",bordered:"",title:"Approval List",rows:d.value,columns:m.value,"row-key":"name",loading:u.value},{"top-right":t(()=>[a(v,{flat:"",icon:"refresh",color:"cyan",onClick:f})]),header:t(o=>[a(x,{props:o},{default:t(()=>[(s(!0),i(g,null,A(o.cols,e=>(s(),h(M,{key:e.name,props:o},{default:t(()=>[k(n(e.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:t(o=>[a(x,{props:o},{default:t(()=>[(s(!0),i(g,null,A(o.cols,e=>(s(),h(L,{key:e.name,props:o},{default:t(()=>[e.name==="quot"||e.name==="pr"||e.name==="po"||e.name==="spk"?(s(),i(g,{key:0},[e.value>0?(s(),h(v,{key:0,flat:"",color:"blue",onClick:T=>w(o.row[e.name.split("_")[0]])},{default:t(()=>[l("b",null,n(e.value),1)]),_:2},1032,["onClick"])):(s(),i("span",re,n(e.value),1))],64)):(s(),i(g,{key:1},[k(n(e.value),1)],64))]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{pe as default};
