import{Q as b}from"./QTooltip.52db0786.js";import{t as c,o as $,C as m,D,E as l,F as a,M as S,O as Q,J as t,$ as w,X as H,Q as O,Y as N,Z as x,R as h,aM as A,I as C,at as E,S as V,T as k,P as p}from"./index.a0feb3a3.js";import{e as F}from"./QSelect.09ed142d.js";import{a as B,b as I}from"./QTable.351066c1.js";import{Q as R,a as P}from"./QTd.60db95fd.js";import{api_web as T}from"./axios.f9568164.js";import{u as q}from"./format.b9832dfc.js";import{Q as U,a as Y}from"./QInnerLoading.3c9711e4.js";import{u as K}from"./use-dialog-plugin-component.4c6c7f0c.js";const j=t("div",{class:"text-h6"},"Create Location",-1),z={style:{border:"1px black solid","border-radius":"10px"}},G=t("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[t("b",null,"Header")],-1),J={class:"row q-col-gutter-md"},X={class:"col-12 col-sm-6"},Z={class:"col-12 col-sm-6"},W={class:"row q-col-gutter-md"},ee={class:"col-12 col-sm-12"},ae={__name:"locationCreate",props:{dataHeader:Array},setup(y){const v=q(),u=y,d=c({MLOC_LOCCD:"",MLOC_LOCNM:"",MLOC_LOCPRNTCD:""}),s=c(!1),_=c([]);$(async()=>{await f(""),u.dataHeader&&Object.values(u.dataHeader).length>0&&(d.value={MLOC_LOCCD:u.dataHeader.MLOC_LOCCD,MLOC_LOCNM:u.dataHeader.MLOC_LOCNM,MLOC_LOCPRNTCD:u.dataHeader.MLOC_LOCPRNTCD})});const f=async(e,o="MSUP_SUPNM")=>{s.value=!0,await T.post("location/searchAPI",{searchBy:o,searchValue:e}).then(r=>{s.value=!1,_.value=r.data.data}).catch(r=>{s.value=!1})},L=()=>{v.dialog({title:"Confirmation",message:"Are you sure want to save this location ?",cancel:!0,persistent:!0}).onOk(async()=>{s.value=!0,await T.post("location/saveAPI",{...d.value}).then(e=>{s.value=!1,v.notify({color:"green",message:`${e.data.msg}`}),i()}).catch(()=>{s.value=!1})})},{dialogRef:g,onDialogHide:M,onDialogOK:i,onDialogCancel:n}=K();return(e,o)=>(m(),D(x,{ref_key:"dialogRef",ref:g,onHide:N(M),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:l(()=>[a(S,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:l(()=>[a(Q,null,{default:l(()=>[j]),_:1}),a(Q,{class:"q-pa-sm"},{default:l(()=>[t("fieldset",z,[G,a(U,{showing:s.value,dark:""},{default:l(()=>[a(Y,{size:"50px",color:"primary"})]),_:1},8,["showing"]),t("div",J,[t("div",X,[a(w,{label:"Code",dense:"",filled:"",modelValue:d.value.MLOC_LOCCD,"onUpdate:modelValue":o[0]||(o[0]=r=>d.value.MLOC_LOCCD=r)},null,8,["modelValue"])]),t("div",Z,[a(w,{label:"Location Name",dense:"",filled:"",modelValue:d.value.MLOC_LOCNM,"onUpdate:modelValue":o[1]||(o[1]=r=>d.value.MLOC_LOCNM=r)},null,8,["modelValue"])])]),t("div",W,[t("div",ee,[a(w,{label:"Parent",dense:"",filled:"",modelValue:d.value.MLOC_LOCPRNTCD,"onUpdate:modelValue":o[2]||(o[2]=r=>d.value.MLOC_LOCPRNTCD=r)},null,8,["modelValue"])])])])]),_:1}),a(H,{align:"right"},{default:l(()=>[a(O,{label:"OK",color:"primary",onClick:o[3]||(o[3]=r=>L()),disable:e.stateSubmit,loading:s.value},null,8,["disable","loading"]),a(O,{flat:"",label:"Cancel",color:"red",onClick:N(n)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},le={class:"q-pa-md"},oe={class:"row q-pb-md"},te=t("div",{class:"col"},[t("span",{class:"text-h4"},"Location")],-1),se={class:"col text-right"},ne={class:"row q-pt-md"},de={class:"col"},ve={__name:"locationIndex",setup(y){const v=q(),u=c([]),d=c([{name:"MLOC_LOCCD",label:"Location Code",field:"MLOC_LOCCD",sortable:!0,align:"left"},{name:"MLOC_LOCNM",label:"Location Name",field:"MLOC_LOCNM",sortable:!0,align:"left"}]),s=c(!1),_=c(""),f=c("");$(()=>{L()});const L=async()=>{s.value=!0,await T.post("location/searchAPI",{searchBy:_.value,searchValue:f.value}).then(i=>{s.value=!1,u.value=i.data.data}).catch(i=>{s.value=!1})},g=(i=[])=>{v.dialog({component:ae,componentProps:{dataHeader:i}}).onOk(async n=>{L()})},M=i=>{};return(i,n)=>(m(),h("div",le,[t("div",oe,[te,t("div",se,[a(O,{icon:"add",color:"blue",onClick:n[0]||(n[0]=e=>g())},{default:l(()=>[a(b,null,{default:l(()=>[C("Create New Location")]),_:1})]),_:1})])]),a(A),t("div",ne,[t("div",de,[a(B,{title:"Location List",rows:u.value,columns:d.value,"row-key":"MLOC_LOCCD",loading:s.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":l(()=>[a(F,{outlined:"",modelValue:_.value,"onUpdate:modelValue":n[1]||(n[1]=e=>_.value=e),options:i.col,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),a(w,{borderless:"",dense:"",modelValue:f.value,"onUpdate:modelValue":[n[2]||(n[2]=e=>f.value=e),n[3]||(n[3]=e=>i.getOutgoingData())],placeholder:"Search",outlined:"",debounce:"1000"},{append:l(()=>[a(E,{name:"search"})]),_:1},8,["modelValue"])]),header:l(e=>[a(R,{props:e},{default:l(()=>[a(I,{"auto-width":""},{default:l(()=>[C("Action")]),_:1}),(m(!0),h(V,null,k(e.cols,o=>(m(),D(I,{key:o.name,props:e},{default:l(()=>[C(p(o.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(e=>[a(R,{props:e},{default:l(()=>[a(P,{"auto-width":""},{default:l(()=>[a(O,{flat:"",color:parseInt(e.row.CONFIRMED_QTY)==e.row.TOT_RCV?"grey":"orange",icon:"edit",onClick:o=>g(e.row),dense:"",disable:parseInt(e.row.CONFIRMED_QTY)==e.row.TOT_RCV},{default:l(()=>[a(b,null,{default:l(()=>[C(p(parseInt(e.row.CONFIRMED_QTY)==e.row.TOT_RCV?"All qty already confirmed":"Edit Data"),1)]),_:2},1024)]),_:2},1032,["color","onClick","disable"]),a(O,{flat:"",color:parseInt(e.row.CONFIRMED_QTY)==e.row.TOT_RCV?"grey":"red",icon:"delete",onClick:o=>M(e.row.id),dense:"",disable:parseInt(e.row.CONFIRMED_QTY)==e.row.TOT_RCV},{default:l(()=>[a(b,null,{default:l(()=>[C(p(parseInt(e.row.CONFIRMED_QTY)==e.row.TOT_RCV?"All qty already confirmed":"Delete Data"),1)]),_:2},1024)]),_:2},1032,["color","onClick","disable"])]),_:2},1024),(m(!0),h(V,null,k(e.cols,o=>(m(),D(P,{key:o.name,props:e},{default:l(()=>[C(p(o.value),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{ve as default};
