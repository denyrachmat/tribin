import{h as c,c as F,J as Y,K as J,s as C,o as E,B as g,C as b,D as e,E as a,L as W,M as q,I as i,O,P as S,R as x,S as H,T as Q,U as X,H as s,Q as p,V as P,W as Z,X as V,Y as j,Z as ee,$ as ae}from"./index.a38d2df1.js";import{Q as k}from"./QTooltip.5acd69d1.js";import{u as G,a as K,Q as L,b as M,c as f,d as A,e as te}from"./QTable.43410334.js";import{api as R,api_web as B}from"./axios.1472d34f.js";import{_ as oe}from"./assignConditionsView.200d152a.js";const le=[c("g",{transform:"translate(20 50)"},[c("rect",{x:"-10",y:"-30",width:"20",height:"60",fill:"currentColor",opacity:"0.6"},[c("animateTransform",{attributeName:"transform",type:"scale",from:"2",to:"1",begin:"0s",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keySplines:"0.1 0.9 0.4 1",keyTimes:"0;1",values:"2;1"})])]),c("g",{transform:"translate(50 50)"},[c("rect",{x:"-10",y:"-30",width:"20",height:"60",fill:"currentColor",opacity:"0.8"},[c("animateTransform",{attributeName:"transform",type:"scale",from:"2",to:"1",begin:"0.1s",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keySplines:"0.1 0.9 0.4 1",keyTimes:"0;1",values:"2;1"})])]),c("g",{transform:"translate(80 50)"},[c("rect",{x:"-10",y:"-30",width:"20",height:"60",fill:"currentColor",opacity:"0.9"},[c("animateTransform",{attributeName:"transform",type:"scale",from:"2",to:"1",begin:"0.2s",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keySplines:"0.1 0.9 0.4 1",keyTimes:"0;1",values:"2;1"})])])];var U=F({name:"QSpinnerFacebook",props:Y,setup(D){const{cSize:_,classes:d}=J(D);return()=>c("svg",{class:d.value,width:_.value,height:_.value,viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},le)}});const ne=i("div",{class:"text-h6"},"Position Assign",-1),se={class:"text-h5"},ie={__name:"positionAssignCondition",props:{groups:String,listCond:Array},setup(D){const{dialogRef:_,onDialogHide:d,onDialogOK:u,onDialogCancel:w}=G(),m=K(),r=D,n=C([]);E(()=>{n.value=r.listCond});const N=o=>{I(n.value,o,o-1)},y=o=>{I(n.value,o,o+1)},I=(o,h,t)=>{let l=o[h];o[h]=o[t],o[t]=l},T=()=>{m.dialog({title:"Confirmation",message:"Do you want to save this group ?",cancel:!0,persistent:!0}).onOk(async()=>{m.loading.show({spinner:U,spinnerColor:"yellow",spinnerSize:140,backgroundColor:"purple",message:"Save your information, Hang on...",messageColor:"black"}),await R.post("/master/conditions/assignGroup",{data:n.value,MCONDITION_RPT_STAT:r.groups}).then(async o=>{m.loading.hide(),u()}).catch(o=>{m.loading.hide()})})};return(o,h)=>(g(),b(j,{ref_key:"dialogRef",ref:_,onHide:V(d),"transition-show":"slide-up","transition-hide":"slide-down","full-width":""},{default:e(()=>[a(W,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:e(()=>[a(q,null,{default:e(()=>[ne]),_:1}),a(q,{class:"q-pa-sm"},{default:e(()=>[i("span",se,O(r.groups),1),a(L,{bordered:""},{default:e(()=>[(g(!0),S(x,null,H(n.value,(t,l)=>Q((g(),b(M,{key:t.id,class:"q-my-sm",clickable:"",dense:""},{default:e(()=>[a(f,{avatar:""},{default:e(()=>[a(X,{color:"primary","text-color":"white"},{default:e(()=>[s(O(l+1),1)]),_:2},1024)]),_:2},1024),a(f,null,{default:e(()=>[a(A,null,{default:e(()=>[s(O(t.MCONDITION_DESCRIPTION),1)]),_:2},1024)]),_:2},1024),a(f,{side:""},{default:e(()=>[a(p,{icon:"arrow_upward",color:"green",flat:"",disable:l===0,onClick:v=>N(l)},{default:e(()=>[a(k,null,{default:e(()=>[s("Promote Positions")]),_:1})]),_:2},1032,["disable","onClick"])]),_:2},1024),a(f,{side:""},{default:e(()=>[a(p,{icon:"arrow_downward",color:"green",flat:"",disable:l===n.value.length-1,onClick:v=>y(l)},{default:e(()=>[a(k,null,{default:e(()=>[s("Demote Positions")]),_:1})]),_:2},1032,["disable","onClick"])]),_:2},1024)]),_:2},1024)),[[P]])),128))]),_:1})]),_:1}),a(Z,{align:"right"},{default:e(()=>[a(p,{label:"OK",color:"primary",onClick:h[0]||(h[0]=t=>T()),disable:o.loading,loading:o.loading},null,8,["disable","loading"]),a(p,{flat:"",label:"Cancel",color:"red",onClick:V(w),loading:o.loading},null,8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}};const re={class:"q-pa-md"},de=i("div",{class:"row"},[i("div",{class:"col"},[i("div",{class:"text-h6"},"Assign Condition Group")])],-1),ue={class:"row q-pt-md"},ce={class:"col"},pe={class:"row"},me={class:"col"},ge={class:"col text-right"},fe={class:"row q-pt-md"},_e={class:"col",style:{"max-height":"80vh",overflow:"auto"}},we={__name:"assignConditions",setup(D){C([{name:"id",align:"left",label:"ID",field:"id",sortable:!0},{name:"MCONDITION_DESCRIPTION",align:"left",label:"Description",field:"MCONDITION_DESCRIPTION",sortable:!0}]);const _=C([]);C({sortBy:"desc",descending:!1,rowsPerPage:0});const d=C([]),u=C(""),w=C("new"),m=C(!1),r=K();G(),E(()=>{y()});const n=()=>{d.value=[],u.value="",w.value="new"},N=()=>{r.dialog({title:"Confirmation",message:"Are you sure want to delete this group ?",cancel:!0,persistent:!0}).onOk(async()=>{r.loading.show({spinner:U,spinnerColor:"yellow",spinnerSize:140,backgroundColor:"purple",message:"Save your information, Hang on...",messageColor:"black"}),await R.delete(`/master/conditions/deleteDataGroup/${btoa(u.value)}`).then(t=>{r.loading.hide(),n()})})},y=async()=>{m.value=!0,await R.get("/master/conditions/getdata").then(t=>{console.log(t),m.value=!1,_.value=t.data}).catch(t=>{m.value=!1})},I=()=>{r.dialog({component:oe}).onOk(async t=>{u.value=t.MCONDITION_RPT_STAT,d.value=t.group.map(l=>l.id),w.value="edit"})},T=()=>{r.dialog({component:ie,componentProps:{groups:u.value,listCond:d.value}}).onOk(async t=>{n()})},o=()=>{r.dialog({title:"Add Conditions",message:"Input conditions",prompt:{model:"",isValid:t=>t.length>2,type:"text"},cancel:!0,persistent:!0}).onOk(async t=>{await B.post("condition",{MCONDITION_DESCRIPTION:t,MCONDITION_ORDER_NUMBER:null}).then(async l=>{n(),await y()})})},h=t=>{r.dialog({title:"Confirmation",message:"Are you sure want to delete this data ?",cancel:!0,persistent:!0}).onOk(async()=>{await B.delete(`condition/${btoa(t)}`).then(async l=>{n(),await y()})})};return(t,l)=>(g(),S("div",re,[de,i("div",ue,[i("div",ce,[i("div",pe,[i("div",me,[a(ee,{label:"Group Name",outlined:"",dense:"",modelValue:u.value,"onUpdate:modelValue":l[0]||(l[0]=v=>u.value=v),disable:w.value==="edit"},{after:e(()=>[a(p,{dense:"",icon:"search",color:"blue",flat:"",onClick:I})]),_:1},8,["modelValue","disable"])]),i("div",ge,[a(te,{outline:""},{default:e(()=>[a(p,{outline:"",color:"blue",icon:"description",onClick:n},{default:e(()=>[a(k,null,{default:e(()=>[s("New")]),_:1})]),_:1}),a(p,{outline:"",color:"blue",icon:"save",onClick:T,disable:!u.value||d.value.length===0},{default:e(()=>[a(k,null,{default:e(()=>[s("Save Conditions")]),_:1})]),_:1},8,["disable"]),a(p,{outline:"",color:"blue",icon:"add",onClick:l[1]||(l[1]=v=>o())},{default:e(()=>[a(k,null,{default:e(()=>[s("Add more conditions")]),_:1})]),_:1}),a(p,{outline:"",color:"red",icon:"delete",onClick:N,disable:!u.value},{default:e(()=>[a(k,null,{default:e(()=>[s("Delete")]),_:1})]),_:1},8,["disable"])]),_:1})])]),i("div",fe,[i("div",_e,[a(L,{bordered:""},{default:e(()=>[_.value.length===0?Q((g(),b(M,{key:0,class:"q-my-sm",clickable:"",tag:"label"},{default:e(()=>[m.value?(g(),b(f,{key:0},{default:e(()=>[s(" Data is loading, please wait. ")]),_:1})):(g(),b(f,{key:1},{default:e(()=>[s(" No Data Available ! ")]),_:1}))]),_:1})),[[P]]):(g(!0),S(x,{key:1},H(_.value,(v,z)=>Q((g(),b(M,{key:z,class:"q-my-sm",clickable:"",tag:"label"},{default:e(()=>[a(f,{side:"",top:""},{default:e(()=>[a(ae,{modelValue:d.value,"onUpdate:modelValue":l[2]||(l[2]=$=>d.value=$),val:v.id},null,8,["modelValue","val"])]),_:2},1024),a(f,null,{default:e(()=>[a(A,null,{default:e(()=>[s(O(v.MCONDITION_DESCRIPTION),1)]),_:2},1024),a(A,{caption:"",lines:"1"},{default:e(()=>[s("Description")]),_:1})]),_:2},1024),a(f,{side:""},{default:e(()=>[a(p,{icon:"delete",color:"red",outline:"",onClick:$=>h(v.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)),[[P]])),128))]),_:1})])])])])]))}};export{we as default};
