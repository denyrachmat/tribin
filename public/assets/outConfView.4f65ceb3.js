import{s as m,o as x,B as u,C as S,D as a,E as e,L as P,M as E,I as l,O as L,P as T,R as y,S as A,bc as U,Z as b,Q as I,H as D,W as K,X as $,Y as X,aX as z,am as W}from"./index.ce74989d.js";import{a as B,u as Z,l as O,k as j,m as q}from"./QTable.af3476e7.js";import{Q as N,a as H}from"./QTd.02bf1af6.js";import{Q as Y}from"./QTooltip.b0ba25cf.js";import{api_web as w}from"./axios.5a9d16ec.js";const G={class:"text-h6"},J={style:{border:"1px black solid","border-radius":"10px"}},ee=l("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[l("b",null,"Item Checker")],-1),le={class:"col"},ae={class:"col q-pl-md"},oe={class:"col q-pl-md"},te={style:{border:"1px black solid","border-radius":"10px",height:"35vh",overflow:"auto"}},ne=l("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[l("div",{class:"row"},[l("div",{class:"col"},[l("b",null,"Accesories")])])],-1),se={class:"row"},de={class:"col text-right"},ie={class:"col"},ue={class:"col q-pl-md"},re={__name:"onCheckItem",props:{idHead:String,dataHeader:Array},setup(R){const V=B(),g=R,_=m([]),r=m([]),C=m([]),d=m(!1);x(()=>{_.value=g.dataHeader.dlvdet,h()});const h=async p=>{d.value=!0,await w.post("item/searchAPITBL",{searchValue:p}).then(o=>{d.value=!1,r.value=o.data.data}).catch(()=>{d.value=!1})},M=(p,o,n,v)=>{o(async()=>{v==="item"&&await h(p)})},i=()=>{const p=_.value.filter(o=>!o.TDLVORDDETA_ITMCD_ACT);p.length>0?p.map(o=>{V.notify({color:"negative",message:`item ${o.MITM_ITMNMREAL} item actual not filled yet, please add it first !!`})}):V.dialog({title:"Confirmation",message:"Are you sure want to save this outgoing ?",cancel:!0,persistent:!0}).onOk(async()=>{d.value=!0,await w.post("delivery/confirm",{id:g.idHead,data:_.value}).then(o=>{d.value=!1,r.value=o.data.data}).catch(()=>{d.value=!1})})},{dialogRef:c,onDialogHide:t,onDialogOK:f,onDialogCancel:F}=Z();return(p,o)=>(u(),S(X,{ref_key:"dialogRef",ref:c,onHide:$(t),"transition-show":"slide-up","transition-hide":"slide-down","full-width":""},{default:a(()=>[e(P,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:a(()=>[e(E,null,{default:a(()=>[l("div",G,"Item Check "+L(p.val),1)]),_:1}),e(E,null,{default:a(()=>[l("fieldset",J,[ee,(u(!0),T(y,null,A(_.value,(n,v)=>(u(),T("div",{class:U(`row ${v>0?"q-pt-md":""}`),key:v},[l("div",le,[e(b,{filled:"",dense:"",label:"Item Request",modelValue:n.MITM_ITMNMREAL,"onUpdate:modelValue":s=>n.MITM_ITMNMREAL=s,readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),l("div",ae,[e(b,{filled:"",dense:"",label:"Qty",modelValue:n.TDLVORDDETA_ITMQT,"onUpdate:modelValue":s=>n.TDLVORDDETA_ITMQT=s,readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),l("div",oe,[e(O,{dense:"",filled:"",label:"Item Code Confirmation",modelValue:n.TDLVORDDETA_ITMCD_ACT,"onUpdate:modelValue":s=>n.TDLVORDDETA_ITMCD_ACT=s,"use-input":"","input-debounce":"500",options:r.value,onFilter:(s,k,Q)=>M(s||n.MITM_ITMNMREAL,k,Q,"item"),behavior:"dialog","option-label":"MITM_ITMNM","option-value":"MITM_ITMCD","emit-value":"","map-options":"",loading:d.value},null,8,["modelValue","onUpdate:modelValue","options","onFilter","loading"])])],2))),128))]),l("fieldset",te,[ne,l("div",se,[l("div",de,[e(I,{icon:"add",color:"indigo",flat:"",dense:"",onClick:o[0]||(o[0]=n=>C.value.push({TDLVACCESSORY_ITMCD:"",TDLVACCESSORY_ITMQT:0}))},{default:a(()=>[e(Y,null,{default:a(()=>[D("Add Accesories")]),_:1})]),_:1})])]),(u(!0),T(y,null,A(C.value,(n,v)=>(u(),T("div",{class:U(`row ${v>0?"q-pt-md":""}`),key:v},[l("div",ie,[e(O,{dense:"",filled:"",label:"Item Code Accesories",modelValue:n.TDLVACCESSORY_ITMCD,"onUpdate:modelValue":s=>n.TDLVACCESSORY_ITMCD=s,"use-input":"","input-debounce":"500",options:r.value,onFilter:o[1]||(o[1]=(s,k,Q)=>M(s,k,Q,"item")),behavior:"dialog","option-label":"MITM_ITMNM","option-value":"MITM_ITMCD","emit-value":"","map-options":"",loading:d.value},null,8,["modelValue","onUpdate:modelValue","options","loading"])]),l("div",ue,[e(b,{filled:"",dense:"",label:"Qty",modelValue:n.TDLVACCESSORY_ITMQT,"onUpdate:modelValue":s=>n.TDLVACCESSORY_ITMQT=s,readonly:""},null,8,["modelValue","onUpdate:modelValue"])])],2))),128))])]),_:1}),e(K,{align:"right"},{default:a(()=>[e(I,{label:"OK",color:"primary",onClick:o[2]||(o[2]=n=>i()),loading:d.value},null,8,["loading"]),e(I,{flat:"",label:"Cancel",color:"red",onClick:$(F)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},ce={class:"q-pa-md"},me=l("div",{class:"row q-pb-md"},[l("div",{class:"col"},[l("span",{class:"text-h4"},"Outgoing Confirmation")])],-1),pe={class:"row q-pt-md"},_e={class:"col"},De={__name:"outConfView",setup(R){const V=B(),g=m([]),_=m([{name:"TDLVORD_DLVCD",label:"DO Number",field:"TDLVORD_DLVCD",sortable:!0,align:"left"},{name:"MCUS_CUSNM",label:"Customer",field:"MCUS_CUSNM",sortable:!0,align:"left"}]),r=m(!1),C=m(""),d=m("");x(()=>{h()});const h=async()=>{r.value=!0,await w.post("delivery/unconfirmed",{searchBy:C.value,searchValue:d.value}).then(i=>{r.value=!1,g.value=i.data.data}).catch(i=>{r.value=!1})},M=i=>{console.log(i),V.dialog({component:re,componentProps:{idHead:i.TDLVORD_DLVCD,dataHeader:i}}).onOk(async c=>{})};return(i,c)=>(u(),T("div",ce,[me,e(z),l("div",pe,[l("div",_e,[e(j,{title:"Outstanding Confirmation",rows:g.value,columns:_.value,"row-key":"name",loading:r.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":a(()=>[e(O,{outlined:"",modelValue:C.value,"onUpdate:modelValue":c[0]||(c[0]=t=>C.value=t),options:_.value,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),e(b,{borderless:"",dense:"",modelValue:d.value,"onUpdate:modelValue":[c[1]||(c[1]=t=>d.value=t),c[2]||(c[2]=t=>i.dataOutstanding())],placeholder:"Search",outlined:"",debounce:"1000"},{append:a(()=>[e(W,{name:"search"})]),_:1},8,["modelValue"])]),header:a(t=>[e(N,{props:t},{default:a(()=>[(u(!0),T(y,null,A(t.cols,f=>(u(),S(q,{key:f.name,props:t},{default:a(()=>[D(L(f.label),1)]),_:2},1032,["props"]))),128)),e(q,{"auto-width":""},{default:a(()=>[D("Action")]),_:1})]),_:2},1032,["props"])]),body:a(t=>[e(N,{props:t},{default:a(()=>[(u(!0),T(y,null,A(t.cols,f=>(u(),S(H,{key:f.name,props:t},{default:a(()=>[D(L(f.value),1)]),_:2},1032,["props"]))),128)),e(H,{"auto-width":""},{default:a(()=>[e(I,{flat:"",color:"green",icon:"check",onClick:f=>M(t.row),dense:""},{default:a(()=>[e(Y,null,{default:a(()=>[D("Confirm Delivery")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{De as default};
