import{B as s,C as w,D as o,E as t,J as P,K as d,L as x,Q as C,M as A,O as S,I as l,s as p,P as R,aa as Q,a$ as i,S as E,o as I,R as c,aY as b,aZ as k,b4 as B,H as q}from"./index.f580c279.js";import{u as N,a as O,b as M,o as H}from"./use-dialog-plugin-component.469551ba.js";import{d as L,Q as $,b as V}from"./date.9d50e649.js";import{api_web as K}from"./axios.217b234b.js";const U=l("div",{class:"text-h6"},"Review Item List",-1),J={__name:"viewListApprovalItem",setup(y){const{dialogRef:v,onDialogHide:h,onDialogOK:u,onDialogCancel:_}=N();return(r,m)=>(s(),w(S,{ref_key:"dialogRef",ref:v,onHide:A(h),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:o(()=>[t(P,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:o(()=>[t(d,null,{default:o(()=>[U]),_:1}),t(d,{class:"q-pa-sm",style:{height:"70vh",overflow:"auto"}}),t(x,{align:"center"},{default:o(()=>[t(C,{label:"OK",color:"primary",onClick:m[0]||(m[0]=f=>A(u)()),disable:r.stateSubmit},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},z=l("div",{class:"text-h6"},"Approval List",-1),G={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},j={class:"text-h5 text-bold"},F={class:"text-h6 text-bold"},Y={class:"text-subtitle2"},Z={class:"row"},W={class:"col"},X={class:"col text-right"},ee={__name:"viewListApproval",props:{listApprv:Array},setup(y){const v=y,h=p([{name:"APP_CD",label:"Doc Code",field:"APP_CD"},{name:"APP_CUSNM",label:"Customer",field:"APP_CUSNM"},{name:"APP_SBJCT",label:"Subject",field:"APP_SBJCT"},{name:"APP_ATTN",label:"Attn",field:"APP_ATTN"},{name:"CREATED_AT",label:"Created Date",field:"CREATED_AT"}]),u=p(""),_=(n,a="days")=>{const e=new Date,D=new Date(n);return L.getDateDiff(e,D,a)},r=n=>{$q.dialog({component:J,componentProps:{cd:n}}).onOk(async a=>{quotationGroupConditions.value=a.MCONDITION_RPT_STAT,quotationConditions.value=a.group})},{dialogRef:m,onDialogHide:f,onDialogOK:T,onDialogCancel:g}=N();return(n,a)=>(s(),w(S,{ref_key:"dialogRef",ref:m,onHide:A(f),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:o(()=>[t(P,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:o(()=>[t(d,null,{default:o(()=>[z]),_:1}),t(d,{class:"q-pa-sm",style:{height:"70vh",overflow:"auto"}},{default:o(()=>[t(O,{grid:"",flat:"",bordered:"","card-container-class":n.cardContainerClass,title:"Outstanding Approval",rows:v.listApprv,columns:h.value,"row-key":"name",filter:u.value,"hide-header":"",pagination:{rowsPerPage:50},"rows-per-page-options":n.rowsPerPageOptions},{"top-right":o(()=>[t(R,{borderless:"",dense:"",debounce:"300",modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),placeholder:"Search"},{append:o(()=>[t(Q,{name:"search"})]),_:1},8,["modelValue"])]),item:o(e=>[l("div",G,[t(P,{flat:"",bordered:""},{default:o(()=>[t(d,{class:"text-center bg-secondary text-white"},{default:o(()=>[l("div",j,i(e.row.APP_CUSNM),1)]),_:2},1024),t(E),t(d,null,{default:o(()=>[l("div",F,i(e.row.APP_CD),1),l("div",Y,i(e.row.APP_SBJCT),1)]),_:2},1024),t(d,null,{default:o(()=>[l("div",Z,[l("div",W,[t(C,{label:"Preview",color:"primary",outline:"",onClick:D=>r(e.row.APP_CD)},null,8,["onClick"])]),l("div",X,i(_(e.row.CREATED_AT)<30?`${_(e.row.CREATED_AT)} Days Ago`:`${_(e.row.CREATED_AT,"months")} Month ago`),1)])]),_:2},1024)]),_:2},1024)])]),_:1},8,["card-container-class","rows","columns","filter","rows-per-page-options"])]),_:1}),t(x,{align:"right"},{default:o(()=>[t(C,{label:"OK",color:"primary",onClick:a[1]||(a[1]=e=>A(T)()),disable:n.stateSubmit},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},te={class:"q-pa-md bg-grey-5 window-height"},oe={class:"row"},ae={class:"row"},le={class:"col"},se={class:"text-h3 text-cyan"},ne={class:"text-subtitle2 text-cyan"},ie={class:"col text-right"},re={class:"row q-pa-sm"},ce={class:"col"},de={key:1},ge={__name:"dashboardView",setup(y){const v=M(),h=p([{total:900,title:"Total Sales",icon:"shopping_cart",color:"cyan"},{total:900,title:"Total Purchase",icon:"shopping_bag",color:"cyan"},{total:900,title:"Total Profit",icon:"payments",color:"cyan"},{total:15,title:"Total Customer",icon:"group",color:"cyan"},{total:15,title:"Total Customer",icon:"group",color:"cyan"},{total:15,title:"Total Customer",icon:"group",color:"cyan"},{total:15,title:"Total Customer",icon:"group",color:"cyan"},{total:15,title:"Total Customer",icon:"group",color:"cyan"}]),u=p([{name:"name",label:"Business",field:"name",sortable:!0,align:"left"},{name:"quot",label:"Quotation",field:"quot_count",sortable:!0,align:"center"},{name:"pr",label:"Purchase Request",field:"pr_count",sortable:!0,align:"center"},{name:"po",label:"Purchase Order",field:"po_count",sortable:!0,align:"center"},{name:"spk",label:"SPK",field:"spk_count",sortable:!0,align:"center"}]),_=p([]),r=p(!1),m=p(null);I(async()=>{await f(),m.value=setInterval(f(),2e3)});const f=async()=>{r.value=!0,await K.get("/approval/notificationsAPI/top-user").then(g=>{r.value=!1,_.value=g.data}).catch(g=>{r.value=!1})},T=g=>{v.dialog({component:ee,componentProps:{listApprv:g}}).onOk(async n=>{quotationGroupConditions.value=n.MCONDITION_RPT_STAT,quotationConditions.value=n.group})};return(g,n)=>(s(),c("div",te,[l("div",oe,[(s(!0),c(b,null,k(h.value,(a,e)=>(s(),c("div",{class:B("col-3 q-pa-sm"),key:e},[t(P,null,{default:o(()=>[t(d,null,{default:o(()=>[l("div",ae,[l("div",le,[l("div",se,i(a.total),1),l("div",ne,i(a.title),1)]),l("div",ie,[t(Q,{name:a.icon,size:"4.4em",color:a.color},null,8,["name","color"])])])]),_:2},1024)]),_:2},1024)]))),128))]),l("div",re,[l("div",ce,[t(O,{flat:"",bordered:"",title:"Approval List",rows:_.value,columns:u.value,"row-key":"name",loading:r.value},{"top-right":o(()=>[t(C,{flat:"",icon:"refresh",color:"cyan",onClick:f})]),header:o(a=>[t($,{props:a},{default:o(()=>[(s(!0),c(b,null,k(a.cols,e=>(s(),w(H,{key:e.name,props:a},{default:o(()=>[q(i(e.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:o(a=>[t($,{props:a},{default:o(()=>[(s(!0),c(b,null,k(a.cols,e=>(s(),w(V,{key:e.name,props:a},{default:o(()=>[e.name==="quot"||e.name==="pr"||e.name==="po"||e.name==="spk"?(s(),c(b,{key:0},[e.value>0?(s(),w(C,{key:0,flat:"",color:"blue",onClick:D=>T(a.row[e.name.split("_")[0]])},{default:o(()=>[l("b",null,i(e.value),1)]),_:2},1032,["onClick"])):(s(),c("span",de,i(e.value),1))],64)):(s(),c(b,{key:1},[q(i(e.value),1)],64))]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{ge as default};
