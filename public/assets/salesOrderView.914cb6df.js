import{Q as U}from"./QTooltip.e0fb8d0a.js";import{s as r,B as f,C as Q,D as l,E as e,L as X,M as R,I as t,Z as g,am as k,T as y,Q as T,O as u,P as V,R as P,S as A,U as G,H as i,V as K,X as Z,Y as z,o as J,aX as W}from"./index.73444d84.js";import{a as B,u as ee,l as H,Q as le,b as M,c as D,d as S,k as ae,m as q}from"./QTable.09b9b44a.js";import{Q as E,a as N}from"./QTd.5beedf33.js";import{api_web as I}from"./axios.18cf4663.js";import{Q as Y,a as $,C as x}from"./ClosePopup.216f90a5.js";import"./use-cache.b0833c75.js";import"./date.66b9769a.js";const te=t("div",{class:"text-h6"},"RO Maintenance",-1),oe={style:{border:"1px black solid","border-radius":"10px"}},se=t("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[t("b",null,"Header")],-1),ne={class:"row"},de={class:"col"},ie={class:"col q-pl-md"},ue={class:"row items-center justify-end"},re={class:"col q-pl-md"},_e={class:"row items-center justify-end"},ce={class:"row"},me={class:"col"},fe={class:"col q-pl-md"},ve={style:{border:"1px black solid","border-radius":"10px",height:"35vh",overflow:"auto"}},De=t("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[t("b",null,"Detail Items")],-1),pe={class:"row q-pb-md"},Se={class:"col"},Te={class:"text-h6"},Oe={class:"col text-right"},Ce={class:"row"},be={class:"col"},ge={__name:"salesOrderCreate",setup(F){B();const n=r({TSLO_SLOCD:"",TSLO_ISSUDT:"",TSLO_PLAN_DLVDT:"",TSLO_QUOCD:"",TSLO_POCD:""});r(""),r("");const p=r([]),d=r(!1),b=r(1),L=r([]),O=(c,a,o,C)=>{a(async()=>{C==="quotation"&&await h(c)})},h=async(c="")=>{d.value=!0,await I.post("quotation/search",{searchBy:"MCUS_CUSNM",searchValue:c}).then(a=>{d.value=!1,p.value=a.data.data}).catch(a=>{d.value=!1})},w=()=>b.value===1?"Rental":b.value===2?"Sales":"Service",_=async c=>{console.log(c),d.value=!0,await I.get(`quotation/view/${btoa(c)}`).then(a=>{d.value=!1,p.value=a.data.data}).catch(a=>{d.value=!1})},{dialogRef:v,onDialogHide:s,onDialogOK:m,onDialogCancel:ye}=ee();return(c,a)=>(f(),Q(z,{ref_key:"dialogRef",ref:v,onHide:Z(s),"transition-show":"slide-up","transition-hide":"slide-down","full-width":""},{default:l(()=>[e(X,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:l(()=>[e(R,null,{default:l(()=>[te]),_:1}),e(R,{class:"q-pa-sm"},{default:l(()=>[t("fieldset",oe,[se,t("div",ne,[t("div",de,[e(g,{label:"RO Code",dense:"",filled:"",modelValue:n.value.TSLO_SLOCD,"onUpdate:modelValue":a[0]||(a[0]=o=>n.value.TSLO_SLOCD=o),disable:"",loading:d.value},null,8,["modelValue","loading"])]),t("div",ie,[e(g,{filled:"",modelValue:n.value.TSLO_ISSUDT,"onUpdate:modelValue":a[2]||(a[2]=o=>n.value.TSLO_ISSUDT=o),dense:"",label:"Issue Date",loading:d.value,onClick:a[3]||(a[3]=o=>c.quotationIssueDate.qDateProxy.show()),mask:"####-##-##","fill-mask":"",hint:"Mask: YYYY-MM-DD"},{append:l(()=>[e(k,{name:"event",class:"cursor-pointer"},{default:l(()=>[e(Y,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e($,{modelValue:n.value.TSLO_ISSUDT,"onUpdate:modelValue":a[1]||(a[1]=o=>n.value.TSLO_ISSUDT=o),mask:"YYYY-MM-DD"},{default:l(()=>[t("div",ue,[y(e(T,{label:"Close",color:"primary",flat:""},null,512),[[x]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","loading"])]),t("div",re,[e(g,{filled:"",modelValue:n.value.TSLO_PLAN_DLVDT,"onUpdate:modelValue":a[5]||(a[5]=o=>n.value.TSLO_PLAN_DLVDT=o),dense:"",label:"Delivery Date",loading:d.value,onClick:a[6]||(a[6]=o=>c.quotationIssueDate.qDateProxy.show()),mask:"####-##-##","fill-mask":"",hint:"Mask: YYYY-MM-DD"},{append:l(()=>[e(k,{name:"event",class:"cursor-pointer"},{default:l(()=>[e(Y,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e($,{modelValue:n.value.TSLO_PLAN_DLVDT,"onUpdate:modelValue":a[4]||(a[4]=o=>n.value.TSLO_PLAN_DLVDT=o),mask:"YYYY-MM-DD"},{default:l(()=>[t("div",_e,[y(e(T,{label:"Close",color:"primary",flat:""},null,512),[[x]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","loading"])])]),t("div",ce,[t("div",me,[e(H,{dense:"",filled:"",label:"Sales Quotation Code",modelValue:n.value.TSLO_QUOCD,"onUpdate:modelValue":[a[7]||(a[7]=o=>n.value.TSLO_QUOCD=o),_],"use-input":"","input-debounce":"500",options:p.value,onFilter:a[8]||(a[8]=(o,C,j)=>O(o,C,j,"quotation")),behavior:"dialog","option-label":"DESCSEL","option-value":"TQUO_QUOCD","emit-value":"","map-options":"",loading:d.value},null,8,["modelValue","options","loading"])]),t("div",fe,[e(g,{label:"PO Number",dense:"",filled:"",modelValue:n.value.TSLO_POCD,"onUpdate:modelValue":a[9]||(a[9]=o=>n.value.TSLO_POCD=o),loading:d.value},null,8,["modelValue","loading"])])])]),t("fieldset",ve,[De,t("div",pe,[t("div",Se,[t("span",Te,u(w()),1)]),t("div",Oe,[e(T,{icon:"add"})])]),t("div",Ce,[t("div",be,[e(le,{bordered:"",dense:""},{default:l(()=>[c.listSavedItems.length>0?(f(!0),V(P,{key:0},A(L.value,(o,C)=>(f(),Q(M,{key:C,class:"q-my-sm",dense:""},{default:l(()=>[e(D,{avatar:""},{default:l(()=>[e(G,{"text-color":"blue"},{default:l(()=>[i(u(C+1),1)]),_:2},1024)]),_:2},1024),e(D,null,{default:l(()=>[e(S,null,{default:l(()=>[i(u(o.TSLODETA_ITMCD),1)]),_:2},1024)]),_:2},1024),e(D,null,{default:l(()=>[e(S,null,{default:l(()=>[i(u(o.TSLODETA_ITMQT),1)]),_:2},1024)]),_:2},1024),e(D,null,{default:l(()=>[e(S,null,{default:l(()=>[i(u(o.TSLODETA_USAGE),1)]),_:2},1024)]),_:2},1024),e(D,null,{default:l(()=>[e(S,null,{default:l(()=>[i(u(o.TSLODETA_PRC),1)]),_:2},1024)]),_:2},1024),e(D,null,{default:l(()=>[e(S,null,{default:l(()=>[i(u(o.TSLODETA_PERIOD_FR),1)]),_:2},1024)]),_:2},1024),e(D,null,{default:l(()=>[e(S,null,{default:l(()=>[i(u(o.TSLODETA_PERIOD_TO),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)):y((f(),Q(M,{key:1,class:"q-my-sm",clickable:""},{default:l(()=>[e(D,null,{default:l(()=>[e(S,null,{default:l(()=>[i(" No Items Added ")]),_:1})]),_:1})]),_:1})),[[K]])]),_:1})])])])]),_:1})]),_:1})]),_:1},8,["onHide"]))}};const Qe={class:"q-pa-md"},Le={class:"row q-pb-md"},he=t("div",{class:"col"},[t("span",{class:"text-h4"},"Sales Order / Receive Order")],-1),Ue={class:"col text-right"},Ve={class:"row q-pt-md"},we={class:"col"},Ne={__name:"salesOrderView",setup(F){const n=B(),p=r("TQUO_QUOCD"),d=r(""),b=r([]),L=r([{name:"TSLO_SLOCD",label:"RO. Code",field:"TSLO_SLOCD",sortable:!0,align:"left"},{name:"MCUS_CUSNM",label:"Customer Name",field:"MCUS_CUSNM",sortable:!0,align:"left"},{name:"TSLO_ADDRESS_NAME",label:"Customer Addr.",field:"TSLO_ADDRESS_NAME",sortable:!0,align:"left"},{name:"TSLO_CUSCD",label:"Customer Code",field:"TSLO_CUSCD",sortable:!0,align:"left"},{name:"TSLO_ISSUDT",label:"Issue Date",field:"TSLO_ISSUDT",sortable:!0,align:"left"},{name:"TSLO_QUOCD",label:"Quot. Code",field:"TSLO_QUOCD",sortable:!0,align:"left"}]),O=r(!1);J(()=>{h()});const h=async()=>{O.value=!0,await I.post("receive-order/searchAPI",{searchBy:p.value,searchValue:d.value}).then(_=>{O.value=!1,b.value=_.data.data}).catch(_=>{O.value=!1})},w=()=>{n.dialog({component:ge}).onOk(async _=>{h()})};return(_,v)=>(f(),V("div",Qe,[t("div",Le,[he,t("div",Ue,[e(T,{icon:"add",color:"blue",onClick:w},{default:l(()=>[e(U,null,{default:l(()=>[i("Create New RO")]),_:1})]),_:1})])]),e(W),t("div",Ve,[t("div",we,[e(ae,{title:"Created RO",rows:b.value,columns:L.value,"row-key":"name",loading:O.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":l(()=>[e(H,{outlined:"",modelValue:p.value,"onUpdate:modelValue":v[0]||(v[0]=s=>p.value=s),options:L.value,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),e(g,{borderless:"",dense:"",modelValue:d.value,"onUpdate:modelValue":[v[1]||(v[1]=s=>d.value=s),v[2]||(v[2]=s=>_.dataQuo())],placeholder:"Search",outlined:"",debounce:"1000"},{append:l(()=>[e(k,{name:"search"})]),_:1},8,["modelValue"])]),header:l(s=>[e(E,{props:s},{default:l(()=>[e(q,{"auto-width":""},{default:l(()=>[i("Action")]),_:1}),(f(!0),V(P,null,A(s.cols,m=>(f(),Q(q,{key:m.name,props:s},{default:l(()=>[i(u(m.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(s=>[e(E,{props:s},{default:l(()=>[e(N,{"auto-width":""},{default:l(()=>[e(T,{flat:"",color:s.row.TQUO_APPRVDT!==null?"grey":"orange",icon:"edit",onClick:m=>_.onClickEdit(s.row.TQUO_QUOCD),dense:"",disable:s.row.TQUO_APPRVDT!==null},{default:l(()=>[e(U,null,{default:l(()=>[i(u(s.row.TQUO_APPRVDT?"Quotation already approved, cannot edit !":"Edit this quotation"),1)]),_:2},1024)]),_:2},1032,["color","onClick","disable"]),e(T,{flat:"",color:s.row.TQUO_APPRVDT!==null?"grey":"red",icon:"delete",onClick:m=>_.onClickDelete(s.row.TQUO_QUOCD),dense:"",disable:s.row.TQUO_APPRVDT!==null},{default:l(()=>[e(U,null,{default:l(()=>[i(u(s.row.TQUO_APPRVDT?"Quotation already approved, cannot delete !":"Delete this quotation"),1)]),_:2},1024)]),_:2},1032,["color","onClick","disable"]),e(T,{flat:"",color:"indigo",icon:"print",onClick:m=>_.onClickPrint(s.row.TQUO_QUOCD),dense:""},{default:l(()=>[e(U,null,{default:l(()=>[i("Print this quotation")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024),(f(!0),V(P,null,A(s.cols,m=>(f(),Q(N,{key:m.name,props:s},{default:l(()=>[i(u(m.value),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{Ne as default};
