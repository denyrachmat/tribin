import{Q as R}from"./QTooltip.df0b77fd.js";import{t as c,C as p,D as T,E as l,F as e,M as H,O as k,J as t,$ as C,an as L,U as M,Q as b,R as y,S as U,T as I,V as F,I as r,P as S,W as Y,Z as E,o as j,aY as z}from"./index.9331f0d0.js";import{a as O,l as x,Q as G,b as P,c as v,d as g,k as J,m as q}from"./QTable.5f7d852e.js";import{Q as $,a as N}from"./QTd.78dae6ef.js";import{api_web as A}from"./axios.7971899d.js";import{Q as W,a as Z}from"./QInnerLoading.2ea21cca.js";import{Q as K,a as X,C as ee}from"./ClosePopup.5a348f08.js";import{Q as le}from"./QBtnToggle.d03e4fe4.js";import"./use-render-cache.3aae9b27.js";import"./date.a1c31cf9.js";import"./QBtnGroup.2f51d3bd.js";const ae=t("div",{class:"text-h6"},"Create Incoming",-1),oe={style:{border:"1px black solid","border-radius":"10px"}},te=t("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[t("b",null,"Header")],-1),se={class:"row q-col-gutter-sm"},ne={class:"col-12 col-sm-6"},de={class:"col-12 col-sm-6"},ie={class:"row items-center justify-end"},ue={class:"row q-col-gutter-sm"},re={class:"col-12 col-sm-6"},ce={class:"row q-py-md"},me={class:"col"},pe={style:{border:"1px black solid","border-radius":"10px",height:"35vh",overflow:"auto"}},_e=t("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[t("b",null,"List Of Items")],-1),fe={class:"row q-pb-sm"},ve={class:"col text-right"},Ve={__name:"incomingCreate",props:{dataHeader:Array},setup(B){const w=O(),n=c({TRCV_RCVCD:"",TRCV_SUPCD:"",TRCV_ISSUDT:""}),h=c(1),m=c([]),d=c(!1),V=c([]),Q=(a,o,s,_)=>{o(async()=>{_==="cust"&&D(a),_==="item"&&await getItem(a)})},D=async(a,o="MSUP_SUPNM")=>{d.value=!0,await A.post("supplier/searchAPI",{searchValue:a,searchCol:o}).then(s=>{d.value=!1,V.value=s.data.data}).catch(()=>{d.value=!1})},u=a=>{w.dialog({title:"Confirmation",message:`Do you want to delete this lines no ${a+1} ?`,cancel:!0,persistent:!0}).onOk(async()=>{m.value.splice(a,1)})},i=()=>{m.value.push({item_code:"",MITM_ITMNM:"",quantity:"",unit_price:""})};return(a,o)=>(p(),T(E,{ref:"dialogRef",onHide:a.onDialogHide,"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:l(()=>[e(H,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:l(()=>[e(k,null,{default:l(()=>[ae]),_:1}),e(k,{class:"q-pa-sm"},{default:l(()=>[t("fieldset",oe,[te,e(W,{showing:d.value,dark:""},{default:l(()=>[e(Z,{size:"50px",color:"primary"})]),_:1},8,["showing"]),t("div",se,[t("div",ne,[e(C,{label:"Code",readonly:"",dense:"",filled:"",modelValue:n.value.TRCV_RCVCD,"onUpdate:modelValue":o[0]||(o[0]=s=>n.value.TRCV_RCVCD=s)},null,8,["modelValue"])]),t("div",de,[e(C,{filled:"",modelValue:n.value.TRCV_ISSUDT,"onUpdate:modelValue":o[2]||(o[2]=s=>n.value.TRCV_ISSUDT=s),dense:"",label:"Receive Date"},{append:l(()=>[e(L,{name:"event",class:"cursor-pointer"},{default:l(()=>[e(K,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(X,{modelValue:n.value.TRCV_ISSUDT,"onUpdate:modelValue":o[1]||(o[1]=s=>n.value.TRCV_ISSUDT=s),mask:"YYYY-MM-DD"},{default:l(()=>[t("div",ie,[M(e(b,{label:"Close",color:"primary",flat:""},null,512),[[ee]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),t("div",ue,[t("div",re,[e(x,{dense:"",filled:"",label:"Supplier Name",modelValue:n.value.TRCV_SUPCD,"onUpdate:modelValue":o[3]||(o[3]=s=>n.value.TRCV_SUPCD=s),"use-input":"","input-debounce":"500",options:V.value,onFilter:o[4]||(o[4]=(s,_,f)=>Q(s,_,f,"cust")),behavior:"dialog","option-label":"MSUP_SUPNM","option-value":"MSUP_SUPCD","emit-value":"","map-options":"",loading:d.value,disable:n.value.TRCV_RCVCD!==""},null,8,["modelValue","options","loading","disable"])])])]),t("div",ce,[t("div",me,[e(le,{modelValue:h.value,"onUpdate:modelValue":o[5]||(o[5]=s=>h.value=s),spread:"","no-caps":"","toggle-color":"purple",color:"white","text-color":"black",options:[{label:"From PO",value:1},{label:"Return",value:2}],disable:n.value.TRCV_RCVCD!==""},null,8,["modelValue","disable"])])]),t("fieldset",pe,[_e,t("div",fe,[t("div",ve,[e(b,{flat:"",icon:"add",color:"blue",label:"Add Lines",onClick:i,loading:d.value},null,8,["loading"])])]),e(G,{bordered:"",dense:""},{default:l(()=>[m.value.length>0?(p(!0),y(U,{key:0},I(m.value,(s,_)=>(p(),T(P,{key:_,class:"q-my-sm",dense:"",loading:d.value},{default:l(()=>[e(v,{avatar:""},{default:l(()=>[e(F,{"text-color":"blue"},{default:l(()=>[r(S(_+1),1)]),_:2},1024)]),_:2},1024),e(v,null,{default:l(()=>[e(g,null,{default:l(()=>[e(C,{dense:"",label:"Item Code",filled:"",modelValue:s.item_code,"onUpdate:modelValue":f=>s.item_code=f,readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(v,null,{default:l(()=>[e(g,null,{default:l(()=>[e(C,{dense:"",label:"Item Name",filled:"",modelValue:s.MITM_ITMNM,"onUpdate:modelValue":f=>s.MITM_ITMNM=f,readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(v,null,{default:l(()=>[e(g,null,{default:l(()=>[e(C,{dense:"",label:"Qty",filled:"",modelValue:s.quantity,"onUpdate:modelValue":f=>s.quantity=f},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(v,null,{default:l(()=>[e(g,null,{default:l(()=>[r(" Rp. "+S(s.unit_price.toLocaleString()),1)]),_:2},1024),e(g,{caption:""},{default:l(()=>[r(" Price ")]),_:1})]),_:2},1024),e(v,{side:""},{default:l(()=>[e(b,{icon:"delete",color:"red",flat:"",onClick:f=>u(_)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["loading"]))),128)):M((p(),T(P,{key:1,class:"q-my-sm",clickable:""},{default:l(()=>[e(v,null,{default:l(()=>[e(g,null,{default:l(()=>[r(" Choose sales order first to access item list ")]),_:1})]),_:1})]),_:1})),[[Y]])]),_:1})])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},ge={class:"q-pa-md"},Ce={class:"row q-pb-md"},be=t("div",{class:"col"},[t("span",{class:"text-h4"},"Incoming")],-1),Te={class:"col text-right"},he={class:"row q-pt-md"},De={class:"col"},$e={__name:"incomingIndex",setup(B){const w=O(),n=c([]),h=c([{name:"TRCV_RCVCD",label:"Receive ID",field:"TRCV_RCVCD",sortable:!0,align:"left"},{name:"MSUP_SUPNM",label:"Supplier Name",field:"MSUP_SUPNM",sortable:!0,align:"left"},{name:"TOT_RCV",label:"Total Qty",field:"TOT_RCV",sortable:!0,align:"left"},{name:"TOT_AMT",label:"Total Amount",field:"TOT_AMT",sortable:!0,align:"left"}]),m=c(!1),d=c(""),V=c("");j(()=>{Q()});const Q=async()=>{m.value=!0,await A.post("receive/searchAPI",{searchBy:d.value,searchValue:V.value}).then(u=>{m.value=!1,n.value=u.data.data}).catch(u=>{m.value=!1})},D=(u=[])=>{w.dialog({component:Ve,componentProps:{dataHeader:u}}).onOk(async i=>{getOutgoingData()})};return(u,i)=>(p(),y("div",ge,[t("div",Ce,[be,t("div",Te,[e(b,{icon:"add",color:"blue",onClick:i[0]||(i[0]=a=>D())},{default:l(()=>[e(R,null,{default:l(()=>[r("Create New Delivery")]),_:1})]),_:1})])]),e(z),t("div",he,[t("div",De,[e(J,{title:"Outgoing List",rows:n.value,columns:h.value,"row-key":"TDLVORD_DLVCD",loading:m.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":l(()=>[e(x,{outlined:"",modelValue:d.value,"onUpdate:modelValue":i[1]||(i[1]=a=>d.value=a),options:u.columns,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),e(C,{borderless:"",dense:"",modelValue:V.value,"onUpdate:modelValue":[i[2]||(i[2]=a=>V.value=a),i[3]||(i[3]=a=>u.getOutgoingData())],placeholder:"Search",outlined:"",debounce:"1000"},{append:l(()=>[e(L,{name:"search"})]),_:1},8,["modelValue"])]),header:l(a=>[e($,{props:a},{default:l(()=>[(p(!0),y(U,null,I(a.cols,o=>(p(),T(q,{key:o.name,props:a},{default:l(()=>[r(S(o.label),1)]),_:2},1032,["props"]))),128)),e(q,{"auto-width":""},{default:l(()=>[r("Action")]),_:1})]),_:2},1032,["props"])]),body:l(a=>[e($,{props:a},{default:l(()=>[(p(!0),y(U,null,I(a.cols,o=>(p(),T(N,{key:o.name,props:a},{default:l(()=>[r(S(o.value),1)]),_:2},1032,["props"]))),128)),e(N,{"auto-width":""},{default:l(()=>[e(b,{flat:"",color:"orange",icon:"edit",onClick:o=>D(a.row),dense:""},{default:l(()=>[e(R,null,{default:l(()=>[r("Edit Data")]),_:1})]),_:2},1032,["onClick"]),e(b,{flat:"",color:"red",icon:"delete",onClick:o=>u.onDelete(a.row.TDLVORD_DLVCD),dense:""},{default:l(()=>[e(R,null,{default:l(()=>[r("Edit Data")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{$e as default};
