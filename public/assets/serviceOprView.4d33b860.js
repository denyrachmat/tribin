import{B as h,C as V,D as a,E as e,J as b,K as i,I as l,Q as R,M as O,O as H,s as m,o as U,aX as n,R as x,aU as M,aV as q,aW as $,aZ as A,H as r,ap as P,P as Y,aa as L,S as B}from"./index.824e9c41.js";import{u as Q,b as I,Q as K,j as E,k as g,l as C,a as F}from"./use-dialog-plugin-component.2ce5c20d.js";import{d as k}from"./date.31df7823.js";import{api_web as j}from"./axios.f995309c.js";import{Q as T}from"./QTooltip.502d33d4.js";const J={class:"row"},W=l("div",{class:"col"},[l("div",{class:"text-h6"},"Update Used Item")],-1),X={class:"col text-right"},Z={__name:"serviceOprItemAdd",props:{dataItem:Array},setup(w){const{dialogRef:p,onDialogHide:c,onDialogOK:u,onDialogCancel:_}=Q();return I(),(S,f)=>(h(),V(H,{ref_key:"dialogRef",ref:p,onHide:O(c),"transition-show":"slide-up","transition-hide":"slide-down","full-width":""},{default:a(()=>[e(b,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:a(()=>[e(i,null,{default:a(()=>[l("div",J,[W,l("div",X,[e(R,{icon:"add",outline:"",color:"blue"})])])]),_:1}),e(i,{class:"q-pa-sm"})]),_:1})]),_:1},8,["onHide"]))}},z={class:"text-h6"},G={__name:"serviceOprUpdateOrder",props:{header:Array,detail:Array},setup(w){const{dialogRef:p,onDialogHide:c,onDialogOK:u,onDialogCancel:_}=Q(),S=I(),f=w,t=m({SRVH_DOCNO:"",SRVH_ISSDT:k.formatDate(Date.now(),"YYYY-MM-DD"),SRVH_CUSCD:""}),d=m([]);U(async()=>{f.header&&(t.value=f.header,d.value=f.detail)});const o=s=>{S.dialog({component:Z,componentProps:{dataItem:s}}).onOk(async v=>{console.log(v)})};return(s,v)=>(h(),V(H,{ref_key:"dialogRef",ref:p,onHide:O(c),"transition-show":"slide-up","transition-hide":"slide-down","full-width":""},{default:a(()=>[e(b,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:a(()=>[e(i,null,{default:a(()=>[l("div",z,"Update Order "+n(t.value.SRVH_DOCNO),1)]),_:1}),e(i,{class:"q-pa-sm"},{default:a(()=>[e(K,{bordered:""},{default:a(()=>[(h(!0),x(M,null,q(d.value,(D,y)=>$((h(),V(E,{key:y,class:"q-my-sm",clickable:""},{default:a(()=>[e(g,{avatar:""},{default:a(()=>[e(A,{color:"primary","text-color":"white"},{default:a(()=>[r(n(D.TSRVD_LINE),1)]),_:2},1024)]),_:2},1024),e(g,null,{default:a(()=>[e(C,null,{default:a(()=>[r(n(D.TSRVD_ITMCD),1)]),_:2},1024),e(C,{caption:"",lines:"1"},{default:a(()=>[r("Item")]),_:1})]),_:2},1024),e(g,null,{default:a(()=>[e(C,null,{default:a(()=>[r(n(D.TSRVD_CUSTRMK),1)]),_:2},1024),e(C,{caption:"",lines:"1"},{default:a(()=>[r("Customer Remarks")]),_:1})]),_:2},1024),e(g,{side:""},{default:a(()=>[e(R,{icon:"construction",color:"green",flat:"",onClick:N=>o(D)},{default:a(()=>[e(T,null,{default:a(()=>[r("Update Fix Data")]),_:1})]),_:2},1032,["onClick"]),e(R,{icon:"visibility",color:"cyan",flat:"",onClick:v[0]||(v[0]=N=>s.viewAddedItem())},{default:a(()=>[e(T,null,{default:a(()=>[r("View Added Item")]),_:1})]),_:1})]),_:2},1024)]),_:2},1024)),[[P]])),128))]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}},ee={class:"q-pa-md"},ae={class:"row"},te={class:"col"},le={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},oe={class:"text-h5 text-bold"},se={class:"text-h6 text-bold"},ne={class:"text-subtitle2"},ie={class:"text-h6 text-bold"},de=l("div",{class:"text-subtitle2"},"Resolved Items",-1),re={class:"row"},ce={class:"col"},ue=l("div",{class:"col text-right"},null,-1),he={__name:"serviceOprView",setup(w){const p=I();m([{name:"SRVH_DOCNO",label:"SPK No",field:"SRVH_DOCNO",sortable:!0,align:"left"},{name:"MCUS_CUSNM",label:"Customer Name",field:"MCUS_CUSNM",sortable:!0,align:"left"},{name:"resolve",label:"Resolved Line",sortable:!0,align:"left",field:t=>t.resolve.length},{name:"unresolve",label:"Unresolved Line",sortable:!0,align:"left",field:t=>t.unresolve.length},{name:"SRVH_ISSDT",label:"Submited Date",field:"SRVH_ISSDT",sortable:!0,align:"left"}]);const c=m([]),u=m(""),_=m(!1);U(()=>{S()});const S=async()=>{_.value=!0,await j.post("servicesAdmin/search",{searchBy:"",searchValue:u.value}).then(t=>{_.value=!1,c.value=t.data.data}).catch(t=>{_.value=!1})},f=t=>{const d={SRVH_DOCNO:t.SRVH_DOCNO,SRVH_ISSDT:k.formatDate(t.SRVH_ISSDT,"YYYY-MM-DD"),SRVH_CUSCD:t.MCUS_CUSCD};let o=[];t.detail.map(s=>{o.push({TSRVD_ITMCD:s.TSRVD_ITMCD,TSRVD_LINE:s.TSRVD_LINE,TSRVD_QTY:s.TSRVD_QTY,TSRVD_CUSTRMK:s.TSRVD_CUSTRMK})}),p.dialog({component:G,componentProps:{header:d,detail:o}}).onOk(async s=>{S()})};return(t,d)=>(h(),x("div",ee,[l("div",ae,[l("div",te,[e(F,{grid:"",flat:"",bordered:"","card-container-class":t.cardContainerClass,title:"Outstanding Order",rows:c.value,columns:t.columns,"row-key":"name",filter:u.value,"hide-header":"",pagination:{rowsPerPage:50},"rows-per-page-options":t.rowsPerPageOptions,loading:_.value},{"top-right":a(()=>[e(Y,{borderless:"",dense:"",debounce:"300",modelValue:u.value,"onUpdate:modelValue":d[0]||(d[0]=o=>u.value=o),placeholder:"Search"},{append:a(()=>[e(L,{name:"search"})]),_:1},8,["modelValue"])]),item:a(o=>[l("div",le,[e(b,{flat:"",bordered:""},{default:a(()=>[e(i,{class:"text-center bg-secondary text-white"},{default:a(()=>[l("div",oe,n(o.row.SRVH_DOCNO),1)]),_:2},1024),e(B),e(i,null,{default:a(()=>[l("div",se,n(o.row.MCUS_CUSNM),1),l("div",ne,n(o.row.SRVH_ISSDT),1)]),_:2},1024),e(i,null,{default:a(()=>[l("div",ie,n(o.row.resolve.length)+" of "+n(o.row.unresolve.length),1),de]),_:2},1024),e(i,null,{default:a(()=>[l("div",re,[l("div",ce,[e(R,{label:"Resolve",color:"primary",outline:"",onClick:s=>f(o.row)},null,8,["onClick"])]),ue])]),_:2},1024)]),_:2},1024)])]),_:1},8,["card-container-class","rows","columns","filter","rows-per-page-options","loading"])])])]))}};export{he as default};
