import{Q as S}from"./QTooltip.98f5f366.js";import{s as m,B as _,C as g,D as l,E as e,L as Y,M as L,I as s,O as D,Z as T,am as Q,T as b,Q as f,X as I,Y as N,o as $,P as v,aX as E,H as r,R as V,S as w}from"./index.a45d617a.js";import{a as M,u as B,k as H,l as j,m as U}from"./QTable.69cc12d2.js";import{Q as h,a as k}from"./QTd.15073d02.js";import{api_web as X}from"./axios.4358f172.js";import{Q as P,a as y,C as A}from"./ClosePopup.aedbcb2c.js";import"./use-cache.b0833c75.js";import"./date.cce6a442.js";const F={class:"text-h6"},K={style:{border:"1px black solid","border-radius":"10px"}},Z=s("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[s("b",null,"Header")],-1),z={class:"row"},G={class:"col"},J={class:"col q-pl-md"},W={class:"row items-center justify-end"},x={class:"col q-pl-md"},ee={class:"row items-center justify-end"},le={__name:"salesOrderCreate",setup(q){M(),m({TSLO_SLOCD:"",TSLO_ISSUDT:"",TSLO_PLAN_DLVDT:""});const{dialogRef:O,onDialogHide:c,onDialogOK:p,onDialogCancel:C}=B();return(o,t)=>(_(),g(N,{ref_key:"dialogRef",ref:O,onHide:I(c),"transition-show":"slide-up","transition-hide":"slide-down","full-width":""},{default:l(()=>[e(Y,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:l(()=>[e(L,null,{default:l(()=>[s("div",F,D(o.props.quoHeader?"Edit ":"Create ")+" Quotation ",1)]),_:1}),e(L,{class:"q-pa-sm"},{default:l(()=>[s("fieldset",K,[Z,s("div",z,[s("div",G,[e(T,{label:"RO Code",dense:"",filled:"",modelValue:o.forms.TSLO_SLOCD,"onUpdate:modelValue":t[0]||(t[0]=n=>o.forms.TSLO_SLOCD=n),disable:"",loading:o.loading},null,8,["modelValue","loading"])]),s("div",J,[e(T,{filled:"",modelValue:o.forms.TSLO_ISSUDT,"onUpdate:modelValue":t[2]||(t[2]=n=>o.forms.TSLO_ISSUDT=n),dense:"",label:"Issue Date",loading:o.loading,onClick:t[3]||(t[3]=n=>o.quotationIssueDate.qDateProxy.show()),mask:"####-##-##","fill-mask":"",hint:"Mask: YYYY-MM-DD"},{append:l(()=>[e(Q,{name:"event",class:"cursor-pointer"},{default:l(()=>[e(P,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(y,{modelValue:o.forms.TSLO_ISSUDT,"onUpdate:modelValue":t[1]||(t[1]=n=>o.forms.TSLO_ISSUDT=n),mask:"YYYY-MM-DD"},{default:l(()=>[s("div",W,[b(e(f,{label:"Close",color:"primary",flat:""},null,512),[[A]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","loading"])]),s("div",x,[e(T,{filled:"",modelValue:o.forms.TSLO_PLAN_DLVDT,"onUpdate:modelValue":t[5]||(t[5]=n=>o.forms.TSLO_PLAN_DLVDT=n),dense:"",label:"Issue Date",loading:o.loading,onClick:t[6]||(t[6]=n=>o.quotationIssueDate.qDateProxy.show()),mask:"####-##-##","fill-mask":"",hint:"Mask: YYYY-MM-DD"},{append:l(()=>[e(Q,{name:"event",class:"cursor-pointer"},{default:l(()=>[e(P,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(y,{modelValue:o.forms.TSLO_PLAN_DLVDT,"onUpdate:modelValue":t[4]||(t[4]=n=>o.forms.TSLO_PLAN_DLVDT=n),mask:"YYYY-MM-DD"},{default:l(()=>[s("div",ee,[b(e(f,{label:"Close",color:"primary",flat:""},null,512),[[A]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","loading"])])])])]),_:1})]),_:1})]),_:1},8,["onHide"]))}};const ae={class:"q-pa-md"},oe={class:"row q-pb-md"},te=s("div",{class:"col"},[s("span",{class:"text-h4"},"Sales Order / Receive Order")],-1),se={class:"col text-right"},ne={class:"row q-pt-md"},de={class:"col"},pe={__name:"salesOrderView",setup(q){const O=M(),c=m("TQUO_QUOCD"),p=m(""),C=m([]),o=m([{name:"TSLO_SLOCD",label:"RO. Code",field:"TSLO_SLOCD",sortable:!0,align:"left"},{name:"MCUS_CUSNM",label:"Customer Name",field:"MCUS_CUSNM",sortable:!0,align:"left"},{name:"TSLO_ADDRESS_NAME",label:"Customer Addr.",field:"TSLO_ADDRESS_NAME",sortable:!0,align:"left"},{name:"TSLO_CUSCD",label:"Customer Code",field:"TSLO_CUSCD",sortable:!0,align:"left"},{name:"TSLO_ISSUDT",label:"Issue Date",field:"TSLO_ISSUDT",sortable:!0,align:"left"},{name:"TSLO_QUOCD",label:"Quot. Code",field:"TSLO_QUOCD",sortable:!0,align:"left"}]),t=m(!1);$(()=>{n()});const n=async()=>{t.value=!0,await X.post("receive-order/searchAPI",{searchBy:c.value,searchValue:p.value}).then(d=>{t.value=!1,C.value=d.data.data}).catch(d=>{t.value=!1})},R=()=>{O.dialog({component:le}).onOk(async d=>{n()})};return(d,u)=>(_(),v("div",ae,[s("div",oe,[te,s("div",se,[e(f,{icon:"add",color:"blue",onClick:R},{default:l(()=>[e(S,null,{default:l(()=>[r("Create New RO")]),_:1})]),_:1})])]),e(E),s("div",ne,[s("div",de,[e(H,{title:"Created RO",rows:C.value,columns:o.value,"row-key":"name",loading:t.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":l(()=>[e(j,{outlined:"",modelValue:c.value,"onUpdate:modelValue":u[0]||(u[0]=a=>c.value=a),options:o.value,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),e(T,{borderless:"",dense:"",modelValue:p.value,"onUpdate:modelValue":[u[1]||(u[1]=a=>p.value=a),u[2]||(u[2]=a=>d.dataQuo())],placeholder:"Search",outlined:"",debounce:"1000"},{append:l(()=>[e(Q,{name:"search"})]),_:1},8,["modelValue"])]),header:l(a=>[e(h,{props:a},{default:l(()=>[e(U,{"auto-width":""},{default:l(()=>[r("Action")]),_:1}),(_(!0),v(V,null,w(a.cols,i=>(_(),g(U,{key:i.name,props:a},{default:l(()=>[r(D(i.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(a=>[e(h,{props:a},{default:l(()=>[e(k,{"auto-width":""},{default:l(()=>[e(f,{flat:"",color:a.row.TQUO_APPRVDT!==null?"grey":"orange",icon:"edit",onClick:i=>d.onClickEdit(a.row.TQUO_QUOCD),dense:"",disable:a.row.TQUO_APPRVDT!==null},{default:l(()=>[e(S,null,{default:l(()=>[r(D(a.row.TQUO_APPRVDT?"Quotation already approved, cannot edit !":"Edit this quotation"),1)]),_:2},1024)]),_:2},1032,["color","onClick","disable"]),e(f,{flat:"",color:a.row.TQUO_APPRVDT!==null?"grey":"red",icon:"delete",onClick:i=>d.onClickDelete(a.row.TQUO_QUOCD),dense:"",disable:a.row.TQUO_APPRVDT!==null},{default:l(()=>[e(S,null,{default:l(()=>[r(D(a.row.TQUO_APPRVDT?"Quotation already approved, cannot delete !":"Delete this quotation"),1)]),_:2},1024)]),_:2},1032,["color","onClick","disable"]),e(f,{flat:"",color:"indigo",icon:"print",onClick:i=>d.onClickPrint(a.row.TQUO_QUOCD),dense:""},{default:l(()=>[e(S,null,{default:l(()=>[r("Print this quotation")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024),(_(!0),v(V,null,w(a.cols,i=>(_(),g(k,{key:i.name,props:a},{default:l(()=>[r(D(i.value),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{pe as default};
