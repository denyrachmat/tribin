import{a as I,u as B,k as N,l as P,m as L}from"./QTable.d9fccaab.js";import{o as U,s,B as c,C as S,D as a,E as t,L as E,M as Q,I as f,bl as G,Q as p,H as d,O as k,X as M,Y as q,P as V,Z as x,am as W,R as J,S as O}from"./index.30cdaf56.js";import{Q as R,a as $}from"./QTd.06fbb590.js";import{Q as _}from"./QTooltip.00c91dba.js";import{api_web as w}from"./axios.f6599727.js";import{Q as H}from"./QBadge.63d72347.js";import{_ as F}from"./assignConditionsView.c8809a47.js";const K=f("div",{class:"text-h6"},"Update Surat Jalan",-1),j={class:"row"},Y={class:"col"},X={class:"col text-right"},Z={__name:"updateSJ",props:{dataSJDB:Array},setup(y){const g=I(),m=y;U(()=>{m.dataSJDB&&(r.value=m.dataSJDB)});const D=s([{label:"General",value:"general"},{label:"Forklift",value:"forklift"},{label:"Genset",value:"genset"}]),l=s(""),r=s({TDLVSJDETA_DLVCD:"",TDLVSJDETA_TYPE:"",TDLVSJDETA_CONDGRP:"",TDLVSJDETA_STARTDT:"",TDLVSJDETA_ENDDT:""}),u=s([]),v=s(!1),h=()=>{g.dialog({component:F}).onOk(async e=>{r.value.TDLVSJDETA_CONDGRP=e.MCONDITION_RPT_STAT,u.value=e.group})},C=()=>{},{dialogRef:T,onDialogHide:b,onDialogOK:i,onDialogCancel:o}=B();return(e,n)=>(c(),S(q,{ref_key:"dialogRef",ref:T,onHide:M(b),"transition-show":"slide-up","transition-hide":"slide-down","full-width":""},{default:a(()=>[t(E,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:a(()=>[t(Q,null,{default:a(()=>[K]),_:1}),t(Q,{class:"q-pa-sm"},{default:a(()=>[f("div",j,[f("div",Y,[t(G,{options:D.value,type:"radio",modelValue:l.value,"onUpdate:modelValue":n[0]||(n[0]=A=>l.value=A)},null,8,["options","modelValue"])]),f("div",X,[t(p,{color:"blue",label:"Assign Conditions",onClick:h,loading:v.value},null,8,["loading"]),t(p,{icon:"visibility",color:"indigo",flat:"",onClick:C,loading:v.value},{default:a(()=>[t(_,null,{default:a(()=>[d("View Conditions")]),_:1}),t(H,{color:"red",floating:""},{default:a(()=>[d(k(u.value.length),1)]),_:1})]),_:1},8,["loading"])])])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},z={class:"q-pa-md"},ee={class:"row"},ae={class:"col"},re={__name:"invoiceView",setup(y){const g=I(),m=s([]),D=s([{name:"TDLVORD_DLVCD",label:"DO Number",field:"TDLVORD_DLVCD",sortable:!0,align:"left"},{name:"MCUS_CUSNM",label:"Customer",field:"MCUS_CUSNM",sortable:!0,align:"left"}]),l=s(!1),r=s(""),u=s("");U(()=>{v()});const v=async()=>{l.value=!0,await w.post("invoices/search",{searchBy:r.value,searchValue:u.value}).then(i=>{l.value=!1,m.value=i.data.data}).catch(i=>{l.value=!1})},h=async i=>{l.value=!0,await w.post("invoices/printInvoice",i).then(o=>{l.value=!1,window.open("").document.write("<iframe width='100%' height='100%' src='data:application/pdf;base64, "+encodeURI(o.data)+"'></iframe>")}).catch(o=>{l.value=!1})},C=async i=>{l.value=!0,await w.get(`invoices/printKwitansi/${btoa(i)}`).then(o=>{l.value=!1,window.open("").document.write("<iframe width='100%' height='100%' src='data:application/pdf;base64, "+encodeURI(o.data)+"'></iframe>")}).catch(o=>{l.value=!1})},T=async i=>{g.dialog({title:"Options",message:"Choose type surat jalan",options:{type:"radio",model:"general",items:[{label:"General",value:"general"},{label:"Forklift",value:"forklift"},{label:"Genset",value:"genset"}]},cancel:!0,persistent:!0}).onOk(async o=>{l.value=!0,await w.get(`invoices/printSJ/${btoa(i)}`).then(e=>{l.value=!1,window.open("").document.write("<iframe width='100%' height='100%' src='data:application/pdf;base64, "+encodeURI(e.data)+"'></iframe>")}).catch(e=>{l.value=!1})})},b=i=>{g.dialog({component:Z}).onOk(async o=>{v()})};return(i,o)=>(c(),V("div",z,[f("div",ee,[f("div",ae,[t(N,{title:"Invoice List",rows:m.value,columns:D.value,"row-key":"name",loading:l.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":a(()=>[t(P,{outlined:"",modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=e=>r.value=e),options:D.value,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),t(x,{borderless:"",dense:"",modelValue:u.value,"onUpdate:modelValue":[o[1]||(o[1]=e=>u.value=e),o[2]||(o[2]=e=>i.dataOutstanding())],placeholder:"Search",outlined:"",debounce:"1000"},{append:a(()=>[t(W,{name:"search"})]),_:1},8,["modelValue"])]),header:a(e=>[t(R,{props:e},{default:a(()=>[(c(!0),V(J,null,O(e.cols,n=>(c(),S(L,{key:n.name,props:e},{default:a(()=>[d(k(n.label),1)]),_:2},1032,["props"]))),128)),t(L,{"auto-width":""},{default:a(()=>[d("Action")]),_:1})]),_:2},1032,["props"])]),body:a(e=>[t(R,{props:e},{default:a(()=>[(c(!0),V(J,null,O(e.cols,n=>(c(),S($,{key:n.name,props:e},{default:a(()=>[d(k(n.value),1)]),_:2},1032,["props"]))),128)),t($,{"auto-width":""},{default:a(()=>[t(p,{flat:"",color:"red",icon:"list",dense:"",onClick:n=>b(e.row)},{default:a(()=>[t(_,null,{default:a(()=>[d("Update Surat Jalan")]),_:1})]),_:2},1032,["onClick"]),t(p,{flat:"",color:"green",icon:"print",dense:"",onClick:n=>h(e.row)},{default:a(()=>[t(_,null,{default:a(()=>[d("Print Invoice")]),_:1})]),_:2},1032,["onClick"]),t(p,{flat:"",color:"indigo",icon:"print",dense:"",onClick:n=>C(e.row.TDLVORD_DLVCD)},{default:a(()=>[t(_,null,{default:a(()=>[d("Print Receipt")]),_:1})]),_:2},1032,["onClick"]),t(p,{flat:"",color:"orange",icon:"print",dense:"",onClick:n=>T(e.row.TDLVORD_DLVCD)},{default:a(()=>[t(_,null,{default:a(()=>[d("Print Surat Jalan")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{re as default};
