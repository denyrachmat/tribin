import{h as _,c as W,K as X,L as Z,t as p,o as G,C as v,D,E as e,F as a,M as H,O as M,J as d,P as S,R as Q,S as F,T as K,U as R,V as j,I as r,Q as g,W as P,X as ee,Y as A,Z as L,$ as ae,a0 as oe}from"./index.07e2cbfb.js";import{Q as k}from"./QTooltip.f7731423.js";import{Q as te}from"./QBtnGroup.1ed5a91e.js";import{Q as $,a as h,b as V,c as le}from"./QSelect.5806e38c.js";import{Q as z}from"./QList.9f3fe785.js";import{u as x}from"./format.3ac0774e.js";import{u as B}from"./use-dialog-plugin-component.a3fedba1.js";import{api as q,api_web as E}from"./axios.406690f2.js";import{_ as ne}from"./assignConditionsView.6653ede7.js";import"./QTable.545ac555.js";const se=[_("g",{transform:"translate(20 50)"},[_("rect",{x:"-10",y:"-30",width:"20",height:"60",fill:"currentColor",opacity:"0.6"},[_("animateTransform",{attributeName:"transform",type:"scale",from:"2",to:"1",begin:"0s",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keySplines:"0.1 0.9 0.4 1",keyTimes:"0;1",values:"2;1"})])]),_("g",{transform:"translate(50 50)"},[_("rect",{x:"-10",y:"-30",width:"20",height:"60",fill:"currentColor",opacity:"0.8"},[_("animateTransform",{attributeName:"transform",type:"scale",from:"2",to:"1",begin:"0.1s",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keySplines:"0.1 0.9 0.4 1",keyTimes:"0;1",values:"2;1"})])]),_("g",{transform:"translate(80 50)"},[_("rect",{x:"-10",y:"-30",width:"20",height:"60",fill:"currentColor",opacity:"0.9"},[_("animateTransform",{attributeName:"transform",type:"scale",from:"2",to:"1",begin:"0.2s",repeatCount:"indefinite",dur:"1s",calcMode:"spline",keySplines:"0.1 0.9 0.4 1",keyTimes:"0;1",values:"2;1"})])])];var Y=W({name:"QSpinnerFacebook",props:X,setup(N){const{cSize:m,classes:u}=Z(N);return()=>_("svg",{class:u.value,width:m.value,height:m.value,viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},se)}});const ie=d("div",{class:"text-h6"},"Position Assign",-1),re={class:"text-h5"},de={__name:"positionAssignCondition",props:{groups:String,listCond:Array},setup(N){const{dialogRef:m,onDialogHide:u,onDialogOK:f,onDialogCancel:O}=B(),c=x(),n=N,l=p([]);G(()=>{l.value=n.listCond,l.value=l.value.sort((t,i)=>t.MCONDITION_ORDER_NUMBER-i.MCONDITION_ORDER_NUMBER)});const I=t=>{b(l.value,t,t-1)},C=t=>{b(l.value,t,t+1)},b=(t,i,w)=>{let o=t[i];t[i]=t[w],t[w]=o},T=()=>{c.dialog({title:"Confirmation",message:"Do you want to save this group ?",cancel:!0,persistent:!0}).onOk(async()=>{c.loading.show({spinner:Y,spinnerColor:"yellow",spinnerSize:140,backgroundColor:"purple",message:"Save your information, Hang on...",messageColor:"black"});const t=l.value.map(i=>i.id);await q.post("/master/conditions/assignGroup",{data:t,MCONDITION_RPT_STAT:n.groups}).then(async i=>{c.loading.hide(),f()}).catch(i=>{c.loading.hide()})})};return(t,i)=>(v(),D(L,{ref_key:"dialogRef",ref:m,onHide:A(u),"transition-show":"slide-up","transition-hide":"slide-down","full-width":""},{default:e(()=>[a(H,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:e(()=>[a(M,null,{default:e(()=>[ie]),_:1}),a(M,{class:"q-pa-sm"},{default:e(()=>[d("span",re,S(n.groups),1),a(z,{bordered:""},{default:e(()=>[(v(!0),Q(F,null,K(l.value,(w,o)=>R((v(),D($,{key:w.id,class:"q-my-sm",clickable:"",dense:""},{default:e(()=>[a(h,{avatar:""},{default:e(()=>[a(j,{color:"primary","text-color":"white"},{default:e(()=>[r(S(o+1),1)]),_:2},1024)]),_:2},1024),a(h,null,{default:e(()=>[a(V,null,{default:e(()=>[r(S(w.MCONDITION_DESCRIPTION),1)]),_:2},1024)]),_:2},1024),a(h,{side:""},{default:e(()=>[a(g,{icon:"arrow_upward",color:"green",flat:"",disable:o===0,onClick:s=>I(o)},{default:e(()=>[a(k,null,{default:e(()=>[r("Promote Positions")]),_:1})]),_:2},1032,["disable","onClick"])]),_:2},1024),a(h,{side:""},{default:e(()=>[a(g,{icon:"arrow_downward",color:"green",flat:"",disable:o===l.value.length-1,onClick:s=>C(o)},{default:e(()=>[a(k,null,{default:e(()=>[r("Demote Positions")]),_:1})]),_:2},1032,["disable","onClick"])]),_:2},1024)]),_:2},1024)),[[P]])),128))]),_:1})]),_:1}),a(ee,{align:"right"},{default:e(()=>[a(g,{label:"OK",color:"primary",onClick:i[0]||(i[0]=w=>T()),disable:t.loading,loading:t.loading},null,8,["disable","loading"]),a(g,{flat:"",label:"Cancel",color:"red",onClick:A(O),loading:t.loading},null,8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},ue=d("div",{class:"text-h6"},"Transfer data to another CG",-1),ce={__name:"exportDataView",props:{dataTransfer:Array},setup(N){const{dialogRef:m,onDialogHide:u,onDialogOK:f,onDialogCancel:O}=B();x();const c=p("");p("");const n=p([]),l=p(!1);G(()=>{I()});const I=async()=>{l.value=!0,await E.get("company").then(C=>{l.value=!1,n.value=C.data}).catch(C=>{l.value=!1})};return(C,b)=>(v(),D(L,{ref_key:"dialogRef",ref:m,onHide:A(u),"transition-show":"slide-up","transition-hide":"slide-down","full-width":""},{default:e(()=>[a(H,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:e(()=>[a(M,null,{default:e(()=>[ue]),_:1}),a(M,{class:"q-pa-sm"},{default:e(()=>[a(le,{dense:"",filled:"",label:"From CG",modelValue:c.value,"onUpdate:modelValue":b[0]||(b[0]=T=>c.value=T),options:n.value,"option-label":"MCUS_CUSNM","option-value":"MCUS_CUSCD","emit-value":"","map-options":"",loading:l.value},null,8,["modelValue","options","loading"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}};const pe={class:"q-pa-md"},me=d("div",{class:"row"},[d("div",{class:"col"},[d("div",{class:"text-h6"},"Assign Condition Group")])],-1),fe={class:"row q-pt-md"},ge={class:"col"},_e={class:"row"},ve={class:"col"},Ce={class:"col text-right"},he={class:"row q-pt-md"},we={class:"col",style:{"max-height":"80vh",overflow:"auto"}},Qe={__name:"assignConditions",setup(N){p([{name:"id",align:"left",label:"ID",field:"id",sortable:!0},{name:"MCONDITION_DESCRIPTION",align:"left",label:"Description",field:"MCONDITION_DESCRIPTION",sortable:!0}]);const m=p([]);p({sortBy:"desc",descending:!1,rowsPerPage:0});const u=p([]),f=p(""),O=p("new"),c=p(!1),n=x();B(),G(()=>{C()});const l=()=>{u.value=[],f.value="",O.value="new"},I=()=>{n.dialog({title:"Confirmation",message:"Are you sure want to delete this group ?",cancel:!0,persistent:!0}).onOk(async()=>{n.loading.show({spinner:Y,spinnerColor:"yellow",spinnerSize:140,backgroundColor:"purple",message:"Save your information, Hang on...",messageColor:"black"}),await q.delete(`/master/conditions/deleteDataGroup/${btoa(f.value)}`).then(o=>{n.loading.hide(),l()})})},C=async()=>{c.value=!0,await q.get("/master/conditions/getdata").then(o=>{console.log(o),c.value=!1,m.value=o.data}).catch(o=>{c.value=!1})},b=()=>{n.dialog({component:ne}).onOk(async o=>{f.value=o.MCONDITION_RPT_STAT,u.value=o.group.map(s=>s.id),O.value="edit"})},T=()=>{n.dialog({component:de,componentProps:{groups:f.value,listCond:m.value.filter(o=>u.value.includes(o.id))}}).onOk(async o=>{l()})},t=()=>{n.dialog({title:"Add Conditions",message:"Input conditions",prompt:{model:"",isValid:o=>o.length>2,type:"text"},cancel:!0,persistent:!0}).onOk(async o=>{await E.post("condition",{MCONDITION_DESCRIPTION:o,MCONDITION_ORDER_NUMBER:null}).then(async s=>{l(),await C()})})},i=o=>{n.dialog({title:"Confirmation",message:"Are you sure want to delete this data ?",cancel:!0,persistent:!0}).onOk(async()=>{await E.delete(`condition/${btoa(o)}`).then(async s=>{l(),await C()})})},w=()=>{n.dialog({component:ce,componentProps:{dataTransfer:[]}}).onOk(async o=>{})};return(o,s)=>(v(),Q("div",pe,[me,d("div",fe,[d("div",ge,[d("div",_e,[d("div",ve,[a(ae,{label:"Group Name",outlined:"",dense:"",modelValue:f.value,"onUpdate:modelValue":s[0]||(s[0]=y=>f.value=y),disable:O.value==="edit"},{after:e(()=>[a(g,{dense:"",icon:"search",color:"blue",flat:"",onClick:b})]),_:1},8,["modelValue","disable"])]),d("div",Ce,[a(te,{outline:""},{default:e(()=>[a(g,{outline:"",color:"blue",icon:"description",onClick:l},{default:e(()=>[a(k,null,{default:e(()=>[r("New")]),_:1})]),_:1}),a(g,{outline:"",color:"blue",icon:"save",onClick:T,disable:!f.value||u.value.length===0},{default:e(()=>[a(k,null,{default:e(()=>[r("Save Conditions")]),_:1})]),_:1},8,["disable"]),a(g,{outline:"",color:"blue",icon:"add",onClick:s[1]||(s[1]=y=>t())},{default:e(()=>[a(k,null,{default:e(()=>[r("Add more conditions")]),_:1})]),_:1}),a(g,{outline:"",color:"orange",icon:"send",onClick:s[2]||(s[2]=y=>w())},{default:e(()=>[a(k,null,{default:e(()=>[r("Transfer Data from This CG to Another CG")]),_:1})]),_:1}),a(g,{outline:"",color:"red",icon:"delete",onClick:I,disable:!f.value},{default:e(()=>[a(k,null,{default:e(()=>[r("Delete")]),_:1})]),_:1},8,["disable"])]),_:1})])]),d("div",he,[d("div",we,[a(z,{bordered:""},{default:e(()=>[m.value.length===0?R((v(),D($,{key:0,class:"q-my-sm",clickable:"",tag:"label"},{default:e(()=>[c.value?(v(),D(h,{key:0},{default:e(()=>[r(" Data is loading, please wait. ")]),_:1})):(v(),D(h,{key:1},{default:e(()=>[r(" No Data Available ! ")]),_:1}))]),_:1})),[[P]]):(v(!0),Q(F,{key:1},K(m.value,(y,J)=>R((v(),D($,{key:J,class:"q-my-sm",clickable:"",tag:"label"},{default:e(()=>[a(h,{side:"",top:""},{default:e(()=>[a(oe,{modelValue:u.value,"onUpdate:modelValue":s[3]||(s[3]=U=>u.value=U),val:y.id},null,8,["modelValue","val"])]),_:2},1024),a(h,null,{default:e(()=>[a(V,null,{default:e(()=>[r(S(y.MCONDITION_DESCRIPTION),1)]),_:2},1024),a(V,{caption:"",lines:"1"},{default:e(()=>[r("Description")]),_:1})]),_:2},1024),a(h,{side:""},{default:e(()=>[a(g,{icon:"delete",color:"red",outline:"",onClick:U=>i(y.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)),[[P]])),128))]),_:1})])])])])]))}};export{Qe as default};
