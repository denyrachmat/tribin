import{C as i,D as v,E as a,F as l,M,O as T,Y as O,Z as R,J as n,t as u,o as S,R as C,Q,aY as q,$ as x,an as E,I as m,S as h,T as D,P as b}from"./index.844d56d4.js";import{a as k,u as U,k as A,l as $,m as w}from"./QTable.0d0ae4ae.js";import{Q as I,a as P}from"./QTd.354a4ca3.js";import{Q as B}from"./QTooltip.3a2e2412.js";import{api_web as F}from"./axios.90af9078.js";const L=n("div",{class:"text-h6"},"Closing Period",-1),H={__name:"accClosingPeriod",setup(y){k();const{dialogRef:f,onDialogHide:r,onDialogOK:c,onDialogCancel:p}=U();return(g,d)=>(i(),v(R,{ref_key:"dialogRef",ref:f,onHide:O(r),"transition-show":"slide-up","transition-hide":"slide-down","full-width":""},{default:a(()=>[l(M,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:a(()=>[l(T,null,{default:a(()=>[L]),_:1}),l(T,{class:"q-pa-sm"})]),_:1})]),_:1},8,["onHide"]))}},N={class:"q-pa-md"},Y={class:"row q-pb-md"},J=n("div",{class:"col"},[n("span",{class:"text-h4"},"Closing Interface")],-1),K={class:"col text-right"},Z={class:"row q-pt-md"},j={class:"col"},ae={__name:"accClosingIndex",setup(y){const f=k(),r=u("DOCCD"),c=u(""),p=u([]),g=u([{name:"EFFDT",label:"Effective Date",field:"EFFDT",sortable:!0,align:"left"},{name:"DOCCD",label:"Document",field:"DOCCD",sortable:!0,align:"left"},{name:"ITMCD",label:"Item Code",field:"ITMCD",sortable:!0,align:"left"},{name:"ITMDESC",label:"Item Desc",field:"ITMDESC",sortable:!0,align:"left"},{name:"CURR",label:"Valuta",field:"CURR",sortable:!0,align:"left"},{name:"ITMQT",label:"Qty",field:"ITMQT",sortable:!0,format:t=>t.toLocaleString(),align:"left"},{name:"ITMPRC",label:"Amount",field:"ITMPRC",sortable:!0,format:t=>t.toLocaleString(),align:"left"},{name:"TOT",label:"Total Amount",field:t=>t.ITMQT*t.ITMPRC,sortable:!0,format:t=>t.toLocaleString(),align:"left"}]),d=u(!1);S(()=>{_()});const _=async()=>{d.value=!0,await F.post("acc/searchAPI",{searchBy:r.value,searchValue:c.value}).then(t=>{d.value=!1,p.value=t.data.data}).catch(t=>{d.value=!1})},V=()=>{f.dialog({component:H}).onOk(async t=>{_()})};return(t,o)=>(i(),C("div",N,[n("div",Y,[J,n("div",K,[l(Q,{label:"Closing Period",onClick:o[0]||(o[0]=e=>V())})])]),l(q),n("div",Z,[n("div",j,[l(A,{title:"Outstanding Transation",rows:p.value,columns:g.value,"row-key":"name",loading:d.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":a(()=>[l($,{outlined:"",modelValue:r.value,"onUpdate:modelValue":o[1]||(o[1]=e=>r.value=e),options:g.value,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),l(x,{borderless:"",dense:"",modelValue:c.value,"onUpdate:modelValue":[o[2]||(o[2]=e=>c.value=e),o[3]||(o[3]=e=>_())],placeholder:"Search",outlined:"",debounce:"1000"},{append:a(()=>[l(E,{name:"search"})]),_:1},8,["modelValue"])]),header:a(e=>[l(I,{props:e},{default:a(()=>[l(w,{"auto-width":""},{default:a(()=>[m("Action")]),_:1}),(i(!0),C(h,null,D(e.cols,s=>(i(),v(w,{key:s.name,props:e},{default:a(()=>[m(b(s.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:a(e=>[l(I,{props:e},{default:a(()=>[l(P,{"auto-width":""},{default:a(()=>[l(Q,{flat:"",color:"orange",icon:"visibility",onClick:s=>t.onClickView(e.row.TQUO_QUOCD),dense:"",disable:e.row.TQUO_APPRVDT!==null},{default:a(()=>[l(B,null,{default:a(()=>[m(b(e.row.TQUO_APPRVDT?"Quotation already approved, cannot edit !":"Edit this quotation"),1)]),_:2},1024)]),_:2},1032,["onClick","disable"])]),_:2},1024),(i(!0),C(h,null,D(e.cols,s=>(i(),v(P,{key:s.name,props:e},{default:a(()=>[m(b(s.value),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{ae as default};
