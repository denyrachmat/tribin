import{t as d,C as u,D as T,E as e,F as a,M as R,O as Q,J as t,$ as y,an as k,U as S,Q as D,Y as U,Z as E,o as $,R as C,aY as x,I as _,S as h,T as w,P as b}from"./index.c8871237.js";import{a as M,u as A,k as q,l as B,m as V}from"./QTable.8ca3c543.js";import{Q as P,a as I}from"./QTd.41b93deb.js";import{Q as F}from"./QTooltip.91d090a9.js";import{api_web as Y}from"./axios.00e2346a.js";import{Q as L,a as H,C as N}from"./ClosePopup.aeed8f05.js";import"./use-render-cache.3aae9b27.js";import"./date.94d85a08.js";const j=t("div",{class:"text-h6"},"Closing Period",-1),J={class:"row"},K={class:"col"},Z={class:"row items-center justify-end"},z={__name:"accClosingPeriod",setup(O){M();const i=d(""),{dialogRef:c,onDialogHide:m,onDialogOK:v,onDialogCancel:g}=A();return(f,s)=>(u(),T(E,{ref_key:"dialogRef",ref:c,onHide:U(m),"transition-show":"slide-up","transition-hide":"slide-down","full-width":""},{default:e(()=>[a(R,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:e(()=>[a(Q,null,{default:e(()=>[j]),_:1}),a(Q,{class:"q-pa-sm"},{default:e(()=>[t("div",J,[t("div",K,[a(y,{filled:"",modelValue:i.value,"onUpdate:modelValue":s[1]||(s[1]=p=>i.value=p)},{prepend:e(()=>[a(k,{name:"event",class:"cursor-pointer"},{default:e(()=>[a(L,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:e(()=>[a(H,{modelValue:i.value,"onUpdate:modelValue":s[0]||(s[0]=p=>i.value=p),mask:"YYYY-MM-DD"},{default:e(()=>[t("div",Z,[S(a(D,{label:"Close",color:"primary",flat:""},null,512),[[N]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},G={class:"q-pa-md"},W={class:"row q-pb-md"},X=t("div",{class:"col"},[t("span",{class:"text-h4"},"Closing Interface")],-1),ee={class:"col text-right"},ae={class:"row q-pt-md"},le={class:"col"},ce={__name:"accClosingIndex",setup(O){const i=M(),c=d("DOCCD"),m=d(""),v=d([]),g=d([{name:"EFFDATE",label:"Effective Date",field:"EFFDATE",sortable:!0,align:"left"},{name:"DOCCD",label:"Document",field:"DOCCD",sortable:!0,align:"left"},{name:"ITMCD",label:"Item Code",field:"ITMCD",sortable:!0,align:"left"},{name:"ITMDESC",label:"Item Desc",field:"ITMDESC",sortable:!0,align:"left"},{name:"CURR",label:"Valuta",field:"CURR",sortable:!0,align:"left"},{name:"ITMQT",label:"Qty",field:"ITMQT",sortable:!0,format:o=>o.toLocaleString(),align:"left"},{name:"ITMPRC",label:"Amount",field:"ITMPRC",sortable:!0,format:o=>o.toLocaleString(),align:"left"},{name:"TOT",label:"Total Amount",field:o=>o.ITMQT*o.ITMPRC,sortable:!0,format:o=>o.toLocaleString(),align:"left"}]),f=d(!1);$(()=>{s()});const s=async()=>{f.value=!0,await Y.post("acc/searchAPI",{searchBy:c.value,searchValue:m.value}).then(o=>{f.value=!1,v.value=o.data.data}).catch(o=>{f.value=!1})},p=()=>{i.dialog({component:z}).onOk(async o=>{s()})};return(o,n)=>(u(),C("div",G,[t("div",W,[X,t("div",ee,[a(D,{label:"Closing Period",onClick:n[0]||(n[0]=l=>p())})])]),a(x),t("div",ae,[t("div",le,[a(q,{title:"Outstanding Transation",rows:v.value,columns:g.value,"row-key":"name",loading:f.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":e(()=>[a(B,{outlined:"",modelValue:c.value,"onUpdate:modelValue":n[1]||(n[1]=l=>c.value=l),options:g.value,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),a(y,{borderless:"",dense:"",modelValue:m.value,"onUpdate:modelValue":[n[2]||(n[2]=l=>m.value=l),n[3]||(n[3]=l=>s())],placeholder:"Search",outlined:"",debounce:"1000"},{append:e(()=>[a(k,{name:"search"})]),_:1},8,["modelValue"])]),header:e(l=>[a(P,{props:l},{default:e(()=>[a(V,{"auto-width":""},{default:e(()=>[_("Action")]),_:1}),(u(!0),C(h,null,w(l.cols,r=>(u(),T(V,{key:r.name,props:l},{default:e(()=>[_(b(r.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:e(l=>[a(P,{props:l},{default:e(()=>[a(I,{"auto-width":""},{default:e(()=>[a(D,{flat:"",color:"orange",icon:"visibility",onClick:r=>o.onClickView(l.row.TQUO_QUOCD),dense:"",disable:l.row.TQUO_APPRVDT!==null},{default:e(()=>[a(F,null,{default:e(()=>[_(b(l.row.TQUO_APPRVDT?"Quotation already approved, cannot edit !":"Edit this quotation"),1)]),_:2},1024)]),_:2},1032,["onClick","disable"])]),_:2},1024),(u(!0),C(h,null,w(l.cols,r=>(u(),T(I,{key:r.name,props:l},{default:e(()=>[_(b(r.value),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{ce as default};
