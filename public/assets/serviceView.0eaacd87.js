import{Q as h}from"./QTooltip.fbe5b2eb.js";import{s as c,o as j,B as C,C as S,D as l,E as e,J as F,K as $,I as a,P as I,L as J,Q as v,M as Q,O as W,aa as X,aW as E,H as f,R as U,aU as N,aV as q,aZ as le,aX as A,ap as ae,S as te}from"./index.6f014463.js";import{u as Z,b as H,c as R,Q as oe,j as x,k,l as B,a as se,m as K}from"./use-dialog-plugin-component.3850a0c1.js";import{Q as L,a as Y}from"./date.75badddf.js";import{api_web as y}from"./axios.05056d4c.js";import{Q as ne,a as de,C as ie}from"./ClosePopup.be5ef121.js";const ue=a("div",{class:"text-h6"},"Create Item Master",-1),re={class:"row"},ce={class:"col"},me={class:"col q-pl-md"},_e={class:"row q-pt-md"},pe={class:"col"},ve={class:"col q-pl-md"},fe={class:"row q-pt-md"},Me={class:"col"},Ce={class:"col q-pl-md"},Ie={class:"row q-pt-md"},Ve={class:"col"},ge={__name:"itemCreate",setup(P){const{dialogRef:O,onDialogHide:V,onDialogOK:b,onDialogCancel:T}=Z(),g=H(),t=c({MITM_ITMCD:"",MITM_ITMNM:"",MITM_STKUOM:"",MITM_ITMTYPE:1,MITM_BRAND:"",MITM_MODEL:"",MITM_SPEC:"",MITM_ITMCAT:"",MITM_COACD:""}),_=c(!1),p=c([]),r=c([]);j(()=>{M()});const m=()=>{g.dialog({title:"Confirmation",message:"Do you want to save this item ?",cancel:!0,persistent:!0}).onOk(async()=>{await y.post("item",t.value).then(n=>{b(n.data.data.value)})})},M=async()=>{_.value=!0,await y.get("item/formAPI").then(n=>{_.value=!1,p.value=n.data.uoms,r.value=n.data.coas}).catch(()=>{_.value=!1})};return(n,o)=>(C(),S(W,{ref_key:"dialogRef",ref:O,onHide:Q(V),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:l(()=>[e(F,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:l(()=>[e($,null,{default:l(()=>[ue]),_:1}),e($,{class:"q-pa-sm"},{default:l(()=>[a("div",re,[a("div",ce,[e(I,{label:"Item Code",dense:"",modelValue:t.value.MITM_ITMCD,"onUpdate:modelValue":o[0]||(o[0]=d=>t.value.MITM_ITMCD=d),filled:""},null,8,["modelValue"])]),a("div",me,[e(I,{label:"Item Name",dense:"",modelValue:t.value.MITM_ITMNM,"onUpdate:modelValue":o[1]||(o[1]=d=>t.value.MITM_ITMNM=d),filled:""},null,8,["modelValue"])])]),a("div",_e,[a("div",pe,[e(R,{dense:"",filled:"",label:"UOM",modelValue:t.value.MITM_STKUOM,"onUpdate:modelValue":o[2]||(o[2]=d=>t.value.MITM_STKUOM=d),options:p.value,behavior:"dialog","option-label":"MUOM_UOMNM","option-value":"MUOM_UOMCD","emit-value":"","map-options":"",loading:_.value},null,8,["modelValue","options","loading"])]),a("div",ve,[e(I,{label:"Item Brand",dense:"",modelValue:t.value.MITM_BRAND,"onUpdate:modelValue":o[3]||(o[3]=d=>t.value.MITM_BRAND=d),filled:""},null,8,["modelValue"])])]),a("div",fe,[a("div",Me,[e(I,{label:"Item Model",dense:"",modelValue:t.value.MITM_MODEL,"onUpdate:modelValue":o[4]||(o[4]=d=>t.value.MITM_MODEL=d),filled:""},null,8,["modelValue"])]),a("div",Ce,[e(I,{label:"Item Specification",dense:"",modelValue:t.value.MITM_SPEC,"onUpdate:modelValue":o[5]||(o[5]=d=>t.value.MITM_SPEC=d),filled:""},null,8,["modelValue"])])]),a("div",Ie,[a("div",Ve,[e(R,{dense:"",filled:"",label:"COA",modelValue:t.value.MITM_COACD,"onUpdate:modelValue":o[6]||(o[6]=d=>t.value.MITM_COACD=d),options:r.value,behavior:"dialog","option-label":"MCOA_COANM","option-value":"MCOA_COACD","emit-value":"","map-options":"",loading:_.value},null,8,["modelValue","options","loading"])])])]),_:1}),e(J,{align:"right"},{default:l(()=>[e(v,{label:"OK",color:"primary",onClick:o[7]||(o[7]=d=>m())}),e(v,{flat:"",label:"Cancel",color:"red",onClick:Q(T)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},De=a("div",{class:"text-h6"},"Create Order",-1),be={style:{border:"1px black solid","border-radius":"10px"}},Te=a("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[a("b",null,"Header")],-1),he={class:"row"},Se={class:"col"},Oe={class:"col q-pl-md"},we={class:"row items-center justify-end"},ke={class:"row"},ye={class:"col"},Ue={style:{border:"1px black solid","border-radius":"10px",height:"35vh",overflow:"auto"}},$e=a("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[a("b",null,"Detail Items")],-1),Qe={class:"row q-pb-sm"},Re={class:"col text-right"},Ne={__name:"serviceCreateOrder",setup(P){const{dialogRef:O,onDialogHide:V,onDialogOK:b,onDialogCancel:T}=Z(),g=H(),t=c({SRVH_DOCNO:"",SRVH_ISSDT:"",SRVH_CUSCD:""}),_=c([]),p=c([]),r=c(!1),m=(i,s,u,D)=>{s(async()=>{D==="cust"&&await M(i),D==="item"&&await n(i)})},M=async i=>{r.value=!0,await y.post("customer/searchAPI",{searchValue:i}).then(s=>{r.value=!1,listCustomers.value=s.data.data}).catch(()=>{r.value=!1})},n=async i=>{r.value=!0,await y.post("item/searchAPI",{searchValue:i}).then(s=>{r.value=!1,_.value=s.data.data}).catch(()=>{r.value=!1})},o=()=>{p.value.push({TSRVD_ITMCD:"",TSRVD_LINE:p.value.length+1})},d=i=>{g.dialog({title:"Confirmation",message:`Do you want to delete this lines no ${i+1} ?`,cancel:!0,persistent:!0}).onOk(async()=>{p.value.splice(i,1)})},z=i=>{g.dialog({component:ge}).onOk(async s=>{p.value[i].TSRVD_ITMCD=s.MITM_ITMNM})};return(i,s)=>(C(),S(W,{ref_key:"dialogRef",ref:O,onHide:Q(V),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:l(()=>[e(F,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:l(()=>[e($,null,{default:l(()=>[De]),_:1}),e($,{class:"q-pa-sm"},{default:l(()=>[a("fieldset",be,[Te,a("div",he,[a("div",Se,[e(I,{label:"SPK No",readonly:"",dense:"",modelValue:t.value.SRVH_DOCNO,"onUpdate:modelValue":s[0]||(s[0]=u=>t.value.SRVH_DOCNO=u),filled:""},null,8,["modelValue"])]),a("div",Oe,[e(I,{filled:"",modelValue:t.value.SRVH_ISSDT,"onUpdate:modelValue":s[2]||(s[2]=u=>t.value.SRVH_ISSDT=u),dense:"",label:"Issue Date",loading:r.value,onClick:s[3]||(s[3]=u=>i.quotationIssueDate.qDateProxy.show()),mask:"####-##-##","fill-mask":"",hint:"Mask: YYYY-MM-DD"},{append:l(()=>[e(X,{name:"event",class:"cursor-pointer"},{default:l(()=>[e(ne,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(de,{modelValue:t.value.SRVH_ISSDT,"onUpdate:modelValue":s[1]||(s[1]=u=>t.value.SRVH_ISSDT=u),mask:"YYYY-MM-DD"},{default:l(()=>[a("div",we,[E(e(v,{label:"Close",color:"primary",flat:""},null,512),[[ie]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue","loading"])])]),a("div",ke,[a("div",ye,[e(I,{label:"Customer Choose",dense:"",modelValue:t.value.SRVH_CUSCD,"onUpdate:modelValue":s[4]||(s[4]=u=>t.value.SRVH_CUSCD=u),filled:""},null,8,["modelValue"])])])]),a("fieldset",Ue,[$e,a("div",Qe,[a("div",Re,[e(v,{flat:"",icon:"add",color:"blue",onClick:s[5]||(s[5]=u=>o())},{default:l(()=>[e(h,null,{default:l(()=>[f("Add lines")]),_:1})]),_:1})])]),e(oe,{bordered:"",dense:""},{default:l(()=>[p.value.length>0?(C(!0),U(N,{key:0},q(p.value,(u,D)=>(C(),S(x,{key:D,class:"q-my-sm",dense:""},{default:l(()=>[e(k,{avatar:""},{default:l(()=>[e(le,{"text-color":"blue"},{default:l(()=>[f(A(D+1),1)]),_:2},1024)]),_:2},1024),e(k,null,{default:l(()=>[e(B,null,{default:l(()=>[e(R,{dense:"",filled:"",label:"Item Name",modelValue:u.TSRVD_ITMCD,"onUpdate:modelValue":w=>u.TSRVD_ITMCD=w,"use-input":"","input-debounce":"500",options:_.value,onFilter:s[6]||(s[6]=(w,G,ee)=>m(w,G,ee,"item")),behavior:"dialog","option-label":"MITM_ITMNM","option-value":"MITM_ITMNM","emit-value":"","map-options":"",loading:r.value},null,8,["modelValue","onUpdate:modelValue","options","loading"])]),_:2},1024)]),_:2},1024),e(k,{side:""},{default:l(()=>[e(v,{icon:"delete",color:"red",flat:"",onClick:w=>d(D)},{default:l(()=>[e(h,null,{default:l(()=>[f("Delete line")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024),e(k,{side:""},{default:l(()=>[e(v,{icon:"library_add",color:"indigo",flat:"",onClick:w=>z(D)},{default:l(()=>[e(h,null,{default:l(()=>[f("Add new item")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128)):E((C(),S(x,{key:1,class:"q-my-sm",clickable:""},{default:l(()=>[e(k,null,{default:l(()=>[e(B,null,{default:l(()=>[f(" No Items Added ")]),_:1})]),_:1})]),_:1})),[[ae]])]),_:1})])]),_:1}),e(J,{align:"right"},{default:l(()=>[e(v,{label:"OK",color:"primary",onClick:s[7]||(s[7]=u=>i.onSubmitData()),disable:i.stateSubmit},null,8,["disable"]),e(v,{flat:"",label:"Cancel",color:"red",onClick:Q(T)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}};const qe={class:"q-pa-md"},Ae={class:"row q-pb-md"},He=a("div",{class:"col"},[a("span",{class:"text-h4"},"Receive Order ")],-1),Pe={class:"col text-right"},Ee={class:"row q-pt-md"},xe={class:"col"},Je={__name:"serviceView",setup(P){const O=H(),V=c("SRVH_DOCNO"),b=c(""),T=c([]),g=c([{name:"SRVH_DOCNO",label:"SPK No",field:"SRVH_DOCNO",sortable:!0,align:"left"},{name:"SRVH_CUSCD",label:"Cust",field:"SRVH_CUSCD",sortable:!0,align:"left"},{name:"created_at",label:"Created Date",field:"created_at",sortable:!0,align:"left"}]),t=c(!1);j(()=>{_()});const _=async()=>{t.value=!0,await y.post("service/search",{searchBy:V.value,searchValue:b.value}).then(m=>{t.value=!1,T.value=m.data.data}).catch(m=>{t.value=!1})},p=()=>{O.dialog({component:Ne}).onOk(async m=>{_()})},r=m=>{window.open("https://joss.jatpowerindo.co.id/PDF/quotation/"+btoa(m),"_blank").focus()};return(m,M)=>(C(),U("div",qe,[a("div",Ae,[He,a("div",Pe,[e(v,{icon:"add",color:"blue",onClick:p},{default:l(()=>[e(h,null,{default:l(()=>[f("Create New Order")]),_:1})]),_:1})])]),e(te),a("div",Ee,[a("div",xe,[e(se,{title:"Created Order",rows:T.value,columns:g.value,"row-key":"name",loading:t.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":l(()=>[e(R,{outlined:"",modelValue:V.value,"onUpdate:modelValue":M[0]||(M[0]=n=>V.value=n),options:g.value,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),e(I,{borderless:"",dense:"",modelValue:b.value,"onUpdate:modelValue":[M[1]||(M[1]=n=>b.value=n),M[2]||(M[2]=n=>m.dataQuo())],placeholder:"Search",outlined:"",debounce:"1000"},{append:l(()=>[e(X,{name:"search"})]),_:1},8,["modelValue"])]),header:l(n=>[e(L,{props:n},{default:l(()=>[(C(!0),U(N,null,q(n.cols,o=>(C(),S(K,{key:o.name,props:n},{default:l(()=>[f(A(o.label),1)]),_:2},1032,["props"]))),128)),e(K,{"auto-width":""},{default:l(()=>[f("Action")]),_:1})]),_:2},1032,["props"])]),body:l(n=>[e(L,{props:n},{default:l(()=>[(C(!0),U(N,null,q(n.cols,o=>(C(),S(Y,{key:o.name,props:n},{default:l(()=>[f(A(o.value),1)]),_:2},1032,["props"]))),128)),e(Y,{"auto-width":""},{default:l(()=>[e(v,{flat:"",color:"orange",icon:"edit",onClick:o=>m.onClickEdit(n.row.TQUO_QUOCD),dense:""},{default:l(()=>[e(h,null,{default:l(()=>[f("Edit this quotation")]),_:1})]),_:2},1032,["onClick"]),e(v,{flat:"",color:"indigo",icon:"print",onClick:o=>r(n.row.TQUO_QUOCD),dense:""},{default:l(()=>[e(h,null,{default:l(()=>[f("Print this order")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{Je as default};
