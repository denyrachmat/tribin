import{s as _,o as I,B as s,C as h,D as e,E as t,J as D,K as m,R as p,aY as b,aZ as T,a_ as L,H as k,a$ as c,ap as H,b0 as V,L as N,Q as P,M as $,O as R,I as o,P as K,aa as O,S as U,b4 as J}from"./index.a65ecaf2.js";import{u as E,b as q,Q as z,l as G,m as j,n as S,a as M,o as F}from"./use-dialog-plugin-component.6fc00c16.js";import{d as Y,Q as x,b as Z}from"./date.4e4b3cdb.js";import{api_web as B}from"./axios.00947709.js";const W=o("div",{class:"text-h6"},"Review Item List",-1),X={__name:"viewListApprovalItem",props:{cd:String,typeCD:String},setup(A){const{dialogRef:C,onDialogHide:w,onDialogOK:y,onDialogCancel:f}=E();q();const n=A,g=_(!1),v=_([]);I(()=>{u()});const u=async()=>{await B.get(`${n.typeCD}/${btoa(n.cd)}`).then(d=>{g.value=!1,v.value=d.data}).catch(d=>{g.value=!1})};return(d,l)=>(s(),h(R,{ref_key:"dialogRef",ref:C,onHide:$(w),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:e(()=>[t(D,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:e(()=>[t(m,null,{default:e(()=>[W]),_:1}),t(m,{class:"q-pa-sm",style:{height:"70vh",overflow:"auto"}},{default:e(()=>[n.typeCD==="quotation"?(s(),h(z,{key:0,dark:"",bordered:"",separator:""},{default:e(()=>[(s(!0),p(b,null,T(v.value.dataItem,(a,i)=>L((s(),h(G,{clickable:"",key:i},{default:e(()=>[t(j,null,{default:e(()=>[t(S,null,{default:e(()=>[k(c(a.MITM_ITMNM),1)]),_:2},1024),t(S,{caption:""},{default:e(()=>[k("Item Name")]),_:1})]),_:2},1024)]),_:2},1024)),[[H]])),128))]),_:1})):V("",!0)]),_:1}),t(N,{align:"center"},{default:e(()=>[t(P,{label:"OK",color:"primary",onClick:l[0]||(l[0]=a=>$(y)()),disable:d.stateSubmit},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},ee=o("div",{class:"text-h6"},"Approval List",-1),te={class:"q-pa-xs col-xs-12 col-sm-6 col-md-4"},ae={class:"text-h5 text-bold"},oe={class:"text-h6 text-bold"},le={class:"text-subtitle2"},se={class:"row"},ne={class:"col"},ie={class:"col text-right"},re={__name:"viewListApproval",props:{listApprv:Array},setup(A){const C=q(),w=A,y=_([{name:"APP_CD",label:"Doc Code",field:"APP_CD"},{name:"APP_CUSNM",label:"Customer",field:"APP_CUSNM"},{name:"APP_SBJCT",label:"Subject",field:"APP_SBJCT"},{name:"APP_ATTN",label:"Attn",field:"APP_ATTN"},{name:"CREATED_AT",label:"Created Date",field:"CREATED_AT"}]),f=_(""),n=(a,i="days")=>{const r=new Date,Q=new Date(a);return Y.getDateDiff(r,Q,i)},g=a=>{C.dialog({component:X,componentProps:{cd:a}}).onOk(async i=>{quotationGroupConditions.value=i.MCONDITION_RPT_STAT,quotationConditions.value=i.group})},{dialogRef:v,onDialogHide:u,onDialogOK:d,onDialogCancel:l}=E();return(a,i)=>(s(),h(R,{ref_key:"dialogRef",ref:v,onHide:$(u),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:e(()=>[t(D,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:e(()=>[t(m,null,{default:e(()=>[ee]),_:1}),t(m,{class:"q-pa-sm",style:{height:"70vh",overflow:"auto"}},{default:e(()=>[t(M,{grid:"",flat:"",bordered:"","card-container-class":a.cardContainerClass,title:"Outstanding Approval",rows:w.listApprv,columns:y.value,"row-key":"name",filter:f.value,"hide-header":"",pagination:{rowsPerPage:50},"rows-per-page-options":a.rowsPerPageOptions},{"top-right":e(()=>[t(K,{borderless:"",dense:"",debounce:"300",modelValue:f.value,"onUpdate:modelValue":i[0]||(i[0]=r=>f.value=r),placeholder:"Search"},{append:e(()=>[t(O,{name:"search"})]),_:1},8,["modelValue"])]),item:e(r=>[o("div",te,[t(D,{flat:"",bordered:""},{default:e(()=>[t(m,{class:"text-center bg-secondary text-white"},{default:e(()=>[o("div",ae,c(r.row.APP_CUSNM),1)]),_:2},1024),t(U),t(m,null,{default:e(()=>[o("div",oe,c(r.row.APP_CD),1),o("div",le,c(r.row.APP_SBJCT),1)]),_:2},1024),t(m,null,{default:e(()=>[o("div",se,[o("div",ne,[t(P,{label:"Preview",color:"primary",outline:"",onClick:Q=>g(r.row.APP_CD)},null,8,["onClick"])]),o("div",ie,c(n(r.row.CREATED_AT)<30?`${n(r.row.CREATED_AT)} Days Ago`:`${n(r.row.CREATED_AT,"months")} Month ago`),1)])]),_:2},1024)]),_:2},1024)])]),_:1},8,["card-container-class","rows","columns","filter","rows-per-page-options"])]),_:1}),t(N,{align:"right"},{default:e(()=>[t(P,{label:"OK",color:"primary",onClick:i[1]||(i[1]=r=>$(d)()),disable:a.stateSubmit},null,8,["disable"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},ce={class:"q-pa-md bg-grey-5 window-height"},de={class:"row"},ue={class:"row"},pe={class:"col"},_e={class:"text-h3 text-cyan"},me={class:"text-subtitle2 text-cyan"},fe={class:"col text-right"},ge={class:"row q-pa-sm"},he={class:"col"},ve={key:1},Ae={__name:"dashboardView",setup(A){const C=q(),w=_([{total:900,title:"Total Sales",icon:"shopping_cart",color:"cyan"},{total:900,title:"Total Purchase",icon:"shopping_bag",color:"cyan"},{total:900,title:"Total Profit",icon:"payments",color:"cyan"},{total:15,title:"Total Customer",icon:"group",color:"cyan"},{total:15,title:"Total Customer",icon:"group",color:"cyan"},{total:15,title:"Total Customer",icon:"group",color:"cyan"},{total:15,title:"Total Customer",icon:"group",color:"cyan"},{total:15,title:"Total Customer",icon:"group",color:"cyan"}]),y=_([{name:"name",label:"Business",field:"name",sortable:!0,align:"left"},{name:"quot",label:"Quotation",field:"quot_count",sortable:!0,align:"center"},{name:"pr",label:"Purchase Request",field:"pr_count",sortable:!0,align:"center"},{name:"po",label:"Purchase Order",field:"po_count",sortable:!0,align:"center"},{name:"spk",label:"SPK",field:"spk_count",sortable:!0,align:"center"}]),f=_([]),n=_(!1);_(null),I(async()=>{await g()});const g=async()=>{n.value=!0,await B.get("/approval/notificationsAPI/top-user").then(u=>{n.value=!1,f.value=u.data}).catch(u=>{n.value=!1})},v=u=>{C.dialog({component:re,componentProps:{listApprv:u}}).onOk(async d=>{quotationGroupConditions.value=d.MCONDITION_RPT_STAT,quotationConditions.value=d.group})};return(u,d)=>(s(),p("div",ce,[o("div",de,[(s(!0),p(b,null,T(w.value,(l,a)=>(s(),p("div",{class:J("col-3 q-pa-sm"),key:a},[t(D,null,{default:e(()=>[t(m,null,{default:e(()=>[o("div",ue,[o("div",pe,[o("div",_e,c(l.total),1),o("div",me,c(l.title),1)]),o("div",fe,[t(O,{name:l.icon,size:"4.4em",color:l.color},null,8,["name","color"])])])]),_:2},1024)]),_:2},1024)]))),128))]),o("div",ge,[o("div",he,[t(M,{flat:"",bordered:"",title:"Approval List",rows:f.value,columns:y.value,"row-key":"name",loading:n.value},{"top-right":e(()=>[t(P,{flat:"",icon:"refresh",color:"cyan",onClick:g})]),header:e(l=>[t(x,{props:l},{default:e(()=>[(s(!0),p(b,null,T(l.cols,a=>(s(),h(F,{key:a.name,props:l},{default:e(()=>[k(c(a.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:e(l=>[t(x,{props:l},{default:e(()=>[(s(!0),p(b,null,T(l.cols,a=>(s(),h(Z,{key:a.name,props:l},{default:e(()=>[a.name==="quot"||a.name==="pr"||a.name==="po"||a.name==="spk"?(s(),p(b,{key:0},[a.value>0?(s(),h(P,{key:0,flat:"",color:"blue",onClick:i=>v(l.row[a.name.split("_")[0]])},{default:e(()=>[o("b",null,c(a.value),1)]),_:2},1032,["onClick"])):(s(),p("span",ve,c(a.value),1))],64)):(s(),p(b,{key:1},[k(c(a.value),1)],64))]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{Ae as default};
