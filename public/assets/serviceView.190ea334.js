import{Q as Y}from"./QTooltip.93765a7f.js";import{t as M,o as ue,C as O,D as x,E as o,F as l,M as _e,O as J,J as h,$ as B,X as ge,Q as $,Y as te,Z as pe,a as q,c as De,a5 as Oe,u as Ze,h as I,ab as Je,d as et,a_ as Ce,w as He,bf as me,g as Se,aq as tt,ar as lt,au as at,aD as Be,ac as Qe,aP as ot,ad as nt,af as it,p as st,bg as rt,j as ut,bh as dt,aL as ct,aK as vt,at as we,aJ as mt,aM as Ye,I as A,U as qe,a0 as ft,R as ee,aZ as K,S as be,T as ye,V as _t,P as ne,W as gt}from"./index.566c7d73.js";import{e as se,Q as Ne,a as Z,b as Pe,f as pt}from"./QSelect.7eadcff4.js";import{Q as St,a as ht,b as $e}from"./QTable.8a0e55fd.js";import{Q as xe,a as Ae}from"./QTd.cb728bb0.js";import{u as de,j as Ct,k as Le}from"./format.1f47051f.js";import{d as fe}from"./date.3173f725.js";import{api_web as G}from"./axios.e49f4a24.js";import{Q as bt,a as yt,C as Tt}from"./ClosePopup.1006fc2e.js";import{u as re,g as Dt}from"./use-dialog-plugin-component.e027f5f8.js";import{_ as wt}from"./serviceOprUpdateOrder.cb039bd9.js";import"./use-render-cache.3aae9b27.js";import"./QBtnGroup.9d342215.js";import"./QBadge.02b2e8da.js";import"./serviceOprItemAdd.6d018845.js";const Mt=h("div",{class:"text-h6"},"Create Item Master",-1),kt={class:"row"},Vt={class:"col"},Rt={class:"col q-pl-md"},It={class:"row q-pt-md"},Ut={class:"col"},Ft={class:"col q-pl-md"},Ot={class:"row q-pt-md"},qt={class:"col"},Nt={class:"col q-pl-md"},Pt={class:"row q-pt-md"},$t={class:"col"},xt={__name:"itemCreate",props:{ItemCat:String,ItemType:String},setup(e){const{dialogRef:T,onDialogHide:f,onDialogOK:m,onDialogCancel:p}=re(),b=de(),i=M({MITM_ITMCD:"",MITM_ITMNM:"",MITM_STKUOM:"",MITM_ITMTYPE:1,MITM_BRAND:"",MITM_MODEL:"",MITM_SPEC:"",MITM_ITMCAT:"",MITM_COACD:"",MITM_ITMCAT:""}),y=M(!1),U=M([]),F=M([]),g=e;ue(()=>{C(),i.value.MITM_ITMCAT=g.ItemCat,i.value.MITM_ITMTYPE=g.ItemType});const S=(t,v,w,n)=>{v(async()=>{await G.post("item/getListCoasAPI",{search:t}).then(a=>{F.value=a.data})})},D=()=>{b.dialog({title:"Confirmation",message:"Do you want to save this item ?",cancel:!0,persistent:!0}).onOk(async()=>{await G.post("item",i.value).then(t=>{m(t.data.data.value)})})},C=async()=>{y.value=!0,await G.get("item/formAPI").then(t=>{y.value=!1,U.value=t.data.uoms,F.value=t.data.coas}).catch(()=>{y.value=!1})};return(t,v)=>(O(),x(pe,{ref_key:"dialogRef",ref:T,onHide:te(f),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:o(()=>[l(_e,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:o(()=>[l(J,null,{default:o(()=>[Mt]),_:1}),l(J,{class:"q-pa-sm"},{default:o(()=>[h("div",kt,[h("div",Vt,[l(B,{label:"Item Code",dense:"",modelValue:i.value.MITM_ITMCD,"onUpdate:modelValue":v[0]||(v[0]=w=>i.value.MITM_ITMCD=w),filled:""},null,8,["modelValue"])]),h("div",Rt,[l(B,{label:"Item Name",dense:"",modelValue:i.value.MITM_ITMNM,"onUpdate:modelValue":v[1]||(v[1]=w=>i.value.MITM_ITMNM=w),filled:""},null,8,["modelValue"])])]),h("div",It,[h("div",Ut,[l(se,{dense:"",filled:"",label:"UOM",modelValue:i.value.MITM_STKUOM,"onUpdate:modelValue":v[2]||(v[2]=w=>i.value.MITM_STKUOM=w),options:U.value,behavior:"dialog","option-label":"MUOM_UOMNM","option-value":"MUOM_UOMCD","emit-value":"","map-options":"",loading:y.value},null,8,["modelValue","options","loading"])]),h("div",Ft,[l(B,{label:"Item Brand",dense:"",modelValue:i.value.MITM_BRAND,"onUpdate:modelValue":v[3]||(v[3]=w=>i.value.MITM_BRAND=w),filled:""},null,8,["modelValue"])])]),h("div",Ot,[h("div",qt,[l(B,{label:"Item Model",dense:"",modelValue:i.value.MITM_MODEL,"onUpdate:modelValue":v[4]||(v[4]=w=>i.value.MITM_MODEL=w),filled:""},null,8,["modelValue"])]),h("div",Nt,[l(B,{label:"Item Specification",dense:"",modelValue:i.value.MITM_SPEC,"onUpdate:modelValue":v[5]||(v[5]=w=>i.value.MITM_SPEC=w),filled:""},null,8,["modelValue"])])]),h("div",Pt,[h("div",$t,[l(se,{dense:"",filled:"",label:"COA",modelValue:i.value.MITM_COACD,"onUpdate:modelValue":v[6]||(v[6]=w=>i.value.MITM_COACD=w),options:F.value,"use-input":"",behavior:"dialog","option-label":"MCOA_COANM","option-value":"MCOA_COACD",onFilter:v[7]||(v[7]=(w,n,a)=>S(w,n,a)),"emit-value":"","map-options":"",loading:y.value},null,8,["modelValue","options","loading"])])])]),_:1}),l(ge,{align:"right"},{default:o(()=>[l($,{label:"OK",color:"primary",onClick:v[8]||(v[8]=w=>D())}),l($,{flat:"",label:"Cancel",color:"red",onClick:te(p)},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},At=h("div",{class:"text-h6"},"Create New Customer Data",-1),Lt={class:"row q-pb-md"},zt={class:"col"},Et={class:"row q-pb-md"},Ht={class:"col"},Bt={class:"col q-pl-md"},Qt={class:"row"},Yt={class:"col"},jt={__name:"customerView",setup(e){const{dialogRef:T,onDialogHide:f,onDialogOK:m,onDialogCancel:p}=re(),b=de(),i=M({MCUS_CUSCD:"",MCUS_CUSNM:"",MCUS_CURCD:"IDR",MCUS_TAXREG:"-",MCUS_ADDR1:"",MCUS_TELNO:"",MCUS_PIC_NAME:"-",MCUS_PIC_TELNO:"-",MCUS_TYPE:1,MCUS_GROUP:"SERVICE",MCUS_EMAIL:""}),y=M(!1),U=()=>{b.dialog({title:"Confirmation",message:"Do you want to save this customer ?",cancel:!0,persistent:!0}).onOk(async()=>{y.value=!0,await G.post("customer",i.value).then(F=>{y.value=!1,m(F.data)}).catch(F=>{y.value=!1})})};return(F,g)=>(O(),x(pe,{ref_key:"dialogRef",ref:T,onHide:te(f),"transition-show":"slide-up","transition-hide":"slide-down","full-width":""},{default:o(()=>[l(_e,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:o(()=>[l(J,null,{default:o(()=>[At]),_:1}),l(J,{class:"q-pa-sm"},{default:o(()=>[h("div",Lt,[h("div",zt,[l(B,{label:"Customer Name",dense:"",modelValue:i.value.MCUS_CUSNM,"onUpdate:modelValue":g[0]||(g[0]=S=>i.value.MCUS_CUSNM=S),filled:""},null,8,["modelValue"])])]),h("div",Et,[h("div",Ht,[l(B,{label:"Customer Email",dense:"",modelValue:i.value.MCUS_EMAIL,"onUpdate:modelValue":g[1]||(g[1]=S=>i.value.MCUS_EMAIL=S),filled:""},null,8,["modelValue"])]),h("div",Bt,[l(B,{label:"Customer Phone",dense:"",modelValue:i.value.MCUS_TELNO,"onUpdate:modelValue":g[2]||(g[2]=S=>i.value.MCUS_TELNO=S),filled:"",mask:"####-####-####"},null,8,["modelValue"])])]),h("div",Qt,[h("div",Yt,[l(B,{label:"Customer Address",dense:"",modelValue:i.value.MCUS_ADDR1,"onUpdate:modelValue":g[3]||(g[3]=S=>i.value.MCUS_ADDR1=S),filled:"",type:"textarea"},null,8,["modelValue"])])])]),_:1}),l(ge,{align:"right"},{default:o(()=>[l($,{label:"OK",color:"primary",onClick:g[4]||(g[4]=S=>U()),loading:y.value},null,8,["loading"]),l($,{flat:"",label:"Cancel",color:"red",onClick:te(p),loading:y.value},null,8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}},Kt={ratio:[String,Number]};function Gt(e,T){return q(()=>{const f=Number(e.ratio||(T!==void 0?T.value:void 0));return isNaN(f)!==!0&&f>0?{paddingBottom:`${100/f}%`}:null})}const Wt=1.7778;var Xt=De({name:"QImg",props:{...Kt,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:Wt},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:T,emit:f}){const m=M(e.initialRatio),p=Gt(e,m),b=Se(),{registerTimeout:i,removeTimeout:y}=Oe(),{registerTimeout:U,removeTimeout:F}=Oe(),g=q(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),S=q(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),D=[M(null),M(g.value)],C=M(0),t=M(!1),v=M(!1),w=q(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),n=q(()=>({width:e.width,height:e.height})),a=q(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),c=q(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function u(){if(F(),e.loadingShowDelay===0){t.value=!0;return}U(()=>{t.value=!0},e.loadingShowDelay)}function L(){F(),t.value=!1}function R({target:s}){me(b)===!1&&(y(),m.value=s.naturalHeight===0?.5:s.naturalWidth/s.naturalHeight,V(s,1))}function V(s,z){z===1e3||me(b)===!0||(s.complete===!0?k(s):i(()=>{V(s,z+1)},50))}function k(s){me(b)!==!0&&(C.value=C.value^1,D[C.value].value=null,L(),s.getAttribute("__qerror")!=="true"&&(v.value=!1),f("load",s.currentSrc||s.src))}function r(s){y(),L(),v.value=!0,D[C.value].value=S.value,D[C.value^1].value=g.value,f("error",s)}function _(s){const z=D[s].value,Q={key:"img_"+s,class:a.value,style:c.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...z};return C.value===s?Object.assign(Q,{class:Q.class+"current",onLoad:R,onError:r}):Q.class+="loaded",I("div",{class:"q-img__container absolute-full",key:"img"+s},I("img",Q))}function P(){return t.value===!1?I("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},et(T[v.value===!0?"error":"default"])):I("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},T.loading!==void 0?T.loading():e.noSpinner===!0?void 0:[I(Ce,{color:e.spinnerColor,size:e.spinnerSize})])}{let s=function(){He(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,z=>{y(),v.value=!1,z===null?(L(),D[C.value^1].value=g.value):u(),D[C.value].value=z},{immediate:!0})};Ze.value===!0?ue(s):s()}return()=>{const s=[];return p.value!==null&&s.push(I("div",{key:"filler",style:p.value})),D[0].value!==null&&s.push(_(0)),D[1].value!==null&&s.push(_(1)),s.push(I(Je,{name:"q-transition--fade"},P)),I("div",{key:"main",class:w.value,style:n.value,role:"img","aria-label":e.alt},s)}}});const Zt={...tt,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},Te=50,je=2*Te,Ke=je*Math.PI,Jt=Math.round(Ke*1e3)/1e3;var el=De({name:"QCircularProgress",props:{...Zt,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(e,{slots:T}){const{proxy:{$q:f}}=Se(),m=lt(e),p=q(()=>{const C=(f.lang.rtl===!0?-1:1)*e.angle;return{transform:e.reverse!==(f.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-C}deg)`:`rotate3d(0, 0, 1, ${C-90}deg)`}}),b=q(()=>e.instantFeedback!==!0&&e.indeterminate!==!0?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:""),i=q(()=>je/(1-e.thickness/2)),y=q(()=>`${i.value/2} ${i.value/2} ${i.value} ${i.value}`),U=q(()=>Ct(e.value,e.min,e.max)),F=q(()=>e.max-e.min),g=q(()=>e.thickness/2*i.value),S=q(()=>{const C=(e.max-U.value)/F.value,t=e.rounded===!0&&U.value<e.max&&C<.25?g.value/2*(1-C/.25):0;return Ke*C+t});function D({thickness:C,offset:t,color:v,cls:w,rounded:n}){return I("circle",{class:"q-circular-progress__"+w+(v!==void 0?` text-${v}`:""),style:b.value,fill:"transparent",stroke:"currentColor","stroke-width":C,"stroke-dasharray":Jt,"stroke-dashoffset":t,"stroke-linecap":n,cx:i.value,cy:i.value,r:Te})}return()=>{const C=[];e.centerColor!==void 0&&e.centerColor!=="transparent"&&C.push(I("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:Te-g.value/2,cx:i.value,cy:i.value})),e.trackColor!==void 0&&e.trackColor!=="transparent"&&C.push(D({cls:"track",thickness:g.value,offset:0,color:e.trackColor})),C.push(D({cls:"circle",thickness:g.value,offset:S.value,color:e.color,rounded:e.rounded===!0?"round":void 0}));const t=[I("svg",{class:"q-circular-progress__svg",style:p.value,viewBox:y.value,"aria-hidden":"true"},C)];return e.showValue===!0&&t.push(I("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},T.default!==void 0?T.default():[I("div",U.value)])),I("div",{class:`q-circular-progress q-circular-progress--${e.indeterminate===!0?"in":""}determinate`,style:m.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.indeterminate===!0?void 0:U.value},at(T.internal,t))}}});function oe(e,T,f,m){const p=[];return e.forEach(b=>{m(b)===!0?p.push(b):T.push({failedPropValidation:f,file:b})}),p}function ve(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),Qe(e)}const tl={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},ll=["rejected"];function al({editable:e,dnd:T,getFileInput:f,addFilesToQueue:m}){const{props:p,emit:b,proxy:i}=Se(),y=M(null),U=q(()=>p.accept!==void 0?p.accept.split(",").map(a=>(a=a.trim(),a==="*"?"*/":(a.endsWith("/*")&&(a=a.slice(0,a.length-1)),a.toUpperCase()))):null),F=q(()=>parseInt(p.maxFiles,10)),g=q(()=>parseInt(p.maxTotalSize,10));function S(a){if(e.value)if(a!==Object(a)&&(a={target:null}),a.target!==null&&a.target.matches('input[type="file"]')===!0)a.clientX===0&&a.clientY===0&&Be(a);else{const c=f();c&&c!==a.target&&c.click(a)}}function D(a){e.value&&a&&m(null,a)}function C(a,c,u,L){let R=Array.from(c||a.target.files);const V=[],k=()=>{V.length!==0&&b("rejected",V)};if(p.accept!==void 0&&U.value.indexOf("*/")===-1&&(R=oe(R,V,"accept",r=>U.value.some(_=>r.type.toUpperCase().startsWith(_)||r.name.toUpperCase().endsWith(_))),R.length===0))return k();if(p.maxFileSize!==void 0){const r=parseInt(p.maxFileSize,10);if(R=oe(R,V,"max-file-size",_=>_.size<=r),R.length===0)return k()}if(p.multiple!==!0&&R.length!==0&&(R=[R[0]]),R.forEach(r=>{r.__key=r.webkitRelativePath+r.lastModified+r.name+r.size}),L===!0){const r=u.map(_=>_.__key);R=oe(R,V,"duplicate",_=>r.includes(_.__key)===!1)}if(R.length===0)return k();if(p.maxTotalSize!==void 0){let r=L===!0?u.reduce((_,P)=>_+P.size,0):0;if(R=oe(R,V,"max-total-size",_=>(r+=_.size,r<=g.value)),R.length===0)return k()}if(typeof p.filter=="function"){const r=p.filter(R);R=oe(R,V,"filter",_=>r.includes(_))}if(p.maxFiles!==void 0){let r=L===!0?u.length:0;if(R=oe(R,V,"max-files",()=>(r++,r<=F.value)),R.length===0)return k()}if(k(),R.length!==0)return R}function t(a){ve(a),T.value!==!0&&(T.value=!0)}function v(a){Qe(a),(a.relatedTarget!==null||ot.is.safari!==!0?a.relatedTarget!==y.value:document.elementsFromPoint(a.clientX,a.clientY).includes(y.value)===!1)===!0&&(T.value=!1)}function w(a){ve(a);const c=a.dataTransfer.files;c.length!==0&&m(null,c),T.value=!1}function n(a){if(T.value===!0)return I("div",{ref:y,class:`q-${a}__dnd absolute-full`,onDragenter:ve,onDragover:ve,onDragleave:v,onDrop:w})}return Object.assign(i,{pickFiles:S,addFiles:D}),{pickFiles:S,addFiles:D,onDragover:t,onDragleave:v,processFiles:C,getDndNode:n,maxFilesNumber:F,maxTotalSizeNumber:g}}function ze(e){return(e*100).toFixed(2)+"%"}const ol={...nt,...tl,label:String,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,noThumbnails:Boolean,autoUpload:Boolean,hideUploadBtn:Boolean,disable:Boolean,readonly:Boolean},Ge=[...ll,"start","finish","added","removed"];function nl(e,T){const f=Se(),{props:m,slots:p,emit:b,proxy:i}=f,{$q:y}=i,U=it(m,y);function F(d,N,E){if(d.__status=N,N==="idle"){d.__uploaded=0,d.__progress=0,d.__sizeLabel=Le(d.size),d.__progressLabel="0.00%";return}if(N==="failed"){i.$forceUpdate();return}d.__uploaded=N==="uploaded"?d.size:E,d.__progress=N==="uploaded"?1:Math.min(.9999,d.__uploaded/d.size),d.__progressLabel=ze(d.__progress),i.$forceUpdate()}const g=q(()=>m.disable!==!0&&m.readonly!==!0),S=M(!1),D=M(null),C=M(null),t={files:M([]),queuedFiles:M([]),uploadedFiles:M([]),uploadedSize:M(0),updateFileStatus:F,isAlive:()=>me(f)===!1},{pickFiles:v,addFiles:w,onDragover:n,onDragleave:a,processFiles:c,getDndNode:u,maxFilesNumber:L,maxTotalSizeNumber:R}=al({editable:g,dnd:S,getFileInput:Ve,addFilesToQueue:Re});Object.assign(t,e({props:m,slots:p,emit:b,helpers:t,exposeApi:d=>{Object.assign(t,d)}})),t.isBusy===void 0&&(t.isBusy=M(!1));const V=M(0),k=q(()=>V.value===0?0:t.uploadedSize.value/V.value),r=q(()=>ze(k.value)),_=q(()=>Le(V.value)),P=q(()=>g.value===!0&&t.isUploading.value!==!0&&(m.multiple===!0||t.queuedFiles.value.length===0)&&(m.maxFiles===void 0||t.files.value.length<L.value)&&(m.maxTotalSize===void 0||V.value<R.value)),s=q(()=>g.value===!0&&t.isBusy.value!==!0&&t.isUploading.value!==!0&&t.queuedFiles.value.length!==0);st(rt,Ue);const z=q(()=>"q-uploader column no-wrap"+(U.value===!0?" q-uploader--dark q-dark":"")+(m.bordered===!0?" q-uploader--bordered":"")+(m.square===!0?" q-uploader--square no-border-radius":"")+(m.flat===!0?" q-uploader--flat no-shadow":"")+(m.disable===!0?" disabled q-uploader--disable":"")+(S.value===!0?" q-uploader--dnd":"")),Q=q(()=>"q-uploader__header"+(m.color!==void 0?` bg-${m.color}`:"")+(m.textColor!==void 0?` text-${m.textColor}`:""));He(t.isUploading,(d,N)=>{N===!1&&d===!0?b("start"):N===!0&&d===!1&&b("finish")});function le(){m.disable===!1&&(t.abort(),t.uploadedSize.value=0,V.value=0,ke(),t.files.value=[],t.queuedFiles.value=[],t.uploadedFiles.value=[])}function j(){m.disable===!1&&Me(["uploaded"],()=>{t.uploadedFiles.value=[]})}function ce(){Me(["idle","failed"],({size:d})=>{V.value-=d,t.queuedFiles.value=[]})}function Me(d,N){if(m.disable===!0)return;const E={files:[],size:0},W=t.files.value.filter(H=>d.indexOf(H.__status)===-1?!0:(E.size+=H.size,E.files.push(H),H.__img!==void 0&&window.URL.revokeObjectURL(H.__img.src),!1));E.files.length!==0&&(t.files.value=W,N(E),b("removed",E.files))}function he(d){m.disable||(d.__status==="uploaded"?t.uploadedFiles.value=t.uploadedFiles.value.filter(N=>N.__key!==d.__key):d.__status==="uploading"?d.__abort():V.value-=d.size,t.files.value=t.files.value.filter(N=>N.__key!==d.__key?!0:(N.__img!==void 0&&window.URL.revokeObjectURL(N.__img.src),!1)),t.queuedFiles.value=t.queuedFiles.value.filter(N=>N.__key!==d.__key),b("removed",[d]))}function ke(){t.files.value.forEach(d=>{d.__img!==void 0&&window.URL.revokeObjectURL(d.__img.src)})}function Ve(){return C.value||D.value.getElementsByClassName("q-uploader__input")[0]}function Re(d,N){const E=c(d,N,t.files.value,!0),W=Ve();W!=null&&(W.value=""),E!==void 0&&(E.forEach(H=>{if(t.updateFileStatus(H,"idle"),V.value+=H.size,m.noThumbnails!==!0&&H.type.toUpperCase().startsWith("IMAGE")){const Fe=new Image;Fe.src=window.URL.createObjectURL(H),H.__img=Fe}}),t.files.value=t.files.value.concat(E),t.queuedFiles.value=t.queuedFiles.value.concat(E),b("added",E),m.autoUpload===!0&&t.upload())}function Ie(){s.value===!0&&t.upload()}function ie(d,N,E){if(d===!0){const W={type:"a",key:N,icon:y.iconSet.uploader[N],flat:!0,dense:!0};let H;return N==="add"?(W.onClick=v,H=Ue):W.onClick=E,I($,W,H)}}function Ue(){return I("input",{ref:C,class:"q-uploader__input overflow-hidden absolute-full",tabindex:-1,type:"file",title:"",accept:m.accept,multiple:m.multiple===!0?"multiple":void 0,capture:m.capture,onMousedown:Be,onClick:v,onChange:Re})}function We(){return p.header!==void 0?p.header(ae):[I("div",{class:"q-uploader__header-content column"},[I("div",{class:"flex flex-center no-wrap q-gutter-xs"},[ie(t.queuedFiles.value.length!==0,"removeQueue",ce),ie(t.uploadedFiles.value.length!==0,"removeUploaded",j),t.isUploading.value===!0?I(Ce,{class:"q-uploader__spinner"}):null,I("div",{class:"col column justify-center"},[m.label!==void 0?I("div",{class:"q-uploader__title"},[m.label]):null,I("div",{class:"q-uploader__subtitle"},[_.value+" / "+r.value])]),ie(P.value,"add"),ie(m.hideUploadBtn===!1&&s.value===!0,"upload",t.upload),ie(t.isUploading.value,"clear",t.abort)])])]}function Xe(){return p.list!==void 0?p.list(ae):t.files.value.map(d=>I("div",{key:d.__key,class:"q-uploader__file relative-position"+(m.noThumbnails!==!0&&d.__img!==void 0?" q-uploader__file--img":"")+(d.__status==="failed"?" q-uploader__file--failed":d.__status==="uploaded"?" q-uploader__file--uploaded":""),style:m.noThumbnails!==!0&&d.__img!==void 0?{backgroundImage:'url("'+d.__img.src+'")'}:null},[I("div",{class:"q-uploader__file-header row flex-center no-wrap"},[d.__status==="failed"?I(we,{class:"q-uploader__file-status",name:y.iconSet.type.negative,color:"negative"}):null,I("div",{class:"q-uploader__file-header-content col"},[I("div",{class:"q-uploader__title"},[d.name]),I("div",{class:"q-uploader__subtitle row items-center no-wrap"},[d.__sizeLabel+" / "+d.__progressLabel])]),d.__status==="uploading"?I(el,{value:d.__progress,min:0,max:1,indeterminate:d.__progress===0}):I($,{round:!0,dense:!0,flat:!0,icon:y.iconSet.uploader[d.__status==="uploaded"?"done":"clear"],onClick:()=>{he(d)}})])]))}ut(()=>{t.isUploading.value===!0&&t.abort(),t.files.value.length!==0&&ke()});const ae={};for(const d in t)dt(t[d])===!0?ct(ae,d,()=>t[d].value):ae[d]=t[d];return Object.assign(ae,{upload:Ie,reset:le,removeUploadedFiles:j,removeQueuedFiles:ce,removeFile:he,pickFiles:v,addFiles:w}),vt(ae,{canAddFiles:()=>P.value,canUpload:()=>s.value,uploadSizeLabel:()=>_.value,uploadProgressLabel:()=>r.value}),T({...t,upload:Ie,reset:le,removeUploadedFiles:j,removeQueuedFiles:ce,removeFile:he,pickFiles:v,addFiles:w,canAddFiles:P,canUpload:s,uploadSizeLabel:_,uploadProgressLabel:r}),()=>{const d=[I("div",{class:Q.value},We()),I("div",{class:"q-uploader__list scroll"},Xe()),u("uploader")];t.isBusy.value===!0&&d.push(I("div",{class:"q-uploader__overlay absolute-full flex flex-center"},[I(Ce)]));const N={ref:D,class:z.value};return P.value===!0&&Object.assign(N,{onDragover:n,onDragleave:a}),I("div",N,d)}}const il=Dt(Ge);var sl=({name:e,props:T,emits:f,injectPlugin:m})=>De({name:e,props:{...ol,...T},emits:mt(f)===!0?{...il,...f}:[...Ge,...f],setup(p,{expose:b}){return nl(m,b)}});function X(e){return typeof e=="function"?e:()=>e}const rl="QUploader",ul={url:[Function,String],method:{type:[Function,String],default:"POST"},fieldName:{type:[Function,String],default:()=>e=>e.name},headers:[Function,Array],formFields:[Function,Array],withCredentials:[Function,Boolean],sendRaw:[Function,Boolean],batch:[Function,Boolean],factory:Function},dl=["factoryFailed","uploaded","failed","uploading"];function cl({props:e,emit:T,helpers:f}){const m=M([]),p=M([]),b=M(0),i=q(()=>({url:X(e.url),method:X(e.method),headers:X(e.headers),formFields:X(e.formFields),fieldName:X(e.fieldName),withCredentials:X(e.withCredentials),sendRaw:X(e.sendRaw),batch:X(e.batch)})),y=q(()=>b.value>0),U=q(()=>p.value.length!==0);let F;function g(){m.value.forEach(t=>{t.abort()}),p.value.length!==0&&(F=!0)}function S(){const t=f.queuedFiles.value.slice(0);f.queuedFiles.value=[],i.value.batch(t)?D(t):t.forEach(v=>{D([v])})}function D(t){if(b.value++,typeof e.factory!="function"){C(t,{});return}const v=e.factory(t);if(!v)T("factoryFailed",new Error("QUploader: factory() does not return properly"),t),b.value--;else if(typeof v.catch=="function"&&typeof v.then=="function"){p.value.push(v);const w=n=>{f.isAlive()===!0&&(p.value=p.value.filter(a=>a!==v),p.value.length===0&&(F=!1),f.queuedFiles.value=f.queuedFiles.value.concat(t),t.forEach(a=>{f.updateFileStatus(a,"failed")}),T("factoryFailed",n,t),b.value--)};v.then(n=>{F===!0?w(new Error("Aborted")):f.isAlive()===!0&&(p.value=p.value.filter(a=>a!==v),C(t,n))}).catch(w)}else C(t,v||{})}function C(t,v){const w=new FormData,n=new XMLHttpRequest,a=(s,z)=>v[s]!==void 0?X(v[s])(z):i.value[s](z),c=a("url",t);if(!c){console.error("q-uploader: invalid or no URL specified"),b.value--;return}const u=a("formFields",t);u!==void 0&&u.forEach(s=>{w.append(s.name,s.value)});let L=0,R=0,V=0,k=0,r;n.upload.addEventListener("progress",s=>{if(r===!0)return;const z=Math.min(k,s.loaded);f.uploadedSize.value+=z-V,V=z;let Q=V-R;for(let le=L;Q>0&&le<t.length;le++){const j=t[le];if(Q>j.size)Q-=j.size,L++,R+=j.size,f.updateFileStatus(j,"uploading",j.size);else{f.updateFileStatus(j,"uploading",Q);return}}},!1),n.onreadystatechange=()=>{n.readyState<4||(n.status&&n.status<400?(f.uploadedFiles.value=f.uploadedFiles.value.concat(t),t.forEach(s=>{f.updateFileStatus(s,"uploaded")}),T("uploaded",{files:t,xhr:n})):(r=!0,f.uploadedSize.value-=V,f.queuedFiles.value=f.queuedFiles.value.concat(t),t.forEach(s=>{f.updateFileStatus(s,"failed")}),T("failed",{files:t,xhr:n})),b.value--,m.value=m.value.filter(s=>s!==n))},n.open(a("method",t),c),a("withCredentials",t)===!0&&(n.withCredentials=!0);const _=a("headers",t);_!==void 0&&_.forEach(s=>{n.setRequestHeader(s.name,s.value)});const P=a("sendRaw",t);t.forEach(s=>{f.updateFileStatus(s,"uploading",0),P!==!0&&w.append(a("fieldName",s),s,s.name),s.xhr=n,s.__abort=()=>{n.abort()},k+=s.size}),T("uploading",{files:t,xhr:n}),m.value.push(n),P===!0?n.send(new Blob(t)):n.send(w)}return{isUploading:y,isBusy:U,abort:g,upload:S}}var vl={name:rl,props:ul,emits:dl,injectPlugin:cl},ml=sl(vl);const fl={class:"bg-white"},_l={class:"row",style:{"min-height":"50vh","max-width":"80vh"}},gl={class:"col"},pl=h("div",{class:"text-h6"},"Preview Photo",-1),Sl={__name:"uploadPhoto",props:{photo:String},emits:[...re.emits],setup(e){const T=de(),f=M(""),m=e;ue(()=>{m.photo!==""&&(f.value=m.photo)});const p=()=>{T.dialog({title:"Confirmation",message:"Do you want to remove this photo ?",cancel:!0,persistent:!0}).onOk(async()=>{F("")})},b=async S=>{const D=await i(S[0]);D&&(console.log(D),F(D))};function i(S){var D=new FileReader;return S&&D.readAsDataURL(S),new Promise((C,t)=>{D.onload=function(v){C(v.target.result)}})}const{dialogRef:y,onDialogHide:U,onDialogOK:F,onDialogCancel:g}=re();return(S,D)=>(O(),x(pe,{ref_key:"dialogRef",ref:y,onHide:te(U)},{default:o(()=>[h("div",fl,[h("div",_l,[h("div",gl,[f.value?(O(),x(_e,{key:0},{default:o(()=>[l(J,null,{default:o(()=>[pl]),_:1}),l(Ye),l(J,null,{default:o(()=>[l(Xt,{src:f.value,style:{width:"80vh"}},null,8,["src"])]),_:1}),l(ge,{vertical:""},{default:o(()=>[l($,{flat:"",onClick:D[0]||(D[0]=C=>p())},{default:o(()=>[A("Change Photo")]),_:1})]),_:1})]),_:1})):(O(),x(ml,{key:1,class:"full-height",url:C=>b(C),label:"Upload Photo",color:"amber","text-color":"black",accept:"image/*",style:{"min-width":"500px"},"max-files":1,"auto-upload":"","send-raw":""},null,8,["url"]))])])])]),_:1},8,["onHide"]))}},hl=h("div",{class:"text-h6"},"Create Order",-1),Cl={style:{border:"1px black solid","border-radius":"10px"}},bl=h("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[h("b",null,"Header")],-1),yl={class:"row"},Tl={class:"col"},Dl={class:"col q-pl-md"},wl={class:"row items-center justify-end"},Ml={class:"row"},kl={class:"col"},Vl={class:"row q-py-md"},Rl={class:"col"},Il=h("legend",{style:{"margin-left":"1em",padding:"0.2em 0.8em"}},[h("b",null,"Detail Items")],-1),Ul={key:0,class:"row q-pb-sm"},Fl={class:"col text-right"},Ee={__name:"serviceCreateOrder",props:{header:Array,detail:Array,mode:String},setup(e){const{dialogRef:T,onDialogHide:f,onDialogOK:m,onDialogCancel:p}=re(),b=de(),i=e;ue(async()=>{i.header&&(await v(),await w(),y.value=i.header,g.value=i.detail,D.value=parseInt(i.header.SRVH_ISINT))});const y=M({SRVH_DOCNO:"",SRVH_ISSDT:fe.formatDate(Date.now(),"YYYY-MM-DD"),SRVH_CUSCD:""}),U=M([]),F=M([]),g=M([]),S=M(!1),D=M(0),C=M(0),t=(k,r,_,P)=>{r(async()=>{P==="cust"&&(D.value==1?await v("connect_jos","MCUS_CGCON"):await v(k)),P==="item"&&await w(k)})},v=async(k,r="MCUS_CUSNM")=>{S.value=!0,await G.post("customer/searchAPI",{searchValue:k,searchCol:r}).then(_=>{S.value=!1,F.value=_.data.data}).catch(()=>{S.value=!1})},w=async k=>{S.value=!0,await G.post("item/searchAPI",{searchValue:k}).then(r=>{S.value=!1,U.value=r.data.data}).catch(()=>{S.value=!1})},n=()=>{g.value.push({TSRVD_ITMCD:"",TSRVD_LINE:g.value.length+1,TSRVD_QTY:1,TSRVD_CUSTRMK:"",TSRVD_PHOTO:""})},a=k=>{b.dialog({title:"Confirmation",message:`Do you want to delete this lines no ${k+1} ?`,cancel:!0,persistent:!0}).onOk(async()=>{g.value.splice(k,1)}).catch(r=>{b.notify({color:"red",message:"Something's wrong."})})},c=k=>{b.dialog({component:xt,componentProps:{ItemCat:"SERVICE_ITEM",ItemType:3}}).onOk(async r=>{await w(""),g.value[k].TSRVD_ITMCD=r.MITM_ITMNM})},u=()=>{b.dialog({title:"Confirmation",message:"Do you want to submit this data ?",cancel:!0,persistent:!0}).onOk(async()=>{S.value=!0,await G.post("servicesAdmin",{header:{...y.value,SRVH_ISINT:D.value},detail:g.value}).then(k=>{S.value=!1,m()})})},L=()=>{b.dialog({component:jt}).onOk(async k=>{console.log(k),await v(""),g.value[idx].SRVH_CUSCD=k.MCUS_CUSCD})},R=k=>{b.dialog({component:Sl,componentProps:{photo:g.value[k].TSRVD_PHOTO}}).onOk(async r=>{console.log(r),r?g.value[k].TSRVD_PHOTO=r:g.value[k].TSRVD_PHOTO="",C.value=C.value+1,console.log(g.value[k])})},V=async k=>{k==1&&await v("connect_jos","MCUS_CGCON")};return(k,r)=>(O(),x(pe,{ref_key:"dialogRef",ref:T,onHide:te(f),"transition-show":"slide-up","transition-hide":"slide-down","full-width":"",persistent:""},{default:o(()=>[l(_e,{class:"q-dialog-plugin bg-white q-pa-sm"},{default:o(()=>[l(J,null,{default:o(()=>[hl]),_:1}),l(J,{class:"q-pa-sm"},{default:o(()=>[h("fieldset",Cl,[bl,h("div",yl,[h("div",Tl,[l(B,{label:"SPK No",readonly:"",dense:"",modelValue:y.value.SRVH_DOCNO,"onUpdate:modelValue":r[0]||(r[0]=_=>y.value.SRVH_DOCNO=_),filled:""},null,8,["modelValue"])]),h("div",Dl,[l(B,{filled:"",modelValue:y.value.SRVH_ISSDT,"onUpdate:modelValue":r[2]||(r[2]=_=>y.value.SRVH_ISSDT=_),dense:"",label:"Issue Date",loading:S.value,onClick:r[3]||(r[3]=_=>k.quotationIssueDate.qDateProxy.show()),mask:"####-##-##","fill-mask":"",hint:"Mask: YYYY-MM-DD",readonly:i.mode==="view"},{append:o(()=>[l(we,{name:"event",class:"cursor-pointer",disable:i.mode==="view"},{default:o(()=>[l(bt,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:o(()=>[l(yt,{modelValue:y.value.SRVH_ISSDT,"onUpdate:modelValue":r[1]||(r[1]=_=>y.value.SRVH_ISSDT=_),mask:"YYYY-MM-DD"},{default:o(()=>[h("div",wl,[qe(l($,{label:"Close",color:"primary",flat:""},null,512),[[Tt]])])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["disable"])]),_:1},8,["modelValue","loading","readonly"])])]),h("div",Ml,[h("div",kl,[l(se,{dense:"",filled:"",label:"Customer Choose",modelValue:y.value.SRVH_CUSCD,"onUpdate:modelValue":r[5]||(r[5]=_=>y.value.SRVH_CUSCD=_),"use-input":"","input-debounce":"500",options:F.value,onFilter:r[6]||(r[6]=(_,P,s)=>t(_,P,s,"cust")),behavior:"dialog","option-label":"MCUS_CUSNM","option-value":"MCUS_CUSCD","emit-value":"","map-options":"",loading:S.value,readonly:i.mode==="view"},{after:o(()=>[l($,{round:"",dense:"",flat:"",icon:"person_add",onClick:r[4]||(r[4]=_=>L()),color:"cyan"},{default:o(()=>[l(Y,null,{default:o(()=>[A("Add new customer")]),_:1})]),_:1})]),_:1},8,["modelValue","options","loading","readonly"])])])]),h("div",Vl,[h("div",Rl,[l(ft,{modelValue:D.value,"onUpdate:modelValue":[r[7]||(r[7]=_=>D.value=_),r[8]||(r[8]=_=>V(_))],label:"Internal Service ?",color:"teal","true-value":1,"false-value":0,disable:S.value},null,8,["modelValue","disable"])])]),(O(),ee("fieldset",{style:{border:"1px black solid","border-radius":"10px",height:"35vh",overflow:"auto"},key:C.value},[Il,i.mode!=="view"?(O(),ee("div",Ul,[h("div",Fl,[l($,{flat:"",icon:"add",color:"blue",onClick:r[9]||(r[9]=_=>n())},{default:o(()=>[l(Y,null,{default:o(()=>[A("Add lines")]),_:1})]),_:1})])])):K("",!0),l(St,{bordered:"",dense:""},{default:o(()=>[g.value.length>0?(O(!0),ee(be,{key:0},ye(g.value,(_,P)=>(O(),x(Ne,{key:P,class:"q-my-sm",dense:""},{default:o(()=>[l(Z,{avatar:""},{default:o(()=>[l(_t,{"text-color":"blue"},{default:o(()=>[A(ne(P+1),1)]),_:2},1024)]),_:2},1024),l(Z,null,{default:o(()=>[l(Pe,{class:"text-center"},{default:o(()=>[D.value==1?(O(),x(se,{key:0,dense:"",filled:"",label:"Item Name",modelValue:_.TSRVD_ITMCD,"onUpdate:modelValue":s=>_.TSRVD_ITMCD=s,"use-input":"","input-debounce":"500",options:U.value,onFilter:r[10]||(r[10]=(s,z,Q)=>t(s,z,Q,"item")),behavior:"dialog","option-label":"MITM_ITMNM","option-value":"MITM_ITMNM","emit-value":"","map-options":"",loading:S.value},null,8,["modelValue","onUpdate:modelValue","options","loading"])):(O(),x($,{key:1,icon:"library_add",color:"indigo",outline:"",onClick:s=>c(P),dense:"",label:"Input Item"},{default:o(()=>[l(Y,null,{default:o(()=>[A("Add new item")]),_:1})]),_:2},1032,["onClick"]))]),_:2},1024)]),_:2},1024),l(Z,null,{default:o(()=>[l(B,{label:"Qty",filled:"",dense:"",modelValue:_.TSRVD_QTY,"onUpdate:modelValue":s=>_.TSRVD_QTY=s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(Z,null,{default:o(()=>[l(B,{label:"Problem",filled:"",dense:"",modelValue:_.TSRVD_CUSTRMK,"onUpdate:modelValue":s=>_.TSRVD_CUSTRMK=s},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),i.mode!=="view"?(O(),x(Z,{key:0,side:""},{default:o(()=>[l($,{icon:"delete",color:"red",flat:"",onClick:s=>a(P),dense:""},{default:o(()=>[l(Y,null,{default:o(()=>[A("Delete line")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)):K("",!0),i.mode!=="view"&&D.value==1?(O(),x(Z,{key:1,side:""},{default:o(()=>[l($,{icon:"library_add",color:"indigo",flat:"",onClick:s=>c(P),dense:""},{default:o(()=>[l(Y,null,{default:o(()=>[A("Add new item")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)):K("",!0),i.mode!=="view"?(O(),x(Z,{key:2,side:""},{default:o(()=>[l($,{icon:"photo",color:_.TSRVD_PHOTO!=""?"blue":"orange",flat:"",onClick:s=>R(P),dense:""},{default:o(()=>[l(Y,null,{default:o(()=>[A("Add photo")]),_:1})]),_:2},1032,["color","onClick"])]),_:2},1024)):K("",!0)]),_:2},1024))),128)):qe((O(),x(Ne,{key:1,class:"q-my-sm",clickable:""},{default:o(()=>[l(Z,null,{default:o(()=>[l(Pe,null,{default:o(()=>[A(" No Items Added ")]),_:1})]),_:1})]),_:1})),[[gt]])]),_:1})]))]),_:1}),l(ge,{align:"right"},{default:o(()=>[l($,{label:"OK",color:"primary",onClick:r[11]||(r[11]=_=>u()),disable:S.value,loading:S.value},null,8,["disable","loading"]),l($,{flat:"",label:"Cancel",color:"red",onClick:te(p),loading:S.value},null,8,["onClick","loading"])]),_:1})]),_:1})]),_:1},8,["onHide"]))}};const Ol={class:"q-pa-md"},ql={class:"row q-pb-md"},Nl=h("div",{class:"col"},[h("span",{class:"text-h4"},"Receive Order ")],-1),Pl={class:"col text-right"},$l={class:"row q-pt-md"},xl={class:"col"},Al={key:1},ta={__name:"serviceView",setup(e){const T=de(),f=M("SRVH_DOCNO"),m=M(""),p=M([]),b=M([{name:"SRVH_DOCNO",label:"SPK No",field:"SRVH_DOCNO",sortable:!0,align:"left"},{name:"MCUS_CUSNM",label:"Cust",field:"MCUS_CUSNM",sortable:!0,align:"left"},{name:"STAT",label:"Status",field:n=>w(n),sortable:!0,align:"left"},{name:"created_at",label:"Created Date",field:"created_at",sortable:!0,align:"left",format:n=>fe.formatDate(new Date(n),"DD MMM YYYY")}]),i=M(!1),y=M(null);ue(()=>{U(),y.value=setInterval(()=>{U()},1e4)});const U=async()=>{i.value=!0,await G.post("servicesAdmins/search",{searchBy:f.value,searchValue:m.value}).then(n=>{i.value=!1,p.value=n.data.data}).catch(n=>{i.value=!1})},F=()=>{T.dialog({component:Ee}).onOk(async n=>{U()})},g=n=>{const a={SRVH_DOCNO:n.SRVH_DOCNO,SRVH_ISSDT:fe.formatDate(n.SRVH_ISSDT,"YYYY-MM-DD"),SRVH_CUSCD:n.MCUS_CUSCD};let c=[];n.detail.map(u=>{c.push({id:u.id,TSRVD_ITMCD:u.TSRVD_ITMCD,TSRVD_LINE:u.TSRVD_LINE,TSRVD_QTY:u.TSRVD_QTY,TSRVD_CUSTRMK:u.TSRVD_CUSTRMK,TSRVD_REMARK:u.TSRVD_REMARK,TSRVD_FLGSTS:u.TSRVD_FLGSTS,listFixDet:u.list_fix_det})}),T.dialog({component:wt,componentProps:{header:a,detail:c,mode:n.detail.filter(u=>u.TSRVD_FLGSTS===1).length===n.detail.length?"approvecust":"view"}}).onOk(async u=>{U()})},S=n=>{window.open("https://joss.jatpowerindo.co.id/servicesAdmins/printInvoice/"+btoa(n),"_blank").focus()},D=n=>{window.open("https://joss.jatpowerindo.co.id/servicesAdmins/printPartRequest/"+btoa(n),"_blank").focus()},C=n=>{const a={SRVH_DOCNO:n.SRVH_DOCNO,SRVH_ISSDT:fe.formatDate(n.SRVH_ISSDT,"YYYY-MM-DD"),SRVH_CUSCD:n.MCUS_CUSCD};let c=[];n.detail.map(u=>{c.push({TSRVD_ITMCD:u.TSRVD_ITMCD,TSRVD_LINE:u.TSRVD_LINE,TSRVD_QTY:u.TSRVD_QTY,TSRVD_CUSTRMK:u.TSRVD_CUSTRMK})}),T.dialog({component:Ee,componentProps:{header:a,detail:c}}).onOk(async u=>{U()})},t=n=>{T.dialog({title:"Confirmation",message:"Do you want to proceed to service ?",cancel:!0,persistent:!0}).onOk(async()=>{i.value=!0,await G.put(`servicesAdmins/updateDetByIDHead/${btoa(n.id)}`,{TSRVD_FLGSTS:2}).then(a=>{i.value=!1}).catch(a=>{i.value=!1})})},v=n=>{T.dialog({title:"Confirmation",message:"Are you sure want to delete this order ?",cancel:!0,persistent:!0}).onOk(async()=>{i.value=!0,await G.delete(`servicesAdmin/${btoa(n.SRVH_DOCNO)}`).then(a=>{i.value=!1}).catch(a=>{i.value=!1})})},w=n=>{const a=n.detail.filter(V=>V.TSRVD_FLGSTS==0),c=n.detail.filter(V=>V.TSRVD_FLGSTS==1),u=n.detail.filter(V=>V.TSRVD_FLGSTS==2),L=n.detail.filter(V=>V.TSRVD_FLGSTS==3),R=n.detail.filter(V=>V.TSRVD_FLGSTS==5);if(a.length==n.detail.length)return{color:"red",label:"No Price Added yet !",icon:"edit"};if(c.length>0&&c.length<n.detail.length)return{color:"warning",label:"Please Add item & price",icon:"payments"};if(R.length>0&&R.length==n.detail.length)return{color:"indigo",label:"Added Price Done, Waiting Manager Confirmation",icon:"price_check"};if(c.length>0&&c.length==n.detail.length)return{color:"green",label:"Manager has been approve, Waiting Cust. Confirmation",icon:"price_check"};if(u.length>0&&u.length>=n.detail.length)return{color:"cyan",label:"Cust. has been approved, continue to fix.",icon:"engineering"};if(L.length>0&&L.length===n.detail.length)return{color:"primary",label:"Fix has been done",icon:"fact_check"}};return(n,a)=>(O(),ee("div",Ol,[h("div",ql,[Nl,h("div",Pl,[l($,{icon:"add",color:"blue",onClick:F},{default:o(()=>[l(Y,null,{default:o(()=>[A("Create New Order")]),_:1})]),_:1})])]),l(Ye),h("div",$l,[h("div",xl,[l(ht,{title:"Created Order",rows:p.value,columns:b.value,"row-key":"name",loading:i.value,dense:"",pagination:{rowsPerPage:20},class:"my-sticky-header-column-table"},{"top-right":o(()=>[l(se,{outlined:"",modelValue:f.value,"onUpdate:modelValue":a[0]||(a[0]=c=>f.value=c),options:b.value,label:"Search Columns","option-value":"name","option-label":"label","emit-value":"",dense:"","map-options":""},null,8,["modelValue","options"]),l(B,{borderless:"",dense:"",modelValue:m.value,"onUpdate:modelValue":[a[1]||(a[1]=c=>m.value=c),a[2]||(a[2]=c=>n.dataQuo())],placeholder:"Search",outlined:"",debounce:"1000"},{append:o(()=>[l(we,{name:"search"})]),_:1},8,["modelValue"])]),header:o(c=>[l(xe,{props:c},{default:o(()=>[(O(!0),ee(be,null,ye(c.cols,u=>(O(),x($e,{key:u.name,props:c},{default:o(()=>[A(ne(u.label),1)]),_:2},1032,["props"]))),128)),l($e,{"auto-width":""},{default:o(()=>[A("Action")]),_:1})]),_:2},1032,["props"])]),body:o(c=>[l(xe,{props:c},{default:o(()=>[(O(!0),ee(be,null,ye(c.cols,u=>(O(),x(Ae,{key:u.name,props:c},{default:o(()=>[u.name==="STAT"?(O(),x(pt,{key:0,clickable:"",color:u.value.color,"text-color":"white",icon:u.value.icon},{default:o(()=>[A(ne(u.value.label),1)]),_:2},1032,["color","icon"])):(O(),ee("span",Al,ne(u.value),1))]),_:2},1032,["props"]))),128)),l(Ae,{"auto-width":""},{default:o(()=>[c.row.detail.filter(u=>u.TSRVD_FLGSTS>0).length===0?(O(),x($,{key:0,flat:"",color:"orange",icon:"edit",onClick:u=>C(c.row),dense:""},{default:o(()=>[l(Y,null,{default:o(()=>[A("Edit this Order")]),_:1})]),_:2},1032,["onClick"])):K("",!0),c.row.detail.filter(u=>u.TSRVD_FLGSTS>0).length===c.row.detail.length?(O(),x($,{key:1,flat:"",color:"indigo",icon:"print",onClick:u=>S(c.row.SRVH_DOCNO),dense:""},{default:o(()=>[l(Y,null,{default:o(()=>[A("Print Estimation Price")]),_:1})]),_:2},1032,["onClick"])):K("",!0),c.row.detail.filter(u=>u.TSRVD_FLGSTS>0).length===c.row.detail.length?(O(),x($,{key:2,flat:"",color:"orange",icon:"print",onClick:u=>D(c.row.SRVH_DOCNO),dense:""},{default:o(()=>[l(Y,null,{default:o(()=>[A("Print Part Request")]),_:1})]),_:2},1032,["onClick"])):K("",!0),c.row.detail.filter(u=>u.TSRVD_FLGSTS>0).length===0?(O(),x($,{key:3,flat:"",color:"red",icon:"delete",onClick:u=>v(c.row.SRVH_DOCNO),dense:""},{default:o(()=>[l(Y,null,{default:o(()=>[A(ne(c.row.detail.filter(u=>u.TSRVD_FLGSTS>0).length>0?"Cannot delete processed order":"Delete this Order"),1)]),_:2},1024)]),_:2},1032,["onClick"])):K("",!0),c.row.detail.filter(u=>u.TSRVD_FLGSTS>0).length>0?(O(),x($,{key:4,flat:"",color:"cyan",icon:"visibility",onClick:u=>g(c.row),dense:""},{default:o(()=>[l(Y,null,{default:o(()=>[A("View this Order")]),_:1})]),_:2},1032,["onClick"])):K("",!0),c.row.detail.filter(u=>u.TSRVD_FLGSTS==1).length===c.row.detail.length?(O(),x($,{key:5,flat:"",color:"indigo",icon:"check",onClick:u=>t(c.row),dense:""},{default:o(()=>[l(Y,null,{default:o(()=>[A(ne(c.row.detail.filter(u=>u.TSRVD_FLGSTS>0).length!==c.row.detail.length?"Please wait until all item checked":"Proceed all item to service"),1)]),_:2},1024)]),_:2},1032,["onClick"])):K("",!0)]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"])])])]))}};export{ta as default};
